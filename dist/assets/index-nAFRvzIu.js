(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Bm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function m3(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function g3(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Nw={exports:{}},Dp={},Aw={exports:{}},St={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nd=Symbol.for("react.element"),y3=Symbol.for("react.portal"),v3=Symbol.for("react.fragment"),w3=Symbol.for("react.strict_mode"),_3=Symbol.for("react.profiler"),b3=Symbol.for("react.provider"),x3=Symbol.for("react.context"),S3=Symbol.for("react.forward_ref"),N3=Symbol.for("react.suspense"),A3=Symbol.for("react.memo"),E3=Symbol.for("react.lazy"),Ey=Symbol.iterator;function I3(t){return t===null||typeof t!="object"?null:(t=Ey&&t[Ey]||t["@@iterator"],typeof t=="function"?t:null)}var Ew={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Iw=Object.assign,Tw={};function hc(t,e,n){this.props=t,this.context=e,this.refs=Tw,this.updater=n||Ew}hc.prototype.isReactComponent={};hc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};hc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Pw(){}Pw.prototype=hc.prototype;function a1(t,e,n){this.props=t,this.context=e,this.refs=Tw,this.updater=n||Ew}var l1=a1.prototype=new Pw;l1.constructor=a1;Iw(l1,hc.prototype);l1.isPureReactComponent=!0;var Iy=Array.isArray,Cw=Object.prototype.hasOwnProperty,u1={current:null},kw={key:!0,ref:!0,__self:!0,__source:!0};function Lw(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Cw.call(e,r)&&!kw.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),h=0;h<a;h++)l[h]=arguments[h+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:nd,type:t,key:s,ref:o,props:i,_owner:u1.current}}function T3(t,e){return{$$typeof:nd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function c1(t){return typeof t=="object"&&t!==null&&t.$$typeof===nd}function P3(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ty=/\/+/g;function Um(t,e){return typeof t=="object"&&t!==null&&t.key!=null?P3(""+t.key):e.toString(36)}function xf(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case nd:case y3:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Um(o,0):r,Iy(i)?(n="",t!=null&&(n=t.replace(Ty,"$&/")+"/"),xf(i,e,n,"",function(h){return h})):i!=null&&(c1(i)&&(i=T3(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Ty,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Iy(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Um(s,a);o+=xf(s,e,n,l,i)}else if(l=I3(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Um(s,a++),o+=xf(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Kd(t,e,n){if(t==null)return t;var r=[],i=0;return xf(t,r,"","",function(s){return e.call(n,s,i++)}),r}function C3(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Fr={current:null},Sf={transition:null},k3={ReactCurrentDispatcher:Fr,ReactCurrentBatchConfig:Sf,ReactCurrentOwner:u1};function Rw(){throw Error("act(...) is not supported in production builds of React.")}St.Children={map:Kd,forEach:function(t,e,n){Kd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Kd(t,function(){e++}),e},toArray:function(t){return Kd(t,function(e){return e})||[]},only:function(t){if(!c1(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};St.Component=hc;St.Fragment=v3;St.Profiler=_3;St.PureComponent=a1;St.StrictMode=w3;St.Suspense=N3;St.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k3;St.act=Rw;St.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Iw({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=u1.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Cw.call(e,l)&&!kw.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var h=0;h<l;h++)a[h]=arguments[h+2];r.children=a}return{$$typeof:nd,type:t.type,key:i,ref:s,props:r,_owner:o}};St.createContext=function(t){return t={$$typeof:x3,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:b3,_context:t},t.Consumer=t};St.createElement=Lw;St.createFactory=function(t){var e=Lw.bind(null,t);return e.type=t,e};St.createRef=function(){return{current:null}};St.forwardRef=function(t){return{$$typeof:S3,render:t}};St.isValidElement=c1;St.lazy=function(t){return{$$typeof:E3,_payload:{_status:-1,_result:t},_init:C3}};St.memo=function(t,e){return{$$typeof:A3,type:t,compare:e===void 0?null:e}};St.startTransition=function(t){var e=Sf.transition;Sf.transition={};try{t()}finally{Sf.transition=e}};St.unstable_act=Rw;St.useCallback=function(t,e){return Fr.current.useCallback(t,e)};St.useContext=function(t){return Fr.current.useContext(t)};St.useDebugValue=function(){};St.useDeferredValue=function(t){return Fr.current.useDeferredValue(t)};St.useEffect=function(t,e){return Fr.current.useEffect(t,e)};St.useId=function(){return Fr.current.useId()};St.useImperativeHandle=function(t,e,n){return Fr.current.useImperativeHandle(t,e,n)};St.useInsertionEffect=function(t,e){return Fr.current.useInsertionEffect(t,e)};St.useLayoutEffect=function(t,e){return Fr.current.useLayoutEffect(t,e)};St.useMemo=function(t,e){return Fr.current.useMemo(t,e)};St.useReducer=function(t,e,n){return Fr.current.useReducer(t,e,n)};St.useRef=function(t){return Fr.current.useRef(t)};St.useState=function(t){return Fr.current.useState(t)};St.useSyncExternalStore=function(t,e,n){return Fr.current.useSyncExternalStore(t,e,n)};St.useTransition=function(){return Fr.current.useTransition()};St.version="18.3.1";Aw.exports=St;var Ue=Aw.exports;const Dw=m3(Ue);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L3=Ue,R3=Symbol.for("react.element"),D3=Symbol.for("react.fragment"),j3=Object.prototype.hasOwnProperty,F3=L3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,O3={key:!0,ref:!0,__self:!0,__source:!0};function jw(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)j3.call(e,r)&&!O3.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:R3,type:t,key:s,ref:o,props:i,_owner:F3.current}}Dp.Fragment=D3;Dp.jsx=jw;Dp.jsxs=jw;Nw.exports=Dp;var m=Nw.exports,Fw={exports:{}},pi={},Ow={exports:{}},Mw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Q,X){var se=Q.length;Q.push(X);e:for(;0<se;){var ge=se-1>>>1,O=Q[ge];if(0<i(O,X))Q[ge]=X,Q[se]=O,se=ge;else break e}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var X=Q[0],se=Q.pop();if(se!==X){Q[0]=se;e:for(var ge=0,O=Q.length,M=O>>>1;ge<M;){var z=2*(ge+1)-1,Y=Q[z],te=z+1,oe=Q[te];if(0>i(Y,se))te<O&&0>i(oe,Y)?(Q[ge]=oe,Q[te]=se,ge=te):(Q[ge]=Y,Q[z]=se,ge=z);else if(te<O&&0>i(oe,se))Q[ge]=oe,Q[te]=se,ge=te;else break e}}return X}function i(Q,X){var se=Q.sortIndex-X.sortIndex;return se!==0?se:Q.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],h=[],p=1,g=null,v=3,f=!1,E=!1,k=!1,P=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(Q){for(var X=n(h);X!==null;){if(X.callback===null)r(h);else if(X.startTime<=Q)r(h),X.sortIndex=X.expirationTime,e(l,X);else break;X=n(h)}}function L(Q){if(k=!1,T(Q),!E)if(n(l)!==null)E=!0,Z(V);else{var X=n(h);X!==null&&ee(L,X.startTime-Q)}}function V(Q,X){E=!1,k&&(k=!1,w(x),x=-1),f=!0;var se=v;try{for(T(X),g=n(l);g!==null&&(!(g.expirationTime>X)||Q&&!N());){var ge=g.callback;if(typeof ge=="function"){g.callback=null,v=g.priorityLevel;var O=ge(g.expirationTime<=X);X=t.unstable_now(),typeof O=="function"?g.callback=O:g===n(l)&&r(l),T(X)}else r(l);g=n(l)}if(g!==null)var M=!0;else{var z=n(h);z!==null&&ee(L,z.startTime-X),M=!1}return M}finally{g=null,v=se,f=!1}}var W=!1,I=null,x=-1,C=5,j=-1;function N(){return!(t.unstable_now()-j<C)}function A(){if(I!==null){var Q=t.unstable_now();j=Q;var X=!0;try{X=I(!0,Q)}finally{X?D():(W=!1,I=null)}}else W=!1}var D;if(typeof _=="function")D=function(){_(A)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ue=J.port2;J.port1.onmessage=A,D=function(){ue.postMessage(null)}}else D=function(){P(A,0)};function Z(Q){I=Q,W||(W=!0,D())}function ee(Q,X){x=P(function(){Q(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Q){Q.callback=null},t.unstable_continueExecution=function(){E||f||(E=!0,Z(V))},t.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<Q?Math.floor(1e3/Q):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(Q){switch(v){case 1:case 2:case 3:var X=3;break;default:X=v}var se=v;v=X;try{return Q()}finally{v=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Q,X){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var se=v;v=Q;try{return X()}finally{v=se}},t.unstable_scheduleCallback=function(Q,X,se){var ge=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?ge+se:ge):se=ge,Q){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=se+O,Q={id:p++,callback:X,priorityLevel:Q,startTime:se,expirationTime:O,sortIndex:-1},se>ge?(Q.sortIndex=se,e(h,Q),n(l)===null&&Q===n(h)&&(k?(w(x),x=-1):k=!0,ee(L,se-ge))):(Q.sortIndex=O,e(l,Q),E||f||(E=!0,Z(V))),Q},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(Q){var X=v;return function(){var se=v;v=X;try{return Q.apply(this,arguments)}finally{v=se}}}})(Mw);Ow.exports=Mw;var M3=Ow.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V3=Ue,fi=M3;function Fe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Vw=new Set,Ih={};function ql(t,e){Qu(t,e),Qu(t+"Capture",e)}function Qu(t,e){for(Ih[t]=e,t=0;t<e.length;t++)Vw.add(e[t])}var po=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dg=Object.prototype.hasOwnProperty,B3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Py={},Cy={};function U3(t){return Dg.call(Cy,t)?!0:Dg.call(Py,t)?!1:B3.test(t)?Cy[t]=!0:(Py[t]=!0,!1)}function z3(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function q3(t,e,n,r){if(e===null||typeof e>"u"||z3(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Or(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ar={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ar[t]=new Or(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ar[e]=new Or(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ar[t]=new Or(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ar[t]=new Or(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ar[t]=new Or(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ar[t]=new Or(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ar[t]=new Or(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ar[t]=new Or(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ar[t]=new Or(t,5,!1,t.toLowerCase(),null,!1,!1)});var h1=/[\-:]([a-z])/g;function d1(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(h1,d1);ar[e]=new Or(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(h1,d1);ar[e]=new Or(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(h1,d1);ar[e]=new Or(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ar[t]=new Or(t,1,!1,t.toLowerCase(),null,!1,!1)});ar.xlinkHref=new Or("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ar[t]=new Or(t,1,!1,t.toLowerCase(),null,!0,!0)});function f1(t,e,n,r){var i=ar.hasOwnProperty(e)?ar[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(q3(e,n,i,r)&&(n=null),r||i===null?U3(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var xo=V3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qd=Symbol.for("react.element"),Eu=Symbol.for("react.portal"),Iu=Symbol.for("react.fragment"),p1=Symbol.for("react.strict_mode"),jg=Symbol.for("react.profiler"),Bw=Symbol.for("react.provider"),Uw=Symbol.for("react.context"),m1=Symbol.for("react.forward_ref"),Fg=Symbol.for("react.suspense"),Og=Symbol.for("react.suspense_list"),g1=Symbol.for("react.memo"),sa=Symbol.for("react.lazy"),zw=Symbol.for("react.offscreen"),ky=Symbol.iterator;function Vc(t){return t===null||typeof t!="object"?null:(t=ky&&t[ky]||t["@@iterator"],typeof t=="function"?t:null)}var dn=Object.assign,zm;function Xc(t){if(zm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);zm=e&&e[1]||""}return`
`+zm+t}var qm=!1;function Hm(t,e){if(!t||qm)return"";qm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{qm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Xc(t):""}function H3(t){switch(t.tag){case 5:return Xc(t.type);case 16:return Xc("Lazy");case 13:return Xc("Suspense");case 19:return Xc("SuspenseList");case 0:case 2:case 15:return t=Hm(t.type,!1),t;case 11:return t=Hm(t.type.render,!1),t;case 1:return t=Hm(t.type,!0),t;default:return""}}function Mg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Iu:return"Fragment";case Eu:return"Portal";case jg:return"Profiler";case p1:return"StrictMode";case Fg:return"Suspense";case Og:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Uw:return(t.displayName||"Context")+".Consumer";case Bw:return(t._context.displayName||"Context")+".Provider";case m1:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case g1:return e=t.displayName||null,e!==null?e:Mg(t.type)||"Memo";case sa:e=t._payload,t=t._init;try{return Mg(t(e))}catch{}}return null}function W3(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mg(e);case 8:return e===p1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function La(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function qw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $3(t){var e=qw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Yd(t){t._valueTracker||(t._valueTracker=$3(t))}function Hw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=qw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Hf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Vg(t,e){var n=e.checked;return dn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ly(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=La(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ww(t,e){e=e.checked,e!=null&&f1(t,"checked",e,!1)}function Bg(t,e){Ww(t,e);var n=La(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ug(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ug(t,e.type,La(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ry(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ug(t,e,n){(e!=="number"||Hf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Zc=Array.isArray;function Vu(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+La(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function zg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Fe(91));return dn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Dy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Fe(92));if(Zc(n)){if(1<n.length)throw Error(Fe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:La(n)}}function $w(t,e){var n=La(e.value),r=La(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function jy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Gw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Gw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Jd,Kw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Jd=Jd||document.createElement("div"),Jd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Jd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Th(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var lh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},G3=["Webkit","ms","Moz","O"];Object.keys(lh).forEach(function(t){G3.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),lh[e]=lh[t]})});function Qw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||lh.hasOwnProperty(t)&&lh[t]?(""+e).trim():e+"px"}function Yw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Qw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var K3=dn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hg(t,e){if(e){if(K3[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Fe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Fe(62))}}function Wg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $g=null;function y1(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gg=null,Bu=null,Uu=null;function Fy(t){if(t=sd(t)){if(typeof Gg!="function")throw Error(Fe(280));var e=t.stateNode;e&&(e=Vp(e),Gg(t.stateNode,t.type,e))}}function Jw(t){Bu?Uu?Uu.push(t):Uu=[t]:Bu=t}function Xw(){if(Bu){var t=Bu,e=Uu;if(Uu=Bu=null,Fy(t),e)for(t=0;t<e.length;t++)Fy(e[t])}}function Zw(t,e){return t(e)}function e_(){}var Wm=!1;function t_(t,e,n){if(Wm)return t(e,n);Wm=!0;try{return Zw(t,e,n)}finally{Wm=!1,(Bu!==null||Uu!==null)&&(e_(),Xw())}}function Ph(t,e){var n=t.stateNode;if(n===null)return null;var r=Vp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Fe(231,e,typeof n));return n}var Kg=!1;if(po)try{var Bc={};Object.defineProperty(Bc,"passive",{get:function(){Kg=!0}}),window.addEventListener("test",Bc,Bc),window.removeEventListener("test",Bc,Bc)}catch{Kg=!1}function Q3(t,e,n,r,i,s,o,a,l){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var uh=!1,Wf=null,$f=!1,Qg=null,Y3={onError:function(t){uh=!0,Wf=t}};function J3(t,e,n,r,i,s,o,a,l){uh=!1,Wf=null,Q3.apply(Y3,arguments)}function X3(t,e,n,r,i,s,o,a,l){if(J3.apply(this,arguments),uh){if(uh){var h=Wf;uh=!1,Wf=null}else throw Error(Fe(198));$f||($f=!0,Qg=h)}}function Hl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function n_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Oy(t){if(Hl(t)!==t)throw Error(Fe(188))}function Z3(t){var e=t.alternate;if(!e){if(e=Hl(t),e===null)throw Error(Fe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Oy(i),t;if(s===r)return Oy(i),e;s=s.sibling}throw Error(Fe(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Fe(189))}}if(n.alternate!==r)throw Error(Fe(190))}if(n.tag!==3)throw Error(Fe(188));return n.stateNode.current===n?t:e}function r_(t){return t=Z3(t),t!==null?i_(t):null}function i_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=i_(t);if(e!==null)return e;t=t.sibling}return null}var s_=fi.unstable_scheduleCallback,My=fi.unstable_cancelCallback,eN=fi.unstable_shouldYield,tN=fi.unstable_requestPaint,En=fi.unstable_now,nN=fi.unstable_getCurrentPriorityLevel,v1=fi.unstable_ImmediatePriority,o_=fi.unstable_UserBlockingPriority,Gf=fi.unstable_NormalPriority,rN=fi.unstable_LowPriority,a_=fi.unstable_IdlePriority,jp=null,Is=null;function iN(t){if(Is&&typeof Is.onCommitFiberRoot=="function")try{Is.onCommitFiberRoot(jp,t,void 0,(t.current.flags&128)===128)}catch{}}var Xi=Math.clz32?Math.clz32:aN,sN=Math.log,oN=Math.LN2;function aN(t){return t>>>=0,t===0?32:31-(sN(t)/oN|0)|0}var Xd=64,Zd=4194304;function eh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Kf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=eh(a):(s&=o,s!==0&&(r=eh(s)))}else o=n&~i,o!==0?r=eh(o):s!==0&&(r=eh(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Xi(e),i=1<<n,r|=t[n],e&=~i;return r}function lN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Xi(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=lN(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Yg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function l_(){var t=Xd;return Xd<<=1,!(Xd&4194240)&&(Xd=64),t}function $m(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function rd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Xi(e),t[e]=n}function cN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Xi(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function w1(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Xi(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ht=0;function u_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var c_,_1,h_,d_,f_,Jg=!1,ef=[],va=null,wa=null,_a=null,Ch=new Map,kh=new Map,aa=[],hN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vy(t,e){switch(t){case"focusin":case"focusout":va=null;break;case"dragenter":case"dragleave":wa=null;break;case"mouseover":case"mouseout":_a=null;break;case"pointerover":case"pointerout":Ch.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":kh.delete(e.pointerId)}}function Uc(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=sd(e),e!==null&&_1(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function dN(t,e,n,r,i){switch(e){case"focusin":return va=Uc(va,t,e,n,r,i),!0;case"dragenter":return wa=Uc(wa,t,e,n,r,i),!0;case"mouseover":return _a=Uc(_a,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ch.set(s,Uc(Ch.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,kh.set(s,Uc(kh.get(s)||null,t,e,n,r,i)),!0}return!1}function p_(t){var e=wl(t.target);if(e!==null){var n=Hl(e);if(n!==null){if(e=n.tag,e===13){if(e=n_(n),e!==null){t.blockedOn=e,f_(t.priority,function(){h_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Nf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);$g=r,n.target.dispatchEvent(r),$g=null}else return e=sd(n),e!==null&&_1(e),t.blockedOn=n,!1;e.shift()}return!0}function By(t,e,n){Nf(t)&&n.delete(e)}function fN(){Jg=!1,va!==null&&Nf(va)&&(va=null),wa!==null&&Nf(wa)&&(wa=null),_a!==null&&Nf(_a)&&(_a=null),Ch.forEach(By),kh.forEach(By)}function zc(t,e){t.blockedOn===e&&(t.blockedOn=null,Jg||(Jg=!0,fi.unstable_scheduleCallback(fi.unstable_NormalPriority,fN)))}function Lh(t){function e(i){return zc(i,t)}if(0<ef.length){zc(ef[0],t);for(var n=1;n<ef.length;n++){var r=ef[n];r.blockedOn===t&&(r.blockedOn=null)}}for(va!==null&&zc(va,t),wa!==null&&zc(wa,t),_a!==null&&zc(_a,t),Ch.forEach(e),kh.forEach(e),n=0;n<aa.length;n++)r=aa[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<aa.length&&(n=aa[0],n.blockedOn===null);)p_(n),n.blockedOn===null&&aa.shift()}var zu=xo.ReactCurrentBatchConfig,Qf=!0;function pN(t,e,n,r){var i=Ht,s=zu.transition;zu.transition=null;try{Ht=1,b1(t,e,n,r)}finally{Ht=i,zu.transition=s}}function mN(t,e,n,r){var i=Ht,s=zu.transition;zu.transition=null;try{Ht=4,b1(t,e,n,r)}finally{Ht=i,zu.transition=s}}function b1(t,e,n,r){if(Qf){var i=Xg(t,e,n,r);if(i===null)ng(t,e,r,Yf,n),Vy(t,r);else if(dN(i,t,e,n,r))r.stopPropagation();else if(Vy(t,r),e&4&&-1<hN.indexOf(t)){for(;i!==null;){var s=sd(i);if(s!==null&&c_(s),s=Xg(t,e,n,r),s===null&&ng(t,e,r,Yf,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else ng(t,e,r,null,n)}}var Yf=null;function Xg(t,e,n,r){if(Yf=null,t=y1(r),t=wl(t),t!==null)if(e=Hl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=n_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Yf=t,null}function m_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nN()){case v1:return 1;case o_:return 4;case Gf:case rN:return 16;case a_:return 536870912;default:return 16}default:return 16}}var pa=null,x1=null,Af=null;function g_(){if(Af)return Af;var t,e=x1,n=e.length,r,i="value"in pa?pa.value:pa.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Af=i.slice(t,1<r?1-r:void 0)}function Ef(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function tf(){return!0}function Uy(){return!1}function mi(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?tf:Uy,this.isPropagationStopped=Uy,this}return dn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=tf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=tf)},persist:function(){},isPersistent:tf}),e}var dc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},S1=mi(dc),id=dn({},dc,{view:0,detail:0}),gN=mi(id),Gm,Km,qc,Fp=dn({},id,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:N1,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qc&&(qc&&t.type==="mousemove"?(Gm=t.screenX-qc.screenX,Km=t.screenY-qc.screenY):Km=Gm=0,qc=t),Gm)},movementY:function(t){return"movementY"in t?t.movementY:Km}}),zy=mi(Fp),yN=dn({},Fp,{dataTransfer:0}),vN=mi(yN),wN=dn({},id,{relatedTarget:0}),Qm=mi(wN),_N=dn({},dc,{animationName:0,elapsedTime:0,pseudoElement:0}),bN=mi(_N),xN=dn({},dc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),SN=mi(xN),NN=dn({},dc,{data:0}),qy=mi(NN),AN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},EN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},IN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=IN[t])?!!e[t]:!1}function N1(){return TN}var PN=dn({},id,{key:function(t){if(t.key){var e=AN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ef(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?EN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:N1,charCode:function(t){return t.type==="keypress"?Ef(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ef(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),CN=mi(PN),kN=dn({},Fp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hy=mi(kN),LN=dn({},id,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:N1}),RN=mi(LN),DN=dn({},dc,{propertyName:0,elapsedTime:0,pseudoElement:0}),jN=mi(DN),FN=dn({},Fp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ON=mi(FN),MN=[9,13,27,32],A1=po&&"CompositionEvent"in window,ch=null;po&&"documentMode"in document&&(ch=document.documentMode);var VN=po&&"TextEvent"in window&&!ch,y_=po&&(!A1||ch&&8<ch&&11>=ch),Wy=" ",$y=!1;function v_(t,e){switch(t){case"keyup":return MN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function w_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Tu=!1;function BN(t,e){switch(t){case"compositionend":return w_(e);case"keypress":return e.which!==32?null:($y=!0,Wy);case"textInput":return t=e.data,t===Wy&&$y?null:t;default:return null}}function UN(t,e){if(Tu)return t==="compositionend"||!A1&&v_(t,e)?(t=g_(),Af=x1=pa=null,Tu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return y_&&e.locale!=="ko"?null:e.data;default:return null}}var zN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!zN[t.type]:e==="textarea"}function __(t,e,n,r){Jw(r),e=Jf(e,"onChange"),0<e.length&&(n=new S1("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var hh=null,Rh=null;function qN(t){k_(t,0)}function Op(t){var e=ku(t);if(Hw(e))return t}function HN(t,e){if(t==="change")return e}var b_=!1;if(po){var Ym;if(po){var Jm="oninput"in document;if(!Jm){var Ky=document.createElement("div");Ky.setAttribute("oninput","return;"),Jm=typeof Ky.oninput=="function"}Ym=Jm}else Ym=!1;b_=Ym&&(!document.documentMode||9<document.documentMode)}function Qy(){hh&&(hh.detachEvent("onpropertychange",x_),Rh=hh=null)}function x_(t){if(t.propertyName==="value"&&Op(Rh)){var e=[];__(e,Rh,t,y1(t)),t_(qN,e)}}function WN(t,e,n){t==="focusin"?(Qy(),hh=e,Rh=n,hh.attachEvent("onpropertychange",x_)):t==="focusout"&&Qy()}function $N(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Op(Rh)}function GN(t,e){if(t==="click")return Op(e)}function KN(t,e){if(t==="input"||t==="change")return Op(e)}function QN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var es=typeof Object.is=="function"?Object.is:QN;function Dh(t,e){if(es(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Dg.call(e,i)||!es(t[i],e[i]))return!1}return!0}function Yy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jy(t,e){var n=Yy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Yy(n)}}function S_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?S_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function N_(){for(var t=window,e=Hf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Hf(t.document)}return e}function E1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function YN(t){var e=N_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&S_(n.ownerDocument.documentElement,n)){if(r!==null&&E1(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Jy(n,s);var o=Jy(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var JN=po&&"documentMode"in document&&11>=document.documentMode,Pu=null,Zg=null,dh=null,e0=!1;function Xy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;e0||Pu==null||Pu!==Hf(r)||(r=Pu,"selectionStart"in r&&E1(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),dh&&Dh(dh,r)||(dh=r,r=Jf(Zg,"onSelect"),0<r.length&&(e=new S1("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Pu)))}function nf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Cu={animationend:nf("Animation","AnimationEnd"),animationiteration:nf("Animation","AnimationIteration"),animationstart:nf("Animation","AnimationStart"),transitionend:nf("Transition","TransitionEnd")},Xm={},A_={};po&&(A_=document.createElement("div").style,"AnimationEvent"in window||(delete Cu.animationend.animation,delete Cu.animationiteration.animation,delete Cu.animationstart.animation),"TransitionEvent"in window||delete Cu.transitionend.transition);function Mp(t){if(Xm[t])return Xm[t];if(!Cu[t])return t;var e=Cu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in A_)return Xm[t]=e[n];return t}var E_=Mp("animationend"),I_=Mp("animationiteration"),T_=Mp("animationstart"),P_=Mp("transitionend"),C_=new Map,Zy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Va(t,e){C_.set(t,e),ql(e,[t])}for(var Zm=0;Zm<Zy.length;Zm++){var eg=Zy[Zm],XN=eg.toLowerCase(),ZN=eg[0].toUpperCase()+eg.slice(1);Va(XN,"on"+ZN)}Va(E_,"onAnimationEnd");Va(I_,"onAnimationIteration");Va(T_,"onAnimationStart");Va("dblclick","onDoubleClick");Va("focusin","onFocus");Va("focusout","onBlur");Va(P_,"onTransitionEnd");Qu("onMouseEnter",["mouseout","mouseover"]);Qu("onMouseLeave",["mouseout","mouseover"]);Qu("onPointerEnter",["pointerout","pointerover"]);Qu("onPointerLeave",["pointerout","pointerover"]);ql("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ql("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ql("onBeforeInput",["compositionend","keypress","textInput","paste"]);ql("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ql("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ql("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var th="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eA=new Set("cancel close invalid load scroll toggle".split(" ").concat(th));function ev(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,X3(r,e,void 0,t),t.currentTarget=null}function k_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,h=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;ev(i,a,h),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,h=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;ev(i,a,h),s=l}}}if($f)throw t=Qg,$f=!1,Qg=null,t}function sn(t,e){var n=e[s0];n===void 0&&(n=e[s0]=new Set);var r=t+"__bubble";n.has(r)||(L_(e,t,2,!1),n.add(r))}function tg(t,e,n){var r=0;e&&(r|=4),L_(n,t,r,e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function jh(t){if(!t[rf]){t[rf]=!0,Vw.forEach(function(n){n!=="selectionchange"&&(eA.has(n)||tg(n,!1,t),tg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[rf]||(e[rf]=!0,tg("selectionchange",!1,e))}}function L_(t,e,n,r){switch(m_(e)){case 1:var i=pN;break;case 4:i=mN;break;default:i=b1}n=i.bind(null,e,n,t),i=void 0,!Kg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ng(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=wl(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}t_(function(){var h=s,p=y1(n),g=[];e:{var v=C_.get(t);if(v!==void 0){var f=S1,E=t;switch(t){case"keypress":if(Ef(n)===0)break e;case"keydown":case"keyup":f=CN;break;case"focusin":E="focus",f=Qm;break;case"focusout":E="blur",f=Qm;break;case"beforeblur":case"afterblur":f=Qm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=zy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=vN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=RN;break;case E_:case I_:case T_:f=bN;break;case P_:f=jN;break;case"scroll":f=gN;break;case"wheel":f=ON;break;case"copy":case"cut":case"paste":f=SN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Hy}var k=(e&4)!==0,P=!k&&t==="scroll",w=k?v!==null?v+"Capture":null:v;k=[];for(var _=h,T;_!==null;){T=_;var L=T.stateNode;if(T.tag===5&&L!==null&&(T=L,w!==null&&(L=Ph(_,w),L!=null&&k.push(Fh(_,L,T)))),P)break;_=_.return}0<k.length&&(v=new f(v,E,null,n,p),g.push({event:v,listeners:k}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",v&&n!==$g&&(E=n.relatedTarget||n.fromElement)&&(wl(E)||E[mo]))break e;if((f||v)&&(v=p.window===p?p:(v=p.ownerDocument)?v.defaultView||v.parentWindow:window,f?(E=n.relatedTarget||n.toElement,f=h,E=E?wl(E):null,E!==null&&(P=Hl(E),E!==P||E.tag!==5&&E.tag!==6)&&(E=null)):(f=null,E=h),f!==E)){if(k=zy,L="onMouseLeave",w="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(k=Hy,L="onPointerLeave",w="onPointerEnter",_="pointer"),P=f==null?v:ku(f),T=E==null?v:ku(E),v=new k(L,_+"leave",f,n,p),v.target=P,v.relatedTarget=T,L=null,wl(p)===h&&(k=new k(w,_+"enter",E,n,p),k.target=T,k.relatedTarget=P,L=k),P=L,f&&E)t:{for(k=f,w=E,_=0,T=k;T;T=vu(T))_++;for(T=0,L=w;L;L=vu(L))T++;for(;0<_-T;)k=vu(k),_--;for(;0<T-_;)w=vu(w),T--;for(;_--;){if(k===w||w!==null&&k===w.alternate)break t;k=vu(k),w=vu(w)}k=null}else k=null;f!==null&&tv(g,v,f,k,!1),E!==null&&P!==null&&tv(g,P,E,k,!0)}}e:{if(v=h?ku(h):window,f=v.nodeName&&v.nodeName.toLowerCase(),f==="select"||f==="input"&&v.type==="file")var V=HN;else if(Gy(v))if(b_)V=KN;else{V=$N;var W=WN}else(f=v.nodeName)&&f.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(V=GN);if(V&&(V=V(t,h))){__(g,V,n,p);break e}W&&W(t,v,h),t==="focusout"&&(W=v._wrapperState)&&W.controlled&&v.type==="number"&&Ug(v,"number",v.value)}switch(W=h?ku(h):window,t){case"focusin":(Gy(W)||W.contentEditable==="true")&&(Pu=W,Zg=h,dh=null);break;case"focusout":dh=Zg=Pu=null;break;case"mousedown":e0=!0;break;case"contextmenu":case"mouseup":case"dragend":e0=!1,Xy(g,n,p);break;case"selectionchange":if(JN)break;case"keydown":case"keyup":Xy(g,n,p)}var I;if(A1)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Tu?v_(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(y_&&n.locale!=="ko"&&(Tu||x!=="onCompositionStart"?x==="onCompositionEnd"&&Tu&&(I=g_()):(pa=p,x1="value"in pa?pa.value:pa.textContent,Tu=!0)),W=Jf(h,x),0<W.length&&(x=new qy(x,t,null,n,p),g.push({event:x,listeners:W}),I?x.data=I:(I=w_(n),I!==null&&(x.data=I)))),(I=VN?BN(t,n):UN(t,n))&&(h=Jf(h,"onBeforeInput"),0<h.length&&(p=new qy("onBeforeInput","beforeinput",null,n,p),g.push({event:p,listeners:h}),p.data=I))}k_(g,e)})}function Fh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Jf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ph(t,n),s!=null&&r.unshift(Fh(t,s,i)),s=Ph(t,e),s!=null&&r.push(Fh(t,s,i))),t=t.return}return r}function vu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function tv(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,h=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&h!==null&&(a=h,i?(l=Ph(n,s),l!=null&&o.unshift(Fh(n,l,a))):i||(l=Ph(n,s),l!=null&&o.push(Fh(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var tA=/\r\n?/g,nA=/\u0000|\uFFFD/g;function nv(t){return(typeof t=="string"?t:""+t).replace(tA,`
`).replace(nA,"")}function sf(t,e,n){if(e=nv(e),nv(t)!==e&&n)throw Error(Fe(425))}function Xf(){}var t0=null,n0=null;function r0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var i0=typeof setTimeout=="function"?setTimeout:void 0,rA=typeof clearTimeout=="function"?clearTimeout:void 0,rv=typeof Promise=="function"?Promise:void 0,iA=typeof queueMicrotask=="function"?queueMicrotask:typeof rv<"u"?function(t){return rv.resolve(null).then(t).catch(sA)}:i0;function sA(t){setTimeout(function(){throw t})}function rg(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Lh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Lh(e)}function ba(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function iv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var fc=Math.random().toString(36).slice(2),Ss="__reactFiber$"+fc,Oh="__reactProps$"+fc,mo="__reactContainer$"+fc,s0="__reactEvents$"+fc,oA="__reactListeners$"+fc,aA="__reactHandles$"+fc;function wl(t){var e=t[Ss];if(e)return e;for(var n=t.parentNode;n;){if(e=n[mo]||n[Ss]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=iv(t);t!==null;){if(n=t[Ss])return n;t=iv(t)}return e}t=n,n=t.parentNode}return null}function sd(t){return t=t[Ss]||t[mo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ku(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Fe(33))}function Vp(t){return t[Oh]||null}var o0=[],Lu=-1;function Ba(t){return{current:t}}function ln(t){0>Lu||(t.current=o0[Lu],o0[Lu]=null,Lu--)}function en(t,e){Lu++,o0[Lu]=t.current,t.current=e}var Ra={},Nr=Ba(Ra),Qr=Ba(!1),kl=Ra;function Yu(t,e){var n=t.type.contextTypes;if(!n)return Ra;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Yr(t){return t=t.childContextTypes,t!=null}function Zf(){ln(Qr),ln(Nr)}function sv(t,e,n){if(Nr.current!==Ra)throw Error(Fe(168));en(Nr,e),en(Qr,n)}function R_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Fe(108,W3(t)||"Unknown",i));return dn({},n,r)}function ep(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ra,kl=Nr.current,en(Nr,t),en(Qr,Qr.current),!0}function ov(t,e,n){var r=t.stateNode;if(!r)throw Error(Fe(169));n?(t=R_(t,e,kl),r.__reactInternalMemoizedMergedChildContext=t,ln(Qr),ln(Nr),en(Nr,t)):ln(Qr),en(Qr,n)}var no=null,Bp=!1,ig=!1;function D_(t){no===null?no=[t]:no.push(t)}function lA(t){Bp=!0,D_(t)}function Ua(){if(!ig&&no!==null){ig=!0;var t=0,e=Ht;try{var n=no;for(Ht=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}no=null,Bp=!1}catch(i){throw no!==null&&(no=no.slice(t+1)),s_(v1,Ua),i}finally{Ht=e,ig=!1}}return null}var Ru=[],Du=0,tp=null,np=0,Ii=[],Ti=0,Ll=null,ro=1,io="";function ml(t,e){Ru[Du++]=np,Ru[Du++]=tp,tp=t,np=e}function j_(t,e,n){Ii[Ti++]=ro,Ii[Ti++]=io,Ii[Ti++]=Ll,Ll=t;var r=ro;t=io;var i=32-Xi(r)-1;r&=~(1<<i),n+=1;var s=32-Xi(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ro=1<<32-Xi(e)+i|n<<i|r,io=s+t}else ro=1<<s|n<<i|r,io=t}function I1(t){t.return!==null&&(ml(t,1),j_(t,1,0))}function T1(t){for(;t===tp;)tp=Ru[--Du],Ru[Du]=null,np=Ru[--Du],Ru[Du]=null;for(;t===Ll;)Ll=Ii[--Ti],Ii[Ti]=null,io=Ii[--Ti],Ii[Ti]=null,ro=Ii[--Ti],Ii[Ti]=null}var di=null,ui=null,un=!1,Ji=null;function F_(t,e){var n=Pi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function av(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,di=t,ui=ba(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,di=t,ui=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ll!==null?{id:ro,overflow:io}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,di=t,ui=null,!0):!1;default:return!1}}function a0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function l0(t){if(un){var e=ui;if(e){var n=e;if(!av(t,e)){if(a0(t))throw Error(Fe(418));e=ba(n.nextSibling);var r=di;e&&av(t,e)?F_(r,n):(t.flags=t.flags&-4097|2,un=!1,di=t)}}else{if(a0(t))throw Error(Fe(418));t.flags=t.flags&-4097|2,un=!1,di=t}}}function lv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;di=t}function of(t){if(t!==di)return!1;if(!un)return lv(t),un=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!r0(t.type,t.memoizedProps)),e&&(e=ui)){if(a0(t))throw O_(),Error(Fe(418));for(;e;)F_(t,e),e=ba(e.nextSibling)}if(lv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Fe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ui=ba(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ui=null}}else ui=di?ba(t.stateNode.nextSibling):null;return!0}function O_(){for(var t=ui;t;)t=ba(t.nextSibling)}function Ju(){ui=di=null,un=!1}function P1(t){Ji===null?Ji=[t]:Ji.push(t)}var uA=xo.ReactCurrentBatchConfig;function Hc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Fe(309));var r=n.stateNode}if(!r)throw Error(Fe(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Fe(284));if(!n._owner)throw Error(Fe(290,t))}return t}function af(t,e){throw t=Object.prototype.toString.call(e),Error(Fe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function uv(t){var e=t._init;return e(t._payload)}function M_(t){function e(w,_){if(t){var T=w.deletions;T===null?(w.deletions=[_],w.flags|=16):T.push(_)}}function n(w,_){if(!t)return null;for(;_!==null;)e(w,_),_=_.sibling;return null}function r(w,_){for(w=new Map;_!==null;)_.key!==null?w.set(_.key,_):w.set(_.index,_),_=_.sibling;return w}function i(w,_){return w=Aa(w,_),w.index=0,w.sibling=null,w}function s(w,_,T){return w.index=T,t?(T=w.alternate,T!==null?(T=T.index,T<_?(w.flags|=2,_):T):(w.flags|=2,_)):(w.flags|=1048576,_)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,_,T,L){return _===null||_.tag!==6?(_=hg(T,w.mode,L),_.return=w,_):(_=i(_,T),_.return=w,_)}function l(w,_,T,L){var V=T.type;return V===Iu?p(w,_,T.props.children,L,T.key):_!==null&&(_.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===sa&&uv(V)===_.type)?(L=i(_,T.props),L.ref=Hc(w,_,T),L.return=w,L):(L=Rf(T.type,T.key,T.props,null,w.mode,L),L.ref=Hc(w,_,T),L.return=w,L)}function h(w,_,T,L){return _===null||_.tag!==4||_.stateNode.containerInfo!==T.containerInfo||_.stateNode.implementation!==T.implementation?(_=dg(T,w.mode,L),_.return=w,_):(_=i(_,T.children||[]),_.return=w,_)}function p(w,_,T,L,V){return _===null||_.tag!==7?(_=Al(T,w.mode,L,V),_.return=w,_):(_=i(_,T),_.return=w,_)}function g(w,_,T){if(typeof _=="string"&&_!==""||typeof _=="number")return _=hg(""+_,w.mode,T),_.return=w,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Qd:return T=Rf(_.type,_.key,_.props,null,w.mode,T),T.ref=Hc(w,null,_),T.return=w,T;case Eu:return _=dg(_,w.mode,T),_.return=w,_;case sa:var L=_._init;return g(w,L(_._payload),T)}if(Zc(_)||Vc(_))return _=Al(_,w.mode,T,null),_.return=w,_;af(w,_)}return null}function v(w,_,T,L){var V=_!==null?_.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return V!==null?null:a(w,_,""+T,L);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Qd:return T.key===V?l(w,_,T,L):null;case Eu:return T.key===V?h(w,_,T,L):null;case sa:return V=T._init,v(w,_,V(T._payload),L)}if(Zc(T)||Vc(T))return V!==null?null:p(w,_,T,L,null);af(w,T)}return null}function f(w,_,T,L,V){if(typeof L=="string"&&L!==""||typeof L=="number")return w=w.get(T)||null,a(_,w,""+L,V);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case Qd:return w=w.get(L.key===null?T:L.key)||null,l(_,w,L,V);case Eu:return w=w.get(L.key===null?T:L.key)||null,h(_,w,L,V);case sa:var W=L._init;return f(w,_,T,W(L._payload),V)}if(Zc(L)||Vc(L))return w=w.get(T)||null,p(_,w,L,V,null);af(_,L)}return null}function E(w,_,T,L){for(var V=null,W=null,I=_,x=_=0,C=null;I!==null&&x<T.length;x++){I.index>x?(C=I,I=null):C=I.sibling;var j=v(w,I,T[x],L);if(j===null){I===null&&(I=C);break}t&&I&&j.alternate===null&&e(w,I),_=s(j,_,x),W===null?V=j:W.sibling=j,W=j,I=C}if(x===T.length)return n(w,I),un&&ml(w,x),V;if(I===null){for(;x<T.length;x++)I=g(w,T[x],L),I!==null&&(_=s(I,_,x),W===null?V=I:W.sibling=I,W=I);return un&&ml(w,x),V}for(I=r(w,I);x<T.length;x++)C=f(I,w,x,T[x],L),C!==null&&(t&&C.alternate!==null&&I.delete(C.key===null?x:C.key),_=s(C,_,x),W===null?V=C:W.sibling=C,W=C);return t&&I.forEach(function(N){return e(w,N)}),un&&ml(w,x),V}function k(w,_,T,L){var V=Vc(T);if(typeof V!="function")throw Error(Fe(150));if(T=V.call(T),T==null)throw Error(Fe(151));for(var W=V=null,I=_,x=_=0,C=null,j=T.next();I!==null&&!j.done;x++,j=T.next()){I.index>x?(C=I,I=null):C=I.sibling;var N=v(w,I,j.value,L);if(N===null){I===null&&(I=C);break}t&&I&&N.alternate===null&&e(w,I),_=s(N,_,x),W===null?V=N:W.sibling=N,W=N,I=C}if(j.done)return n(w,I),un&&ml(w,x),V;if(I===null){for(;!j.done;x++,j=T.next())j=g(w,j.value,L),j!==null&&(_=s(j,_,x),W===null?V=j:W.sibling=j,W=j);return un&&ml(w,x),V}for(I=r(w,I);!j.done;x++,j=T.next())j=f(I,w,x,j.value,L),j!==null&&(t&&j.alternate!==null&&I.delete(j.key===null?x:j.key),_=s(j,_,x),W===null?V=j:W.sibling=j,W=j);return t&&I.forEach(function(A){return e(w,A)}),un&&ml(w,x),V}function P(w,_,T,L){if(typeof T=="object"&&T!==null&&T.type===Iu&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Qd:e:{for(var V=T.key,W=_;W!==null;){if(W.key===V){if(V=T.type,V===Iu){if(W.tag===7){n(w,W.sibling),_=i(W,T.props.children),_.return=w,w=_;break e}}else if(W.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===sa&&uv(V)===W.type){n(w,W.sibling),_=i(W,T.props),_.ref=Hc(w,W,T),_.return=w,w=_;break e}n(w,W);break}else e(w,W);W=W.sibling}T.type===Iu?(_=Al(T.props.children,w.mode,L,T.key),_.return=w,w=_):(L=Rf(T.type,T.key,T.props,null,w.mode,L),L.ref=Hc(w,_,T),L.return=w,w=L)}return o(w);case Eu:e:{for(W=T.key;_!==null;){if(_.key===W)if(_.tag===4&&_.stateNode.containerInfo===T.containerInfo&&_.stateNode.implementation===T.implementation){n(w,_.sibling),_=i(_,T.children||[]),_.return=w,w=_;break e}else{n(w,_);break}else e(w,_);_=_.sibling}_=dg(T,w.mode,L),_.return=w,w=_}return o(w);case sa:return W=T._init,P(w,_,W(T._payload),L)}if(Zc(T))return E(w,_,T,L);if(Vc(T))return k(w,_,T,L);af(w,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,_!==null&&_.tag===6?(n(w,_.sibling),_=i(_,T),_.return=w,w=_):(n(w,_),_=hg(T,w.mode,L),_.return=w,w=_),o(w)):n(w,_)}return P}var Xu=M_(!0),V_=M_(!1),rp=Ba(null),ip=null,ju=null,C1=null;function k1(){C1=ju=ip=null}function L1(t){var e=rp.current;ln(rp),t._currentValue=e}function u0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function qu(t,e){ip=t,C1=ju=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Kr=!0),t.firstContext=null)}function ki(t){var e=t._currentValue;if(C1!==t)if(t={context:t,memoizedValue:e,next:null},ju===null){if(ip===null)throw Error(Fe(308));ju=t,ip.dependencies={lanes:0,firstContext:t}}else ju=ju.next=t;return e}var _l=null;function R1(t){_l===null?_l=[t]:_l.push(t)}function B_(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,R1(e)):(n.next=i.next,i.next=n),e.interleaved=n,go(t,r)}function go(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var oa=!1;function D1(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function U_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function lo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function xa(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Dt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,go(t,n)}return i=r.interleaved,i===null?(e.next=e,R1(r)):(e.next=i.next,i.next=e),r.interleaved=e,go(t,n)}function If(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,w1(t,n)}}function cv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function sp(t,e,n,r){var i=t.updateQueue;oa=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,h=l.next;l.next=null,o===null?s=h:o.next=h,o=l;var p=t.alternate;p!==null&&(p=p.updateQueue,a=p.lastBaseUpdate,a!==o&&(a===null?p.firstBaseUpdate=h:a.next=h,p.lastBaseUpdate=l))}if(s!==null){var g=i.baseState;o=0,p=h=l=null,a=s;do{var v=a.lane,f=a.eventTime;if((r&v)===v){p!==null&&(p=p.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,k=a;switch(v=e,f=n,k.tag){case 1:if(E=k.payload,typeof E=="function"){g=E.call(f,g,v);break e}g=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=k.payload,v=typeof E=="function"?E.call(f,g,v):E,v==null)break e;g=dn({},g,v);break e;case 2:oa=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,v=i.effects,v===null?i.effects=[a]:v.push(a))}else f={eventTime:f,lane:v,tag:a.tag,payload:a.payload,callback:a.callback,next:null},p===null?(h=p=f,l=g):p=p.next=f,o|=v;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;v=a,a=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);if(p===null&&(l=g),i.baseState=l,i.firstBaseUpdate=h,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Dl|=o,t.lanes=o,t.memoizedState=g}}function hv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Fe(191,i));i.call(r)}}}var od={},Ts=Ba(od),Mh=Ba(od),Vh=Ba(od);function bl(t){if(t===od)throw Error(Fe(174));return t}function j1(t,e){switch(en(Vh,e),en(Mh,t),en(Ts,od),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:qg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=qg(e,t)}ln(Ts),en(Ts,e)}function Zu(){ln(Ts),ln(Mh),ln(Vh)}function z_(t){bl(Vh.current);var e=bl(Ts.current),n=qg(e,t.type);e!==n&&(en(Mh,t),en(Ts,n))}function F1(t){Mh.current===t&&(ln(Ts),ln(Mh))}var cn=Ba(0);function op(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var sg=[];function O1(){for(var t=0;t<sg.length;t++)sg[t]._workInProgressVersionPrimary=null;sg.length=0}var Tf=xo.ReactCurrentDispatcher,og=xo.ReactCurrentBatchConfig,Rl=0,hn=null,zn=null,Qn=null,ap=!1,fh=!1,Bh=0,cA=0;function fr(){throw Error(Fe(321))}function M1(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!es(t[n],e[n]))return!1;return!0}function V1(t,e,n,r,i,s){if(Rl=s,hn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Tf.current=t===null||t.memoizedState===null?pA:mA,t=n(r,i),fh){s=0;do{if(fh=!1,Bh=0,25<=s)throw Error(Fe(301));s+=1,Qn=zn=null,e.updateQueue=null,Tf.current=gA,t=n(r,i)}while(fh)}if(Tf.current=lp,e=zn!==null&&zn.next!==null,Rl=0,Qn=zn=hn=null,ap=!1,e)throw Error(Fe(300));return t}function B1(){var t=Bh!==0;return Bh=0,t}function xs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qn===null?hn.memoizedState=Qn=t:Qn=Qn.next=t,Qn}function Li(){if(zn===null){var t=hn.alternate;t=t!==null?t.memoizedState:null}else t=zn.next;var e=Qn===null?hn.memoizedState:Qn.next;if(e!==null)Qn=e,zn=t;else{if(t===null)throw Error(Fe(310));zn=t,t={memoizedState:zn.memoizedState,baseState:zn.baseState,baseQueue:zn.baseQueue,queue:zn.queue,next:null},Qn===null?hn.memoizedState=Qn=t:Qn=Qn.next=t}return Qn}function Uh(t,e){return typeof e=="function"?e(t):e}function ag(t){var e=Li(),n=e.queue;if(n===null)throw Error(Fe(311));n.lastRenderedReducer=t;var r=zn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,h=s;do{var p=h.lane;if((Rl&p)===p)l!==null&&(l=l.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var g={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};l===null?(a=l=g,o=r):l=l.next=g,hn.lanes|=p,Dl|=p}h=h.next}while(h!==null&&h!==s);l===null?o=r:l.next=a,es(r,e.memoizedState)||(Kr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,hn.lanes|=s,Dl|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function lg(t){var e=Li(),n=e.queue;if(n===null)throw Error(Fe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);es(s,e.memoizedState)||(Kr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function q_(){}function H_(t,e){var n=hn,r=Li(),i=e(),s=!es(r.memoizedState,i);if(s&&(r.memoizedState=i,Kr=!0),r=r.queue,U1(G_.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Qn!==null&&Qn.memoizedState.tag&1){if(n.flags|=2048,zh(9,$_.bind(null,n,r,i,e),void 0,null),Yn===null)throw Error(Fe(349));Rl&30||W_(n,e,i)}return i}function W_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=hn.updateQueue,e===null?(e={lastEffect:null,stores:null},hn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function $_(t,e,n,r){e.value=n,e.getSnapshot=r,K_(e)&&Q_(t)}function G_(t,e,n){return n(function(){K_(e)&&Q_(t)})}function K_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!es(t,n)}catch{return!0}}function Q_(t){var e=go(t,1);e!==null&&Zi(e,t,1,-1)}function dv(t){var e=xs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uh,lastRenderedState:t},e.queue=t,t=t.dispatch=fA.bind(null,hn,t),[e.memoizedState,t]}function zh(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=hn.updateQueue,e===null?(e={lastEffect:null,stores:null},hn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Y_(){return Li().memoizedState}function Pf(t,e,n,r){var i=xs();hn.flags|=t,i.memoizedState=zh(1|e,n,void 0,r===void 0?null:r)}function Up(t,e,n,r){var i=Li();r=r===void 0?null:r;var s=void 0;if(zn!==null){var o=zn.memoizedState;if(s=o.destroy,r!==null&&M1(r,o.deps)){i.memoizedState=zh(e,n,s,r);return}}hn.flags|=t,i.memoizedState=zh(1|e,n,s,r)}function fv(t,e){return Pf(8390656,8,t,e)}function U1(t,e){return Up(2048,8,t,e)}function J_(t,e){return Up(4,2,t,e)}function X_(t,e){return Up(4,4,t,e)}function Z_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function eb(t,e,n){return n=n!=null?n.concat([t]):null,Up(4,4,Z_.bind(null,e,t),n)}function z1(){}function tb(t,e){var n=Li();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&M1(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function nb(t,e){var n=Li();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&M1(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function rb(t,e,n){return Rl&21?(es(n,e)||(n=l_(),hn.lanes|=n,Dl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Kr=!0),t.memoizedState=n)}function hA(t,e){var n=Ht;Ht=n!==0&&4>n?n:4,t(!0);var r=og.transition;og.transition={};try{t(!1),e()}finally{Ht=n,og.transition=r}}function ib(){return Li().memoizedState}function dA(t,e,n){var r=Na(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},sb(t))ob(e,n);else if(n=B_(t,e,n,r),n!==null){var i=Rr();Zi(n,t,r,i),ab(n,e,r)}}function fA(t,e,n){var r=Na(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(sb(t))ob(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,es(a,o)){var l=e.interleaved;l===null?(i.next=i,R1(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=B_(t,e,i,r),n!==null&&(i=Rr(),Zi(n,t,r,i),ab(n,e,r))}}function sb(t){var e=t.alternate;return t===hn||e!==null&&e===hn}function ob(t,e){fh=ap=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ab(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,w1(t,n)}}var lp={readContext:ki,useCallback:fr,useContext:fr,useEffect:fr,useImperativeHandle:fr,useInsertionEffect:fr,useLayoutEffect:fr,useMemo:fr,useReducer:fr,useRef:fr,useState:fr,useDebugValue:fr,useDeferredValue:fr,useTransition:fr,useMutableSource:fr,useSyncExternalStore:fr,useId:fr,unstable_isNewReconciler:!1},pA={readContext:ki,useCallback:function(t,e){return xs().memoizedState=[t,e===void 0?null:e],t},useContext:ki,useEffect:fv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Pf(4194308,4,Z_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Pf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Pf(4,2,t,e)},useMemo:function(t,e){var n=xs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=xs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=dA.bind(null,hn,t),[r.memoizedState,t]},useRef:function(t){var e=xs();return t={current:t},e.memoizedState=t},useState:dv,useDebugValue:z1,useDeferredValue:function(t){return xs().memoizedState=t},useTransition:function(){var t=dv(!1),e=t[0];return t=hA.bind(null,t[1]),xs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=hn,i=xs();if(un){if(n===void 0)throw Error(Fe(407));n=n()}else{if(n=e(),Yn===null)throw Error(Fe(349));Rl&30||W_(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,fv(G_.bind(null,r,s,t),[t]),r.flags|=2048,zh(9,$_.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=xs(),e=Yn.identifierPrefix;if(un){var n=io,r=ro;n=(r&~(1<<32-Xi(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Bh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=cA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mA={readContext:ki,useCallback:tb,useContext:ki,useEffect:U1,useImperativeHandle:eb,useInsertionEffect:J_,useLayoutEffect:X_,useMemo:nb,useReducer:ag,useRef:Y_,useState:function(){return ag(Uh)},useDebugValue:z1,useDeferredValue:function(t){var e=Li();return rb(e,zn.memoizedState,t)},useTransition:function(){var t=ag(Uh)[0],e=Li().memoizedState;return[t,e]},useMutableSource:q_,useSyncExternalStore:H_,useId:ib,unstable_isNewReconciler:!1},gA={readContext:ki,useCallback:tb,useContext:ki,useEffect:U1,useImperativeHandle:eb,useInsertionEffect:J_,useLayoutEffect:X_,useMemo:nb,useReducer:lg,useRef:Y_,useState:function(){return lg(Uh)},useDebugValue:z1,useDeferredValue:function(t){var e=Li();return zn===null?e.memoizedState=t:rb(e,zn.memoizedState,t)},useTransition:function(){var t=lg(Uh)[0],e=Li().memoizedState;return[t,e]},useMutableSource:q_,useSyncExternalStore:H_,useId:ib,unstable_isNewReconciler:!1};function Ki(t,e){if(t&&t.defaultProps){e=dn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function c0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:dn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var zp={isMounted:function(t){return(t=t._reactInternals)?Hl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Rr(),i=Na(t),s=lo(r,i);s.payload=e,n!=null&&(s.callback=n),e=xa(t,s,i),e!==null&&(Zi(e,t,i,r),If(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Rr(),i=Na(t),s=lo(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=xa(t,s,i),e!==null&&(Zi(e,t,i,r),If(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Rr(),r=Na(t),i=lo(n,r);i.tag=2,e!=null&&(i.callback=e),e=xa(t,i,r),e!==null&&(Zi(e,t,r,n),If(e,t,r))}};function pv(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Dh(n,r)||!Dh(i,s):!0}function lb(t,e,n){var r=!1,i=Ra,s=e.contextType;return typeof s=="object"&&s!==null?s=ki(s):(i=Yr(e)?kl:Nr.current,r=e.contextTypes,s=(r=r!=null)?Yu(t,i):Ra),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=zp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function mv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&zp.enqueueReplaceState(e,e.state,null)}function h0(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},D1(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ki(s):(s=Yr(e)?kl:Nr.current,i.context=Yu(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(c0(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&zp.enqueueReplaceState(i,i.state,null),sp(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ec(t,e){try{var n="",r=e;do n+=H3(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function ug(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function d0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var yA=typeof WeakMap=="function"?WeakMap:Map;function ub(t,e,n){n=lo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){cp||(cp=!0,x0=r),d0(t,e)},n}function cb(t,e,n){n=lo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){d0(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){d0(t,e),typeof r!="function"&&(Sa===null?Sa=new Set([this]):Sa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function gv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new yA;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=kA.bind(null,t,e,n),e.then(t,t))}function yv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function vv(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=lo(-1,1),e.tag=2,xa(n,e,1))),n.lanes|=1),t)}var vA=xo.ReactCurrentOwner,Kr=!1;function Lr(t,e,n,r){e.child=t===null?V_(e,null,n,r):Xu(e,t.child,n,r)}function wv(t,e,n,r,i){n=n.render;var s=e.ref;return qu(e,i),r=V1(t,e,n,r,s,i),n=B1(),t!==null&&!Kr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,yo(t,e,i)):(un&&n&&I1(e),e.flags|=1,Lr(t,e,r,i),e.child)}function _v(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Y1(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,hb(t,e,s,r,i)):(t=Rf(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Dh,n(o,r)&&t.ref===e.ref)return yo(t,e,i)}return e.flags|=1,t=Aa(s,r),t.ref=e.ref,t.return=e,e.child=t}function hb(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Dh(s,r)&&t.ref===e.ref)if(Kr=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Kr=!0);else return e.lanes=t.lanes,yo(t,e,i)}return f0(t,e,n,r,i)}function db(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},en(Ou,li),li|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,en(Ou,li),li|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,en(Ou,li),li|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,en(Ou,li),li|=r;return Lr(t,e,i,n),e.child}function fb(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function f0(t,e,n,r,i){var s=Yr(n)?kl:Nr.current;return s=Yu(e,s),qu(e,i),n=V1(t,e,n,r,s,i),r=B1(),t!==null&&!Kr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,yo(t,e,i)):(un&&r&&I1(e),e.flags|=1,Lr(t,e,n,i),e.child)}function bv(t,e,n,r,i){if(Yr(n)){var s=!0;ep(e)}else s=!1;if(qu(e,i),e.stateNode===null)Cf(t,e),lb(e,n,r),h0(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=ki(h):(h=Yr(n)?kl:Nr.current,h=Yu(e,h));var p=n.getDerivedStateFromProps,g=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==h)&&mv(e,o,r,h),oa=!1;var v=e.memoizedState;o.state=v,sp(e,r,o,i),l=e.memoizedState,a!==r||v!==l||Qr.current||oa?(typeof p=="function"&&(c0(e,n,p,r),l=e.memoizedState),(a=oa||pv(e,n,a,r,v,l,h))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=h,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,U_(t,e),a=e.memoizedProps,h=e.type===e.elementType?a:Ki(e.type,a),o.props=h,g=e.pendingProps,v=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ki(l):(l=Yr(n)?kl:Nr.current,l=Yu(e,l));var f=n.getDerivedStateFromProps;(p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==g||v!==l)&&mv(e,o,r,l),oa=!1,v=e.memoizedState,o.state=v,sp(e,r,o,i);var E=e.memoizedState;a!==g||v!==E||Qr.current||oa?(typeof f=="function"&&(c0(e,n,f,r),E=e.memoizedState),(h=oa||pv(e,n,h,r,v,E,l)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=l,r=h):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return p0(t,e,n,r,s,i)}function p0(t,e,n,r,i,s){fb(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&ov(e,n,!1),yo(t,e,s);r=e.stateNode,vA.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Xu(e,t.child,null,s),e.child=Xu(e,null,a,s)):Lr(t,e,a,s),e.memoizedState=r.state,i&&ov(e,n,!0),e.child}function pb(t){var e=t.stateNode;e.pendingContext?sv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&sv(t,e.context,!1),j1(t,e.containerInfo)}function xv(t,e,n,r,i){return Ju(),P1(i),e.flags|=256,Lr(t,e,n,r),e.child}var m0={dehydrated:null,treeContext:null,retryLane:0};function g0(t){return{baseLanes:t,cachePool:null,transitions:null}}function mb(t,e,n){var r=e.pendingProps,i=cn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),en(cn,i&1),t===null)return l0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Wp(o,r,0,null),t=Al(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=g0(n),e.memoizedState=m0,t):q1(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return wA(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Aa(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Aa(a,s):(s=Al(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?g0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=m0,r}return s=t.child,t=s.sibling,r=Aa(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function q1(t,e){return e=Wp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function lf(t,e,n,r){return r!==null&&P1(r),Xu(e,t.child,null,n),t=q1(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function wA(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=ug(Error(Fe(422))),lf(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Wp({mode:"visible",children:r.children},i,0,null),s=Al(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Xu(e,t.child,null,o),e.child.memoizedState=g0(o),e.memoizedState=m0,s);if(!(e.mode&1))return lf(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Fe(419)),r=ug(s,r,void 0),lf(t,e,o,r)}if(a=(o&t.childLanes)!==0,Kr||a){if(r=Yn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,go(t,i),Zi(r,t,i,-1))}return Q1(),r=ug(Error(Fe(421))),lf(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=LA.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ui=ba(i.nextSibling),di=e,un=!0,Ji=null,t!==null&&(Ii[Ti++]=ro,Ii[Ti++]=io,Ii[Ti++]=Ll,ro=t.id,io=t.overflow,Ll=e),e=q1(e,r.children),e.flags|=4096,e)}function Sv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),u0(t.return,e,n)}function cg(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function gb(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Lr(t,e,r.children,n),r=cn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Sv(t,n,e);else if(t.tag===19)Sv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(en(cn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&op(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),cg(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&op(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}cg(e,!0,n,null,s);break;case"together":cg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Cf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function yo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Dl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Fe(153));if(e.child!==null){for(t=e.child,n=Aa(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Aa(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function _A(t,e,n){switch(e.tag){case 3:pb(e),Ju();break;case 5:z_(e);break;case 1:Yr(e.type)&&ep(e);break;case 4:j1(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;en(rp,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(en(cn,cn.current&1),e.flags|=128,null):n&e.child.childLanes?mb(t,e,n):(en(cn,cn.current&1),t=yo(t,e,n),t!==null?t.sibling:null);en(cn,cn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return gb(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),en(cn,cn.current),r)break;return null;case 22:case 23:return e.lanes=0,db(t,e,n)}return yo(t,e,n)}var yb,y0,vb,wb;yb=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};y0=function(){};vb=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,bl(Ts.current);var s=null;switch(n){case"input":i=Vg(t,i),r=Vg(t,r),s=[];break;case"select":i=dn({},i,{value:void 0}),r=dn({},r,{value:void 0}),s=[];break;case"textarea":i=zg(t,i),r=zg(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Xf)}Hg(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var a=i[h];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Ih.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var l=r[h];if(a=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&l!==a&&(l!=null||a!=null))if(h==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(h,n)),n=l;else h==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(h,l)):h==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(h,""+l):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Ih.hasOwnProperty(h)?(l!=null&&h==="onScroll"&&sn("scroll",t),s||a===l||(s=[])):(s=s||[]).push(h,l))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};wb=function(t,e,n,r){n!==r&&(e.flags|=4)};function Wc(t,e){if(!un)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function pr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function bA(t,e,n){var r=e.pendingProps;switch(T1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pr(e),null;case 1:return Yr(e.type)&&Zf(),pr(e),null;case 3:return r=e.stateNode,Zu(),ln(Qr),ln(Nr),O1(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(of(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ji!==null&&(A0(Ji),Ji=null))),y0(t,e),pr(e),null;case 5:F1(e);var i=bl(Vh.current);if(n=e.type,t!==null&&e.stateNode!=null)vb(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Fe(166));return pr(e),null}if(t=bl(Ts.current),of(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Ss]=e,r[Oh]=s,t=(e.mode&1)!==0,n){case"dialog":sn("cancel",r),sn("close",r);break;case"iframe":case"object":case"embed":sn("load",r);break;case"video":case"audio":for(i=0;i<th.length;i++)sn(th[i],r);break;case"source":sn("error",r);break;case"img":case"image":case"link":sn("error",r),sn("load",r);break;case"details":sn("toggle",r);break;case"input":Ly(r,s),sn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},sn("invalid",r);break;case"textarea":Dy(r,s),sn("invalid",r)}Hg(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&sf(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&sf(r.textContent,a,t),i=["children",""+a]):Ih.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&sn("scroll",r)}switch(n){case"input":Yd(r),Ry(r,s,!0);break;case"textarea":Yd(r),jy(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Xf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Gw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ss]=e,t[Oh]=r,yb(t,e,!1,!1),e.stateNode=t;e:{switch(o=Wg(n,r),n){case"dialog":sn("cancel",t),sn("close",t),i=r;break;case"iframe":case"object":case"embed":sn("load",t),i=r;break;case"video":case"audio":for(i=0;i<th.length;i++)sn(th[i],t);i=r;break;case"source":sn("error",t),i=r;break;case"img":case"image":case"link":sn("error",t),sn("load",t),i=r;break;case"details":sn("toggle",t),i=r;break;case"input":Ly(t,r),i=Vg(t,r),sn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=dn({},r,{value:void 0}),sn("invalid",t);break;case"textarea":Dy(t,r),i=zg(t,r),sn("invalid",t);break;default:i=r}Hg(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Yw(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Kw(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Th(t,l):typeof l=="number"&&Th(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ih.hasOwnProperty(s)?l!=null&&s==="onScroll"&&sn("scroll",t):l!=null&&f1(t,s,l,o))}switch(n){case"input":Yd(t),Ry(t,r,!1);break;case"textarea":Yd(t),jy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+La(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Vu(t,!!r.multiple,s,!1):r.defaultValue!=null&&Vu(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Xf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return pr(e),null;case 6:if(t&&e.stateNode!=null)wb(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Fe(166));if(n=bl(Vh.current),bl(Ts.current),of(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ss]=e,(s=r.nodeValue!==n)&&(t=di,t!==null))switch(t.tag){case 3:sf(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&sf(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ss]=e,e.stateNode=r}return pr(e),null;case 13:if(ln(cn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(un&&ui!==null&&e.mode&1&&!(e.flags&128))O_(),Ju(),e.flags|=98560,s=!1;else if(s=of(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Fe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Fe(317));s[Ss]=e}else Ju(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;pr(e),s=!1}else Ji!==null&&(A0(Ji),Ji=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||cn.current&1?Hn===0&&(Hn=3):Q1())),e.updateQueue!==null&&(e.flags|=4),pr(e),null);case 4:return Zu(),y0(t,e),t===null&&jh(e.stateNode.containerInfo),pr(e),null;case 10:return L1(e.type._context),pr(e),null;case 17:return Yr(e.type)&&Zf(),pr(e),null;case 19:if(ln(cn),s=e.memoizedState,s===null)return pr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Wc(s,!1);else{if(Hn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=op(t),o!==null){for(e.flags|=128,Wc(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return en(cn,cn.current&1|2),e.child}t=t.sibling}s.tail!==null&&En()>tc&&(e.flags|=128,r=!0,Wc(s,!1),e.lanes=4194304)}else{if(!r)if(t=op(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Wc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!un)return pr(e),null}else 2*En()-s.renderingStartTime>tc&&n!==1073741824&&(e.flags|=128,r=!0,Wc(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=En(),e.sibling=null,n=cn.current,en(cn,r?n&1|2:n&1),e):(pr(e),null);case 22:case 23:return K1(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?li&1073741824&&(pr(e),e.subtreeFlags&6&&(e.flags|=8192)):pr(e),null;case 24:return null;case 25:return null}throw Error(Fe(156,e.tag))}function xA(t,e){switch(T1(e),e.tag){case 1:return Yr(e.type)&&Zf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Zu(),ln(Qr),ln(Nr),O1(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return F1(e),null;case 13:if(ln(cn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Fe(340));Ju()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ln(cn),null;case 4:return Zu(),null;case 10:return L1(e.type._context),null;case 22:case 23:return K1(),null;case 24:return null;default:return null}}var uf=!1,br=!1,SA=typeof WeakSet=="function"?WeakSet:Set,Je=null;function Fu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){wn(t,e,r)}else n.current=null}function v0(t,e,n){try{n()}catch(r){wn(t,e,r)}}var Nv=!1;function NA(t,e){if(t0=Qf,t=N_(),E1(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,h=0,p=0,g=t,v=null;t:for(;;){for(var f;g!==n||i!==0&&g.nodeType!==3||(a=o+i),g!==s||r!==0&&g.nodeType!==3||(l=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(f=g.firstChild)!==null;)v=g,g=f;for(;;){if(g===t)break t;if(v===n&&++h===i&&(a=o),v===s&&++p===r&&(l=o),(f=g.nextSibling)!==null)break;g=v,v=g.parentNode}g=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(n0={focusedElem:t,selectionRange:n},Qf=!1,Je=e;Je!==null;)if(e=Je,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Je=t;else for(;Je!==null;){e=Je;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var k=E.memoizedProps,P=E.memoizedState,w=e.stateNode,_=w.getSnapshotBeforeUpdate(e.elementType===e.type?k:Ki(e.type,k),P);w.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Fe(163))}}catch(L){wn(e,e.return,L)}if(t=e.sibling,t!==null){t.return=e.return,Je=t;break}Je=e.return}return E=Nv,Nv=!1,E}function ph(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&v0(e,n,s)}i=i.next}while(i!==r)}}function qp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function w0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function _b(t){var e=t.alternate;e!==null&&(t.alternate=null,_b(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ss],delete e[Oh],delete e[s0],delete e[oA],delete e[aA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function bb(t){return t.tag===5||t.tag===3||t.tag===4}function Av(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||bb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Xf));else if(r!==4&&(t=t.child,t!==null))for(_0(t,e,n),t=t.sibling;t!==null;)_0(t,e,n),t=t.sibling}function b0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(b0(t,e,n),t=t.sibling;t!==null;)b0(t,e,n),t=t.sibling}var nr=null,Yi=!1;function ta(t,e,n){for(n=n.child;n!==null;)xb(t,e,n),n=n.sibling}function xb(t,e,n){if(Is&&typeof Is.onCommitFiberUnmount=="function")try{Is.onCommitFiberUnmount(jp,n)}catch{}switch(n.tag){case 5:br||Fu(n,e);case 6:var r=nr,i=Yi;nr=null,ta(t,e,n),nr=r,Yi=i,nr!==null&&(Yi?(t=nr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):nr.removeChild(n.stateNode));break;case 18:nr!==null&&(Yi?(t=nr,n=n.stateNode,t.nodeType===8?rg(t.parentNode,n):t.nodeType===1&&rg(t,n),Lh(t)):rg(nr,n.stateNode));break;case 4:r=nr,i=Yi,nr=n.stateNode.containerInfo,Yi=!0,ta(t,e,n),nr=r,Yi=i;break;case 0:case 11:case 14:case 15:if(!br&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&v0(n,e,o),i=i.next}while(i!==r)}ta(t,e,n);break;case 1:if(!br&&(Fu(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){wn(n,e,a)}ta(t,e,n);break;case 21:ta(t,e,n);break;case 22:n.mode&1?(br=(r=br)||n.memoizedState!==null,ta(t,e,n),br=r):ta(t,e,n);break;default:ta(t,e,n)}}function Ev(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new SA),e.forEach(function(r){var i=RA.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Wi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:nr=a.stateNode,Yi=!1;break e;case 3:nr=a.stateNode.containerInfo,Yi=!0;break e;case 4:nr=a.stateNode.containerInfo,Yi=!0;break e}a=a.return}if(nr===null)throw Error(Fe(160));xb(s,o,i),nr=null,Yi=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(h){wn(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Sb(e,t),e=e.sibling}function Sb(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wi(e,t),ws(t),r&4){try{ph(3,t,t.return),qp(3,t)}catch(k){wn(t,t.return,k)}try{ph(5,t,t.return)}catch(k){wn(t,t.return,k)}}break;case 1:Wi(e,t),ws(t),r&512&&n!==null&&Fu(n,n.return);break;case 5:if(Wi(e,t),ws(t),r&512&&n!==null&&Fu(n,n.return),t.flags&32){var i=t.stateNode;try{Th(i,"")}catch(k){wn(t,t.return,k)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Ww(i,s),Wg(a,o);var h=Wg(a,s);for(o=0;o<l.length;o+=2){var p=l[o],g=l[o+1];p==="style"?Yw(i,g):p==="dangerouslySetInnerHTML"?Kw(i,g):p==="children"?Th(i,g):f1(i,p,g,h)}switch(a){case"input":Bg(i,s);break;case"textarea":$w(i,s);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Vu(i,!!s.multiple,f,!1):v!==!!s.multiple&&(s.defaultValue!=null?Vu(i,!!s.multiple,s.defaultValue,!0):Vu(i,!!s.multiple,s.multiple?[]:"",!1))}i[Oh]=s}catch(k){wn(t,t.return,k)}}break;case 6:if(Wi(e,t),ws(t),r&4){if(t.stateNode===null)throw Error(Fe(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(k){wn(t,t.return,k)}}break;case 3:if(Wi(e,t),ws(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Lh(e.containerInfo)}catch(k){wn(t,t.return,k)}break;case 4:Wi(e,t),ws(t);break;case 13:Wi(e,t),ws(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||($1=En())),r&4&&Ev(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(br=(h=br)||p,Wi(e,t),br=h):Wi(e,t),ws(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(Je=t,p=t.child;p!==null;){for(g=Je=p;Je!==null;){switch(v=Je,f=v.child,v.tag){case 0:case 11:case 14:case 15:ph(4,v,v.return);break;case 1:Fu(v,v.return);var E=v.stateNode;if(typeof E.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(k){wn(r,n,k)}}break;case 5:Fu(v,v.return);break;case 22:if(v.memoizedState!==null){Tv(g);continue}}f!==null?(f.return=v,Je=f):Tv(g)}p=p.sibling}e:for(p=null,g=t;;){if(g.tag===5){if(p===null){p=g;try{i=g.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=g.stateNode,l=g.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Qw("display",o))}catch(k){wn(t,t.return,k)}}}else if(g.tag===6){if(p===null)try{g.stateNode.nodeValue=h?"":g.memoizedProps}catch(k){wn(t,t.return,k)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;p===g&&(p=null),g=g.return}p===g&&(p=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Wi(e,t),ws(t),r&4&&Ev(t);break;case 21:break;default:Wi(e,t),ws(t)}}function ws(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(bb(n)){var r=n;break e}n=n.return}throw Error(Fe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Th(i,""),r.flags&=-33);var s=Av(t);b0(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Av(t);_0(t,a,o);break;default:throw Error(Fe(161))}}catch(l){wn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function AA(t,e,n){Je=t,Nb(t)}function Nb(t,e,n){for(var r=(t.mode&1)!==0;Je!==null;){var i=Je,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||uf;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||br;a=uf;var h=br;if(uf=o,(br=l)&&!h)for(Je=i;Je!==null;)o=Je,l=o.child,o.tag===22&&o.memoizedState!==null?Pv(i):l!==null?(l.return=o,Je=l):Pv(i);for(;s!==null;)Je=s,Nb(s),s=s.sibling;Je=i,uf=a,br=h}Iv(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Je=s):Iv(t)}}function Iv(t){for(;Je!==null;){var e=Je;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:br||qp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!br)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ki(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&hv(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}hv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var g=p.dehydrated;g!==null&&Lh(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Fe(163))}br||e.flags&512&&w0(e)}catch(v){wn(e,e.return,v)}}if(e===t){Je=null;break}if(n=e.sibling,n!==null){n.return=e.return,Je=n;break}Je=e.return}}function Tv(t){for(;Je!==null;){var e=Je;if(e===t){Je=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Je=n;break}Je=e.return}}function Pv(t){for(;Je!==null;){var e=Je;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{qp(4,e)}catch(l){wn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){wn(e,i,l)}}var s=e.return;try{w0(e)}catch(l){wn(e,s,l)}break;case 5:var o=e.return;try{w0(e)}catch(l){wn(e,o,l)}}}catch(l){wn(e,e.return,l)}if(e===t){Je=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Je=a;break}Je=e.return}}var EA=Math.ceil,up=xo.ReactCurrentDispatcher,H1=xo.ReactCurrentOwner,Ci=xo.ReactCurrentBatchConfig,Dt=0,Yn=null,Fn=null,sr=0,li=0,Ou=Ba(0),Hn=0,qh=null,Dl=0,Hp=0,W1=0,mh=null,$r=null,$1=0,tc=1/0,to=null,cp=!1,x0=null,Sa=null,cf=!1,ma=null,hp=0,gh=0,S0=null,kf=-1,Lf=0;function Rr(){return Dt&6?En():kf!==-1?kf:kf=En()}function Na(t){return t.mode&1?Dt&2&&sr!==0?sr&-sr:uA.transition!==null?(Lf===0&&(Lf=l_()),Lf):(t=Ht,t!==0||(t=window.event,t=t===void 0?16:m_(t.type)),t):1}function Zi(t,e,n,r){if(50<gh)throw gh=0,S0=null,Error(Fe(185));rd(t,n,r),(!(Dt&2)||t!==Yn)&&(t===Yn&&(!(Dt&2)&&(Hp|=n),Hn===4&&la(t,sr)),Jr(t,r),n===1&&Dt===0&&!(e.mode&1)&&(tc=En()+500,Bp&&Ua()))}function Jr(t,e){var n=t.callbackNode;uN(t,e);var r=Kf(t,t===Yn?sr:0);if(r===0)n!==null&&My(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&My(n),e===1)t.tag===0?lA(Cv.bind(null,t)):D_(Cv.bind(null,t)),iA(function(){!(Dt&6)&&Ua()}),n=null;else{switch(u_(r)){case 1:n=v1;break;case 4:n=o_;break;case 16:n=Gf;break;case 536870912:n=a_;break;default:n=Gf}n=Lb(n,Ab.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ab(t,e){if(kf=-1,Lf=0,Dt&6)throw Error(Fe(327));var n=t.callbackNode;if(Hu()&&t.callbackNode!==n)return null;var r=Kf(t,t===Yn?sr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=dp(t,r);else{e=r;var i=Dt;Dt|=2;var s=Ib();(Yn!==t||sr!==e)&&(to=null,tc=En()+500,Nl(t,e));do try{PA();break}catch(a){Eb(t,a)}while(!0);k1(),up.current=s,Dt=i,Fn!==null?e=0:(Yn=null,sr=0,e=Hn)}if(e!==0){if(e===2&&(i=Yg(t),i!==0&&(r=i,e=N0(t,i))),e===1)throw n=qh,Nl(t,0),la(t,r),Jr(t,En()),n;if(e===6)la(t,r);else{if(i=t.current.alternate,!(r&30)&&!IA(i)&&(e=dp(t,r),e===2&&(s=Yg(t),s!==0&&(r=s,e=N0(t,s))),e===1))throw n=qh,Nl(t,0),la(t,r),Jr(t,En()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Fe(345));case 2:gl(t,$r,to);break;case 3:if(la(t,r),(r&130023424)===r&&(e=$1+500-En(),10<e)){if(Kf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Rr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=i0(gl.bind(null,t,$r,to),e);break}gl(t,$r,to);break;case 4:if(la(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Xi(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=En()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*EA(r/1960))-r,10<r){t.timeoutHandle=i0(gl.bind(null,t,$r,to),r);break}gl(t,$r,to);break;case 5:gl(t,$r,to);break;default:throw Error(Fe(329))}}}return Jr(t,En()),t.callbackNode===n?Ab.bind(null,t):null}function N0(t,e){var n=mh;return t.current.memoizedState.isDehydrated&&(Nl(t,e).flags|=256),t=dp(t,e),t!==2&&(e=$r,$r=n,e!==null&&A0(e)),t}function A0(t){$r===null?$r=t:$r.push.apply($r,t)}function IA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!es(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function la(t,e){for(e&=~W1,e&=~Hp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Xi(e),r=1<<n;t[n]=-1,e&=~r}}function Cv(t){if(Dt&6)throw Error(Fe(327));Hu();var e=Kf(t,0);if(!(e&1))return Jr(t,En()),null;var n=dp(t,e);if(t.tag!==0&&n===2){var r=Yg(t);r!==0&&(e=r,n=N0(t,r))}if(n===1)throw n=qh,Nl(t,0),la(t,e),Jr(t,En()),n;if(n===6)throw Error(Fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,gl(t,$r,to),Jr(t,En()),null}function G1(t,e){var n=Dt;Dt|=1;try{return t(e)}finally{Dt=n,Dt===0&&(tc=En()+500,Bp&&Ua())}}function jl(t){ma!==null&&ma.tag===0&&!(Dt&6)&&Hu();var e=Dt;Dt|=1;var n=Ci.transition,r=Ht;try{if(Ci.transition=null,Ht=1,t)return t()}finally{Ht=r,Ci.transition=n,Dt=e,!(Dt&6)&&Ua()}}function K1(){li=Ou.current,ln(Ou)}function Nl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,rA(n)),Fn!==null)for(n=Fn.return;n!==null;){var r=n;switch(T1(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Zf();break;case 3:Zu(),ln(Qr),ln(Nr),O1();break;case 5:F1(r);break;case 4:Zu();break;case 13:ln(cn);break;case 19:ln(cn);break;case 10:L1(r.type._context);break;case 22:case 23:K1()}n=n.return}if(Yn=t,Fn=t=Aa(t.current,null),sr=li=e,Hn=0,qh=null,W1=Hp=Dl=0,$r=mh=null,_l!==null){for(e=0;e<_l.length;e++)if(n=_l[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}_l=null}return t}function Eb(t,e){do{var n=Fn;try{if(k1(),Tf.current=lp,ap){for(var r=hn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ap=!1}if(Rl=0,Qn=zn=hn=null,fh=!1,Bh=0,H1.current=null,n===null||n.return===null){Hn=1,qh=e,Fn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=sr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var h=l,p=a,g=p.tag;if(!(p.mode&1)&&(g===0||g===11||g===15)){var v=p.alternate;v?(p.updateQueue=v.updateQueue,p.memoizedState=v.memoizedState,p.lanes=v.lanes):(p.updateQueue=null,p.memoizedState=null)}var f=yv(o);if(f!==null){f.flags&=-257,vv(f,o,a,s,e),f.mode&1&&gv(s,h,e),e=f,l=h;var E=e.updateQueue;if(E===null){var k=new Set;k.add(l),e.updateQueue=k}else E.add(l);break e}else{if(!(e&1)){gv(s,h,e),Q1();break e}l=Error(Fe(426))}}else if(un&&a.mode&1){var P=yv(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),vv(P,o,a,s,e),P1(ec(l,a));break e}}s=l=ec(l,a),Hn!==4&&(Hn=2),mh===null?mh=[s]:mh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=ub(s,l,e);cv(s,w);break e;case 1:a=l;var _=s.type,T=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Sa===null||!Sa.has(T)))){s.flags|=65536,e&=-e,s.lanes|=e;var L=cb(s,a,e);cv(s,L);break e}}s=s.return}while(s!==null)}Pb(n)}catch(V){e=V,Fn===n&&n!==null&&(Fn=n=n.return);continue}break}while(!0)}function Ib(){var t=up.current;return up.current=lp,t===null?lp:t}function Q1(){(Hn===0||Hn===3||Hn===2)&&(Hn=4),Yn===null||!(Dl&268435455)&&!(Hp&268435455)||la(Yn,sr)}function dp(t,e){var n=Dt;Dt|=2;var r=Ib();(Yn!==t||sr!==e)&&(to=null,Nl(t,e));do try{TA();break}catch(i){Eb(t,i)}while(!0);if(k1(),Dt=n,up.current=r,Fn!==null)throw Error(Fe(261));return Yn=null,sr=0,Hn}function TA(){for(;Fn!==null;)Tb(Fn)}function PA(){for(;Fn!==null&&!eN();)Tb(Fn)}function Tb(t){var e=kb(t.alternate,t,li);t.memoizedProps=t.pendingProps,e===null?Pb(t):Fn=e,H1.current=null}function Pb(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=xA(n,e),n!==null){n.flags&=32767,Fn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Hn=6,Fn=null;return}}else if(n=bA(n,e,li),n!==null){Fn=n;return}if(e=e.sibling,e!==null){Fn=e;return}Fn=e=t}while(e!==null);Hn===0&&(Hn=5)}function gl(t,e,n){var r=Ht,i=Ci.transition;try{Ci.transition=null,Ht=1,CA(t,e,n,r)}finally{Ci.transition=i,Ht=r}return null}function CA(t,e,n,r){do Hu();while(ma!==null);if(Dt&6)throw Error(Fe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Fe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(cN(t,s),t===Yn&&(Fn=Yn=null,sr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||cf||(cf=!0,Lb(Gf,function(){return Hu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ci.transition,Ci.transition=null;var o=Ht;Ht=1;var a=Dt;Dt|=4,H1.current=null,NA(t,n),Sb(n,t),YN(n0),Qf=!!t0,n0=t0=null,t.current=n,AA(n),tN(),Dt=a,Ht=o,Ci.transition=s}else t.current=n;if(cf&&(cf=!1,ma=t,hp=i),s=t.pendingLanes,s===0&&(Sa=null),iN(n.stateNode),Jr(t,En()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(cp)throw cp=!1,t=x0,x0=null,t;return hp&1&&t.tag!==0&&Hu(),s=t.pendingLanes,s&1?t===S0?gh++:(gh=0,S0=t):gh=0,Ua(),null}function Hu(){if(ma!==null){var t=u_(hp),e=Ci.transition,n=Ht;try{if(Ci.transition=null,Ht=16>t?16:t,ma===null)var r=!1;else{if(t=ma,ma=null,hp=0,Dt&6)throw Error(Fe(331));var i=Dt;for(Dt|=4,Je=t.current;Je!==null;){var s=Je,o=s.child;if(Je.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var h=a[l];for(Je=h;Je!==null;){var p=Je;switch(p.tag){case 0:case 11:case 15:ph(8,p,s)}var g=p.child;if(g!==null)g.return=p,Je=g;else for(;Je!==null;){p=Je;var v=p.sibling,f=p.return;if(_b(p),p===h){Je=null;break}if(v!==null){v.return=f,Je=v;break}Je=f}}}var E=s.alternate;if(E!==null){var k=E.child;if(k!==null){E.child=null;do{var P=k.sibling;k.sibling=null,k=P}while(k!==null)}}Je=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Je=o;else e:for(;Je!==null;){if(s=Je,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ph(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,Je=w;break e}Je=s.return}}var _=t.current;for(Je=_;Je!==null;){o=Je;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,Je=T;else e:for(o=_;Je!==null;){if(a=Je,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:qp(9,a)}}catch(V){wn(a,a.return,V)}if(a===o){Je=null;break e}var L=a.sibling;if(L!==null){L.return=a.return,Je=L;break e}Je=a.return}}if(Dt=i,Ua(),Is&&typeof Is.onPostCommitFiberRoot=="function")try{Is.onPostCommitFiberRoot(jp,t)}catch{}r=!0}return r}finally{Ht=n,Ci.transition=e}}return!1}function kv(t,e,n){e=ec(n,e),e=ub(t,e,1),t=xa(t,e,1),e=Rr(),t!==null&&(rd(t,1,e),Jr(t,e))}function wn(t,e,n){if(t.tag===3)kv(t,t,n);else for(;e!==null;){if(e.tag===3){kv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Sa===null||!Sa.has(r))){t=ec(n,t),t=cb(e,t,1),e=xa(e,t,1),t=Rr(),e!==null&&(rd(e,1,t),Jr(e,t));break}}e=e.return}}function kA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Rr(),t.pingedLanes|=t.suspendedLanes&n,Yn===t&&(sr&n)===n&&(Hn===4||Hn===3&&(sr&130023424)===sr&&500>En()-$1?Nl(t,0):W1|=n),Jr(t,e)}function Cb(t,e){e===0&&(t.mode&1?(e=Zd,Zd<<=1,!(Zd&130023424)&&(Zd=4194304)):e=1);var n=Rr();t=go(t,e),t!==null&&(rd(t,e,n),Jr(t,n))}function LA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Cb(t,n)}function RA(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Fe(314))}r!==null&&r.delete(e),Cb(t,n)}var kb;kb=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Qr.current)Kr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Kr=!1,_A(t,e,n);Kr=!!(t.flags&131072)}else Kr=!1,un&&e.flags&1048576&&j_(e,np,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Cf(t,e),t=e.pendingProps;var i=Yu(e,Nr.current);qu(e,n),i=V1(null,e,r,t,i,n);var s=B1();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Yr(r)?(s=!0,ep(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,D1(e),i.updater=zp,e.stateNode=i,i._reactInternals=e,h0(e,r,t,n),e=p0(null,e,r,!0,s,n)):(e.tag=0,un&&s&&I1(e),Lr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Cf(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=jA(r),t=Ki(r,t),i){case 0:e=f0(null,e,r,t,n);break e;case 1:e=bv(null,e,r,t,n);break e;case 11:e=wv(null,e,r,t,n);break e;case 14:e=_v(null,e,r,Ki(r.type,t),n);break e}throw Error(Fe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ki(r,i),f0(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ki(r,i),bv(t,e,r,i,n);case 3:e:{if(pb(e),t===null)throw Error(Fe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,U_(t,e),sp(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ec(Error(Fe(423)),e),e=xv(t,e,r,n,i);break e}else if(r!==i){i=ec(Error(Fe(424)),e),e=xv(t,e,r,n,i);break e}else for(ui=ba(e.stateNode.containerInfo.firstChild),di=e,un=!0,Ji=null,n=V_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ju(),r===i){e=yo(t,e,n);break e}Lr(t,e,r,n)}e=e.child}return e;case 5:return z_(e),t===null&&l0(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,r0(r,i)?o=null:s!==null&&r0(r,s)&&(e.flags|=32),fb(t,e),Lr(t,e,o,n),e.child;case 6:return t===null&&l0(e),null;case 13:return mb(t,e,n);case 4:return j1(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Xu(e,null,r,n):Lr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ki(r,i),wv(t,e,r,i,n);case 7:return Lr(t,e,e.pendingProps,n),e.child;case 8:return Lr(t,e,e.pendingProps.children,n),e.child;case 12:return Lr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,en(rp,r._currentValue),r._currentValue=o,s!==null)if(es(s.value,o)){if(s.children===i.children&&!Qr.current){e=yo(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=lo(-1,n&-n),l.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?l.next=l:(l.next=p.next,p.next=l),h.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),u0(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Fe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),u0(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Lr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,qu(e,n),i=ki(i),r=r(i),e.flags|=1,Lr(t,e,r,n),e.child;case 14:return r=e.type,i=Ki(r,e.pendingProps),i=Ki(r.type,i),_v(t,e,r,i,n);case 15:return hb(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ki(r,i),Cf(t,e),e.tag=1,Yr(r)?(t=!0,ep(e)):t=!1,qu(e,n),lb(e,r,i),h0(e,r,i,n),p0(null,e,r,!0,t,n);case 19:return gb(t,e,n);case 22:return db(t,e,n)}throw Error(Fe(156,e.tag))};function Lb(t,e){return s_(t,e)}function DA(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pi(t,e,n,r){return new DA(t,e,n,r)}function Y1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function jA(t){if(typeof t=="function")return Y1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===m1)return 11;if(t===g1)return 14}return 2}function Aa(t,e){var n=t.alternate;return n===null?(n=Pi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Rf(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Y1(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Iu:return Al(n.children,i,s,e);case p1:o=8,i|=8;break;case jg:return t=Pi(12,n,e,i|2),t.elementType=jg,t.lanes=s,t;case Fg:return t=Pi(13,n,e,i),t.elementType=Fg,t.lanes=s,t;case Og:return t=Pi(19,n,e,i),t.elementType=Og,t.lanes=s,t;case zw:return Wp(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Bw:o=10;break e;case Uw:o=9;break e;case m1:o=11;break e;case g1:o=14;break e;case sa:o=16,r=null;break e}throw Error(Fe(130,t==null?t:typeof t,""))}return e=Pi(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Al(t,e,n,r){return t=Pi(7,t,r,e),t.lanes=n,t}function Wp(t,e,n,r){return t=Pi(22,t,r,e),t.elementType=zw,t.lanes=n,t.stateNode={isHidden:!1},t}function hg(t,e,n){return t=Pi(6,t,null,e),t.lanes=n,t}function dg(t,e,n){return e=Pi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function FA(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$m(0),this.expirationTimes=$m(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$m(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function J1(t,e,n,r,i,s,o,a,l){return t=new FA(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Pi(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},D1(s),t}function OA(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Eu,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Rb(t){if(!t)return Ra;t=t._reactInternals;e:{if(Hl(t)!==t||t.tag!==1)throw Error(Fe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Yr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Fe(171))}if(t.tag===1){var n=t.type;if(Yr(n))return R_(t,n,e)}return e}function Db(t,e,n,r,i,s,o,a,l){return t=J1(n,r,!0,t,i,s,o,a,l),t.context=Rb(null),n=t.current,r=Rr(),i=Na(n),s=lo(r,i),s.callback=e??null,xa(n,s,i),t.current.lanes=i,rd(t,i,r),Jr(t,r),t}function $p(t,e,n,r){var i=e.current,s=Rr(),o=Na(i);return n=Rb(n),e.context===null?e.context=n:e.pendingContext=n,e=lo(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=xa(i,e,o),t!==null&&(Zi(t,i,o,s),If(t,i,o)),o}function fp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Lv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function X1(t,e){Lv(t,e),(t=t.alternate)&&Lv(t,e)}function MA(){return null}var jb=typeof reportError=="function"?reportError:function(t){console.error(t)};function Z1(t){this._internalRoot=t}Gp.prototype.render=Z1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Fe(409));$p(t,e,null,null)};Gp.prototype.unmount=Z1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;jl(function(){$p(null,t,null,null)}),e[mo]=null}};function Gp(t){this._internalRoot=t}Gp.prototype.unstable_scheduleHydration=function(t){if(t){var e=d_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<aa.length&&e!==0&&e<aa[n].priority;n++);aa.splice(n,0,t),n===0&&p_(t)}};function e2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Kp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Rv(){}function VA(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=fp(o);s.call(h)}}var o=Db(e,r,t,0,null,!1,!1,"",Rv);return t._reactRootContainer=o,t[mo]=o.current,jh(t.nodeType===8?t.parentNode:t),jl(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var h=fp(l);a.call(h)}}var l=J1(t,0,!1,null,null,!1,!1,"",Rv);return t._reactRootContainer=l,t[mo]=l.current,jh(t.nodeType===8?t.parentNode:t),jl(function(){$p(e,l,n,r)}),l}function Qp(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=fp(o);a.call(l)}}$p(e,o,t,i)}else o=VA(n,e,t,i,r);return fp(o)}c_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=eh(e.pendingLanes);n!==0&&(w1(e,n|1),Jr(e,En()),!(Dt&6)&&(tc=En()+500,Ua()))}break;case 13:jl(function(){var r=go(t,1);if(r!==null){var i=Rr();Zi(r,t,1,i)}}),X1(t,1)}};_1=function(t){if(t.tag===13){var e=go(t,134217728);if(e!==null){var n=Rr();Zi(e,t,134217728,n)}X1(t,134217728)}};h_=function(t){if(t.tag===13){var e=Na(t),n=go(t,e);if(n!==null){var r=Rr();Zi(n,t,e,r)}X1(t,e)}};d_=function(){return Ht};f_=function(t,e){var n=Ht;try{return Ht=t,e()}finally{Ht=n}};Gg=function(t,e,n){switch(e){case"input":if(Bg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Vp(r);if(!i)throw Error(Fe(90));Hw(r),Bg(r,i)}}}break;case"textarea":$w(t,n);break;case"select":e=n.value,e!=null&&Vu(t,!!n.multiple,e,!1)}};Zw=G1;e_=jl;var BA={usingClientEntryPoint:!1,Events:[sd,ku,Vp,Jw,Xw,G1]},$c={findFiberByHostInstance:wl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},UA={bundleType:$c.bundleType,version:$c.version,rendererPackageName:$c.rendererPackageName,rendererConfig:$c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=r_(t),t===null?null:t.stateNode},findFiberByHostInstance:$c.findFiberByHostInstance||MA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hf.isDisabled&&hf.supportsFiber)try{jp=hf.inject(UA),Is=hf}catch{}}pi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BA;pi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e2(e))throw Error(Fe(200));return OA(t,e,null,n)};pi.createRoot=function(t,e){if(!e2(t))throw Error(Fe(299));var n=!1,r="",i=jb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=J1(t,1,!1,null,null,n,!1,r,i),t[mo]=e.current,jh(t.nodeType===8?t.parentNode:t),new Z1(e)};pi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Fe(188)):(t=Object.keys(t).join(","),Error(Fe(268,t)));return t=r_(e),t=t===null?null:t.stateNode,t};pi.flushSync=function(t){return jl(t)};pi.hydrate=function(t,e,n){if(!Kp(e))throw Error(Fe(200));return Qp(null,t,e,!0,n)};pi.hydrateRoot=function(t,e,n){if(!e2(t))throw Error(Fe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=jb;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Db(e,null,t,1,n??null,i,!1,s,o),t[mo]=e.current,jh(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Gp(e)};pi.render=function(t,e,n){if(!Kp(e))throw Error(Fe(200));return Qp(null,t,e,!1,n)};pi.unmountComponentAtNode=function(t){if(!Kp(t))throw Error(Fe(40));return t._reactRootContainer?(jl(function(){Qp(null,null,t,!1,function(){t._reactRootContainer=null,t[mo]=null})}),!0):!1};pi.unstable_batchedUpdates=G1;pi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Kp(n))throw Error(Fe(200));if(t==null||t._reactInternals===void 0)throw Error(Fe(38));return Qp(t,e,n,!1,r)};pi.version="18.3.1-next-f1338f8080-20240426";function Fb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Fb)}catch(t){console.error(t)}}Fb(),Fw.exports=pi;var zA=Fw.exports,Ob,Dv=zA;Ob=Dv.createRoot,Dv.hydrateRoot;var jv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},qA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Vb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,h=l?t[i+2]:0,p=s>>2,g=(s&3)<<4|a>>4;let v=(a&15)<<2|h>>6,f=h&63;l||(f=64,o||(v=64)),r.push(n[p],n[g],n[v],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Mb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):qA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||h==null||g==null)throw new HA;const v=s<<2|a>>4;if(r.push(v),h!==64){const f=a<<4&240|h>>2;if(r.push(f),g!==64){const E=h<<6&192|g;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class HA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WA=function(t){const e=Mb(t);return Vb.encodeByteArray(e,!0)},pp=function(t){return WA(t).replace(/\./g,"")},Bb=function(t){try{return Vb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA=()=>$A().__FIREBASE_DEFAULTS__,KA=()=>{if(typeof process>"u"||typeof jv>"u")return;const t=jv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},QA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Bb(t[1]);return e&&JSON.parse(e)},Yp=()=>{try{return GA()||KA()||QA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ub=t=>{var e,n;return(n=(e=Yp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},YA=t=>{const e=Ub(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},zb=()=>{var t;return(t=Yp())===null||t===void 0?void 0:t.config},qb=t=>{var e;return(e=Yp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[pp(JSON.stringify(n)),pp(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ar())}function eE(){var t;const e=(t=Yp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nE(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function rE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iE(){const t=Ar();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function sE(){return!eE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function oE(){try{return typeof indexedDB=="object"}catch{return!1}}function aE(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="FirebaseError";class So extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=lE,Object.setPrototypeOf(this,So.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ad.prototype.create)}}class ad{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?uE(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new So(i,a,r)}}function uE(t,e){return t.replace(cE,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const cE=/\{\$([^}]+)}/g;function hE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function mp(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Fv(s)&&Fv(o)){if(!mp(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Fv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function nh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function rh(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function dE(t,e){const n=new fE(t,e);return n.subscribe.bind(n)}class fE{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");pE(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=fg),i.error===void 0&&(i.error=fg),i.complete===void 0&&(i.complete=fg);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pE(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function fg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(t){return t&&t._delegate?t._delegate:t}class Fl{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new JA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yE(e))try{this.getOrInitializeService({instanceIdentifier:yl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=yl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=yl){return this.instances.has(e)}getOptions(e=yl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:gE(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=yl){return this.component?this.component.multipleInstances?e:yl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gE(t){return t===yl?void 0:t}function yE(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new mE(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Tt||(Tt={}));const wE={debug:Tt.DEBUG,verbose:Tt.VERBOSE,info:Tt.INFO,warn:Tt.WARN,error:Tt.ERROR,silent:Tt.SILENT},_E=Tt.INFO,bE={[Tt.DEBUG]:"log",[Tt.VERBOSE]:"log",[Tt.INFO]:"info",[Tt.WARN]:"warn",[Tt.ERROR]:"error"},xE=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=bE[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class t2{constructor(e){this.name=e,this._logLevel=_E,this._logHandler=xE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Tt.DEBUG,...e),this._logHandler(this,Tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Tt.VERBOSE,...e),this._logHandler(this,Tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Tt.INFO,...e),this._logHandler(this,Tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Tt.WARN,...e),this._logHandler(this,Tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Tt.ERROR,...e),this._logHandler(this,Tt.ERROR,...e)}}const SE=(t,e)=>e.some(n=>t instanceof n);let Ov,Mv;function NE(){return Ov||(Ov=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AE(){return Mv||(Mv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Hb=new WeakMap,E0=new WeakMap,Wb=new WeakMap,pg=new WeakMap,n2=new WeakMap;function EE(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ea(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Hb.set(n,t)}).catch(()=>{}),n2.set(e,t),e}function IE(t){if(E0.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});E0.set(t,e)}let I0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return E0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Wb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ea(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function TE(t){I0=t(I0)}function PE(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(mg(this),e,...n);return Wb.set(r,e.sort?e.sort():[e]),Ea(r)}:AE().includes(t)?function(...e){return t.apply(mg(this),e),Ea(Hb.get(this))}:function(...e){return Ea(t.apply(mg(this),e))}}function CE(t){return typeof t=="function"?PE(t):(t instanceof IDBTransaction&&IE(t),SE(t,NE())?new Proxy(t,I0):t)}function Ea(t){if(t instanceof IDBRequest)return EE(t);if(pg.has(t))return pg.get(t);const e=CE(t);return e!==t&&(pg.set(t,e),n2.set(e,t)),e}const mg=t=>n2.get(t);function kE(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Ea(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ea(o.result),l.oldVersion,l.newVersion,Ea(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),a}const LE=["get","getKey","getAll","getAllKeys","count"],RE=["put","add","delete","clear"],gg=new Map;function Vv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gg.get(e))return gg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=RE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||LE.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let h=l.store;return r&&(h=h.index(a.shift())),(await Promise.all([h[n](...a),i&&l.done]))[0]};return gg.set(e,s),s}TE(t=>({...t,get:(e,n,r)=>Vv(e,n)||t.get(e,n,r),has:(e,n)=>!!Vv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(jE(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function jE(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const T0="@firebase/app",Bv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo=new t2("@firebase/app"),FE="@firebase/app-compat",OE="@firebase/analytics-compat",ME="@firebase/analytics",VE="@firebase/app-check-compat",BE="@firebase/app-check",UE="@firebase/auth",zE="@firebase/auth-compat",qE="@firebase/database",HE="@firebase/data-connect",WE="@firebase/database-compat",$E="@firebase/functions",GE="@firebase/functions-compat",KE="@firebase/installations",QE="@firebase/installations-compat",YE="@firebase/messaging",JE="@firebase/messaging-compat",XE="@firebase/performance",ZE="@firebase/performance-compat",eI="@firebase/remote-config",tI="@firebase/remote-config-compat",nI="@firebase/storage",rI="@firebase/storage-compat",iI="@firebase/firestore",sI="@firebase/vertexai-preview",oI="@firebase/firestore-compat",aI="firebase",lI="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="[DEFAULT]",uI={[T0]:"fire-core",[FE]:"fire-core-compat",[ME]:"fire-analytics",[OE]:"fire-analytics-compat",[BE]:"fire-app-check",[VE]:"fire-app-check-compat",[UE]:"fire-auth",[zE]:"fire-auth-compat",[qE]:"fire-rtdb",[HE]:"fire-data-connect",[WE]:"fire-rtdb-compat",[$E]:"fire-fn",[GE]:"fire-fn-compat",[KE]:"fire-iid",[QE]:"fire-iid-compat",[YE]:"fire-fcm",[JE]:"fire-fcm-compat",[XE]:"fire-perf",[ZE]:"fire-perf-compat",[eI]:"fire-rc",[tI]:"fire-rc-compat",[nI]:"fire-gcs",[rI]:"fire-gcs-compat",[iI]:"fire-fst",[oI]:"fire-fst-compat",[sI]:"fire-vertex","fire-js":"fire-js",[aI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp=new Map,cI=new Map,C0=new Map;function Uv(t,e){try{t.container.addComponent(e)}catch(n){vo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function nc(t){const e=t.name;if(C0.has(e))return vo.debug(`There were multiple attempts to register component ${e}.`),!1;C0.set(e,t);for(const n of gp.values())Uv(n,t);for(const n of cI.values())Uv(n,t);return!0}function r2(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function As(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ia=new ad("app","Firebase",hI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ia.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pc=lI;function $b(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:P0,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ia.create("bad-app-name",{appName:String(i)});if(n||(n=zb()),!n)throw Ia.create("no-options");const s=gp.get(i);if(s){if(mp(n,s.options)&&mp(r,s.config))return s;throw Ia.create("duplicate-app",{appName:i})}const o=new vE(i);for(const l of C0.values())o.addComponent(l);const a=new dI(n,r,o);return gp.set(i,a),a}function Gb(t=P0){const e=gp.get(t);if(!e&&t===P0&&zb())return $b();if(!e)throw Ia.create("no-app",{appName:t});return e}function Ta(t,e,n){var r;let i=(r=uI[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vo.warn(a.join(" "));return}nc(new Fl(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI="firebase-heartbeat-database",pI=1,Hh="firebase-heartbeat-store";let yg=null;function Kb(){return yg||(yg=kE(fI,pI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hh)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ia.create("idb-open",{originalErrorMessage:t.message})})),yg}async function mI(t){try{const n=(await Kb()).transaction(Hh),r=await n.objectStore(Hh).get(Qb(t));return await n.done,r}catch(e){if(e instanceof So)vo.warn(e.message);else{const n=Ia.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});vo.warn(n.message)}}}async function zv(t,e){try{const r=(await Kb()).transaction(Hh,"readwrite");await r.objectStore(Hh).put(e,Qb(t)),await r.done}catch(n){if(n instanceof So)vo.warn(n.message);else{const r=Ia.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});vo.warn(r.message)}}}function Qb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=1024,yI=30*24*60*60*1e3;class vI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _I(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=qv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=yI}),this._storage.overwrite(this._heartbeatsCache))}catch(r){vo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=qv(),{heartbeatsToSend:r,unsentEntries:i}=wI(this._heartbeatsCache.heartbeats),s=pp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return vo.warn(n),""}}}function qv(){return new Date().toISOString().substring(0,10)}function wI(t,e=gI){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Hv(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Hv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class _I{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oE()?aE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await mI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return zv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return zv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Hv(t){return pp(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(t){nc(new Fl("platform-logger",e=>new DE(e),"PRIVATE")),nc(new Fl("heartbeat",e=>new vI(e),"PRIVATE")),Ta(T0,Bv,t),Ta(T0,Bv,"esm2017"),Ta("fire-js","")}bI("");function i2(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Yb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xI=Yb,Jb=new ad("auth","Firebase",Yb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp=new t2("@firebase/auth");function SI(t,...e){yp.logLevel<=Tt.WARN&&yp.warn(`Auth (${pc}): ${t}`,...e)}function Df(t,...e){yp.logLevel<=Tt.ERROR&&yp.error(`Auth (${pc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(t,...e){throw s2(t,...e)}function Ps(t,...e){return s2(t,...e)}function Xb(t,e,n){const r=Object.assign(Object.assign({},xI()),{[e]:n});return new ad("auth","Firebase",r).create(e,{appName:t.name})}function uo(t){return Xb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function s2(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Jb.create(t,...e)}function pt(t,e,...n){if(!t)throw s2(e,...n)}function so(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Df(e),new Error(e)}function wo(t,e){t||so(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function NI(){return Wv()==="http:"||Wv()==="https:"}function Wv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NI()||nE()||"connection"in navigator)?navigator.onLine:!0}function EI(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,n){this.shortDelay=e,this.longDelay=n,wo(n>e,"Short delay should be less than long delay!"),this.isMobile=ZA()||rE()}get(){return AI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(t,e){wo(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;so("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;so("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;so("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI=new ud(3e4,6e4);function No(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ao(t,e,n,r,i={}){return ex(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=ld(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:l},s);return tE()||(h.referrerPolicy="no-referrer"),Zb.fetch()(tx(t,t.config.apiHost,n,a),h)})}async function ex(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},II),e);try{const i=new CI(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw df(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,h]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw df(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw df(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw df(t,"user-disabled",o);const p=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Xb(t,p,h);ts(t,p)}}catch(i){if(i instanceof So)throw i;ts(t,"network-request-failed",{message:String(i)})}}async function cd(t,e,n,r,i={}){const s=await Ao(t,e,n,r,i);return"mfaPendingCredential"in s&&ts(t,"multi-factor-auth-required",{_serverResponse:s}),s}function tx(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?o2(t.config,i):`${t.config.apiScheme}://${i}`}function PI(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class CI{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ps(this.auth,"network-request-failed")),TI.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function df(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ps(t,e,r);return i.customData._tokenResponse=n,i}function $v(t){return t!==void 0&&t.enterprise!==void 0}class kI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return PI(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function LI(t,e){return Ao(t,"GET","/v2/recaptchaConfig",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RI(t,e){return Ao(t,"POST","/v1/accounts:delete",e)}async function nx(t,e){return Ao(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function DI(t,e=!1){const n=Vn(t),r=await n.getIdToken(e),i=a2(r);pt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:yh(vg(i.auth_time)),issuedAtTime:yh(vg(i.iat)),expirationTime:yh(vg(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function vg(t){return Number(t)*1e3}function a2(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Df("JWT malformed, contained fewer than 3 sections"),null;try{const i=Bb(n);return i?JSON.parse(i):(Df("Failed to decode base64 JWT payload"),null)}catch(i){return Df("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Gv(t){const e=a2(t);return pt(e,"internal-error"),pt(typeof e.exp<"u","internal-error"),pt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wh(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof So&&jI(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function jI({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=yh(this.lastLoginAt),this.creationTime=yh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vp(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Wh(t,nx(n,{idToken:r}));pt(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?rx(s.providerUserInfo):[],a=MI(t.providerData,o),l=t.isAnonymous,h=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),p=l?h:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new L0(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,g)}async function OI(t){const e=Vn(t);await vp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function MI(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function rx(t){return t.map(e=>{var{providerId:n}=e,r=i2(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VI(t,e){const n=await ex(t,{},async()=>{const r=ld({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=tx(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Zb.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function BI(t,e){return Ao(t,"POST","/v2/accounts:revokeToken",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pt(e.idToken,"internal-error"),pt(typeof e.idToken<"u","internal-error"),pt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Gv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){pt(e.length!==0,"internal-error");const n=Gv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(pt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await VI(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Wu;return r&&(pt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(pt(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(pt(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wu,this.toJSON())}_performRefresh(){return so("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(t,e){pt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class oo{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=i2(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new FI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new L0(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Wh(this,this.stsTokenManager.getToken(this.auth,e));return pt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return DI(this,e)}reload(){return OI(this)}_assign(e){this!==e&&(pt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new oo(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){pt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await vp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(As(this.auth.app))return Promise.reject(uo(this.auth));const e=await this.getIdToken();return await Wh(this,RI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,h,p;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,v=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,k=(a=n.tenantId)!==null&&a!==void 0?a:void 0,P=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(h=n.createdAt)!==null&&h!==void 0?h:void 0,_=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:T,emailVerified:L,isAnonymous:V,providerData:W,stsTokenManager:I}=n;pt(T&&I,e,"internal-error");const x=Wu.fromJSON(this.name,I);pt(typeof T=="string",e,"internal-error"),na(g,e.name),na(v,e.name),pt(typeof L=="boolean",e,"internal-error"),pt(typeof V=="boolean",e,"internal-error"),na(f,e.name),na(E,e.name),na(k,e.name),na(P,e.name),na(w,e.name),na(_,e.name);const C=new oo({uid:T,auth:e,email:v,emailVerified:L,displayName:g,isAnonymous:V,photoURL:E,phoneNumber:f,tenantId:k,stsTokenManager:x,createdAt:w,lastLoginAt:_});return W&&Array.isArray(W)&&(C.providerData=W.map(j=>Object.assign({},j))),P&&(C._redirectEventId=P),C}static async _fromIdTokenResponse(e,n,r=!1){const i=new Wu;i.updateFromServerResponse(n);const s=new oo({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await vp(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];pt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?rx(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Wu;a.updateFromIdToken(r);const l=new oo({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new L0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,h),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv=new Map;function ao(t){wo(t instanceof Function,"Expected a class definition");let e=Kv.get(t);return e?(wo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Kv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ix.type="NONE";const Qv=ix;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(t,e,n){return`firebase:${t}:${e}:${n}`}class $u{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=jf(this.userKey,i.apiKey,s),this.fullPersistenceKey=jf("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?oo._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new $u(ao(Qv),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||ao(Qv);const o=jf(r,e.config.apiKey,e.name);let a=null;for(const h of n)try{const p=await h._get(o);if(p){const g=oo._fromJSON(e,p);h!==s&&(a=g),s=h;break}}catch{}const l=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new $u(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(o)}catch{}})),new $u(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cx(e))return"Blackberry";if(hx(e))return"Webos";if(ox(e))return"Safari";if((e.includes("chrome/")||ax(e))&&!e.includes("edge/"))return"Chrome";if(ux(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function sx(t=Ar()){return/firefox\//i.test(t)}function ox(t=Ar()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ax(t=Ar()){return/crios\//i.test(t)}function lx(t=Ar()){return/iemobile/i.test(t)}function ux(t=Ar()){return/android/i.test(t)}function cx(t=Ar()){return/blackberry/i.test(t)}function hx(t=Ar()){return/webos/i.test(t)}function l2(t=Ar()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function UI(t=Ar()){var e;return l2(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function zI(){return iE()&&document.documentMode===10}function dx(t=Ar()){return l2(t)||ux(t)||hx(t)||cx(t)||/windows phone/i.test(t)||lx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(t,e=[]){let n;switch(t){case"Browser":n=Yv(Ar());break;case"Worker":n=`${Yv(Ar())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${pc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HI(t,e={}){return Ao(t,"GET","/v2/passwordPolicy",No(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI=6;class $I{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:WI,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jv(this),this.idTokenSubscription=new Jv(this),this.beforeStateQueue=new qI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ao(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await $u.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await nx(this,{idToken:e}),r=await oo._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(As(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return pt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await vp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=EI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(As(this.app))return Promise.reject(uo(this));const n=e?Vn(e):null;return n&&pt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&pt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return As(this.app)?Promise.reject(uo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return As(this.app)?Promise.reject(uo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ao(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await HI(this),n=new $I(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ad("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await BI(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ao(e)||this._popupRedirectResolver;pt(n,this,"argument-error"),this.redirectPersistenceManager=await $u.create(this,[ao(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(pt(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&SI(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function za(t){return Vn(t)}class Jv{constructor(e){this.auth=e,this.observer=null,this.addObserver=dE(n=>this.observer=n)}get next(){return pt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KI(t){Jp=t}function px(t){return Jp.loadJS(t)}function QI(){return Jp.recaptchaEnterpriseScript}function YI(){return Jp.gapiScript}function JI(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const XI="recaptcha-enterprise",ZI="NO_RECAPTCHA";class eT{constructor(e){this.type=XI,this.auth=za(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{LI(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const h=new kI(l);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,o(h.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;$v(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(h=>{o(h)}).catch(()=>{o(ZI)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&$v(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=QI();l.length!==0&&(l+=a),px(l).then(()=>{i(a,s,o)}).catch(h=>{o(h)})}}).catch(a=>{o(a)})})}}async function Xv(t,e,n,r=!1){const i=new eT(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function wp(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Xv(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Xv(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(t,e){const n=r2(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(mp(s,e??{}))return i;ts(i,"already-initialized")}return n.initialize({options:e})}function nT(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ao);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function rT(t,e,n){const r=za(t);pt(r._canInitEmulator,r,"emulator-config-failed"),pt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=mx(e),{host:o,port:a}=iT(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),sT()}function mx(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function iT(t){const e=mx(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Zv(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Zv(o)}}}function Zv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function sT(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return so("not implemented")}_getIdTokenResponse(e){return so("not implemented")}_linkToIdToken(e,n){return so("not implemented")}_getReauthenticationResolver(e){return so("not implemented")}}async function oT(t,e){return Ao(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aT(t,e){return cd(t,"POST","/v1/accounts:signInWithPassword",No(t,e))}async function lT(t,e){return Ao(t,"POST","/v1/accounts:sendOobCode",No(t,e))}async function uT(t,e){return lT(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cT(t,e){return cd(t,"POST","/v1/accounts:signInWithEmailLink",No(t,e))}async function hT(t,e){return cd(t,"POST","/v1/accounts:signInWithEmailLink",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h extends u2{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new $h(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new $h(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wp(e,n,"signInWithPassword",aT);case"emailLink":return cT(e,{email:this._email,oobCode:this._password});default:ts(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wp(e,r,"signUpPassword",oT);case"emailLink":return hT(e,{idToken:n,email:this._email,oobCode:this._password});default:ts(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gu(t,e){return cd(t,"POST","/v1/accounts:signInWithIdp",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT="http://localhost";class Ol extends u2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ol(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ts("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=i2(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ol(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Gu(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Gu(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Gu(e,n)}buildRequest(){const e={requestUri:dT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ld(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function pT(t){const e=nh(rh(t)).link,n=e?nh(rh(e)).deep_link_id:null,r=nh(rh(t)).deep_link_id;return(r?nh(rh(r)).link:null)||r||n||e||t}class c2{constructor(e){var n,r,i,s,o,a;const l=nh(rh(e)),h=(n=l.apiKey)!==null&&n!==void 0?n:null,p=(r=l.oobCode)!==null&&r!==void 0?r:null,g=fT((i=l.mode)!==null&&i!==void 0?i:null);pt(h&&p&&g,"argument-error"),this.apiKey=h,this.operation=g,this.code=p,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=pT(e);try{return new c2(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(){this.providerId=mc.PROVIDER_ID}static credential(e,n){return $h._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=c2.parseLink(n);return pt(r,"argument-error"),$h._fromEmailAndCode(e,r.code,r.tenantId)}}mc.PROVIDER_ID="password";mc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";mc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd extends gx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua extends hd{constructor(){super("facebook.com")}static credential(e){return Ol._fromParams({providerId:ua.PROVIDER_ID,signInMethod:ua.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ua.credentialFromTaggedObject(e)}static credentialFromError(e){return ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ua.credential(e.oauthAccessToken)}catch{return null}}}ua.FACEBOOK_SIGN_IN_METHOD="facebook.com";ua.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca extends hd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ol._fromParams({providerId:ca.PROVIDER_ID,signInMethod:ca.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ca.credentialFromTaggedObject(e)}static credentialFromError(e){return ca.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ca.credential(n,r)}catch{return null}}}ca.GOOGLE_SIGN_IN_METHOD="google.com";ca.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha extends hd{constructor(){super("github.com")}static credential(e){return Ol._fromParams({providerId:ha.PROVIDER_ID,signInMethod:ha.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ha.credentialFromTaggedObject(e)}static credentialFromError(e){return ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ha.credential(e.oauthAccessToken)}catch{return null}}}ha.GITHUB_SIGN_IN_METHOD="github.com";ha.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da extends hd{constructor(){super("twitter.com")}static credential(e,n){return Ol._fromParams({providerId:da.PROVIDER_ID,signInMethod:da.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return da.credentialFromTaggedObject(e)}static credentialFromError(e){return da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return da.credential(n,r)}catch{return null}}}da.TWITTER_SIGN_IN_METHOD="twitter.com";da.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mT(t,e){return cd(t,"POST","/v1/accounts:signUp",No(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await oo._fromIdTokenResponse(e,r,i),o=e5(r);return new Ml({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=e5(r);return new Ml({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function e5(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p extends So{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,_p.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new _p(e,n,r,i)}}function yx(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?_p._fromErrorAndOperation(t,s,e,r):s})}async function gT(t,e,n=!1){const r=await Wh(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ml._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yT(t,e,n=!1){const{auth:r}=t;if(As(r.app))return Promise.reject(uo(r));const i="reauthenticate";try{const s=await Wh(t,yx(r,i,e,t),n);pt(s.idToken,r,"internal-error");const o=a2(s.idToken);pt(o,r,"internal-error");const{sub:a}=o;return pt(t.uid===a,r,"user-mismatch"),Ml._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ts(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vx(t,e,n=!1){if(As(t.app))return Promise.reject(uo(t));const r="signIn",i=await yx(t,r,e),s=await Ml._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function vT(t,e){return vx(za(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wx(t){const e=za(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function wT(t,e,n){const r=za(t);await wp(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",uT)}async function _T(t,e,n){if(As(t.app))return Promise.reject(uo(t));const r=za(t),o=await wp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",mT).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&wx(t),l}),a=await Ml._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function bT(t,e,n){return As(t.app)?Promise.reject(uo(t)):vT(Vn(t),mc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&wx(t),r})}function xT(t,e,n,r){return Vn(t).onIdTokenChanged(e,n,r)}function ST(t,e,n){return Vn(t).beforeAuthStateChanged(e,n)}function NT(t,e,n,r){return Vn(t).onAuthStateChanged(e,n,r)}function AT(t){return Vn(t).signOut()}const bp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(bp,"1"),this.storage.removeItem(bp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET=1e3,IT=10;class bx extends _x{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);zI()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,IT):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},ET)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}bx.type="LOCAL";const TT=bx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx extends _x{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}xx.type="SESSION";const Sx=xx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Xp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async h=>h(n.origin,s)),l=await PT(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const h=h2("",20);i.port1.start();const p=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){const v=g;if(v.data.eventId===h)switch(v.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(v.data.response);break;default:clearTimeout(p),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(){return window}function kT(t){Cs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(){return typeof Cs().WorkerGlobalScope<"u"&&typeof Cs().importScripts=="function"}async function LT(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function RT(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function DT(){return Nx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax="firebaseLocalStorageDb",jT=1,xp="firebaseLocalStorage",Ex="fbase_key";class dd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Zp(t,e){return t.transaction([xp],e?"readwrite":"readonly").objectStore(xp)}function FT(){const t=indexedDB.deleteDatabase(Ax);return new dd(t).toPromise()}function R0(){const t=indexedDB.open(Ax,jT);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(xp,{keyPath:Ex})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(xp)?e(r):(r.close(),await FT(),e(await R0()))})})}async function t5(t,e,n){const r=Zp(t,!0).put({[Ex]:e,value:n});return new dd(r).toPromise()}async function OT(t,e){const n=Zp(t,!1).get(e),r=await new dd(n).toPromise();return r===void 0?null:r.value}function n5(t,e){const n=Zp(t,!0).delete(e);return new dd(n).toPromise()}const MT=800,VT=3;class Ix{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await R0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>VT)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Nx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xp._getInstance(DT()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await LT(),!this.activeServiceWorker)return;this.sender=new CT(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||RT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await R0();return await t5(e,bp,"1"),await n5(e,bp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>t5(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>OT(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>n5(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Zp(i,!1).getAll();return new dd(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),MT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ix.type="LOCAL";const BT=Ix;new ud(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(t,e){return e?ao(e):(pt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2 extends u2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Gu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Gu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function zT(t){return vx(t.auth,new d2(t),t.bypassAuthState)}function qT(t){const{auth:e,user:n}=t;return pt(n,e,"internal-error"),yT(n,new d2(t),t.bypassAuthState)}async function HT(t){const{auth:e,user:n}=t;return pt(n,e,"internal-error"),gT(n,new d2(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zT;case"linkViaPopup":case"linkViaRedirect":return HT;case"reauthViaPopup":case"reauthViaRedirect":return qT;default:ts(this.auth,"internal-error")}}resolve(e){wo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT=new ud(2e3,1e4);class Mu extends Tx{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Mu.currentPopupAction&&Mu.currentPopupAction.cancel(),Mu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pt(e,this.auth,"internal-error"),e}async onExecution(){wo(this.filter.length===1,"Popup operations only handle one event");const e=h2();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ps(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ps(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Mu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ps(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,WT.get())};e()}}Mu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T="pendingRedirect",Ff=new Map;class GT extends Tx{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ff.get(this.auth._key());if(!e){try{const r=await KT(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ff.set(this.auth._key(),e)}return this.bypassAuthState||Ff.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function KT(t,e){const n=JT(e),r=YT(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function QT(t,e){Ff.set(t._key(),e)}function YT(t){return ao(t._redirectPersistence)}function JT(t){return jf($T,t.config.apiKey,t.name)}async function XT(t,e,n=!1){if(As(t.app))return Promise.reject(uo(t));const r=za(t),i=UT(r,e),o=await new GT(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT=10*60*1e3;class e6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!t6(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Px(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ps(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ZT&&this.cachedEventUids.clear(),this.cachedEventUids.has(r5(e))}saveEventToCache(e){this.cachedEventUids.add(r5(e)),this.lastProcessedEventTime=Date.now()}}function r5(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Px({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function t6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Px(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n6(t,e={}){return Ao(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,i6=/^https?/;async function s6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await n6(t);for(const n of e)try{if(o6(n))return}catch{}ts(t,"unauthorized-domain")}function o6(t){const e=k0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!i6.test(n))return!1;if(r6.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6=new ud(3e4,6e4);function i5(){const t=Cs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function l6(t){return new Promise((e,n)=>{var r,i,s;function o(){i5(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{i5(),n(Ps(t,"network-request-failed"))},timeout:a6.get()})}if(!((i=(r=Cs().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Cs().gapi)===null||s===void 0)&&s.load)o();else{const a=JI("iframefcb");return Cs()[a]=()=>{gapi.load?o():n(Ps(t,"network-request-failed"))},px(`${YI()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Of=null,e})}let Of=null;function u6(t){return Of=Of||l6(t),Of}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6=new ud(5e3,15e3),h6="__/auth/iframe",d6="emulator/auth/iframe",f6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},p6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function m6(t){const e=t.config;pt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?o2(e,d6):`https://${t.config.authDomain}/${h6}`,r={apiKey:e.apiKey,appName:t.name,v:pc},i=p6.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ld(r).slice(1)}`}async function g6(t){const e=await u6(t),n=Cs().gapi;return pt(n,t,"internal-error"),e.open({where:document.body,url:m6(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:f6,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Ps(t,"network-request-failed"),a=Cs().setTimeout(()=>{s(o)},c6.get());function l(){Cs().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},v6=500,w6=600,_6="_blank",b6="http://localhost";class s5{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function x6(t,e,n,r=v6,i=w6){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},y6),{width:r.toString(),height:i.toString(),top:s,left:o}),h=Ar().toLowerCase();n&&(a=ax(h)?_6:n),sx(h)&&(e=e||b6,l.scrollbars="yes");const p=Object.entries(l).reduce((v,[f,E])=>`${v}${f}=${E},`,"");if(UI(h)&&a!=="_self")return S6(e||"",a),new s5(null);const g=window.open(e||"",a,p);pt(g,t,"popup-blocked");try{g.focus()}catch{}return new s5(g)}function S6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N6="__/auth/handler",A6="emulator/auth/handler",E6=encodeURIComponent("fac");async function o5(t,e,n,r,i,s){pt(t.config.authDomain,t,"auth-domain-config-required"),pt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:pc,eventId:i};if(e instanceof gx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",hE(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))o[p]=g}if(e instanceof hd){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const p of Object.keys(a))a[p]===void 0&&delete a[p];const l=await t._getAppCheckToken(),h=l?`#${E6}=${encodeURIComponent(l)}`:"";return`${I6(t)}?${ld(a).slice(1)}${h}`}function I6({config:t}){return t.emulator?o2(t,A6):`https://${t.authDomain}/${N6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg="webStorageSupport";class T6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Sx,this._completeRedirectFn=XT,this._overrideRedirectResult=QT}async _openPopup(e,n,r,i){var s;wo((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await o5(e,n,r,k0(),i);return x6(e,o,h2())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await o5(e,n,r,k0(),i);return kT(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(wo(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await g6(e),r=new e6(e);return n.register("authEvent",i=>(pt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(wg,{type:wg},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[wg];o!==void 0&&n(!!o),ts(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=s6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return dx()||ox()||l2()}}const P6=T6;var a5="@firebase/auth",l5="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){pt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function L6(t){nc(new Fl("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;pt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fx(t)},h=new GI(r,i,s,l);return nT(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),nc(new Fl("auth-internal",e=>{const n=za(e.getProvider("auth").getImmediate());return(r=>new C6(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ta(a5,l5,k6(t)),Ta(a5,l5,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6=5*60,D6=qb("authIdTokenMaxAge")||R6;let u5=null;const j6=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>D6)return;const i=n==null?void 0:n.token;u5!==i&&(u5=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function F6(t=Gb()){const e=r2(t,"auth");if(e.isInitialized())return e.getImmediate();const n=tT(t,{popupRedirectResolver:P6,persistence:[BT,TT,Sx]}),r=qb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=j6(s.toString());ST(n,o,()=>o(n.currentUser)),xT(n,a=>o(a))}}const i=Ub("auth");return i&&rT(n,`http://${i}`),n}function O6(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}KI({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Ps("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",O6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});L6("Browser");var M6="firebase",V6="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ta(M6,V6,"app");var c5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var El,Cx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,x){function C(){}C.prototype=x.prototype,I.D=x.prototype,I.prototype=new C,I.prototype.constructor=I,I.C=function(j,N,A){for(var D=Array(arguments.length-2),J=2;J<arguments.length;J++)D[J-2]=arguments[J];return x.prototype[N].apply(j,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,x,C){C||(C=0);var j=Array(16);if(typeof x=="string")for(var N=0;16>N;++N)j[N]=x.charCodeAt(C++)|x.charCodeAt(C++)<<8|x.charCodeAt(C++)<<16|x.charCodeAt(C++)<<24;else for(N=0;16>N;++N)j[N]=x[C++]|x[C++]<<8|x[C++]<<16|x[C++]<<24;x=I.g[0],C=I.g[1],N=I.g[2];var A=I.g[3],D=x+(A^C&(N^A))+j[0]+3614090360&4294967295;x=C+(D<<7&4294967295|D>>>25),D=A+(N^x&(C^N))+j[1]+3905402710&4294967295,A=x+(D<<12&4294967295|D>>>20),D=N+(C^A&(x^C))+j[2]+606105819&4294967295,N=A+(D<<17&4294967295|D>>>15),D=C+(x^N&(A^x))+j[3]+3250441966&4294967295,C=N+(D<<22&4294967295|D>>>10),D=x+(A^C&(N^A))+j[4]+4118548399&4294967295,x=C+(D<<7&4294967295|D>>>25),D=A+(N^x&(C^N))+j[5]+1200080426&4294967295,A=x+(D<<12&4294967295|D>>>20),D=N+(C^A&(x^C))+j[6]+2821735955&4294967295,N=A+(D<<17&4294967295|D>>>15),D=C+(x^N&(A^x))+j[7]+4249261313&4294967295,C=N+(D<<22&4294967295|D>>>10),D=x+(A^C&(N^A))+j[8]+1770035416&4294967295,x=C+(D<<7&4294967295|D>>>25),D=A+(N^x&(C^N))+j[9]+2336552879&4294967295,A=x+(D<<12&4294967295|D>>>20),D=N+(C^A&(x^C))+j[10]+4294925233&4294967295,N=A+(D<<17&4294967295|D>>>15),D=C+(x^N&(A^x))+j[11]+2304563134&4294967295,C=N+(D<<22&4294967295|D>>>10),D=x+(A^C&(N^A))+j[12]+1804603682&4294967295,x=C+(D<<7&4294967295|D>>>25),D=A+(N^x&(C^N))+j[13]+4254626195&4294967295,A=x+(D<<12&4294967295|D>>>20),D=N+(C^A&(x^C))+j[14]+2792965006&4294967295,N=A+(D<<17&4294967295|D>>>15),D=C+(x^N&(A^x))+j[15]+1236535329&4294967295,C=N+(D<<22&4294967295|D>>>10),D=x+(N^A&(C^N))+j[1]+4129170786&4294967295,x=C+(D<<5&4294967295|D>>>27),D=A+(C^N&(x^C))+j[6]+3225465664&4294967295,A=x+(D<<9&4294967295|D>>>23),D=N+(x^C&(A^x))+j[11]+643717713&4294967295,N=A+(D<<14&4294967295|D>>>18),D=C+(A^x&(N^A))+j[0]+3921069994&4294967295,C=N+(D<<20&4294967295|D>>>12),D=x+(N^A&(C^N))+j[5]+3593408605&4294967295,x=C+(D<<5&4294967295|D>>>27),D=A+(C^N&(x^C))+j[10]+38016083&4294967295,A=x+(D<<9&4294967295|D>>>23),D=N+(x^C&(A^x))+j[15]+3634488961&4294967295,N=A+(D<<14&4294967295|D>>>18),D=C+(A^x&(N^A))+j[4]+3889429448&4294967295,C=N+(D<<20&4294967295|D>>>12),D=x+(N^A&(C^N))+j[9]+568446438&4294967295,x=C+(D<<5&4294967295|D>>>27),D=A+(C^N&(x^C))+j[14]+3275163606&4294967295,A=x+(D<<9&4294967295|D>>>23),D=N+(x^C&(A^x))+j[3]+4107603335&4294967295,N=A+(D<<14&4294967295|D>>>18),D=C+(A^x&(N^A))+j[8]+1163531501&4294967295,C=N+(D<<20&4294967295|D>>>12),D=x+(N^A&(C^N))+j[13]+2850285829&4294967295,x=C+(D<<5&4294967295|D>>>27),D=A+(C^N&(x^C))+j[2]+4243563512&4294967295,A=x+(D<<9&4294967295|D>>>23),D=N+(x^C&(A^x))+j[7]+1735328473&4294967295,N=A+(D<<14&4294967295|D>>>18),D=C+(A^x&(N^A))+j[12]+2368359562&4294967295,C=N+(D<<20&4294967295|D>>>12),D=x+(C^N^A)+j[5]+4294588738&4294967295,x=C+(D<<4&4294967295|D>>>28),D=A+(x^C^N)+j[8]+2272392833&4294967295,A=x+(D<<11&4294967295|D>>>21),D=N+(A^x^C)+j[11]+1839030562&4294967295,N=A+(D<<16&4294967295|D>>>16),D=C+(N^A^x)+j[14]+4259657740&4294967295,C=N+(D<<23&4294967295|D>>>9),D=x+(C^N^A)+j[1]+2763975236&4294967295,x=C+(D<<4&4294967295|D>>>28),D=A+(x^C^N)+j[4]+1272893353&4294967295,A=x+(D<<11&4294967295|D>>>21),D=N+(A^x^C)+j[7]+4139469664&4294967295,N=A+(D<<16&4294967295|D>>>16),D=C+(N^A^x)+j[10]+3200236656&4294967295,C=N+(D<<23&4294967295|D>>>9),D=x+(C^N^A)+j[13]+681279174&4294967295,x=C+(D<<4&4294967295|D>>>28),D=A+(x^C^N)+j[0]+3936430074&4294967295,A=x+(D<<11&4294967295|D>>>21),D=N+(A^x^C)+j[3]+3572445317&4294967295,N=A+(D<<16&4294967295|D>>>16),D=C+(N^A^x)+j[6]+76029189&4294967295,C=N+(D<<23&4294967295|D>>>9),D=x+(C^N^A)+j[9]+3654602809&4294967295,x=C+(D<<4&4294967295|D>>>28),D=A+(x^C^N)+j[12]+3873151461&4294967295,A=x+(D<<11&4294967295|D>>>21),D=N+(A^x^C)+j[15]+530742520&4294967295,N=A+(D<<16&4294967295|D>>>16),D=C+(N^A^x)+j[2]+3299628645&4294967295,C=N+(D<<23&4294967295|D>>>9),D=x+(N^(C|~A))+j[0]+4096336452&4294967295,x=C+(D<<6&4294967295|D>>>26),D=A+(C^(x|~N))+j[7]+1126891415&4294967295,A=x+(D<<10&4294967295|D>>>22),D=N+(x^(A|~C))+j[14]+2878612391&4294967295,N=A+(D<<15&4294967295|D>>>17),D=C+(A^(N|~x))+j[5]+4237533241&4294967295,C=N+(D<<21&4294967295|D>>>11),D=x+(N^(C|~A))+j[12]+1700485571&4294967295,x=C+(D<<6&4294967295|D>>>26),D=A+(C^(x|~N))+j[3]+2399980690&4294967295,A=x+(D<<10&4294967295|D>>>22),D=N+(x^(A|~C))+j[10]+4293915773&4294967295,N=A+(D<<15&4294967295|D>>>17),D=C+(A^(N|~x))+j[1]+2240044497&4294967295,C=N+(D<<21&4294967295|D>>>11),D=x+(N^(C|~A))+j[8]+1873313359&4294967295,x=C+(D<<6&4294967295|D>>>26),D=A+(C^(x|~N))+j[15]+4264355552&4294967295,A=x+(D<<10&4294967295|D>>>22),D=N+(x^(A|~C))+j[6]+2734768916&4294967295,N=A+(D<<15&4294967295|D>>>17),D=C+(A^(N|~x))+j[13]+1309151649&4294967295,C=N+(D<<21&4294967295|D>>>11),D=x+(N^(C|~A))+j[4]+4149444226&4294967295,x=C+(D<<6&4294967295|D>>>26),D=A+(C^(x|~N))+j[11]+3174756917&4294967295,A=x+(D<<10&4294967295|D>>>22),D=N+(x^(A|~C))+j[2]+718787259&4294967295,N=A+(D<<15&4294967295|D>>>17),D=C+(A^(N|~x))+j[9]+3951481745&4294967295,I.g[0]=I.g[0]+x&4294967295,I.g[1]=I.g[1]+(N+(D<<21&4294967295|D>>>11))&4294967295,I.g[2]=I.g[2]+N&4294967295,I.g[3]=I.g[3]+A&4294967295}r.prototype.u=function(I,x){x===void 0&&(x=I.length);for(var C=x-this.blockSize,j=this.B,N=this.h,A=0;A<x;){if(N==0)for(;A<=C;)i(this,I,A),A+=this.blockSize;if(typeof I=="string"){for(;A<x;)if(j[N++]=I.charCodeAt(A++),N==this.blockSize){i(this,j),N=0;break}}else for(;A<x;)if(j[N++]=I[A++],N==this.blockSize){i(this,j),N=0;break}}this.h=N,this.o+=x},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var x=1;x<I.length-8;++x)I[x]=0;var C=8*this.o;for(x=I.length-8;x<I.length;++x)I[x]=C&255,C/=256;for(this.u(I),I=Array(16),x=C=0;4>x;++x)for(var j=0;32>j;j+=8)I[C++]=this.g[x]>>>j&255;return I};function s(I,x){var C=a;return Object.prototype.hasOwnProperty.call(C,I)?C[I]:C[I]=x(I)}function o(I,x){this.h=x;for(var C=[],j=!0,N=I.length-1;0<=N;N--){var A=I[N]|0;j&&A==x||(C[N]=A,j=!1)}this.g=C}var a={};function l(I){return-128<=I&&128>I?s(I,function(x){return new o([x|0],0>x?-1:0)}):new o([I|0],0>I?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return g;if(0>I)return P(h(-I));for(var x=[],C=1,j=0;I>=C;j++)x[j]=I/C|0,C*=4294967296;return new o(x,0)}function p(I,x){if(I.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(I.charAt(0)=="-")return P(p(I.substring(1),x));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=h(Math.pow(x,8)),j=g,N=0;N<I.length;N+=8){var A=Math.min(8,I.length-N),D=parseInt(I.substring(N,N+A),x);8>A?(A=h(Math.pow(x,A)),j=j.j(A).add(h(D))):(j=j.j(C),j=j.add(h(D)))}return j}var g=l(0),v=l(1),f=l(16777216);t=o.prototype,t.m=function(){if(k(this))return-P(this).m();for(var I=0,x=1,C=0;C<this.g.length;C++){var j=this.i(C);I+=(0<=j?j:4294967296+j)*x,x*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(E(this))return"0";if(k(this))return"-"+P(this).toString(I);for(var x=h(Math.pow(I,6)),C=this,j="";;){var N=L(C,x).g;C=w(C,N.j(x));var A=((0<C.g.length?C.g[0]:C.h)>>>0).toString(I);if(C=N,E(C))return A+j;for(;6>A.length;)A="0"+A;j=A+j}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function E(I){if(I.h!=0)return!1;for(var x=0;x<I.g.length;x++)if(I.g[x]!=0)return!1;return!0}function k(I){return I.h==-1}t.l=function(I){return I=w(this,I),k(I)?-1:E(I)?0:1};function P(I){for(var x=I.g.length,C=[],j=0;j<x;j++)C[j]=~I.g[j];return new o(C,~I.h).add(v)}t.abs=function(){return k(this)?P(this):this},t.add=function(I){for(var x=Math.max(this.g.length,I.g.length),C=[],j=0,N=0;N<=x;N++){var A=j+(this.i(N)&65535)+(I.i(N)&65535),D=(A>>>16)+(this.i(N)>>>16)+(I.i(N)>>>16);j=D>>>16,A&=65535,D&=65535,C[N]=D<<16|A}return new o(C,C[C.length-1]&-2147483648?-1:0)};function w(I,x){return I.add(P(x))}t.j=function(I){if(E(this)||E(I))return g;if(k(this))return k(I)?P(this).j(P(I)):P(P(this).j(I));if(k(I))return P(this.j(P(I)));if(0>this.l(f)&&0>I.l(f))return h(this.m()*I.m());for(var x=this.g.length+I.g.length,C=[],j=0;j<2*x;j++)C[j]=0;for(j=0;j<this.g.length;j++)for(var N=0;N<I.g.length;N++){var A=this.i(j)>>>16,D=this.i(j)&65535,J=I.i(N)>>>16,ue=I.i(N)&65535;C[2*j+2*N]+=D*ue,_(C,2*j+2*N),C[2*j+2*N+1]+=A*ue,_(C,2*j+2*N+1),C[2*j+2*N+1]+=D*J,_(C,2*j+2*N+1),C[2*j+2*N+2]+=A*J,_(C,2*j+2*N+2)}for(j=0;j<x;j++)C[j]=C[2*j+1]<<16|C[2*j];for(j=x;j<2*x;j++)C[j]=0;return new o(C,0)};function _(I,x){for(;(I[x]&65535)!=I[x];)I[x+1]+=I[x]>>>16,I[x]&=65535,x++}function T(I,x){this.g=I,this.h=x}function L(I,x){if(E(x))throw Error("division by zero");if(E(I))return new T(g,g);if(k(I))return x=L(P(I),x),new T(P(x.g),P(x.h));if(k(x))return x=L(I,P(x)),new T(P(x.g),x.h);if(30<I.g.length){if(k(I)||k(x))throw Error("slowDivide_ only works with positive integers.");for(var C=v,j=x;0>=j.l(I);)C=V(C),j=V(j);var N=W(C,1),A=W(j,1);for(j=W(j,2),C=W(C,2);!E(j);){var D=A.add(j);0>=D.l(I)&&(N=N.add(C),A=D),j=W(j,1),C=W(C,1)}return x=w(I,N.j(x)),new T(N,x)}for(N=g;0<=I.l(x);){for(C=Math.max(1,Math.floor(I.m()/x.m())),j=Math.ceil(Math.log(C)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),A=h(C),D=A.j(x);k(D)||0<D.l(I);)C-=j,A=h(C),D=A.j(x);E(A)&&(A=v),N=N.add(A),I=w(I,D)}return new T(N,I)}t.A=function(I){return L(this,I).h},t.and=function(I){for(var x=Math.max(this.g.length,I.g.length),C=[],j=0;j<x;j++)C[j]=this.i(j)&I.i(j);return new o(C,this.h&I.h)},t.or=function(I){for(var x=Math.max(this.g.length,I.g.length),C=[],j=0;j<x;j++)C[j]=this.i(j)|I.i(j);return new o(C,this.h|I.h)},t.xor=function(I){for(var x=Math.max(this.g.length,I.g.length),C=[],j=0;j<x;j++)C[j]=this.i(j)^I.i(j);return new o(C,this.h^I.h)};function V(I){for(var x=I.g.length+1,C=[],j=0;j<x;j++)C[j]=I.i(j)<<1|I.i(j-1)>>>31;return new o(C,I.h)}function W(I,x){var C=x>>5;x%=32;for(var j=I.g.length-C,N=[],A=0;A<j;A++)N[A]=0<x?I.i(A+C)>>>x|I.i(A+C+1)<<32-x:I.i(A+C);return new o(N,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Cx=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,El=o}).apply(typeof c5<"u"?c5:typeof self<"u"?self:typeof window<"u"?window:{});var ff=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kx,ih,Lx,Mf,D0,Rx,Dx,jx;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,S,F){return c==Array.prototype||c==Object.prototype||(c[S]=F.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ff=="object"&&ff];for(var S=0;S<c.length;++S){var F=c[S];if(F&&F.Math==Math)return F}throw Error("Cannot find global object")}var r=n(this);function i(c,S){if(S)e:{var F=r;c=c.split(".");for(var $=0;$<c.length-1;$++){var fe=c[$];if(!(fe in F))break e;F=F[fe]}c=c[c.length-1],$=F[c],S=S($),S!=$&&S!=null&&e(F,c,{configurable:!0,writable:!0,value:S})}}function s(c,S){c instanceof String&&(c+="");var F=0,$=!1,fe={next:function(){if(!$&&F<c.length){var _e=F++;return{value:S(_e,c[_e]),done:!1}}return $=!0,{done:!0,value:void 0}}};return fe[Symbol.iterator]=function(){return fe},fe}i("Array.prototype.values",function(c){return c||function(){return s(this,function(S,F){return F})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var S=typeof c;return S=S!="object"?S:c?Array.isArray(c)?"array":S:"null",S=="array"||S=="object"&&typeof c.length=="number"}function h(c){var S=typeof c;return S=="object"&&c!=null||S=="function"}function p(c,S,F){return c.call.apply(c.bind,arguments)}function g(c,S,F){if(!c)throw Error();if(2<arguments.length){var $=Array.prototype.slice.call(arguments,2);return function(){var fe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(fe,$),c.apply(S,fe)}}return function(){return c.apply(S,arguments)}}function v(c,S,F){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:g,v.apply(null,arguments)}function f(c,S){var F=Array.prototype.slice.call(arguments,1);return function(){var $=F.slice();return $.push.apply($,arguments),c.apply(this,$)}}function E(c,S){function F(){}F.prototype=S.prototype,c.aa=S.prototype,c.prototype=new F,c.prototype.constructor=c,c.Qb=function($,fe,_e){for(var Re=Array(arguments.length-2),gt=2;gt<arguments.length;gt++)Re[gt-2]=arguments[gt];return S.prototype[fe].apply($,Re)}}function k(c){const S=c.length;if(0<S){const F=Array(S);for(let $=0;$<S;$++)F[$]=c[$];return F}return[]}function P(c,S){for(let F=1;F<arguments.length;F++){const $=arguments[F];if(l($)){const fe=c.length||0,_e=$.length||0;c.length=fe+_e;for(let Re=0;Re<_e;Re++)c[fe+Re]=$[Re]}else c.push($)}}class w{constructor(S,F){this.i=S,this.j=F,this.h=0,this.g=null}get(){let S;return 0<this.h?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function _(c){return/^[\s\xa0]*$/.test(c)}function T(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function L(c){return L[" "](c),c}L[" "]=function(){};var V=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function W(c,S,F){for(const $ in c)S.call(F,c[$],$,c)}function I(c,S){for(const F in c)S.call(void 0,c[F],F,c)}function x(c){const S={};for(const F in c)S[F]=c[F];return S}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(c,S){let F,$;for(let fe=1;fe<arguments.length;fe++){$=arguments[fe];for(F in $)c[F]=$[F];for(let _e=0;_e<C.length;_e++)F=C[_e],Object.prototype.hasOwnProperty.call($,F)&&(c[F]=$[F])}}function N(c){var S=1;c=c.split(":");const F=[];for(;0<S&&c.length;)F.push(c.shift()),S--;return c.length&&F.push(c.join(":")),F}function A(c){a.setTimeout(()=>{throw c},0)}function D(){var c=X;let S=null;return c.g&&(S=c.g,c.g=c.g.next,c.g||(c.h=null),S.next=null),S}class J{constructor(){this.h=this.g=null}add(S,F){const $=ue.get();$.set(S,F),this.h?this.h.next=$:this.g=$,this.h=$}}var ue=new w(()=>new Z,c=>c.reset());class Z{constructor(){this.next=this.g=this.h=null}set(S,F){this.h=S,this.g=F,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,Q=!1,X=new J,se=()=>{const c=a.Promise.resolve(void 0);ee=()=>{c.then(ge)}};var ge=()=>{for(var c;c=D();){try{c.h.call(c.g)}catch(F){A(F)}var S=ue;S.j(c),100>S.h&&(S.h++,c.next=S.g,S.g=c)}Q=!1};function O(){this.s=this.s,this.C=this.C}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(c,S){this.type=c,this.g=this.target=S,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var z=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,S=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const F=()=>{};a.addEventListener("test",F,S),a.removeEventListener("test",F,S)}catch{}return c}();function Y(c,S){if(M.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var F=this.type=c.type,$=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=S,S=c.relatedTarget){if(V){e:{try{L(S.nodeName);var fe=!0;break e}catch{}fe=!1}fe||(S=null)}}else F=="mouseover"?S=c.fromElement:F=="mouseout"&&(S=c.toElement);this.relatedTarget=S,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:te[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Y.aa.h.call(this)}}E(Y,M);var te={2:"touch",3:"pen",4:"mouse"};Y.prototype.h=function(){Y.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var oe="closure_listenable_"+(1e6*Math.random()|0),ae=0;function ye(c,S,F,$,fe){this.listener=c,this.proxy=null,this.src=S,this.type=F,this.capture=!!$,this.ha=fe,this.key=++ae,this.da=this.fa=!1}function Ae(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Te(c){this.src=c,this.g={},this.h=0}Te.prototype.add=function(c,S,F,$,fe){var _e=c.toString();c=this.g[_e],c||(c=this.g[_e]=[],this.h++);var Re=Ve(c,S,$,fe);return-1<Re?(S=c[Re],F||(S.fa=!1)):(S=new ye(S,this.src,_e,!!$,fe),S.fa=F,c.push(S)),S};function Me(c,S){var F=S.type;if(F in c.g){var $=c.g[F],fe=Array.prototype.indexOf.call($,S,void 0),_e;(_e=0<=fe)&&Array.prototype.splice.call($,fe,1),_e&&(Ae(S),c.g[F].length==0&&(delete c.g[F],c.h--))}}function Ve(c,S,F,$){for(var fe=0;fe<c.length;++fe){var _e=c[fe];if(!_e.da&&_e.listener==S&&_e.capture==!!F&&_e.ha==$)return fe}return-1}var Ze="closure_lm_"+(1e6*Math.random()|0),be={};function ie(c,S,F,$,fe){if(Array.isArray(S)){for(var _e=0;_e<S.length;_e++)ie(c,S[_e],F,$,fe);return null}return F=ut(F),c&&c[oe]?c.K(S,F,h($)?!!$.capture:!!$,fe):$e(c,S,F,!1,$,fe)}function $e(c,S,F,$,fe,_e){if(!S)throw Error("Invalid event type");var Re=h(fe)?!!fe.capture:!!fe,gt=tt(c);if(gt||(c[Ze]=gt=new Te(c)),F=gt.add(S,F,$,Re,_e),F.proxy)return F;if($=De(),F.proxy=$,$.src=c,$.listener=F,c.addEventListener)z||(fe=Re),fe===void 0&&(fe=!1),c.addEventListener(S.toString(),$,fe);else if(c.attachEvent)c.attachEvent(qe(S.toString()),$);else if(c.addListener&&c.removeListener)c.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return F}function De(){function c(F){return S.call(c.src,c.listener,F)}const S=Be;return c}function Ce(c,S,F,$,fe){if(Array.isArray(S))for(var _e=0;_e<S.length;_e++)Ce(c,S[_e],F,$,fe);else $=h($)?!!$.capture:!!$,F=ut(F),c&&c[oe]?(c=c.i,S=String(S).toString(),S in c.g&&(_e=c.g[S],F=Ve(_e,F,$,fe),-1<F&&(Ae(_e[F]),Array.prototype.splice.call(_e,F,1),_e.length==0&&(delete c.g[S],c.h--)))):c&&(c=tt(c))&&(S=c.g[S.toString()],c=-1,S&&(c=Ve(S,F,$,fe)),(F=-1<c?S[c]:null)&&Oe(F))}function Oe(c){if(typeof c!="number"&&c&&!c.da){var S=c.src;if(S&&S[oe])Me(S.i,c);else{var F=c.type,$=c.proxy;S.removeEventListener?S.removeEventListener(F,$,c.capture):S.detachEvent?S.detachEvent(qe(F),$):S.addListener&&S.removeListener&&S.removeListener($),(F=tt(S))?(Me(F,c),F.h==0&&(F.src=null,S[Ze]=null)):Ae(c)}}}function qe(c){return c in be?be[c]:be[c]="on"+c}function Be(c,S){if(c.da)c=!0;else{S=new Y(S,this);var F=c.listener,$=c.ha||c.src;c.fa&&Oe(c),c=F.call($,S)}return c}function tt(c){return c=c[Ze],c instanceof Te?c:null}var rt="__closure_events_fn_"+(1e9*Math.random()>>>0);function ut(c){return typeof c=="function"?c:(c[rt]||(c[rt]=function(S){return c.handleEvent(S)}),c[rt])}function nt(){O.call(this),this.i=new Te(this),this.M=this,this.F=null}E(nt,O),nt.prototype[oe]=!0,nt.prototype.removeEventListener=function(c,S,F,$){Ce(this,c,S,F,$)};function ht(c,S){var F,$=c.F;if($)for(F=[];$;$=$.F)F.push($);if(c=c.M,$=S.type||S,typeof S=="string")S=new M(S,c);else if(S instanceof M)S.target=S.target||c;else{var fe=S;S=new M($,c),j(S,fe)}if(fe=!0,F)for(var _e=F.length-1;0<=_e;_e--){var Re=S.g=F[_e];fe=kt(Re,$,!0,S)&&fe}if(Re=S.g=c,fe=kt(Re,$,!0,S)&&fe,fe=kt(Re,$,!1,S)&&fe,F)for(_e=0;_e<F.length;_e++)Re=S.g=F[_e],fe=kt(Re,$,!1,S)&&fe}nt.prototype.N=function(){if(nt.aa.N.call(this),this.i){var c=this.i,S;for(S in c.g){for(var F=c.g[S],$=0;$<F.length;$++)Ae(F[$]);delete c.g[S],c.h--}}this.F=null},nt.prototype.K=function(c,S,F,$){return this.i.add(String(c),S,!1,F,$)},nt.prototype.L=function(c,S,F,$){return this.i.add(String(c),S,!0,F,$)};function kt(c,S,F,$){if(S=c.i.g[String(S)],!S)return!0;S=S.concat();for(var fe=!0,_e=0;_e<S.length;++_e){var Re=S[_e];if(Re&&!Re.da&&Re.capture==F){var gt=Re.listener,Nt=Re.ha||Re.src;Re.fa&&Me(c.i,Re),fe=gt.call(Nt,$)!==!1&&fe}}return fe&&!$.defaultPrevented}function ct(c,S,F){if(typeof c=="function")F&&(c=v(c,F));else if(c&&typeof c.handleEvent=="function")c=v(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(S)?-1:a.setTimeout(c,S||0)}function xt(c){c.g=ct(()=>{c.g=null,c.i&&(c.i=!1,xt(c))},c.l);const S=c.h;c.h=null,c.m.apply(null,S)}class Ge extends O{constructor(S,F){super(),this.m=S,this.l=F,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:xt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pn(c){O.call(this),this.h=c,this.g={}}E(pn,O);var It=[];function Mr(c){W(c.g,function(S,F){this.g.hasOwnProperty(F)&&Oe(S)},c),c.g={}}pn.prototype.N=function(){pn.aa.N.call(this),Mr(this)},pn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ft=a.JSON.stringify,Yt=a.JSON.parse,gi=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Pt(){}Pt.prototype.h=null;function ss(c){return c.h||(c.h=c.i())}function tn(){}var Jn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zr(){M.call(this,"d")}E(Zr,M);function Jt(){M.call(this,"c")}E(Jt,M);var at={},Lt=null;function yi(){return Lt=Lt||new nt}at.La="serverreachability";function Cn(c){M.call(this,at.La,c)}E(Cn,M);function ur(c){const S=yi();ht(S,new Cn(S))}at.STAT_EVENT="statevent";function ei(c,S){M.call(this,at.STAT_EVENT,c),this.stat=S}E(ei,M);function Ye(c){const S=yi();ht(S,new ei(S,c))}at.Ma="timingevent";function Vr(c,S){M.call(this,at.Ma,c),this.size=S}E(Vr,M);function cr(c,S){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},S)}function kn(){this.g=!0}kn.prototype.xa=function(){this.g=!1};function _n(c,S,F,$,fe,_e){c.info(function(){if(c.g)if(_e)for(var Re="",gt=_e.split("&"),Nt=0;Nt<gt.length;Nt++){var yt=gt[Nt].split("=");if(1<yt.length){var Vt=yt[0];yt=yt[1];var Gt=Vt.split("_");Re=2<=Gt.length&&Gt[1]=="type"?Re+(Vt+"="+yt+"&"):Re+(Vt+"=redacted&")}}else Re=null;else Re=_e;return"XMLHTTP REQ ("+$+") [attempt "+fe+"]: "+S+`
`+F+`
`+Re})}function mn(c,S,F,$,fe,_e,Re){c.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+fe+"]: "+S+`
`+F+`
`+_e+" "+Re})}function Ln(c,S,F,$){c.info(function(){return"XMLHTTP TEXT ("+S+"): "+Di(c,F)+($?" "+$:"")})}function Eo(c,S){c.info(function(){return"TIMEOUT: "+S})}kn.prototype.info=function(){};function Di(c,S){if(!c.g)return S;if(!S)return null;try{var F=JSON.parse(S);if(F){for(c=0;c<F.length;c++)if(Array.isArray(F[c])){var $=F[c];if(!(2>$.length)){var fe=$[1];if(Array.isArray(fe)&&!(1>fe.length)){var _e=fe[0];if(_e!="noop"&&_e!="stop"&&_e!="close")for(var Re=1;Re<fe.length;Re++)fe[Re]=""}}}}return Ft(F)}catch{return S}}var hr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Br={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Er;function Ir(){}E(Ir,Pt),Ir.prototype.g=function(){return new XMLHttpRequest},Ir.prototype.i=function(){return{}},Er=new Ir;function bn(c,S,F,$){this.j=c,this.i=S,this.l=F,this.R=$||1,this.U=new pn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ti}function ti(){this.i=null,this.g="",this.h=!1}var os={},as={};function ls(c,S,F){c.L=1,c.v=Us(Tr(S)),c.m=F,c.P=!0,Fs(c,null)}function Fs(c,S){c.F=Date.now(),Io(c),c.A=Tr(c.v);var F=c.A,$=c.R;Array.isArray($)||($=[String($)]),ft(F.i,"t",$),c.C=0,F=c.j.J,c.h=new ti,c.g=B(c.j,F?S:null,!c.m),0<c.O&&(c.M=new Ge(v(c.Y,c,c.g),c.O)),S=c.U,F=c.g,$=c.ca;var fe="readystatechange";Array.isArray(fe)||(fe&&(It[0]=fe.toString()),fe=It);for(var _e=0;_e<fe.length;_e++){var Re=ie(F,fe[_e],$||S.handleEvent,!1,S.h||S);if(!Re)break;S.g[Re.key]=Re}S=c.H?x(c.H):{},c.m?(c.u||(c.u="POST"),S["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,S)):(c.u="GET",c.g.ea(c.A,c.u,null,S)),ur(),_n(c.i,c.u,c.A,c.l,c.R,c.m)}bn.prototype.ca=function(c){c=c.target;const S=this.M;S&&Bn(c)==3?S.j():this.Y(c)},bn.prototype.Y=function(c){try{if(c==this.g)e:{const Gt=Bn(this.g);var S=this.g.Ba();const zi=this.g.Z();if(!(3>Gt)&&(Gt!=3||this.g&&(this.h.h||this.g.oa()||ru(this.g)))){this.J||Gt!=4||S==7||(S==8||0>=zi?ur(3):ur(2)),us(this);var F=this.g.Z();this.X=F;t:if(Os(this)){var $=ru(this.g);c="";var fe=$.length,_e=Bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ji(this),cs(this);var Re="";break t}this.h.i=new a.TextDecoder}for(S=0;S<fe;S++)this.h.h=!0,c+=this.h.i.decode($[S],{stream:!(_e&&S==fe-1)});$.length=0,this.h.g+=c,this.C=0,Re=this.h.g}else Re=this.g.oa();if(this.o=F==200,mn(this.i,this.u,this.A,this.l,this.R,Gt,F),this.o){if(this.T&&!this.K){t:{if(this.g){var gt,Nt=this.g;if((gt=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(gt)){var yt=gt;break t}}yt=null}if(F=yt)Ln(this.i,this.l,F,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ms(this,F);else{this.o=!1,this.s=3,Ye(12),ji(this),cs(this);break e}}if(this.P){F=!0;let Zn;for(;!this.J&&this.C<Re.length;)if(Zn=Kl(this,Re),Zn==as){Gt==4&&(this.s=4,Ye(14),F=!1),Ln(this.i,this.l,null,"[Incomplete Response]");break}else if(Zn==os){this.s=4,Ye(15),Ln(this.i,this.l,Re,"[Invalid Chunk]"),F=!1;break}else Ln(this.i,this.l,Zn,null),Ms(this,Zn);if(Os(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gt!=4||Re.length!=0||this.h.h||(this.s=1,Ye(16),F=!1),this.o=this.o&&F,!F)Ln(this.i,this.l,Re,"[Invalid Chunked Response]"),ji(this),cs(this);else if(0<Re.length&&!this.W){this.W=!0;var Vt=this.j;Vt.g==this&&Vt.ba&&!Vt.M&&(Vt.j.info("Great, no buffering proxy detected. Bytes received: "+Re.length),Uo(Vt),Vt.M=!0,Ye(11))}}else Ln(this.i,this.l,Re,null),Ms(this,Re);Gt==4&&ji(this),this.o&&!this.J&&(Gt==4?ms(this.j,this):(this.o=!1,Io(this)))}else fs(this.g),F==400&&0<Re.indexOf("Unknown SID")?(this.s=3,Ye(12)):(this.s=0,Ye(13)),ji(this),cs(this)}}}catch{}finally{}};function Os(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Kl(c,S){var F=c.C,$=S.indexOf(`
`,F);return $==-1?as:(F=Number(S.substring(F,$)),isNaN(F)?os:($+=1,$+F>S.length?as:(S=S.slice($,$+F),c.C=$+F,S)))}bn.prototype.cancel=function(){this.J=!0,ji(this)};function Io(c){c.S=Date.now()+c.I,Ql(c,c.I)}function Ql(c,S){if(c.B!=null)throw Error("WatchDog timer not null");c.B=cr(v(c.ba,c),S)}function us(c){c.B&&(a.clearTimeout(c.B),c.B=null)}bn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Eo(this.i,this.A),this.L!=2&&(ur(),Ye(17)),ji(this),this.s=2,cs(this)):Ql(this,this.S-c)};function cs(c){c.j.G==0||c.J||ms(c.j,c)}function ji(c){us(c);var S=c.M;S&&typeof S.ma=="function"&&S.ma(),c.M=null,Mr(c.U),c.g&&(S=c.g,c.g=null,S.abort(),S.ma())}function Ms(c,S){try{var F=c.j;if(F.G!=0&&(F.g==c||$a(F.h,c))){if(!c.K&&$a(F.h,c)&&F.G==3){try{var $=F.Da.g.parse(S)}catch{$=null}if(Array.isArray($)&&$.length==3){var fe=$;if(fe[0]==0){e:if(!F.u){if(F.g)if(F.g.F+3e3<c.F)Ui(F),Oo(F);else break e;$s(F),Ye(18)}}else F.za=fe[1],0<F.za-F.T&&37500>fe[2]&&F.F&&F.v==0&&!F.C&&(F.C=cr(v(F.Za,F),6e3));if(1>=Vs(F.h)&&F.ca){try{F.ca()}catch{}F.ca=void 0}}else dr(F,11)}else if((c.K||F.g==c)&&Ui(F),!_(S))for(fe=F.Da.g.parse(S),S=0;S<fe.length;S++){let yt=fe[S];if(F.T=yt[0],yt=yt[1],F.G==2)if(yt[0]=="c"){F.K=yt[1],F.ia=yt[2];const Vt=yt[3];Vt!=null&&(F.la=Vt,F.j.info("VER="+F.la));const Gt=yt[4];Gt!=null&&(F.Aa=Gt,F.j.info("SVER="+F.Aa));const zi=yt[5];zi!=null&&typeof zi=="number"&&0<zi&&($=1.5*zi,F.L=$,F.j.info("backChannelRequestTimeoutMs_="+$)),$=F;const Zn=c.g;if(Zn){const gs=Zn.g?Zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gs){var _e=$.h;_e.g||gs.indexOf("spdy")==-1&&gs.indexOf("quic")==-1&&gs.indexOf("h2")==-1||(_e.j=_e.l,_e.g=new Set,_e.h&&(nn(_e,_e.h),_e.h=null))}if($.D){const ys=Zn.g?Zn.g.getResponseHeader("X-HTTP-Session-Id"):null;ys&&($.ya=ys,Bt($.I,$.D,ys))}}F.G=3,F.l&&F.l.ua(),F.ba&&(F.R=Date.now()-c.F,F.j.info("Handshake RTT: "+F.R+"ms")),$=F;var Re=c;if($.qa=y($,$.J?$.ia:null,$.W),Re.K){Ga($.h,Re);var gt=Re,Nt=$.L;Nt&&(gt.I=Nt),gt.B&&(us(gt),Io(gt)),$.g=Re}else Bo($);0<F.i.length&&Mo(F)}else yt[0]!="stop"&&yt[0]!="close"||dr(F,7);else F.G==3&&(yt[0]=="stop"||yt[0]=="close"?yt[0]=="stop"?dr(F,7):Bi(F):yt[0]!="noop"&&F.l&&F.l.ta(yt),F.v=0)}}ur(4)}catch{}}var bc=class{constructor(c,S){this.g=c,this.map=S}};function Wa(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Yl(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Vs(c){return c.h?1:c.g?c.g.size:0}function $a(c,S){return c.h?c.h==S:c.g?c.g.has(S):!1}function nn(c,S){c.g?c.g.add(S):c.h=S}function Ga(c,S){c.h&&c.h==S?c.h=null:c.g&&c.g.has(S)&&c.g.delete(S)}Wa.prototype.cancel=function(){if(this.i=Ka(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Ka(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let S=c.i;for(const F of c.g.values())S=S.concat(F.D);return S}return k(c.i)}function Jl(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var S=[],F=c.length,$=0;$<F;$++)S.push(c[$]);return S}S=[],F=0;for($ in c)S[F++]=c[$];return S}function Qa(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var S=[];c=c.length;for(var F=0;F<c;F++)S.push(F);return S}S=[],F=0;for(const $ in c)S[F++]=$;return S}}}function Xl(c,S){if(c.forEach&&typeof c.forEach=="function")c.forEach(S,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,S,void 0);else for(var F=Qa(c),$=Jl(c),fe=$.length,_e=0;_e<fe;_e++)S.call(void 0,$[_e],F&&F[_e],c)}var Ur=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function To(c,S){if(c){c=c.split("&");for(var F=0;F<c.length;F++){var $=c[F].indexOf("="),fe=null;if(0<=$){var _e=c[F].substring(0,$);fe=c[F].substring($+1)}else _e=c[F];S(_e,fe?decodeURIComponent(fe.replace(/\+/g," ")):"")}}}function gn(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof gn){this.h=c.h,Bs(this,c.j),this.o=c.o,this.g=c.g,Po(this,c.s),this.l=c.l;var S=c.i,F=new hs;F.i=S.i,S.g&&(F.g=new Map(S.g),F.h=S.h),Ya(this,F),this.m=c.m}else c&&(S=String(c).match(Ur))?(this.h=!1,Bs(this,S[1]||"",!0),this.o=zs(S[2]||""),this.g=zs(S[3]||"",!0),Po(this,S[4]),this.l=zs(S[5]||"",!0),Ya(this,S[6]||"",!0),this.m=zs(S[7]||"")):(this.h=!1,this.i=new hs(null,this.h))}gn.prototype.toString=function(){var c=[],S=this.j;S&&c.push(Fi(S,Zl,!0),":");var F=this.g;return(F||S=="file")&&(c.push("//"),(S=this.o)&&c.push(Fi(S,Zl,!0),"@"),c.push(encodeURIComponent(String(F)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F=this.s,F!=null&&c.push(":",String(F))),(F=this.l)&&(this.g&&F.charAt(0)!="/"&&c.push("/"),c.push(Fi(F,F.charAt(0)=="/"?Oi:Sc,!0))),(F=this.i.toString())&&c.push("?",F),(F=this.m)&&c.push("#",Fi(F,ko)),c.join("")};function Tr(c){return new gn(c)}function Bs(c,S,F){c.j=F?zs(S,!0):S,c.j&&(c.j=c.j.replace(/:$/,""))}function Po(c,S){if(S){if(S=Number(S),isNaN(S)||0>S)throw Error("Bad port number "+S);c.s=S}else c.s=null}function Ya(c,S,F){S instanceof hs?(c.i=S,Nc(c.i,c.h)):(F||(S=Fi(S,Co)),c.i=new hs(S,c.h))}function Bt(c,S,F){c.i.set(S,F)}function Us(c){return Bt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function zs(c,S){return c?S?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Fi(c,S,F){return typeof c=="string"?(c=encodeURI(c).replace(S,xc),F&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function xc(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Zl=/[#\/\?@]/g,Sc=/[#\?:]/g,Oi=/[#\?]/g,Co=/[#\?@]/g,ko=/#/g;function hs(c,S){this.h=this.g=null,this.i=c||null,this.j=!!S}function rn(c){c.g||(c.g=new Map,c.h=0,c.i&&To(c.i,function(S,F){c.add(decodeURIComponent(S.replace(/\+/g," ")),F)}))}t=hs.prototype,t.add=function(c,S){rn(this),this.i=null,c=ds(this,c);var F=this.g.get(c);return F||this.g.set(c,F=[]),F.push(S),this.h+=1,this};function eu(c,S){rn(c),S=ds(c,S),c.g.has(S)&&(c.i=null,c.h-=c.g.get(S).length,c.g.delete(S))}function Ja(c,S){return rn(c),S=ds(c,S),c.g.has(S)}t.forEach=function(c,S){rn(this),this.g.forEach(function(F,$){F.forEach(function(fe){c.call(S,fe,$,this)},this)},this)},t.na=function(){rn(this);const c=Array.from(this.g.values()),S=Array.from(this.g.keys()),F=[];for(let $=0;$<S.length;$++){const fe=c[$];for(let _e=0;_e<fe.length;_e++)F.push(S[$])}return F},t.V=function(c){rn(this);let S=[];if(typeof c=="string")Ja(this,c)&&(S=S.concat(this.g.get(ds(this,c))));else{c=Array.from(this.g.values());for(let F=0;F<c.length;F++)S=S.concat(c[F])}return S},t.set=function(c,S){return rn(this),this.i=null,c=ds(this,c),Ja(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[S]),this.h+=1,this},t.get=function(c,S){return c?(c=this.V(c),0<c.length?String(c[0]):S):S};function ft(c,S,F){eu(c,S),0<F.length&&(c.i=null,c.g.set(ds(c,S),k(F)),c.h+=F.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],S=Array.from(this.g.keys());for(var F=0;F<S.length;F++){var $=S[F];const _e=encodeURIComponent(String($)),Re=this.V($);for($=0;$<Re.length;$++){var fe=_e;Re[$]!==""&&(fe+="="+encodeURIComponent(String(Re[$]))),c.push(fe)}}return this.i=c.join("&")};function ds(c,S){return S=String(S),c.j&&(S=S.toLowerCase()),S}function Nc(c,S){S&&!c.j&&(rn(c),c.i=null,c.g.forEach(function(F,$){var fe=$.toLowerCase();$!=fe&&(eu(this,$),ft(this,fe,F))},c)),c.j=S}function vi(c,S){const F=new kn;if(a.Image){const $=new Image;$.onload=f(ni,F,"TestLoadImage: loaded",!0,S,$),$.onerror=f(ni,F,"TestLoadImage: error",!1,S,$),$.onabort=f(ni,F,"TestLoadImage: abort",!1,S,$),$.ontimeout=f(ni,F,"TestLoadImage: timeout",!1,S,$),a.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=c}else S(!1)}function tu(c,S){const F=new kn,$=new AbortController,fe=setTimeout(()=>{$.abort(),ni(F,"TestPingServer: timeout",!1,S)},1e4);fetch(c,{signal:$.signal}).then(_e=>{clearTimeout(fe),_e.ok?ni(F,"TestPingServer: ok",!0,S):ni(F,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(fe),ni(F,"TestPingServer: error",!1,S)})}function ni(c,S,F,$,fe){try{fe&&(fe.onload=null,fe.onerror=null,fe.onabort=null,fe.ontimeout=null),$(F)}catch{}}function Lo(){this.g=new gi}function Xa(c,S,F){const $=F||"";try{Xl(c,function(fe,_e){let Re=fe;h(fe)&&(Re=Ft(fe)),S.push($+_e+"="+encodeURIComponent(Re))})}catch(fe){throw S.push($+"type="+encodeURIComponent("_badmap")),fe}}function Ro(c){this.l=c.Ub||null,this.j=c.eb||!1}E(Ro,Pt),Ro.prototype.g=function(){return new Do(this.l,this.j)},Ro.prototype.i=function(c){return function(){return c}}({});function Do(c,S){nt.call(this),this.D=c,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(Do,nt),t=Do.prototype,t.open=function(c,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=S,this.readyState=1,ri(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const S={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(S.body=c),(this.D||a).fetch(new Request(this.A,S)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mi(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ri(this)),this.g&&(this.readyState=3,ri(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;nu(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function nu(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var S=c.value?c.value:new Uint8Array(0);(S=this.v.decode(S,{stream:!c.done}))&&(this.response=this.responseText+=S)}c.done?Mi(this):ri(this),this.readyState==3&&nu(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Mi(this))},t.Qa=function(c){this.g&&(this.response=c,Mi(this))},t.ga=function(){this.g&&Mi(this)};function Mi(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ri(c)}t.setRequestHeader=function(c,S){this.u.append(c,S)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],S=this.h.entries();for(var F=S.next();!F.done;)F=F.value,c.push(F[0]+": "+F[1]),F=S.next();return c.join(`\r
`)};function ri(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Do.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Vi(c){let S="";return W(c,function(F,$){S+=$,S+=":",S+=F,S+=`\r
`}),S}function Za(c,S,F){e:{for($ in F){var $=!1;break e}$=!0}$||(F=Vi(F),typeof c=="string"?F!=null&&encodeURIComponent(String(F)):Bt(c,S,F))}function Mt(c){nt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Mt,nt);var el=/^https?$/i,jo=["POST","PUT"];t=Mt.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,S,F,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);S=S?S.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Er.g(),this.v=this.o?ss(this.o):ss(Er),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(S,String(c),!0),this.B=!1}catch(_e){tl(this,_e);return}if(c=F||"",F=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var fe in $)F.set(fe,$[fe]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const _e of $.keys())F.set(_e,$.get(_e));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(F.keys()).find(_e=>_e.toLowerCase()=="content-type"),fe=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(jo,S,void 0))||$||fe||F.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[_e,Re]of F)this.g.setRequestHeader(_e,Re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ii(this),this.u=!0,this.g.send(c),this.u=!1}catch(_e){tl(this,_e)}};function tl(c,S){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=S,c.m=5,nl(c),qs(c)}function nl(c){c.A||(c.A=!0,ht(c,"complete"),ht(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,ht(this,"complete"),ht(this,"abort"),qs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qs(this,!0)),Mt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?rl(this):this.bb())},t.bb=function(){rl(this)};function rl(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Bn(c)!=4||c.Z()!=2)){if(c.u&&Bn(c)==4)ct(c.Ea,0,c);else if(ht(c,"readystatechange"),Bn(c)==4){c.h=!1;try{const Re=c.Z();e:switch(Re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var F;if(!(F=S)){var $;if($=Re===0){var fe=String(c.D).match(Ur)[1]||null;!fe&&a.self&&a.self.location&&(fe=a.self.location.protocol.slice(0,-1)),$=!el.test(fe?fe.toLowerCase():"")}F=$}if(F)ht(c,"complete"),ht(c,"success");else{c.m=6;try{var _e=2<Bn(c)?c.g.statusText:""}catch{_e=""}c.l=_e+" ["+c.Z()+"]",nl(c)}}finally{qs(c)}}}}function qs(c,S){if(c.g){ii(c);const F=c.g,$=c.v[0]?()=>{}:null;c.g=null,c.v=null,S||ht(c,"ready");try{F.onreadystatechange=$}catch{}}}function ii(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Bn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Bn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var S=this.g.responseText;return c&&S.indexOf(c)==0&&(S=S.substring(c.length)),Yt(S)}};function ru(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function fs(c){const S={};c=(c.g&&2<=Bn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<c.length;$++){if(_(c[$]))continue;var F=N(c[$]);const fe=F[0];if(F=F[1],typeof F!="string")continue;F=F.trim();const _e=S[fe]||[];S[fe]=_e,_e.push(F)}I(S,function($){return $.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xn(c,S,F){return F&&F.internalChannelParams&&F.internalChannelParams[c]||S}function Fo(c){this.Aa=0,this.i=[],this.j=new kn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xn("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xn("baseRetryDelayMs",5e3,c),this.cb=Xn("retryDelaySeedMs",1e4,c),this.Wa=Xn("forwardChannelMaxRetries",2,c),this.wa=Xn("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Wa(c&&c.concurrentRequestLimit),this.Da=new Lo,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Fo.prototype,t.la=8,t.G=1,t.connect=function(c,S,F,$){Ye(0),this.W=c,this.H=S||{},F&&$!==void 0&&(this.H.OSID=F,this.H.OAID=$),this.F=this.X,this.I=y(this,null,this.W),Mo(this)};function Bi(c){if(Hs(c),c.G==3){var S=c.U++,F=Tr(c.I);if(Bt(F,"SID",c.K),Bt(F,"RID",S),Bt(F,"TYPE","terminate"),ps(c,F),S=new bn(c,c.j,S),S.L=2,S.v=Us(Tr(F)),F=!1,a.navigator&&a.navigator.sendBeacon)try{F=a.navigator.sendBeacon(S.v.toString(),"")}catch{}!F&&a.Image&&(new Image().src=S.v,F=!0),F||(S.g=B(S.j,null),S.g.ea(S.v)),S.F=Date.now(),Io(S)}qo(c)}function Oo(c){c.g&&(Uo(c),c.g.cancel(),c.g=null)}function Hs(c){Oo(c),c.u&&(a.clearTimeout(c.u),c.u=null),Ui(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Mo(c){if(!Yl(c.h)&&!c.s){c.s=!0;var S=c.Ga;ee||se(),Q||(ee(),Q=!0),X.add(S,c),c.B=0}}function il(c,S){return Vs(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=S.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=cr(v(c.Ga,c,S),zo(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const fe=new bn(this,this.j,c);let _e=this.o;if(this.S&&(_e?(_e=x(_e),j(_e,this.S)):_e=this.S),this.m!==null||this.O||(fe.H=_e,_e=null),this.P)e:{for(var S=0,F=0;F<this.i.length;F++){t:{var $=this.i[F];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(S+=$,4096<S){S=F;break e}if(S===4096||F===this.i.length-1){S=F+1;break e}}S=1e3}else S=1e3;S=Ws(this,fe,S),F=Tr(this.I),Bt(F,"RID",c),Bt(F,"CVER",22),this.D&&Bt(F,"X-HTTP-Session-Id",this.D),ps(this,F),_e&&(this.O?S="headers="+encodeURIComponent(String(Vi(_e)))+"&"+S:this.m&&Za(F,this.m,_e)),nn(this.h,fe),this.Ua&&Bt(F,"TYPE","init"),this.P?(Bt(F,"$req",S),Bt(F,"SID","null"),fe.T=!0,ls(fe,F,null)):ls(fe,F,S),this.G=2}}else this.G==3&&(c?Vo(this,c):this.i.length==0||Yl(this.h)||Vo(this))};function Vo(c,S){var F;S?F=S.l:F=c.U++;const $=Tr(c.I);Bt($,"SID",c.K),Bt($,"RID",F),Bt($,"AID",c.T),ps(c,$),c.m&&c.o&&Za($,c.m,c.o),F=new bn(c,c.j,F,c.B+1),c.m===null&&(F.H=c.o),S&&(c.i=S.D.concat(c.i)),S=Ws(c,F,1e3),F.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),nn(c.h,F),ls(F,$,S)}function ps(c,S){c.H&&W(c.H,function(F,$){Bt(S,$,F)}),c.l&&Xl({},function(F,$){Bt(S,$,F)})}function Ws(c,S,F){F=Math.min(c.i.length,F);var $=c.l?v(c.l.Na,c.l,c):null;e:{var fe=c.i;let _e=-1;for(;;){const Re=["count="+F];_e==-1?0<F?(_e=fe[0].g,Re.push("ofs="+_e)):_e=0:Re.push("ofs="+_e);let gt=!0;for(let Nt=0;Nt<F;Nt++){let yt=fe[Nt].g;const Vt=fe[Nt].map;if(yt-=_e,0>yt)_e=Math.max(0,fe[Nt].g-100),gt=!1;else try{Xa(Vt,Re,"req"+yt+"_")}catch{$&&$(Vt)}}if(gt){$=Re.join("&");break e}}}return c=c.i.splice(0,F),S.D=c,$}function Bo(c){if(!c.g&&!c.u){c.Y=1;var S=c.Fa;ee||se(),Q||(ee(),Q=!0),X.add(S,c),c.v=0}}function $s(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=cr(v(c.Fa,c),zo(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,iu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=cr(v(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ye(10),Oo(this),iu(this))};function Uo(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function iu(c){c.g=new bn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var S=Tr(c.qa);Bt(S,"RID","rpc"),Bt(S,"SID",c.K),Bt(S,"AID",c.T),Bt(S,"CI",c.F?"0":"1"),!c.F&&c.ja&&Bt(S,"TO",c.ja),Bt(S,"TYPE","xmlhttp"),ps(c,S),c.m&&c.o&&Za(S,c.m,c.o),c.L&&(c.g.I=c.L);var F=c.g;c=c.ia,F.L=1,F.v=Us(Tr(S)),F.m=null,F.P=!0,Fs(F,c)}t.Za=function(){this.C!=null&&(this.C=null,Oo(this),$s(this),Ye(19))};function Ui(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function ms(c,S){var F=null;if(c.g==S){Ui(c),Uo(c),c.g=null;var $=2}else if($a(c.h,S))F=S.D,Ga(c.h,S),$=1;else return;if(c.G!=0){if(S.o)if($==1){F=S.m?S.m.length:0,S=Date.now()-S.F;var fe=c.B;$=yi(),ht($,new Vr($,F)),Mo(c)}else Bo(c);else if(fe=S.s,fe==3||fe==0&&0<S.X||!($==1&&il(c,S)||$==2&&$s(c)))switch(F&&0<F.length&&(S=c.h,S.i=S.i.concat(F)),fe){case 1:dr(c,5);break;case 4:dr(c,10);break;case 3:dr(c,6);break;default:dr(c,2)}}}function zo(c,S){let F=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(F*=2),F*S}function dr(c,S){if(c.j.info("Error code "+S),S==2){var F=v(c.fb,c),$=c.Xa;const fe=!$;$=new gn($||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Bs($,"https"),Us($),fe?vi($.toString(),F):tu($.toString(),F)}else Ye(2);c.G=0,c.l&&c.l.sa(S),qo(c),Hs(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Ye(2)):(this.j.info("Failed to ping google.com"),Ye(1))};function qo(c){if(c.G=0,c.ka=[],c.l){const S=Ka(c.h);(S.length!=0||c.i.length!=0)&&(P(c.ka,S),P(c.ka,c.i),c.h.i.length=0,k(c.i),c.i.length=0),c.l.ra()}}function y(c,S,F){var $=F instanceof gn?Tr(F):new gn(F);if($.g!="")S&&($.g=S+"."+$.g),Po($,$.s);else{var fe=a.location;$=fe.protocol,S=S?S+"."+fe.hostname:fe.hostname,fe=+fe.port;var _e=new gn(null);$&&Bs(_e,$),S&&(_e.g=S),fe&&Po(_e,fe),F&&(_e.l=F),$=_e}return F=c.D,S=c.ya,F&&S&&Bt($,F,S),Bt($,"VER",c.la),ps(c,$),$}function B(c,S,F){if(S&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return S=c.Ca&&!c.pa?new Mt(new Ro({eb:F})):new Mt(c.pa),S.Ha(c.J),S}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function re(){}t=re.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function le(){}le.prototype.g=function(c,S){return new pe(c,S)};function pe(c,S){nt.call(this),this.g=new Fo(S),this.l=c,this.h=S&&S.messageUrlParams||null,c=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(c?c["X-WebChannel-Content-Type"]=S.messageContentType:c={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.va&&(c?c["X-WebChannel-Client-Profile"]=S.va:c={"X-WebChannel-Client-Profile":S.va}),this.g.S=c,(c=S&&S.Sb)&&!_(c)&&(this.g.m=c),this.v=S&&S.supportsCrossDomainXhr||!1,this.u=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!_(S)&&(this.g.D=S,c=this.h,c!==null&&S in c&&(c=this.h,S in c&&delete c[S])),this.j=new He(this)}E(pe,nt),pe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pe.prototype.close=function(){Bi(this.g)},pe.prototype.o=function(c){var S=this.g;if(typeof c=="string"){var F={};F.__data__=c,c=F}else this.u&&(F={},F.__data__=Ft(c),c=F);S.i.push(new bc(S.Ya++,c)),S.G==3&&Mo(S)},pe.prototype.N=function(){this.g.l=null,delete this.j,Bi(this.g),delete this.g,pe.aa.N.call(this)};function Se(c){Zr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var S=c.__sm__;if(S){e:{for(const F in S){c=F;break e}c=void 0}(this.i=c)&&(c=this.i,S=S!==null&&c in S?S[c]:void 0),this.data=S}else this.data=c}E(Se,Zr);function Le(){Jt.call(this),this.status=1}E(Le,Jt);function He(c){this.g=c}E(He,re),He.prototype.ua=function(){ht(this.g,"a")},He.prototype.ta=function(c){ht(this.g,new Se(c))},He.prototype.sa=function(c){ht(this.g,new Le)},He.prototype.ra=function(){ht(this.g,"b")},le.prototype.createWebChannel=le.prototype.g,pe.prototype.send=pe.prototype.o,pe.prototype.open=pe.prototype.m,pe.prototype.close=pe.prototype.close,jx=function(){return new le},Dx=function(){return yi()},Rx=at,D0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},hr.NO_ERROR=0,hr.TIMEOUT=8,hr.HTTP_ERROR=6,Mf=hr,Br.COMPLETE="complete",Lx=Br,tn.EventType=Jn,Jn.OPEN="a",Jn.CLOSE="b",Jn.ERROR="c",Jn.MESSAGE="d",nt.prototype.listen=nt.prototype.K,ih=tn,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,kx=Mt}).apply(typeof ff<"u"?ff:typeof self<"u"?self:typeof window<"u"?window:{});const h5="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_r.UNAUTHENTICATED=new _r(null),_r.GOOGLE_CREDENTIALS=new _r("google-credentials-uid"),_r.FIRST_PARTY=new _r("first-party-uid"),_r.MOCK_USER=new _r("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl=new t2("@firebase/firestore");function Gc(){return Vl.logLevel}function et(t,...e){if(Vl.logLevel<=Tt.DEBUG){const n=e.map(f2);Vl.debug(`Firestore (${gc}): ${t}`,...n)}}function _o(t,...e){if(Vl.logLevel<=Tt.ERROR){const n=e.map(f2);Vl.error(`Firestore (${gc}): ${t}`,...n)}}function rc(t,...e){if(Vl.logLevel<=Tt.WARN){const n=e.map(f2);Vl.warn(`Firestore (${gc}): ${t}`,...n)}}function f2(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(t="Unexpected state"){const e=`FIRESTORE (${gc}) INTERNAL ASSERTION FAILED: `+t;throw _o(e),new Error(e)}function Wt(t,e){t||mt()}function _t(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Qe extends So{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class B6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(_r.UNAUTHENTICATED))}shutdown(){}}class U6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class z6{constructor(e){this.t=e,this.currentUser=_r.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Wt(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new co;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new co,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(et("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new co)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Wt(typeof r.accessToken=="string"),new Fx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Wt(e===null||typeof e=="string"),new _r(e)}}class q6{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=_r.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class H6{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new q6(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(_r.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class W6{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $6{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Wt(this.o===void 0);const r=s=>{s.error!=null&&et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,et("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Wt(typeof n.token=="string"),this.R=n.token,new W6(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=G6(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function jt(t,e){return t<e?-1:t>e?1:0}function ic(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Qe(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Qe(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Qe(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Qe(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Mn.fromMillis(Date.now())}static fromDate(e){return Mn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Mn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?jt(this.nanoseconds,e.nanoseconds):jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new wt(e)}static min(){return new wt(new Mn(0,0))}static max(){return new wt(new Mn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n,r){n===void 0?n=0:n>e.length&&mt(),r===void 0?r=e.length-n:r>e.length-n&&mt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Gh.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Gh?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class on extends Gh{construct(e,n,r){return new on(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Qe(Pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new on(n)}static emptyPath(){return new on([])}}const K6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ir extends Gh{construct(e,n,r){return new ir(e,n,r)}static isValidIdentifier(e){return K6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ir.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ir(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Qe(Pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Qe(Pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Qe(Pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Qe(Pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ir(n)}static emptyPath(){return new ir([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.path=e}static fromPath(e){return new it(on.fromString(e))}static fromName(e){return new it(on.fromString(e).popFirst(5))}static empty(){return new it(on.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&on.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return on.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new it(new on(e.slice()))}}function Q6(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=wt.fromTimestamp(r===1e9?new Mn(n+1,0):new Mn(n,r));return new Da(i,it.empty(),e)}function Y6(t){return new Da(t.readTime,t.key,-1)}class Da{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Da(wt.min(),it.empty(),-1)}static max(){return new Da(wt.max(),it.empty(),-1)}}function J6(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=it.comparator(t.documentKey,e.documentKey),n!==0?n:jt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Z6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fd(t){if(t.code!==Pe.FAILED_PRECONDITION||t.message!==X6)throw t;et("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&mt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new je((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof je?n:je.resolve(n)}catch(n){return je.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):je.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):je.reject(n)}static resolve(e){return new je((n,r)=>{n(e)})}static reject(e){return new je((n,r)=>{r(e)})}static waitFor(e){return new je((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=je.resolve(!1);for(const r of e)n=n.next(i=>i?je.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new je((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const h=l;n(e[h]).next(p=>{o[h]=p,++a,a===s&&r(o)},p=>i(p))}})}static doWhile(e,n){return new je((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function eP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function pd(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}p2.oe=-1;function em(t){return t==null}function Sp(t){return t===0&&1/t==-1/0}function tP(t){return typeof t=="number"&&Number.isInteger(t)&&!Sp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d5(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Mx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,n){this.comparator=e,this.root=n||rr.EMPTY}insert(e,n){return new fn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rr.BLACK,null,null))}remove(e){return new fn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pf(this.root,e,this.comparator,!1)}getReverseIterator(){return new pf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pf(this.root,e,this.comparator,!0)}}class pf{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rr{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??rr.RED,this.left=i??rr.EMPTY,this.right=s??rr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new rr(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return rr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return rr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw mt();const e=this.left.check();if(e!==this.right.check())throw mt();return e+(this.isRed()?0:1)}}rr.EMPTY=null,rr.RED=!0,rr.BLACK=!1;rr.EMPTY=new class{constructor(){this.size=0}get key(){throw mt()}get value(){throw mt()}get color(){throw mt()}get left(){throw mt()}get right(){throw mt()}copy(e,n,r,i,s){return this}insert(e,n,r){return new rr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.comparator=e,this.data=new fn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new f5(this.data.getIterator())}getIteratorFrom(e){return new f5(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof or)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new or(this.comparator);return n.data=e,n}}class f5{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this.fields=e,e.sort(ir.comparator)}static empty(){return new ci([])}unionWith(e){let n=new or(ir.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ci(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ic(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Vx("Invalid base64 string: "+s):s}}(e);return new lr(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new lr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}lr.EMPTY_BYTE_STRING=new lr("");const nP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ja(t){if(Wt(!!t),typeof t=="string"){let e=0;const n=nP.exec(t);if(Wt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:An(t.seconds),nanos:An(t.nanos)}}function An(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Bl(t){return typeof t=="string"?lr.fromBase64String(t):lr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function g2(t){const e=t.mapValue.fields.__previous_value__;return m2(e)?g2(e):e}function Kh(t){const e=ja(t.mapValue.fields.__local_write_time__.timestampValue);return new Mn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,n,r,i,s,o,a,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=h}}class Qh{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Qh("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Qh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ul(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?m2(t)?4:sP(t)?9007199254740991:iP(t)?10:11:mt()}function Ds(t,e){if(t===e)return!0;const n=Ul(t);if(n!==Ul(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Kh(t).isEqual(Kh(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ja(i.timestampValue),a=ja(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Bl(i.bytesValue).isEqual(Bl(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return An(i.geoPointValue.latitude)===An(s.geoPointValue.latitude)&&An(i.geoPointValue.longitude)===An(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return An(i.integerValue)===An(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=An(i.doubleValue),a=An(s.doubleValue);return o===a?Sp(o)===Sp(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ic(t.arrayValue.values||[],e.arrayValue.values||[],Ds);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(d5(o)!==d5(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ds(o[l],a[l])))return!1;return!0}(t,e);default:return mt()}}function Yh(t,e){return(t.values||[]).find(n=>Ds(n,e))!==void 0}function sc(t,e){if(t===e)return 0;const n=Ul(t),r=Ul(e);if(n!==r)return jt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return jt(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=An(s.integerValue||s.doubleValue),l=An(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return p5(t.timestampValue,e.timestampValue);case 4:return p5(Kh(t),Kh(e));case 5:return jt(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Bl(s),l=Bl(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let h=0;h<a.length&&h<l.length;h++){const p=jt(a[h],l[h]);if(p!==0)return p}return jt(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=jt(An(s.latitude),An(o.latitude));return a!==0?a:jt(An(s.longitude),An(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return m5(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,h,p;const g=s.fields||{},v=o.fields||{},f=(a=g.value)===null||a===void 0?void 0:a.arrayValue,E=(l=v.value)===null||l===void 0?void 0:l.arrayValue,k=jt(((h=f==null?void 0:f.values)===null||h===void 0?void 0:h.length)||0,((p=E==null?void 0:E.values)===null||p===void 0?void 0:p.length)||0);return k!==0?k:m5(f,E)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===mf.mapValue&&o===mf.mapValue)return 0;if(s===mf.mapValue)return 1;if(o===mf.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),h=o.fields||{},p=Object.keys(h);l.sort(),p.sort();for(let g=0;g<l.length&&g<p.length;++g){const v=jt(l[g],p[g]);if(v!==0)return v;const f=sc(a[l[g]],h[p[g]]);if(f!==0)return f}return jt(l.length,p.length)}(t.mapValue,e.mapValue);default:throw mt()}}function p5(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return jt(t,e);const n=ja(t),r=ja(e),i=jt(n.seconds,r.seconds);return i!==0?i:jt(n.nanos,r.nanos)}function m5(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=sc(n[i],r[i]);if(s)return s}return jt(n.length,r.length)}function oc(t){return j0(t)}function j0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ja(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Bl(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return it.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=j0(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${j0(n.fields[o])}`;return i+"}"}(t.mapValue):mt()}function g5(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function F0(t){return!!t&&"integerValue"in t}function y2(t){return!!t&&"arrayValue"in t}function y5(t){return!!t&&"nullValue"in t}function v5(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vf(t){return!!t&&"mapValue"in t}function iP(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function vh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Wl(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=vh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vh(t.arrayValue.values[n]);return e}return Object.assign({},t)}function sP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e){this.value=e}static empty(){return new Gr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Vf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=vh(n)}setAll(e){let n=ir.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=vh(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Vf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ds(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Vf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Wl(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Gr(vh(this.value))}}function Bx(t){const e=[];return Wl(t.fields,(n,r)=>{const i=new ir([n]);if(Vf(r)){const s=Bx(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new ci(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new xr(e,0,wt.min(),wt.min(),wt.min(),Gr.empty(),0)}static newFoundDocument(e,n,r,i){return new xr(e,1,n,wt.min(),r,i,0)}static newNoDocument(e,n){return new xr(e,2,n,wt.min(),wt.min(),Gr.empty(),0)}static newUnknownDocument(e,n){return new xr(e,3,n,wt.min(),wt.min(),Gr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(wt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,n){this.position=e,this.inclusive=n}}function w5(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=it.comparator(it.fromName(o.referenceValue),n.key):r=sc(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function _5(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ds(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,n="asc"){this.field=e,this.dir=n}}function oP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ux=class{};class On extends Ux{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new lP(e,n,r):n==="array-contains"?new hP(e,r):n==="in"?new dP(e,r):n==="not-in"?new fP(e,r):n==="array-contains-any"?new pP(e,r):new On(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new uP(e,r):new cP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(sc(n,this.value)):n!==null&&Ul(this.value)===Ul(n)&&this.matchesComparison(sc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return mt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ns extends Ux{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ns(e,n)}matches(e){return zx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function zx(t){return t.op==="and"}function qx(t){return aP(t)&&zx(t)}function aP(t){for(const e of t.filters)if(e instanceof ns)return!1;return!0}function O0(t){if(t instanceof On)return t.field.canonicalString()+t.op.toString()+oc(t.value);if(qx(t))return t.filters.map(e=>O0(e)).join(",");{const e=t.filters.map(n=>O0(n)).join(",");return`${t.op}(${e})`}}function Hx(t,e){return t instanceof On?function(r,i){return i instanceof On&&r.op===i.op&&r.field.isEqual(i.field)&&Ds(r.value,i.value)}(t,e):t instanceof ns?function(r,i){return i instanceof ns&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&Hx(o,i.filters[a]),!0):!1}(t,e):void mt()}function Wx(t){return t instanceof On?function(n){return`${n.field.canonicalString()} ${n.op} ${oc(n.value)}`}(t):t instanceof ns?function(n){return n.op.toString()+" {"+n.getFilters().map(Wx).join(" ,")+"}"}(t):"Filter"}class lP extends On{constructor(e,n,r){super(e,n,r),this.key=it.fromName(r.referenceValue)}matches(e){const n=it.comparator(e.key,this.key);return this.matchesComparison(n)}}class uP extends On{constructor(e,n){super(e,"in",n),this.keys=$x("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class cP extends On{constructor(e,n){super(e,"not-in",n),this.keys=$x("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function $x(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>it.fromName(r.referenceValue))}class hP extends On{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return y2(n)&&Yh(n.arrayValue,this.value)}}class dP extends On{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Yh(this.value.arrayValue,n)}}class fP extends On{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Yh(this.value.arrayValue,n)}}class pP extends On{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!y2(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Yh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function b5(t,e=null,n=[],r=[],i=null,s=null,o=null){return new mP(t,e,n,r,i,s,o)}function v2(t){const e=_t(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>O0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),em(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>oc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>oc(r)).join(",")),e.ue=n}return e.ue}function w2(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!oP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Hx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_5(t.startAt,e.startAt)&&_5(t.endAt,e.endAt)}function M0(t){return it.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function gP(t,e,n,r,i,s,o,a){return new md(t,e,n,r,i,s,o,a)}function _2(t){return new md(t)}function x5(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Gx(t){return t.collectionGroup!==null}function wh(t){const e=_t(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new or(ir.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(h=>{h.isInequality()&&(a=a.add(h.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ap(s,r))}),n.has(ir.keyField().canonicalString())||e.ce.push(new Ap(ir.keyField(),r))}return e.ce}function ks(t){const e=_t(t);return e.le||(e.le=yP(e,wh(t))),e.le}function yP(t,e){if(t.limitType==="F")return b5(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Ap(i.field,s)});const n=t.endAt?new Np(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Np(t.startAt.position,t.startAt.inclusive):null;return b5(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function V0(t,e){const n=t.filters.concat([e]);return new md(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function B0(t,e,n){return new md(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function tm(t,e){return w2(ks(t),ks(e))&&t.limitType===e.limitType}function Kx(t){return`${v2(ks(t))}|lt:${t.limitType}`}function bu(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Wx(i)).join(", ")}]`),em(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>oc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>oc(i)).join(",")),`Target(${r})`}(ks(t))}; limitType=${t.limitType})`}function nm(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):it.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of wh(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const h=w5(o,a,l);return o.inclusive?h<=0:h<0}(r.startAt,wh(r),i)||r.endAt&&!function(o,a,l){const h=w5(o,a,l);return o.inclusive?h>=0:h>0}(r.endAt,wh(r),i))}(t,e)}function vP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Qx(t){return(e,n)=>{let r=!1;for(const i of wh(t)){const s=wP(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function wP(t,e,n){const r=t.field.isKeyField()?it.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),h=a.data.field(s);return l!==null&&h!==null?sc(l,h):mt()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return mt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wl(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Mx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P=new fn(it.comparator);function bo(){return _P}const Yx=new fn(it.comparator);function sh(...t){let e=Yx;for(const n of t)e=e.insert(n.key,n);return e}function Jx(t){let e=Yx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function xl(){return _h()}function Xx(){return _h()}function _h(){return new yc(t=>t.toString(),(t,e)=>t.isEqual(e))}const bP=new fn(it.comparator),xP=new or(it.comparator);function Et(...t){let e=xP;for(const n of t)e=e.add(n);return e}const SP=new or(jt);function NP(){return SP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sp(e)?"-0":e}}function Zx(t){return{integerValue:""+t}}function AP(t,e){return tP(e)?Zx(e):b2(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(){this._=void 0}}function EP(t,e,n){return t instanceof Jh?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&m2(s)&&(s=g2(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Xh?t4(t,e):t instanceof Zh?n4(t,e):function(i,s){const o=e4(i,s),a=S5(o)+S5(i.Pe);return F0(o)&&F0(i.Pe)?Zx(a):b2(i.serializer,a)}(t,e)}function IP(t,e,n){return t instanceof Xh?t4(t,e):t instanceof Zh?n4(t,e):n}function e4(t,e){return t instanceof Ep?function(r){return F0(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Jh extends rm{}class Xh extends rm{constructor(e){super(),this.elements=e}}function t4(t,e){const n=r4(e);for(const r of t.elements)n.some(i=>Ds(i,r))||n.push(r);return{arrayValue:{values:n}}}class Zh extends rm{constructor(e){super(),this.elements=e}}function n4(t,e){let n=r4(e);for(const r of t.elements)n=n.filter(i=>!Ds(i,r));return{arrayValue:{values:n}}}class Ep extends rm{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function S5(t){return An(t.integerValue||t.doubleValue)}function r4(t){return y2(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,n){this.field=e,this.transform=n}}function PP(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Xh&&i instanceof Xh||r instanceof Zh&&i instanceof Zh?ic(r.elements,i.elements,Ds):r instanceof Ep&&i instanceof Ep?Ds(r.Pe,i.Pe):r instanceof Jh&&i instanceof Jh}(t.transform,e.transform)}class CP{constructor(e,n){this.version=e,this.transformResults=n}}class Dr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Dr}static exists(e){return new Dr(void 0,e)}static updateTime(e){return new Dr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class im{}function i4(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new sm(t.key,Dr.none()):new gd(t.key,t.data,Dr.none());{const n=t.data,r=Gr.empty();let i=new or(ir.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new qa(t.key,r,new ci(i.toArray()),Dr.none())}}function kP(t,e,n){t instanceof gd?function(i,s,o){const a=i.value.clone(),l=A5(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof qa?function(i,s,o){if(!Bf(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=A5(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(s4(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function bh(t,e,n,r){return t instanceof gd?function(s,o,a,l){if(!Bf(s.precondition,o))return a;const h=s.value.clone(),p=E5(s.fieldTransforms,l,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof qa?function(s,o,a,l){if(!Bf(s.precondition,o))return a;const h=E5(s.fieldTransforms,l,o),p=o.data;return p.setAll(s4(s)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(s,o,a){return Bf(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function LP(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=e4(r.transform,i||null);s!=null&&(n===null&&(n=Gr.empty()),n.set(r.field,s))}return n||null}function N5(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ic(r,i,(s,o)=>PP(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class gd extends im{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class qa extends im{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function s4(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function A5(t,e,n){const r=new Map;Wt(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,IP(o,a,n[i]))}return r}function E5(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,EP(s,o,e))}return r}class sm extends im{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RP extends im{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&kP(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=bh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=bh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Xx();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=i4(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(wt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Et())}isEqual(e){return this.batchId===e.batchId&&ic(this.mutations,e.mutations,(n,r)=>N5(n,r))&&ic(this.baseMutations,e.baseMutations,(n,r)=>N5(n,r))}}class x2{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Wt(e.mutations.length===r.length);let i=function(){return bP}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new x2(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jn,Ct;function OP(t){switch(t){default:return mt();case Pe.CANCELLED:case Pe.UNKNOWN:case Pe.DEADLINE_EXCEEDED:case Pe.RESOURCE_EXHAUSTED:case Pe.INTERNAL:case Pe.UNAVAILABLE:case Pe.UNAUTHENTICATED:return!1;case Pe.INVALID_ARGUMENT:case Pe.NOT_FOUND:case Pe.ALREADY_EXISTS:case Pe.PERMISSION_DENIED:case Pe.FAILED_PRECONDITION:case Pe.ABORTED:case Pe.OUT_OF_RANGE:case Pe.UNIMPLEMENTED:case Pe.DATA_LOSS:return!0}}function o4(t){if(t===void 0)return _o("GRPC error has no .code"),Pe.UNKNOWN;switch(t){case jn.OK:return Pe.OK;case jn.CANCELLED:return Pe.CANCELLED;case jn.UNKNOWN:return Pe.UNKNOWN;case jn.DEADLINE_EXCEEDED:return Pe.DEADLINE_EXCEEDED;case jn.RESOURCE_EXHAUSTED:return Pe.RESOURCE_EXHAUSTED;case jn.INTERNAL:return Pe.INTERNAL;case jn.UNAVAILABLE:return Pe.UNAVAILABLE;case jn.UNAUTHENTICATED:return Pe.UNAUTHENTICATED;case jn.INVALID_ARGUMENT:return Pe.INVALID_ARGUMENT;case jn.NOT_FOUND:return Pe.NOT_FOUND;case jn.ALREADY_EXISTS:return Pe.ALREADY_EXISTS;case jn.PERMISSION_DENIED:return Pe.PERMISSION_DENIED;case jn.FAILED_PRECONDITION:return Pe.FAILED_PRECONDITION;case jn.ABORTED:return Pe.ABORTED;case jn.OUT_OF_RANGE:return Pe.OUT_OF_RANGE;case jn.UNIMPLEMENTED:return Pe.UNIMPLEMENTED;case jn.DATA_LOSS:return Pe.DATA_LOSS;default:return mt()}}(Ct=jn||(jn={}))[Ct.OK=0]="OK",Ct[Ct.CANCELLED=1]="CANCELLED",Ct[Ct.UNKNOWN=2]="UNKNOWN",Ct[Ct.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ct[Ct.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ct[Ct.NOT_FOUND=5]="NOT_FOUND",Ct[Ct.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ct[Ct.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ct[Ct.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ct[Ct.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ct[Ct.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ct[Ct.ABORTED=10]="ABORTED",Ct[Ct.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ct[Ct.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ct[Ct.INTERNAL=13]="INTERNAL",Ct[Ct.UNAVAILABLE=14]="UNAVAILABLE",Ct[Ct.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP=new El([4294967295,4294967295],0);function I5(t){const e=MP().encode(t),n=new Cx;return n.update(e),new Uint8Array(n.digest())}function T5(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new El([n,r],0),new El([i,s],0)]}class S2{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new oh(`Invalid padding: ${n}`);if(r<0)throw new oh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new oh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new oh(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=El.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(El.fromNumber(r)));return i.compare(VP)===1&&(i=new El([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=I5(e),[r,i]=T5(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new S2(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=I5(e),[r,i]=T5(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class oh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,yd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new om(wt.min(),i,new fn(jt),bo(),Et())}}class yd{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new yd(r,n,Et(),Et(),Et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class a4{constructor(e,n){this.targetId=e,this.me=n}}class l4{constructor(e,n,r=lr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class P5{constructor(){this.fe=0,this.ge=k5(),this.pe=lr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Et(),n=Et(),r=Et();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:mt()}}),new yd(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=k5()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Wt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class BP{constructor(e){this.Le=e,this.Be=new Map,this.ke=bo(),this.qe=C5(),this.Qe=new fn(jt)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:mt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(M0(s))if(r===0){const o=new it(s.path);this.Ue(n,o,xr.newNoDocument(o,wt.min()))}else Wt(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const h=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Bl(r).toUint8Array()}catch(l){if(l instanceof Vx)return rc("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new S2(o,i,s)}catch(l){return rc(l instanceof oh?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&M0(a.target)){const l=new it(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,xr.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Et();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const h=this.Je(l);return!h||h.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new om(e,n,this.Qe,this.ke,r);return this.ke=bo(),this.qe=C5(),this.Qe=new fn(jt),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new P5,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new or(jt),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||et("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new P5),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function C5(){return new fn(it.comparator)}function k5(){return new fn(it.comparator)}const UP={asc:"ASCENDING",desc:"DESCENDING"},zP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qP={and:"AND",or:"OR"};class HP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function U0(t,e){return t.useProto3Json||em(e)?e:{value:e}}function Ip(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function u4(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function WP(t,e){return Ip(t,e.toTimestamp())}function Ls(t){return Wt(!!t),wt.fromTimestamp(function(n){const r=ja(n);return new Mn(r.seconds,r.nanos)}(t))}function N2(t,e){return z0(t,e).canonicalString()}function z0(t,e){const n=function(i){return new on(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function c4(t){const e=on.fromString(t);return Wt(m4(e)),e}function q0(t,e){return N2(t.databaseId,e.path)}function _g(t,e){const n=c4(e);if(n.get(1)!==t.databaseId.projectId)throw new Qe(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Qe(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new it(d4(n))}function h4(t,e){return N2(t.databaseId,e)}function $P(t){const e=c4(t);return e.length===4?on.emptyPath():d4(e)}function H0(t){return new on(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function d4(t){return Wt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function L5(t,e,n){return{name:q0(t,e),fields:n.value.mapValue.fields}}function GP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:mt()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,p){return h.useProto3Json?(Wt(p===void 0||typeof p=="string"),lr.fromBase64String(p||"")):(Wt(p===void 0||p instanceof Buffer||p instanceof Uint8Array),lr.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(h){const p=h.code===void 0?Pe.UNKNOWN:o4(h.code);return new Qe(p,h.message||"")}(o);n=new l4(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=_g(t,r.document.name),s=Ls(r.document.updateTime),o=r.document.createTime?Ls(r.document.createTime):wt.min(),a=new Gr({mapValue:{fields:r.document.fields}}),l=xr.newFoundDocument(i,s,o,a),h=r.targetIds||[],p=r.removedTargetIds||[];n=new Uf(h,p,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=_g(t,r.document),s=r.readTime?Ls(r.readTime):wt.min(),o=xr.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Uf([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=_g(t,r.document),s=r.removedTargetIds||[];n=new Uf([],s,i,null)}else{if(!("filter"in e))return mt();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new FP(i,s),a=r.targetId;n=new a4(a,o)}}return n}function KP(t,e){let n;if(e instanceof gd)n={update:L5(t,e.key,e.value)};else if(e instanceof sm)n={delete:q0(t,e.key)};else if(e instanceof qa)n={update:L5(t,e.key,e.data),updateMask:rC(e.fieldMask)};else{if(!(e instanceof RP))return mt();n={verify:q0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Jh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Xh)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Zh)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ep)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw mt()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:WP(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:mt()}(t,e.precondition)),n}function QP(t,e){return t&&t.length>0?(Wt(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Ls(i.updateTime):Ls(s);return o.isEqual(wt.min())&&(o=Ls(s)),new CP(o,i.transformResults||[])}(n,e))):[]}function YP(t,e){return{documents:[h4(t,e.path)]}}function JP(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=h4(t,i);const s=function(h){if(h.length!==0)return p4(ns.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(p=>function(v){return{field:xu(v.field),direction:eC(v.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=U0(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:i}}function XP(t){let e=$P(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Wt(r===1);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(g){const v=f4(g);return v instanceof ns&&qx(v)?v.getFilters():[v]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(v=>function(E){return new Ap(Su(E.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(v))}(n.orderBy));let a=null;n.limit&&(a=function(g){let v;return v=typeof g=="object"?g.value:g,em(v)?null:v}(n.limit));let l=null;n.startAt&&(l=function(g){const v=!!g.before,f=g.values||[];return new Np(f,v)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const v=!g.before,f=g.values||[];return new Np(f,v)}(n.endAt)),gP(e,i,o,s,a,"F",l,h)}function ZP(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return mt()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function f4(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Su(n.unaryFilter.field);return On.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Su(n.unaryFilter.field);return On.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Su(n.unaryFilter.field);return On.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Su(n.unaryFilter.field);return On.create(o,"!=",{nullValue:"NULL_VALUE"});default:return mt()}}(t):t.fieldFilter!==void 0?function(n){return On.create(Su(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return mt()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ns.create(n.compositeFilter.filters.map(r=>f4(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return mt()}}(n.compositeFilter.op))}(t):mt()}function eC(t){return UP[t]}function tC(t){return zP[t]}function nC(t){return qP[t]}function xu(t){return{fieldPath:t.canonicalString()}}function Su(t){return ir.fromServerFormat(t.fieldPath)}function p4(t){return t instanceof On?function(n){if(n.op==="=="){if(v5(n.value))return{unaryFilter:{field:xu(n.field),op:"IS_NAN"}};if(y5(n.value))return{unaryFilter:{field:xu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(v5(n.value))return{unaryFilter:{field:xu(n.field),op:"IS_NOT_NAN"}};if(y5(n.value))return{unaryFilter:{field:xu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xu(n.field),op:tC(n.op),value:n.value}}}(t):t instanceof ns?function(n){const r=n.getFilters().map(i=>p4(i));return r.length===1?r[0]:{compositeFilter:{op:nC(n.op),filters:r}}}(t):mt()}function rC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function m4(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,n,r,i,s=wt.min(),o=wt.min(),a=lr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ga(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ga(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ga(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ga(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e){this.ct=e}}function sC(t){const e=XP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?B0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(){this.un=new aC}addToCollectionParentIndex(e,n){return this.un.add(n),je.resolve()}getCollectionParents(e,n){return je.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return je.resolve()}deleteFieldIndex(e,n){return je.resolve()}deleteAllFieldIndexes(e){return je.resolve()}createTargetIndexes(e,n){return je.resolve()}getDocumentsMatchingTarget(e,n){return je.resolve(null)}getIndexType(e,n){return je.resolve(0)}getFieldIndexes(e,n){return je.resolve([])}getNextCollectionGroupToUpdate(e){return je.resolve(null)}getMinOffset(e,n){return je.resolve(Da.min())}getMinOffsetFromCollectionGroup(e,n){return je.resolve(Da.min())}updateCollectionGroup(e,n,r){return je.resolve()}updateIndexEntries(e,n){return je.resolve()}}class aC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new or(on.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new or(on.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ac(0)}static kn(){return new ac(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(){this.changes=new yc(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?je.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&bh(r.mutation,i,ci.empty(),Mn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Et()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Et()){const i=xl();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=sh();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=xl();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Et()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=bo();const o=_h(),a=function(){return _h()}();return n.forEach((l,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof qa)?s=s.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),bh(p.mutation,h,p.mutation.getFieldMask(),Mn.now())):o.set(h.key,ci.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var g;return a.set(h,new uC(p,(g=o.get(h))!==null&&g!==void 0?g:null))}),a))}recalculateAndSaveOverlays(e,n){const r=_h();let i=new fn((o,a)=>o-a),s=Et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const h=n.get(l);if(h===null)return;let p=r.get(l)||ci.empty();p=a.applyToLocalView(h,p),r.set(l,p);const g=(i.get(a.batchId)||Et()).add(l);i=i.insert(a.batchId,g)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),h=l.key,p=l.value,g=Xx();p.forEach(v=>{if(!s.has(v)){const f=i4(n.get(v),r.get(v));f!==null&&g.set(v,f),s=s.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,g))}return je.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return it.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Gx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):je.resolve(xl());let a=-1,l=s;return o.next(h=>je.forEach(h,(p,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(p)?je.resolve():this.remoteDocumentCache.getEntry(e,p).next(v=>{l=l.insert(p,v)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,l,h,Et())).next(p=>({batchId:a,changes:Jx(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new it(n)).next(r=>{let i=sh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=sh();return this.indexManager.getCollectionParents(e,s).next(a=>je.forEach(a,l=>{const h=function(g,v){return new md(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(p=>{p.forEach((g,v)=>{o=o.insert(g,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,xr.newInvalidDocument(p)))});let a=sh();return o.forEach((l,h)=>{const p=s.get(l);p!==void 0&&bh(p.mutation,h,ci.empty(),Mn.now()),nm(n,h)&&(a=a.insert(l,h))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return je.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ls(i.createTime)}}(n)),je.resolve()}getNamedQuery(e,n){return je.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:sC(i.bundledQuery),readTime:Ls(i.readTime)}}(n)),je.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(){this.overlays=new fn(it.comparator),this.Ir=new Map}getOverlay(e,n){return je.resolve(this.overlays.get(n))}getOverlays(e,n){const r=xl();return je.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),je.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),je.resolve()}getOverlaysForCollection(e,n,r){const i=xl(),s=n.length+1,o=new it(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,h=l.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return je.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new fn((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=s.get(h.largestBatchId);p===null&&(p=xl(),s=s.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const a=xl(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((h,p)=>a.set(h,p)),!(a.size()>=i)););return je.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new jP(n,r));let s=this.Ir.get(n);s===void 0&&(s=Et(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(){this.sessionToken=lr.EMPTY_BYTE_STRING}getSessionToken(e){return je.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,je.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(){this.Tr=new or(Kn.Er),this.dr=new or(Kn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Kn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Kn(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new it(new on([])),r=new Kn(n,e),i=new Kn(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new it(new on([])),r=new Kn(n,e),i=new Kn(n,e+1);let s=Et();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Kn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Kn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return it.comparator(e.key,n.key)||jt(e.wr,n.wr)}static Ar(e,n){return jt(e.wr,n.wr)||it.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new or(Kn.Er)}checkEmpty(e){return je.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new DP(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Kn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return je.resolve(o)}lookupMutationBatch(e,n){return je.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return je.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return je.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return je.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Kn(n,0),i=new Kn(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),je.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new or(jt);return n.forEach(i=>{const s=new Kn(i,0),o=new Kn(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),je.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;it.isDocumentKey(s)||(s=s.child(""));const o=new Kn(new it(s),0);let a=new or(jt);return this.br.forEachWhile(l=>{const h=l.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(a=a.add(l.wr)),!0)},o),je.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Wt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return je.forEach(n.mutations,i=>{const s=new Kn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Kn(n,0),i=this.br.firstAfterOrEqual(r);return je.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,je.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e){this.Mr=e,this.docs=function(){return new fn(it.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return je.resolve(r?r.document.mutableCopy():xr.newInvalidDocument(n))}getEntries(e,n){let r=bo();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():xr.newInvalidDocument(i))}),je.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=bo();const o=n.path,a=new it(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:h,value:{document:p}}=l.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||J6(Y6(p),r)<=0||(i.has(p.key)||nm(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return je.resolve(s)}getAllFromCollectionGroup(e,n,r,i){mt()}Or(e,n){return je.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new gC(this)}getSize(e){return je.resolve(this.size)}}class gC extends lC{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),je.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e){this.persistence=e,this.Nr=new yc(n=>v2(n),w2),this.lastRemoteSnapshotVersion=wt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new A2,this.targetCount=0,this.kr=ac.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),je.resolve()}getLastRemoteSnapshotVersion(e){return je.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return je.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),je.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),je.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ac(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,je.resolve()}updateTargetData(e,n){return this.Kn(n),je.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,je.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),je.waitFor(s).next(()=>i)}getTargetCount(e){return je.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return je.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),je.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),je.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),je.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return je.resolve(r)}containsKey(e,n){return je.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,n){this.qr={},this.overlays={},this.Qr=new p2(0),this.Kr=!1,this.Kr=!0,this.$r=new fC,this.referenceDelegate=e(this),this.Ur=new yC(this),this.indexManager=new oC,this.remoteDocumentCache=function(i){return new mC(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new iC(n),this.Gr=new hC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new dC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new pC(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){et("MemoryPersistence","Starting transaction:",e);const i=new wC(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return je.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class wC extends Z6{constructor(e){super(),this.currentSequenceNumber=e}}class E2{constructor(e){this.persistence=e,this.Jr=new A2,this.Yr=null}static Zr(e){return new E2(e)}get Xr(){if(this.Yr)return this.Yr;throw mt()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),je.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),je.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),je.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return je.forEach(this.Xr,r=>{const i=it.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,wt.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return je.or([()=>je.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Et(),i=Et();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new I2(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return sE()?8:eP(Ar())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new _C;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Gc()<=Tt.DEBUG&&et("QueryEngine","SDK will not create cache indexes for query:",bu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),je.resolve()):(Gc()<=Tt.DEBUG&&et("QueryEngine","Query:",bu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Gc()<=Tt.DEBUG&&et("QueryEngine","The SDK decides to create cache indexes for query:",bu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ks(n))):je.resolve())}Yi(e,n){if(x5(n))return je.resolve(null);let r=ks(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=B0(n,null,"F"),r=ks(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Et(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const h=this.ts(n,a);return this.ns(n,h,o,l.readTime)?this.Yi(e,B0(n,null,"F")):this.rs(e,h,n,l)}))})))}Zi(e,n,r,i){return x5(n)||i.isEqual(wt.min())?je.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?je.resolve(null):(Gc()<=Tt.DEBUG&&et("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),bu(n)),this.rs(e,o,n,Q6(i,-1)).next(a=>a))})}ts(e,n){let r=new or(Qx(e));return n.forEach((i,s)=>{nm(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Gc()<=Tt.DEBUG&&et("QueryEngine","Using full collection scan to execute query:",bu(n)),this.Ji.getDocumentsMatchingQuery(e,n,Da.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new fn(jt),this._s=new yc(s=>v2(s),w2),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function SC(t,e,n,r){return new xC(t,e,n,r)}async function g4(t,e){const n=_t(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Et();for(const h of i){o.push(h.batchId);for(const p of h.mutations)l=l.add(p.key)}for(const h of s){a.push(h.batchId);for(const p of h.mutations)l=l.add(p.key)}return n.localDocuments.getDocuments(r,l).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:a}))})})}function NC(t,e){const n=_t(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,h,p){const g=h.batch,v=g.keys();let f=je.resolve();return v.forEach(E=>{f=f.next(()=>p.getEntry(l,E)).next(k=>{const P=h.docVersions.get(E);Wt(P!==null),k.version.compareTo(P)<0&&(g.applyToRemoteDocument(k,h),k.isValidDocument()&&(k.setReadTime(h.commitVersion),p.addEntry(k)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(l,g))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Et();for(let h=0;h<a.mutationResults.length;++h)a.mutationResults[h].transformResults.length>0&&(l=l.add(a.batch.mutations[h].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function y4(t){const e=_t(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function AC(t,e){const n=_t(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((p,g)=>{const v=i.get(g);if(!v)return;a.push(n.Ur.removeMatchingKeys(s,p.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(s,p.addedDocuments,g)));let f=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?f=f.withResumeToken(lr.EMPTY_BYTE_STRING,wt.min()).withLastLimboFreeSnapshotVersion(wt.min()):p.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(p.resumeToken,r)),i=i.insert(g,f),function(k,P,w){return k.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(v,f,p)&&a.push(n.Ur.updateTargetData(s,f))});let l=bo(),h=Et();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),a.push(EC(s,o,e.documentUpdates).next(p=>{l=p.Ps,h=p.Is})),!r.isEqual(wt.min())){const p=n.Ur.getLastRemoteSnapshotVersion(s).next(g=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(p)}return je.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,h)).next(()=>l)}).then(s=>(n.os=i,s))}function EC(t,e,n){let r=Et(),i=Et();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=bo();return n.forEach((a,l)=>{const h=s.get(a);l.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(wt.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||l.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):et("LocalStore","Ignoring outdated watch update for ",a,". Current version:",h.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function IC(t,e){const n=_t(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function TC(t,e){const n=_t(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,je.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new ga(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function W0(t,e,n){const r=_t(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!pd(o))throw o;et("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function R5(t,e,n){const r=_t(t);let i=wt.min(),s=Et();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,h,p){const g=_t(l),v=g._s.get(p);return v!==void 0?je.resolve(g.os.get(v)):g.Ur.getTargetData(h,p)}(r,o,ks(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:wt.min(),n?s:Et())).next(a=>(PC(r,vP(e),a),{documents:a,Ts:s})))}function PC(t,e,n){let r=t.us.get(e)||wt.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class D5{constructor(){this.activeTargetIds=NP()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CC{constructor(){this.so=new D5,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new D5,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){et("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){et("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gf=null;function bg(){return gf===null?gf=function(){return 268435456+Math.round(2147483648*Math.random())}():gf++,"0x"+gf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr="WebChannelConnection";class DC extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=bg(),l=this.xo(n,r.toUriEncodedString());et("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,o),this.No(n,l,h,i).then(p=>(et("RestConnection",`Received RPC '${n}' ${a}: `,p),p),p=>{throw rc("RestConnection",`RPC '${n}' ${a} failed with error: `,p,"url: ",l,"request:",i),p})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+gc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=LC[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=bg();return new Promise((o,a)=>{const l=new kx;l.setWithCredentials(!0),l.listenOnce(Lx.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Mf.NO_ERROR:const p=l.getResponseJson();et(mr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),o(p);break;case Mf.TIMEOUT:et(mr,`RPC '${e}' ${s} timed out`),a(new Qe(Pe.DEADLINE_EXCEEDED,"Request time out"));break;case Mf.HTTP_ERROR:const g=l.getStatus();if(et(mr,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let v=l.getResponseJson();Array.isArray(v)&&(v=v[0]);const f=v==null?void 0:v.error;if(f&&f.status&&f.message){const E=function(P){const w=P.toLowerCase().replace(/_/g,"-");return Object.values(Pe).indexOf(w)>=0?w:Pe.UNKNOWN}(f.status);a(new Qe(E,f.message))}else a(new Qe(Pe.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Qe(Pe.UNAVAILABLE,"Connection failed."));break;default:mt()}}finally{et(mr,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);et(mr,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}Bo(e,n,r){const i=bg(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=jx(),a=Dx(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(l.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const p=s.join("");et(mr,`Creating RPC '${e}' stream ${i}: ${p}`,l);const g=o.createWebChannel(p,l);let v=!1,f=!1;const E=new RC({Io:P=>{f?et(mr,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(v||(et(mr,`Opening RPC '${e}' stream ${i} transport.`),g.open(),v=!0),et(mr,`RPC '${e}' stream ${i} sending:`,P),g.send(P))},To:()=>g.close()}),k=(P,w,_)=>{P.listen(w,T=>{try{_(T)}catch(L){setTimeout(()=>{throw L},0)}})};return k(g,ih.EventType.OPEN,()=>{f||(et(mr,`RPC '${e}' stream ${i} transport opened.`),E.yo())}),k(g,ih.EventType.CLOSE,()=>{f||(f=!0,et(mr,`RPC '${e}' stream ${i} transport closed`),E.So())}),k(g,ih.EventType.ERROR,P=>{f||(f=!0,rc(mr,`RPC '${e}' stream ${i} transport errored:`,P),E.So(new Qe(Pe.UNAVAILABLE,"The operation could not be completed")))}),k(g,ih.EventType.MESSAGE,P=>{var w;if(!f){const _=P.data[0];Wt(!!_);const T=_,L=T.error||((w=T[0])===null||w===void 0?void 0:w.error);if(L){et(mr,`RPC '${e}' stream ${i} received error:`,L);const V=L.status;let W=function(C){const j=jn[C];if(j!==void 0)return o4(j)}(V),I=L.message;W===void 0&&(W=Pe.INTERNAL,I="Unknown error status: "+V+" with message "+L.message),f=!0,E.So(new Qe(W,I)),g.close()}else et(mr,`RPC '${e}' stream ${i} received:`,_),E.bo(_)}}),k(a,Rx.STAT_EVENT,P=>{P.stat===D0.PROXY?et(mr,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===D0.NOPROXY&&et(mr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.wo()},0),E}}function xg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(t){return new HP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&et("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new v4(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Pe.RESOURCE_EXHAUSTED?(_o(n.toString()),_o("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Qe(Pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return et("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(et("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jC extends w4{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=GP(this.serializer,e),r=function(s){if(!("targetChange"in s))return wt.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?wt.min():o.readTime?Ls(o.readTime):wt.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=H0(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=M0(l)?{documents:YP(s,l)}:{query:JP(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=u4(s,o.resumeToken);const h=U0(s,o.expectedCount);h!==null&&(a.expectedCount=h)}else if(o.snapshotVersion.compareTo(wt.min())>0){a.readTime=Ip(s,o.snapshotVersion.toTimestamp());const h=U0(s,o.expectedCount);h!==null&&(a.expectedCount=h)}return a}(this.serializer,e);const r=ZP(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=H0(this.serializer),n.removeTarget=e,this.a_(n)}}class FC extends w4{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Wt(!!e.streamToken),this.lastStreamToken=e.streamToken,Wt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Wt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=QP(e.writeResults,e.commitTime),r=Ls(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=H0(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>KP(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Qe(Pe.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,z0(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Qe(Pe.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,z0(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Qe(Pe.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class MC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(_o(n),this.D_=!1):et("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{$l(this)&&(et("RemoteStore","Restarting streams for network reachability change."),await async function(l){const h=_t(l);h.L_.add(4),await vd(h),h.q_.set("Unknown"),h.L_.delete(4),await lm(h)}(this))})}),this.q_=new MC(r,i)}}async function lm(t){if($l(t))for(const e of t.B_)await e(!0)}async function vd(t){for(const e of t.B_)await e(!1)}function _4(t,e){const n=_t(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),k2(n)?C2(n):vc(n).r_()&&P2(n,e))}function T2(t,e){const n=_t(t),r=vc(n);n.N_.delete(e),r.r_()&&b4(n,e),n.N_.size===0&&(r.r_()?r.o_():$l(n)&&n.q_.set("Unknown"))}function P2(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(wt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}vc(t).A_(e)}function b4(t,e){t.Q_.xe(e),vc(t).R_(e)}function C2(t){t.Q_=new BP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),vc(t).start(),t.q_.v_()}function k2(t){return $l(t)&&!vc(t).n_()&&t.N_.size>0}function $l(t){return _t(t).L_.size===0}function x4(t){t.Q_=void 0}async function BC(t){t.q_.set("Online")}async function UC(t){t.N_.forEach((e,n)=>{P2(t,e)})}async function zC(t,e){x4(t),k2(t)?(t.q_.M_(e),C2(t)):t.q_.set("Unknown")}async function qC(t,e,n){if(t.q_.set("Online"),e instanceof l4&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){et("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Tp(t,r)}else if(e instanceof Uf?t.Q_.Ke(e):e instanceof a4?t.Q_.He(e):t.Q_.We(e),!n.isEqual(wt.min()))try{const r=await y4(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,h)=>{if(l.resumeToken.approximateByteSize()>0){const p=s.N_.get(h);p&&s.N_.set(h,p.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,h)=>{const p=s.N_.get(l);if(!p)return;s.N_.set(l,p.withResumeToken(lr.EMPTY_BYTE_STRING,p.snapshotVersion)),b4(s,l);const g=new ga(p.target,l,h,p.sequenceNumber);P2(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){et("RemoteStore","Failed to raise snapshot:",r),await Tp(t,r)}}async function Tp(t,e,n){if(!pd(e))throw e;t.L_.add(1),await vd(t),t.q_.set("Offline"),n||(n=()=>y4(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{et("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await lm(t)})}function S4(t,e){return e().catch(n=>Tp(t,n,e))}async function um(t){const e=_t(t),n=Fa(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;HC(e);)try{const i=await IC(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,WC(e,i)}catch(i){await Tp(e,i)}N4(e)&&A4(e)}function HC(t){return $l(t)&&t.O_.length<10}function WC(t,e){t.O_.push(e);const n=Fa(t);n.r_()&&n.V_&&n.m_(e.mutations)}function N4(t){return $l(t)&&!Fa(t).n_()&&t.O_.length>0}function A4(t){Fa(t).start()}async function $C(t){Fa(t).p_()}async function GC(t){const e=Fa(t);for(const n of t.O_)e.m_(n.mutations)}async function KC(t,e,n){const r=t.O_.shift(),i=x2.from(r,e,n);await S4(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await um(t)}async function QC(t,e){e&&Fa(t).V_&&await async function(r,i){if(function(o){return OP(o)&&o!==Pe.ABORTED}(i.code)){const s=r.O_.shift();Fa(r).s_(),await S4(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await um(r)}}(t,e),N4(t)&&A4(t)}async function F5(t,e){const n=_t(t);n.asyncQueue.verifyOperationInProgress(),et("RemoteStore","RemoteStore received new credentials");const r=$l(n);n.L_.add(3),await vd(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await lm(n)}async function YC(t,e){const n=_t(t);e?(n.L_.delete(2),await lm(n)):e||(n.L_.add(2),await vd(n),n.q_.set("Unknown"))}function vc(t){return t.K_||(t.K_=function(n,r,i){const s=_t(n);return s.w_(),new jC(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:BC.bind(null,t),Ro:UC.bind(null,t),mo:zC.bind(null,t),d_:qC.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),k2(t)?C2(t):t.q_.set("Unknown")):(await t.K_.stop(),x4(t))})),t.K_}function Fa(t){return t.U_||(t.U_=function(n,r,i){const s=_t(n);return s.w_(),new FC(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:$C.bind(null,t),mo:QC.bind(null,t),f_:GC.bind(null,t),g_:KC.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await um(t)):(await t.U_.stop(),t.O_.length>0&&(et("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new co,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new L2(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Qe(Pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function R2(t,e){if(_o("AsyncQueue",`${e}: ${t}`),pd(t))return new Qe(Pe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e){this.comparator=e?(n,r)=>e(n,r)||it.comparator(n.key,r.key):(n,r)=>it.comparator(n.key,r.key),this.keyedMap=sh(),this.sortedSet=new fn(this.comparator)}static emptySet(e){return new Ku(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ku)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ku;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(){this.W_=new fn(it.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):mt():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class lc{constructor(e,n,r,i,s,o,a,l,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new lc(e,n,Ku.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class XC{constructor(){this.queries=M5(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=_t(n),s=i.queries;i.queries=M5(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new Qe(Pe.ABORTED,"Firestore shutting down"))}}function M5(){return new yc(t=>Kx(t),tm)}async function E4(t,e){const n=_t(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new JC,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=R2(o,`Initialization of query '${bu(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&D2(n)}async function I4(t,e){const n=_t(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ZC(t,e){const n=_t(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&D2(n)}function ek(t,e,n){const r=_t(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function D2(t){t.Y_.forEach(e=>{e.next()})}var $0,V5;(V5=$0||($0={})).ea="default",V5.Cache="cache";class T4{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new lc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=lc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==$0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e){this.key=e}}class C4{constructor(e){this.key=e}}class tk{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Et(),this.mutatedKeys=Et(),this.Aa=Qx(e),this.Ra=new Ku(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new O5,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,g)=>{const v=i.get(p),f=nm(this.query,g)?g:null,E=!!v&&this.mutatedKeys.has(v.key),k=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let P=!1;v&&f?v.data.isEqual(f.data)?E!==k&&(r.track({type:3,doc:f}),P=!0):this.ga(v,f)||(r.track({type:2,doc:f}),P=!0,(l&&this.Aa(f,l)>0||h&&this.Aa(f,h)<0)&&(a=!0)):!v&&f?(r.track({type:0,doc:f}),P=!0):v&&!f&&(r.track({type:1,doc:v}),P=!0,(l||h)&&(a=!0)),P&&(f?(o=o.add(f),s=k?s.add(p):s.delete(p)):(o=o.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,g)=>function(f,E){const k=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mt()}};return k(f)-k(E)}(p.type,g.type)||this.Aa(p.doc,g.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,h=l!==this.Ea;return this.Ea=l,o.length!==0||h?{snapshot:new lc(this.query,e.Ra,s,o,e.mutatedKeys,l===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new O5,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Et(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new C4(r))}),this.da.forEach(r=>{e.has(r)||n.push(new P4(r))}),n}ba(e){this.Ta=e.Ts,this.da=Et();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return lc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class nk{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class rk{constructor(e){this.key=e,this.va=!1}}class ik{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new yc(a=>Kx(a),tm),this.Ma=new Map,this.xa=new Set,this.Oa=new fn(it.comparator),this.Na=new Map,this.La=new A2,this.Ba={},this.ka=new Map,this.qa=ac.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function sk(t,e,n=!0){const r=F4(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await k4(r,e,n,!0),i}async function ok(t,e){const n=F4(t);await k4(n,e,!0,!1)}async function k4(t,e,n,r){const i=await TC(t.localStore,ks(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await ak(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&_4(t.remoteStore,i),a}async function ak(t,e,n,r,i){t.Ka=(g,v,f)=>async function(k,P,w,_){let T=P.view.ma(w);T.ns&&(T=await R5(k.localStore,P.query,!1).then(({documents:I})=>P.view.ma(I,T)));const L=_&&_.targetChanges.get(P.targetId),V=_&&_.targetMismatches.get(P.targetId)!=null,W=P.view.applyChanges(T,k.isPrimaryClient,L,V);return U5(k,P.targetId,W.wa),W.snapshot}(t,g,v,f);const s=await R5(t.localStore,e,!0),o=new tk(e,s.Ts),a=o.ma(s.documents),l=yd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=o.applyChanges(a,t.isPrimaryClient,l);U5(t,n,h.wa);const p=new nk(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function lk(t,e,n){const r=_t(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!tm(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await W0(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&T2(r.remoteStore,i.targetId),G0(r,i.targetId)}).catch(fd)):(G0(r,i.targetId),await W0(r.localStore,i.targetId,!0))}async function uk(t,e){const n=_t(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),T2(n.remoteStore,r.targetId))}async function ck(t,e,n){const r=yk(t);try{const i=await function(o,a){const l=_t(o),h=Mn.now(),p=a.reduce((f,E)=>f.add(E.key),Et());let g,v;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let E=bo(),k=Et();return l.cs.getEntries(f,p).next(P=>{E=P,E.forEach((w,_)=>{_.isValidDocument()||(k=k.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,E)).next(P=>{g=P;const w=[];for(const _ of a){const T=LP(_,g.get(_.key).overlayedDocument);T!=null&&w.push(new qa(_.key,T,Bx(T.value.mapValue),Dr.exists(!0)))}return l.mutationQueue.addMutationBatch(f,h,w,a)}).next(P=>{v=P;const w=P.applyToLocalDocumentSet(g,k);return l.documentOverlayCache.saveOverlays(f,P.batchId,w)})}).then(()=>({batchId:v.batchId,changes:Jx(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let h=o.Ba[o.currentUser.toKey()];h||(h=new fn(jt)),h=h.insert(a,l),o.Ba[o.currentUser.toKey()]=h}(r,i.batchId,n),await wd(r,i.changes),await um(r.remoteStore)}catch(i){const s=R2(i,"Failed to persist write");n.reject(s)}}async function L4(t,e){const n=_t(t);try{const r=await AC(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Wt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Wt(o.va):i.removedDocuments.size>0&&(Wt(o.va),o.va=!1))}),await wd(n,r,e)}catch(r){await fd(r)}}function B5(t,e,n){const r=_t(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=_t(o);l.onlineState=a;let h=!1;l.queries.forEach((p,g)=>{for(const v of g.j_)v.Z_(a)&&(h=!0)}),h&&D2(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function hk(t,e,n){const r=_t(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new fn(it.comparator);o=o.insert(s,xr.newNoDocument(s,wt.min()));const a=Et().add(s),l=new om(wt.min(),new Map,new fn(jt),o,a);await L4(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),j2(r)}else await W0(r.localStore,e,!1).then(()=>G0(r,e,n)).catch(fd)}async function dk(t,e){const n=_t(t),r=e.batch.batchId;try{const i=await NC(n.localStore,e);D4(n,r,null),R4(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await wd(n,i)}catch(i){await fd(i)}}async function fk(t,e,n){const r=_t(t);try{const i=await function(o,a){const l=_t(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return l.mutationQueue.lookupMutationBatch(h,a).next(g=>(Wt(g!==null),p=g.keys(),l.mutationQueue.removeMutationBatch(h,g))).next(()=>l.mutationQueue.performConsistencyCheck(h)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(h,p,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>l.localDocuments.getDocuments(h,p))})}(r.localStore,e);D4(r,e,n),R4(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await wd(r,i)}catch(i){await fd(i)}}function R4(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function D4(t,e,n){const r=_t(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function G0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||j4(t,r)})}function j4(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(T2(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),j2(t))}function U5(t,e,n){for(const r of n)r instanceof P4?(t.La.addReference(r.key,e),pk(t,r)):r instanceof C4?(et("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||j4(t,r.key)):mt()}function pk(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(et("SyncEngine","New document in limbo: "+n),t.xa.add(r),j2(t))}function j2(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new it(on.fromString(e)),r=t.qa.next();t.Na.set(r,new rk(n)),t.Oa=t.Oa.insert(n,r),_4(t.remoteStore,new ga(ks(_2(n.path)),r,"TargetPurposeLimboResolution",p2.oe))}}async function wd(t,e,n){const r=_t(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const g=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(l.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(l.targetId,g?"current":"not-current")}if(h){i.push(h);const g=I2.Wi(l.targetId,h);s.push(g)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,h){const p=_t(l);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>je.forEach(h,v=>je.forEach(v.$i,f=>p.persistence.referenceDelegate.addReference(g,v.targetId,f)).next(()=>je.forEach(v.Ui,f=>p.persistence.referenceDelegate.removeReference(g,v.targetId,f)))))}catch(g){if(!pd(g))throw g;et("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const v=g.targetId;if(!g.fromCache){const f=p.os.get(v),E=f.snapshotVersion,k=f.withLastLimboFreeSnapshotVersion(E);p.os=p.os.insert(v,k)}}}(r.localStore,s))}async function mk(t,e){const n=_t(t);if(!n.currentUser.isEqual(e)){et("SyncEngine","User change. New user:",e.toKey());const r=await g4(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new Qe(Pe.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await wd(n,r.hs)}}function gk(t,e){const n=_t(t),r=n.Na.get(e);if(r&&r.va)return Et().add(r.key);{let i=Et();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function F4(t){const e=_t(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=L4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hk.bind(null,e),e.Ca.d_=ZC.bind(null,e.eventManager),e.Ca.$a=ek.bind(null,e.eventManager),e}function yk(t){const e=_t(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fk.bind(null,e),e}class Pp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=am(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return SC(this.persistence,new bC,e.initialUser,this.serializer)}Ga(e){return new vC(E2.Zr,this.serializer)}Wa(e){return new CC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Pp.provider={build:()=>new Pp};class K0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>B5(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=mk.bind(null,this.syncEngine),await YC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new XC}()}createDatastore(e){const n=am(e.databaseInfo.databaseId),r=function(s){return new DC(s)}(e.databaseInfo);return function(s,o,a,l){return new OC(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new VC(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>B5(this.syncEngine,n,0),function(){return j5.D()?new j5:new kC}())}createSyncEngine(e,n){return function(i,s,o,a,l,h,p){const g=new ik(i,s,o,a,l,h);return p&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=_t(i);et("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await vd(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}K0.provider={build:()=>new K0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):_o("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=_r.UNAUTHENTICATED,this.clientId=Ox.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{et("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(et("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new co;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=R2(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Sg(t,e){t.asyncQueue.verifyOperationInProgress(),et("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await g4(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function z5(t,e){t.asyncQueue.verifyOperationInProgress();const n=await wk(t);et("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>F5(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>F5(e.remoteStore,i)),t._onlineComponents=e}async function wk(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){et("FirestoreClient","Using user provided OfflineComponentProvider");try{await Sg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Pe.FAILED_PRECONDITION||i.code===Pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;rc("Error using user provided cache. Falling back to memory cache: "+n),await Sg(t,new Pp)}}else et("FirestoreClient","Using default OfflineComponentProvider"),await Sg(t,new Pp);return t._offlineComponents}async function M4(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(et("FirestoreClient","Using user provided OnlineComponentProvider"),await z5(t,t._uninitializedComponentsProvider._online)):(et("FirestoreClient","Using default OnlineComponentProvider"),await z5(t,new K0))),t._onlineComponents}function _k(t){return M4(t).then(e=>e.syncEngine)}async function V4(t){const e=await M4(t),n=e.eventManager;return n.onListen=sk.bind(null,e.syncEngine),n.onUnlisten=lk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ok.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=uk.bind(null,e.syncEngine),n}function bk(t,e,n={}){const r=new co;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,h){const p=new O4({next:v=>{p.Za(),o.enqueueAndForget(()=>I4(s,g));const f=v.docs.has(a);!f&&v.fromCache?h.reject(new Qe(Pe.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&v.fromCache&&l&&l.source==="server"?h.reject(new Qe(Pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(v)},error:v=>h.reject(v)}),g=new T4(_2(a.path),p,{includeMetadataChanges:!0,_a:!0});return E4(s,g)}(await V4(t),t.asyncQueue,e,n,r)),r.promise}function xk(t,e,n={}){const r=new co;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,h){const p=new O4({next:v=>{p.Za(),o.enqueueAndForget(()=>I4(s,g)),v.fromCache&&l.source==="server"?h.reject(new Qe(Pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(v)},error:v=>h.reject(v)}),g=new T4(a,p,{includeMetadataChanges:!0,_a:!0});return E4(s,g)}(await V4(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B4(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U4(t,e,n){if(!n)throw new Qe(Pe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Sk(t,e,n,r){if(e===!0&&r===!0)throw new Qe(Pe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function H5(t){if(!it.isDocumentKey(t))throw new Qe(Pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function W5(t){if(it.isDocumentKey(t))throw new Qe(Pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function cm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":mt()}function Ri(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Qe(Pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cm(t);throw new Qe(Pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Qe(Pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Qe(Pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Sk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=B4((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Qe(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Qe(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Qe(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hm{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $5({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Qe(Pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Qe(Pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $5(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new B6;switch(r.type){case"firstParty":return new H6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Qe(Pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=q5.get(n);r&&(et("ComponentProvider","Removing Datastore"),q5.delete(n),r.terminate())}(this),Promise.resolve()}}function Nk(t,e,n,r={}){var i;const s=(t=Ri(t,hm))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&rc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=_r.MOCK_USER;else{a=XA(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new Qe(Pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new _r(h)}t._authCredentials=new U6(new Fx(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new wc(this.firestore,e,this._query)}}class jr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jr(this.firestore,e,this._key)}}class Pa extends wc{constructor(e,n,r){super(e,n,_2(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jr(this.firestore,null,new it(e))}withConverter(e){return new Pa(this.firestore,e,this._path)}}function hl(t,e,...n){if(t=Vn(t),U4("collection","path",e),t instanceof hm){const r=on.fromString(e,...n);return W5(r),new Pa(t,null,r)}{if(!(t instanceof jr||t instanceof Pa))throw new Qe(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(on.fromString(e,...n));return W5(r),new Pa(t.firestore,null,r)}}function _s(t,e,...n){if(t=Vn(t),arguments.length===1&&(e=Ox.newId()),U4("doc","path",e),t instanceof hm){const r=on.fromString(e,...n);return H5(r),new jr(t,null,new it(r))}{if(!(t instanceof jr||t instanceof Pa))throw new Qe(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(on.fromString(e,...n));return H5(r),new jr(t.firestore,t instanceof Pa?t.converter:null,new it(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new v4(this,"async_queue_retry"),this.Vu=()=>{const r=xg();r&&et("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=xg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=xg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new co;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!pd(e))throw e;et("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw _o("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=L2.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&mt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Ha extends hm{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new G5,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new G5(e),this._firestoreClient=void 0,await e}}}function Ak(t,e){const n=typeof t=="object"?t:Gb(),r=typeof t=="string"?t:"(default)",i=r2(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=YA("firestore");s&&Nk(i,...s)}return i}function dm(t){if(t._terminated)throw new Qe(Pe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Ek(t),t._firestoreClient}function Ek(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,h,p){return new rP(a,l,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,B4(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new vk(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new uc(lr.fromBase64String(e))}catch(n){throw new Qe(Pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new uc(lr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Qe(Pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ir(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Qe(Pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Qe(Pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return jt(this._lat,e._lat)||jt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=/^__.*__$/;class Tk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new qa(e,this.data,this.fieldMask,n,this.fieldTransforms):new gd(e,this.data,n,this.fieldTransforms)}}class z4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new qa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function q4(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mt()}}class M2{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new M2(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Cp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(q4(this.Cu)&&Ik.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Pk{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||am(e)}Qu(e,n,r,i=!1){return new M2({Cu:e,methodName:n,qu:r,path:ir.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bd(t){const e=t._freezeSettings(),n=am(t._databaseId);return new Pk(t._databaseId,!!e.ignoreUndefinedProperties,n)}function V2(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);U2("Data must be an object, but it was:",o,r);const a=$4(r,o);let l,h;if(s.merge)l=new ci(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const p=[];for(const g of s.mergeFields){const v=Q0(e,g,n);if(!o.contains(v))throw new Qe(Pe.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);K4(p,v)||p.push(v)}l=new ci(p),h=o.fieldTransforms.filter(g=>l.covers(g.field))}else l=null,h=o.fieldTransforms;return new Tk(new Gr(a),l,h)}class pm extends fm{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof pm}}class B2 extends fm{_toFieldTransform(e){return new TP(e.path,new Jh)}isEqual(e){return e instanceof B2}}function H4(t,e,n,r){const i=t.Qu(1,e,n);U2("Data must be an object, but it was:",i,r);const s=[],o=Gr.empty();Wl(r,(l,h)=>{const p=z2(e,l,n);h=Vn(h);const g=i.Nu(p);if(h instanceof pm)s.push(p);else{const v=xd(h,g);v!=null&&(s.push(p),o.set(p,v))}});const a=new ci(s);return new z4(o,a,i.fieldTransforms)}function W4(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[Q0(e,r,n)],l=[i];if(s.length%2!=0)throw new Qe(Pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)a.push(Q0(e,s[v])),l.push(s[v+1]);const h=[],p=Gr.empty();for(let v=a.length-1;v>=0;--v)if(!K4(h,a[v])){const f=a[v];let E=l[v];E=Vn(E);const k=o.Nu(f);if(E instanceof pm)h.push(f);else{const P=xd(E,k);P!=null&&(h.push(f),p.set(f,P))}}const g=new ci(h);return new z4(p,g,o.fieldTransforms)}function Ck(t,e,n,r=!1){return xd(n,t.Qu(r?4:3,e))}function xd(t,e){if(G4(t=Vn(t)))return U2("Unsupported field value:",e,t),$4(t,e);if(t instanceof fm)return function(r,i){if(!q4(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=xd(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Vn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return AP(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Mn.fromDate(r);return{timestampValue:Ip(i.serializer,s)}}if(r instanceof Mn){const s=new Mn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ip(i.serializer,s)}}if(r instanceof F2)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof uc)return{bytesValue:u4(i.serializer,r._byteString)};if(r instanceof jr){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:N2(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof O2)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return b2(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${cm(r)}`)}(t,e)}function $4(t,e){const n={};return Mx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wl(t,(r,i)=>{const s=xd(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function G4(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Mn||t instanceof F2||t instanceof uc||t instanceof jr||t instanceof fm||t instanceof O2)}function U2(t,e,n){if(!G4(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=cm(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Q0(t,e,n){if((e=Vn(e))instanceof _d)return e._internalPath;if(typeof e=="string")return z2(t,e);throw Cp("Field path arguments must be of type string or ",t,!1,void 0,n)}const kk=new RegExp("[~\\*/\\[\\]]");function z2(t,e,n){if(e.search(kk)>=0)throw Cp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new _d(...e.split("."))._internalPath}catch{throw Cp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Cp(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Qe(Pe.INVALID_ARGUMENT,a+t+l)}function K4(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new jr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Lk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(q2("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Lk extends Q4{data(){return super.data()}}function q2(t,e){return typeof e=="string"?z2(t,e):e instanceof _d?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Qe(Pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class H2{}class Dk extends H2{}function Kc(t,e,...n){let r=[];e instanceof H2&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof W2).length,a=s.filter(l=>l instanceof mm).length;if(o>1||o>0&&a>0)throw new Qe(Pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class mm extends Dk{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new mm(e,n,r)}_apply(e){const n=this._parse(e);return Y4(e._query,n),new wc(e.firestore,e.converter,V0(e._query,n))}_parse(e){const n=bd(e.firestore);return function(s,o,a,l,h,p,g){let v;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Qe(Pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){Q5(g,p);const f=[];for(const E of g)f.push(K5(l,s,E));v={arrayValue:{values:f}}}else v=K5(l,s,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||Q5(g,p),v=Ck(a,o,g,p==="in"||p==="not-in");return On.create(h,p,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function dl(t,e,n){const r=e,i=q2("where",t);return mm._create(i,r,n)}class W2 extends H2{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new W2(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ns.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)Y4(o,l),o=V0(o,l)}(e._query,n),new wc(e.firestore,e.converter,V0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function K5(t,e,n){if(typeof(n=Vn(n))=="string"){if(n==="")throw new Qe(Pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gx(e)&&n.indexOf("/")!==-1)throw new Qe(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(on.fromString(n));if(!it.isDocumentKey(r))throw new Qe(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return g5(t,new it(r))}if(n instanceof jr)return g5(t,n._key);throw new Qe(Pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cm(n)}.`)}function Q5(t,e){if(!Array.isArray(t)||t.length===0)throw new Qe(Pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Y4(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Qe(Pe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Qe(Pe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class jk{convertValue(e,n="none"){switch(Ul(e)){case 0:return null;case 1:return e.booleanValue;case 2:return An(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Bl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw mt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Wl(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>An(o.doubleValue));return new O2(s)}convertGeoPoint(e){return new F2(An(e.latitude),An(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=g2(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Kh(e));default:return null}}convertTimestamp(e){const n=ja(e);return new Mn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=on.fromString(e);Wt(m4(r));const i=new Qh(r.get(1),r.get(3)),s=new it(r.popFirst(5));return i.isEqual(n)||_o(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class J4 extends Q4{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new zf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(q2("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class zf extends J4{data(e={}){return super.data(e)}}class Fk{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ah(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new zf(this._firestore,this._userDataWriter,r.key,r,new ah(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Qe(Pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new zf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ah(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new zf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ah(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return a.type!==0&&(h=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),p=o.indexOf(a.doc.key)),{type:Ok(a.type),doc:l,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Ok(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(t){t=Ri(t,jr);const e=Ri(t.firestore,Ha);return bk(dm(e),t._key).then(n=>Uk(e,t,n))}class X4 extends jk{constructor(e){super(),this.firestore=e}convertBytes(e){return new uc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jr(this.firestore,null,n)}}function Qc(t){t=Ri(t,wc);const e=Ri(t.firestore,Ha),n=dm(e),r=new X4(e);return Rk(t._query),xk(n,t._query).then(i=>new Fk(e,r,t,i))}function Y5(t,e,n){t=Ri(t,jr);const r=Ri(t.firestore,Ha),i=$2(t.converter,e,n);return Sd(r,[V2(bd(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Dr.none())])}function Mk(t,e,n,...r){t=Ri(t,jr);const i=Ri(t.firestore,Ha),s=bd(i);let o;return o=typeof(e=Vn(e))=="string"||e instanceof _d?W4(s,"updateDoc",t._key,e,n,r):H4(s,"updateDoc",t._key,e),Sd(i,[o.toMutation(t._key,Dr.exists(!0))])}function Vk(t){return Sd(Ri(t.firestore,Ha),[new sm(t._key,Dr.none())])}function Bk(t,e){const n=Ri(t.firestore,Ha),r=_s(t),i=$2(t.converter,e);return Sd(n,[V2(bd(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Dr.exists(!1))]).then(()=>r)}function Sd(t,e){return function(r,i){const s=new co;return r.asyncQueue.enqueueAndForget(async()=>ck(await _k(r),i,s)),s.promise}(dm(t),e)}function Uk(t,e,n){const r=n.docs.get(e._key),i=new X4(t);return new J4(t,i,e._key,r,new ah(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=bd(e)}set(e,n,r){this._verifyNotCommitted();const i=Ng(e,this._firestore),s=$2(i.converter,n,r),o=V2(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Dr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Ng(e,this._firestore);let o;return o=typeof(n=Vn(n))=="string"||n instanceof _d?W4(this._dataReader,"WriteBatch.update",s._key,n,r,i):H4(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Dr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ng(e,this._firestore);return this._mutations=this._mutations.concat(new sm(n._key,Dr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Qe(Pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ng(t,e){if((t=Vn(t)).firestore!==e)throw new Qe(Pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function pl(){return new B2("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J5(t){return dm(t=Ri(t,Ha)),new zk(t,e=>Sd(t,e))}(function(e,n=!0){(function(i){gc=i})(pc),nc(new Fl("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Ha(new z6(r.getProvider("auth-internal")),new $6(r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Qe(Pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qh(h.options.projectId,p)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ta(h5,"4.7.3",e),Ta(h5,"4.7.3","esm2017")})();const Z4={apiKey:"AIzaSyBkIb35FxHGZZt_Y-wa8JMg9hr1BqarieY",authDomain:"quote-test-cd354.firebaseapp.com",projectId:"quote-test-cd354",storageBucket:"quote-test-cd354.firebasestorage.app",messagingSenderId:"400336314554",appId:"1:400336314554:web:3a6275d1c39d12777be283"},eS=$b(Z4),Gn=Ak(eS),Ns=F6(eS);console.log(" Firebase initialized successfully!");console.log(" Project ID:",Z4.projectId);const qk=()=>{const[t,e]=Ue.useState({isAuthenticated:!1}),[n,r]=Ue.useState(null),[i,s]=Ue.useState(!0);return Ue.useEffect(()=>{const p=NT(Ns,g=>{g?(r(g),e({isAuthenticated:!0,email:g.email||void 0,uid:g.uid,authMethod:"firebase"}),s(!1)):(r(null),e({isAuthenticated:!1}),s(!1))});return()=>p()},[]),{user:t,firebaseUser:n,loginWithEmail:async(p,g)=>{try{return s(!0),await bT(Ns,p,g),{success:!0}}catch(v){console.error("Email login error:",v);let f="Login failed. Please try again.";switch(v.code){case"auth/user-not-found":f="No account found with this email address.";break;case"auth/wrong-password":f="Incorrect password.";break;case"auth/invalid-email":f="Invalid email address.";break;case"auth/user-disabled":f="This account has been disabled.";break;case"auth/too-many-requests":f="Too many failed attempts. Please try again later.";break;case"auth/invalid-credential":f="Invalid email or password.";break}return s(!1),{success:!1,error:f}}},registerWithEmail:async(p,g)=>{try{return s(!0),await _T(Ns,p,g),{success:!0}}catch(v){console.error("Registration error:",v);let f="Registration failed. Please try again.";switch(v.code){case"auth/email-already-in-use":f="An account with this email already exists.";break;case"auth/invalid-email":f="Invalid email address.";break;case"auth/weak-password":f="Password should be at least 6 characters.";break;case"auth/operation-not-allowed":f="Email registration is not enabled.";break}return s(!1),{success:!1,error:f}}},resetPassword:async p=>{try{return await wT(Ns,p),{success:!0}}catch(g){console.error("Password reset error:",g);let v="Failed to send reset email. Please try again.";switch(g.code){case"auth/user-not-found":v="No account found with this email address.";break;case"auth/invalid-email":v="Invalid email address.";break}return{success:!1,error:v}}},logout:async()=>{try{n&&await AT(Ns),e({isAuthenticated:!1}),r(null)}catch(p){console.error("Logout error:",p),e({isAuthenticated:!1}),r(null)}},isLoading:i}};class Hk{constructor(){this.COLLECTION_NAME="documents",this.SESSIONS_COLLECTION="user_sessions",this.CLIENTS_COLLECTION="client_data",this.PRODUCTS_COLLECTION="product_data"}getCurrentUserId(){const e=Ns.currentUser;if(e)return console.log("Current user found:",e.uid),e.uid;throw console.error("No authenticated user found"),new Error("No authentication found - user must be logged in")}async waitForAuth(){return console.log("Waiting for auth state..."),Ns.currentUser?(console.log("User already authenticated:",Ns.currentUser.uid),Ns.currentUser.uid):new Promise((e,n)=>{console.log("Setting up auth state listener...");const r=Ns.onAuthStateChanged(i=>{console.log("Auth state changed:",i?i.uid:"no user"),r(),i?e(i.uid):n(new Error("User not authenticated"))});setTimeout(()=>{r(),n(new Error("Authentication timeout"))},1e4)})}sanitizeForFirestore(e){if(e===void 0||e===null)return null;if(typeof e=="string"||typeof e=="number"||typeof e=="boolean"||e instanceof Date||e instanceof Mn)return e;if(Array.isArray(e))return e.map(n=>this.sanitizeForFirestore(n));if(typeof e=="object"){const n={};for(const[r,i]of Object.entries(e))n[r]=this.sanitizeForFirestore(i);return n}return e}ensureString(e){return e==null?"":String(e)}ensureBoolean(e){return e==null?!1:!!e}ensureObject(e){return e==null?{}:this.sanitizeForFirestore(e)}ensureArray(e){return e==null||!Array.isArray(e)?[]:e.map(n=>this.sanitizeForFirestore(n))}async saveDocument(e){var n;try{console.log("Starting saveDocument...");const r=await this.waitForAuth();console.log("Authentication confirmed, userId:",r);const i={userId:this.ensureString(r),docType:this.ensureString(e.docType||"Invoice"),docNumber:this.ensureString(((n=e.docDetails)==null?void 0:n.number)||"1"),companyData:this.ensureObject(e.company),clientData:this.ensureObject(e.client),shippingDetails:this.ensureObject(e.shippingDetails||{name:"",address:""}),shippingSameAsBilling:this.ensureBoolean(e.shippingSameAsBilling),docDetails:this.ensureObject(e.docDetails),bankDetails:this.ensureObject(e.bankDetails),items:this.ensureArray(e.items),totals:this.ensureObject(e.totals),termsConditions:this.ensureString(e.termsAndConditions),upiId:this.ensureString(e.fixedUpiId),createdAt:pl(),updatedAt:pl()},s=this.sanitizeForFirestore(i);console.log("Saving document with userId:",r),console.log("Document data:",s);const o=await Bk(hl(Gn,this.COLLECTION_NAME),s);return console.log("Document saved successfully with ID:",o.id),o.id}catch(r){throw console.error("Error saving document to Firebase:",r),r}}async getAllDocuments(){try{const e=await this.waitForAuth(),n=Kc(hl(Gn,this.COLLECTION_NAME),dl("userId","==",e));return(await Qc(n)).docs.map(s=>{const o=s.data();return this.convertToSavedDocument(s.id,o)}).sort((s,o)=>new Date(o.timestamp).getTime()-new Date(s.timestamp).getTime())}catch(e){console.error("Error loading documents from Firebase:",e);try{const n=await this.waitForAuth(),r=Kc(hl(Gn,this.COLLECTION_NAME));return(await Qc(r)).docs.filter(o=>o.data().userId===n).map(o=>{const a=o.data();return this.convertToSavedDocument(o.id,a)}).sort((o,a)=>new Date(a.timestamp).getTime()-new Date(o.timestamp).getTime())}catch(n){throw console.error("Fallback query also failed:",n),e}}}async getDocumentById(e){try{const n=await this.waitForAuth(),r=_s(Gn,this.COLLECTION_NAME,e),i=await fl(r);if(!i.exists())return null;const s=i.data();if(s.userId!==n)throw new Error("Access denied: Document does not belong to current user");return this.convertToSavedDocument(i.id,s)}catch(n){throw console.error("Error loading document from Firebase:",n),n}}async deleteDocument(e){try{const n=await this.waitForAuth(),r=_s(Gn,this.COLLECTION_NAME,e),i=await fl(r);if(!i.exists())throw new Error("Document not found");if(i.data().userId!==n)throw new Error("Access denied: Document does not belong to current user");await Vk(r)}catch(n){throw console.error("Error deleting document from Firebase:",n),n}}async updateDocument(e,n){var r;try{const i=await this.waitForAuth(),s=_s(Gn,this.COLLECTION_NAME,e),o=await fl(s);if(!o.exists())throw new Error("Document not found");if(o.data().userId!==i)throw new Error("Access denied: Document does not belong to current user");const l={updatedAt:pl()};n.docType!==void 0&&(l.docType=this.ensureString(n.docType)),((r=n.docDetails)==null?void 0:r.number)!==void 0&&(l.docNumber=this.ensureString(n.docDetails.number)),n.company!==void 0&&(l.companyData=this.ensureObject(n.company)),n.client!==void 0&&(l.clientData=this.ensureObject(n.client)),n.shippingDetails!==void 0&&(l.shippingDetails=this.ensureObject(n.shippingDetails)),n.shippingSameAsBilling!==void 0&&(l.shippingSameAsBilling=this.ensureBoolean(n.shippingSameAsBilling)),n.docDetails!==void 0&&(l.docDetails=this.ensureObject(n.docDetails)),n.bankDetails!==void 0&&(l.bankDetails=this.ensureObject(n.bankDetails)),n.items!==void 0&&(l.items=this.ensureArray(n.items)),n.totals!==void 0&&(l.totals=this.ensureObject(n.totals)),n.termsAndConditions!==void 0&&(l.termsConditions=this.ensureString(n.termsAndConditions)),n.fixedUpiId!==void 0&&(l.upiId=this.ensureString(n.fixedUpiId));const h=this.sanitizeForFirestore(l);await Mk(s,h)}catch(i){throw console.error("Error updating document in Firebase:",i),i}}async clearAllDocuments(){try{const e=await this.waitForAuth(),n=Kc(hl(Gn,this.COLLECTION_NAME),dl("userId","==",e)),r=await Qc(n),i=J5(Gn);r.docs.forEach(s=>{i.delete(s.ref)}),await i.commit()}catch(e){throw console.error("Error clearing documents from Firebase:",e),e}}async importDocuments(e){try{const n=await this.waitForAuth(),r=J5(Gn);e.forEach(i=>{var l;const s=i(hl(Gn,this.COLLECTION_NAME)),o={userId:this.ensureString(n),docType:this.ensureString(i.docType||"Invoice"),docNumber:this.ensureString(((l=i.docDetails)==null?void 0:l.number)||"1"),companyData:this.ensureObject(i.company),clientData:this.ensureObject(i.client),shippingDetails:this.ensureObject(i.shippingDetails||{name:"",address:""}),shippingSameAsBilling:this.ensureBoolean(i.shippingSameAsBilling),docDetails:this.ensureObject(i.docDetails),bankDetails:this.ensureObject(i.bankDetails),items:this.ensureArray(i.items),totals:this.ensureObject(i.totals),termsConditions:this.ensureString(i.termsAndConditions),upiId:this.ensureString(i.fixedUpiId),createdAt:pl(),updatedAt:pl()},a=this.sanitizeForFirestore(o);r.set(s,a)}),await r.commit()}catch(n){throw console.error("Error importing documents to Firebase:",n),n}}async getDocumentsByType(e){try{const n=await this.waitForAuth(),r=Kc(hl(Gn,this.COLLECTION_NAME),dl("userId","==",n),dl("docType","==",e));return(await Qc(r)).docs.map(o=>{const a=o.data();return this.convertToSavedDocument(o.id,a)}).sort((o,a)=>new Date(a.timestamp).getTime()-new Date(o.timestamp).getTime())}catch(n){console.error("Error loading documents by type from Firebase:",n);try{return(await this.getAllDocuments()).filter(i=>i.docType===e)}catch(r){throw console.error("Fallback query for type also failed:",r),n}}}async checkDuplicateNumber(e,n,r){try{const i=await this.waitForAuth();if(!e||!n)return!1;const s=Kc(hl(Gn,this.COLLECTION_NAME),dl("userId","==",i),dl("docNumber","==",e),dl("docType","==",n)),o=await Qc(s);return r?o.docs.filter(l=>l.id!==r).length>0:o.docs.length>0}catch(i){console.error("Error checking duplicate number in Firebase:",i);try{return(await this.getAllDocuments()).filter(a=>{var l;return((l=a.docDetails)==null?void 0:l.number)===e&&a.docType===n&&(r?a.id!==r:!0)}).length>0}catch(s){return console.error("Fallback duplicate check also failed:",s),!1}}}async saveClientData(e,n="manual",r){try{const i=await this.waitForAuth(),s=_s(Gn,this.CLIENTS_COLLECTION,i),o={userId:this.ensureString(i),clients:this.ensureArray(e),lastUpdated:pl(),source:n||"manual",sheetUrl:this.ensureString(r)},a=this.sanitizeForFirestore(o);await Y5(s,a,{merge:!0})}catch(i){throw console.error("Error saving client data to Firebase:",i),i}}async getClientData(){try{const e=await this.waitForAuth(),n=_s(Gn,this.CLIENTS_COLLECTION,e),r=await fl(n);return r.exists()?r.data().clients||[]:[]}catch(e){throw console.error("Error loading client data from Firebase:",e),e}}async getClientDataInfo(){var e,n,r,i;try{const s=await this.waitForAuth(),o=_s(Gn,this.CLIENTS_COLLECTION,s),a=await fl(o);if(!a.exists())return{lastUpdated:null,source:"none",count:0};const l=a.data();return{lastUpdated:((r=(n=(e=l.lastUpdated)==null?void 0:e.toDate)==null?void 0:n.call(e))==null?void 0:r.toISOString())||null,source:l.source||"unknown",sheetUrl:l.sheetUrl||void 0,count:((i=l.clients)==null?void 0:i.length)||0}}catch(s){return console.error("Error loading client data info from Firebase:",s),{lastUpdated:null,source:"error",count:0}}}async saveProductData(e,n="manual",r){try{const i=await this.waitForAuth(),s=_s(Gn,this.PRODUCTS_COLLECTION,i),o={userId:this.ensureString(i),products:this.ensureArray(e),lastUpdated:pl(),source:n||"manual",sheetUrl:this.ensureString(r)},a=this.sanitizeForFirestore(o);await Y5(s,a,{merge:!0})}catch(i){throw console.error("Error saving product data to Firebase:",i),i}}async getProductData(){try{const e=await this.waitForAuth(),n=_s(Gn,this.PRODUCTS_COLLECTION,e),r=await fl(n);return r.exists()?r.data().products||[]:[]}catch(e){throw console.error("Error loading product data from Firebase:",e),e}}async getProductDataInfo(){var e,n,r,i;try{const s=await this.waitForAuth(),o=_s(Gn,this.PRODUCTS_COLLECTION,s),a=await fl(o);if(!a.exists())return{lastUpdated:null,source:"none",count:0};const l=a.data();return{lastUpdated:((r=(n=(e=l.lastUpdated)==null?void 0:e.toDate)==null?void 0:n.call(e))==null?void 0:r.toISOString())||null,source:l.source||"unknown",sheetUrl:l.sheetUrl||void 0,count:((i=l.products)==null?void 0:i.length)||0}}catch(s){return console.error("Error loading product data info from Firebase:",s),{lastUpdated:null,source:"error",count:0}}}convertToSavedDocument(e,n){var r,i,s;return{id:e,docType:n.docType,company:n.companyData||{},client:n.clientData||{},shippingDetails:n.shippingDetails||{name:"",address:""},shippingSameAsBilling:n.shippingSameAsBilling??!0,docDetails:n.docDetails||{},bankDetails:n.bankDetails||{},items:n.items||[],totals:n.totals||{},termsAndConditions:n.termsConditions||"",fixedUpiId:n.upiId||"",timestamp:((s=(i=(r=n.createdAt)==null?void 0:r.toDate)==null?void 0:i.call(r))==null?void 0:s.toISOString())||new Date().toISOString()}}}const Nn=new Hk,kp=Object.freeze(Object.defineProperty({__proto__:null,firebaseManager:Nn},Symbol.toStringTag,{value:"Module"})),Wk=t=>{const[e,n]=Ue.useState([]),[r,i]=Ue.useState(!1),[s,o]=Ue.useState(null),a=async()=>{if(!t){n([]),i(!1);return}try{i(!0),o(null);const P=await Nn.getAllDocuments();n(P)}catch(P){console.error("Error loading documents:",P),o(P instanceof Error?P.message:"Failed to load documents"),n([])}finally{i(!1)}},l=async P=>{if(!t)throw new Error("User not authenticated");try{const w=await Nn.saveDocument(P);return await a(),w}catch(w){throw console.error("Error saving document:",w),w}},h=async P=>{if(!t)throw new Error("User not authenticated");try{await Nn.deleteDocument(P),await a()}catch(w){throw console.error("Error deleting document:",w),w}},p=async(P,w)=>{if(!t)throw new Error("User not authenticated");try{await Nn.updateDocument(P,w),await a()}catch(_){throw console.error("Error updating document:",_),_}},g=async P=>{if(!t)throw new Error("User not authenticated");try{return await Nn.getDocumentById(P)}catch(w){throw console.error("Error getting document by ID:",w),w}},v=async()=>{if(!t)throw new Error("User not authenticated");try{await Nn.clearAllDocuments(),await a()}catch(P){throw console.error("Error clearing documents:",P),P}},f=async P=>{if(!t)throw new Error("User not authenticated");try{await Nn.importDocuments(P),await a()}catch(w){throw console.error("Error importing documents:",w),w}},E=async P=>{if(!t)throw new Error("User not authenticated");try{return await Nn.getDocumentsByType(P)}catch(w){throw console.error("Error getting documents by type:",w),w}},k=async(P,w,_)=>{if(!t)return!1;try{return await Nn.checkDuplicateNumber(P,w,_)}catch(T){return console.error("Error checking duplicate number:",T),!1}};return Ue.useEffect(()=>{t?a():(n([]),o(null),i(!1))},[t]),{documents:e,isLoading:r,error:s,loadDocuments:a,saveDocument:l,deleteDocument:h,updateDocument:p,getDocumentById:g,clearAllDocuments:v,importDocuments:f,getDocumentsByType:E,checkDuplicateNumber:k}},$k=t=>{const[e,n]=Ue.useState([]),[r,i]=Ue.useState(!1),s=async()=>{if(!t){n([]),i(!1);return}i(!0);try{const P=await Nn.getClientData();P.length>0?n(P):o()}catch(P){console.error("Error loading client data from Firebase:",P),o()}finally{i(!1)}},o=()=>{try{const P=localStorage.getItem("imported_client_data");if(P){const w=JSON.parse(P);n(w)}}catch(P){console.error("Error loading stored client data:",P)}},a=async P=>{if(!t)try{return localStorage.setItem("imported_client_data",JSON.stringify(P)),n(P),!0}catch(w){return console.error("Error saving to localStorage:",w),!1}try{return await Nn.saveClientData(P),localStorage.setItem("imported_client_data",JSON.stringify(P)),n(P),!0}catch(w){console.error("Error saving client data:",w);try{return localStorage.setItem("imported_client_data",JSON.stringify(P)),n(P),!0}catch(_){return console.error("Error saving to localStorage:",_),!1}}},l=async P=>{const w=[...e,P];return await a(w)},h=async(P,w)=>{const _=[...e];return _[P]=w,await a(_)},p=async P=>{const w=e.filter(_=>!(_.Name===P.Name&&_.Phone===P.Phone&&_.GSTIN===P.GSTIN));return await a(w)},g=async()=>{if(!t)return!1;try{return await s(),!0}catch(P){return console.error("Error syncing client data:",P),!1}},v=P=>{if(!P.trim())return[];const w=P.toLowerCase();return e.filter(_=>{var T,L,V,W;return((T=_.Name)==null?void 0:T.toLowerCase().includes(w))||((L=_.Phone)==null?void 0:L.includes(P))||((V=_.GSTIN)==null?void 0:V.toLowerCase().includes(w))||((W=_.Email)==null?void 0:W.toLowerCase().includes(w))})},f=P=>e.find(w=>{var _;return((_=w.Name)==null?void 0:_.toLowerCase())===P.toLowerCase()})||null,E=P=>e.find(w=>w.Phone===P)||null,k=P=>e.find(w=>{var _;return((_=w.GSTIN)==null?void 0:_.toLowerCase())===P.toLowerCase()})||null;return Ue.useEffect(()=>{t?s():(n([]),i(!1))},[t]),{clients:e,isLoading:r,searchClients:v,getClientByName:f,getClientByPhone:E,getClientByGSTIN:k,addClient:l,updateClient:h,deleteClient:p,saveClientData:a,syncWithCloud:g,refreshData:s}},Gk=t=>{const[e,n]=Ue.useState([]),[r,i]=Ue.useState(!1),s=async()=>{if(!t){n([]),i(!1);return}i(!0);try{const P=await Nn.getProductData();P.length>0?n(P):o()}catch(P){console.error("Error loading product data from Firebase:",P),o()}finally{i(!1)}},o=()=>{try{const P=localStorage.getItem("imported_product_data");if(P){const w=JSON.parse(P);n(w)}}catch(P){console.error("Error loading stored product data:",P)}},a=async P=>{if(!t)try{return localStorage.setItem("imported_product_data",JSON.stringify(P)),n(P),!0}catch(w){return console.error("Error saving to localStorage:",w),!1}try{return await Nn.saveProductData(P),localStorage.setItem("imported_product_data",JSON.stringify(P)),n(P),!0}catch(w){console.error("Error saving product data:",w);try{return localStorage.setItem("imported_product_data",JSON.stringify(P)),n(P),!0}catch(_){return console.error("Error saving to localStorage:",_),!1}}},l=async P=>{const w=[...e,P];return await a(w)},h=async(P,w)=>{const _=[...e];return _[P]=w,await a(_)},p=async P=>{const w=e.filter(_=>!(_.Description===P.Description&&_.HSN===P.HSN&&_.Price===P.Price));return await a(w)},g=async()=>{if(!t)return!1;try{return await s(),!0}catch(P){return console.error("Error syncing product data:",P),!1}},v=P=>{if(!P.trim())return[];const w=P.toLowerCase();return e.filter(_=>{var T,L,V;return((T=_.Description)==null?void 0:T.toLowerCase().includes(w))||((L=_.HSN)==null?void 0:L.includes(P))||((V=_.Category)==null?void 0:V.toLowerCase().includes(w))})},f=P=>e.find(w=>{var _;return((_=w.Description)==null?void 0:_.toLowerCase())===P.toLowerCase()})||null,E=P=>e.find(w=>w.HSN===P)||null,k=P=>e.filter(w=>{var _;return((_=w.Category)==null?void 0:_.toLowerCase())===P.toLowerCase()});return Ue.useEffect(()=>{t?s():(n([]),i(!1))},[t]),{products:e,isLoading:r,searchProducts:v,getProductByDescription:f,getProductByHSN:E,getProductsByCategory:k,addProduct:l,updateProduct:h,deleteProduct:p,saveProductData:a,syncWithCloud:g,refreshData:s}};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Kk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),st=(t,e)=>{const n=Ue.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...h},p)=>Ue.createElement("svg",{ref:p,...Kk,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${Qk(t)}`,a].join(" "),...h},[...e.map(([g,v])=>Ue.createElement(g,v)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=st("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=st("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=st("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=st("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=st("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5=st("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=st("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=st("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qf=st("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gm=st("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=st("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=st("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=st("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=st("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=st("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=st("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=st("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rL=st("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=st("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=st("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=st("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=st("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=st("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=st("FolderSync",[["path",{d:"M9 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v.5",key:"1dkoa9"}],["path",{d:"M12 10v4h4",key:"1czhmt"}],["path",{d:"m12 14 1.535-1.605a5 5 0 0 1 8 1.5",key:"lvuxfi"}],["path",{d:"M22 22v-4h-4",key:"1ewp4q"}],["path",{d:"m22 18-1.535 1.605a5 5 0 0 1-8-1.5",key:"14ync0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=st("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=st("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=st("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lL=st("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=st("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=st("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=st("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=st("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=st("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=st("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=st("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=st("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=st("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=st("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=st("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=st("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=st("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ym=st("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=st("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=st("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=st("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=st("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=st("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=st("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vm=st("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=st("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=st("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=st("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=st("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lp=st("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),SL=({onEmailLogin:t,onEmailRegister:e,onPasswordReset:n})=>{const[r,i]=Ue.useState("login"),[s,o]=Ue.useState(""),[a,l]=Ue.useState(""),[h,p]=Ue.useState(!1),[g,v]=Ue.useState(""),[f,E]=Ue.useState(""),[k,P]=Ue.useState(!1),w=async W=>{if(W.preventDefault(),P(!0),v(""),E(""),r==="reset"){const I=await n(s);I.success?(E("Password reset email sent! Check your inbox."),setTimeout(()=>i("login"),3e3)):v(I.error||"Failed to send reset email")}else if(r==="register"){const I=await e(s,a);I.success?E("Account created successfully! You are now logged in."):v(I.error||"Registration failed")}else{const I=await t(s,a);I.success||v(I.error||"Login failed")}P(!1)},_=()=>{o(""),l(""),v(""),E(""),p(!1)},T=W=>{i(W),_()},L=()=>{switch(r){case"register":return"Create Account";case"reset":return"Reset Password";default:return"Welcome Back"}},V=()=>{switch(r){case"register":return"Create your account to get started";case"reset":return"Enter your email to reset password";default:return"Sign in to your account"}};return m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center p-4",children:m.jsx("div",{className:"w-full max-w-md",children:m.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 p-8",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-2xl mb-4",children:m.jsx(cc,{className:"w-8 h-8 text-white"})}),m.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Invoice & Quotation"}),m.jsx("p",{className:"text-gray-600 mt-2",children:"Professional document management system"})]}),r!=="reset"&&m.jsxs("div",{className:"flex mb-6 bg-gray-100 rounded-2xl p-1",children:[m.jsxs("button",{onClick:()=>T("login"),className:`flex-1 py-2 px-4 rounded-xl text-sm font-medium transition-all ${r==="login"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-blue-600"}`,children:[m.jsx(fo,{className:"w-4 h-4 inline mr-1"}),"Sign In"]}),m.jsxs("button",{onClick:()=>T("register"),className:`flex-1 py-2 px-4 rounded-xl text-sm font-medium transition-all ${r==="register"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-blue-600"}`,children:[m.jsx(nw,{className:"w-4 h-4 inline mr-1"}),"Register"]})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:L()}),m.jsx("p",{className:"text-gray-600 text-sm mt-1",children:V()})]}),m.jsxs("form",{onSubmit:w,className:"space-y-6",children:[r==="reset"&&m.jsxs("button",{type:"button",onClick:()=>T("login"),className:"flex items-center text-blue-600 hover:text-blue-700 transition-colors mb-4",children:[m.jsx(Xk,{className:"w-4 h-4 mr-1"}),"Back to login"]}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:m.jsx(fo,{className:"h-5 w-5 text-gray-400"})}),m.jsx("input",{type:"email",value:s,onChange:W=>o(W.target.value),placeholder:"Enter your email",className:"w-full pl-12 pr-4 py-4 bg-gray-50/50 border border-gray-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 text-lg",required:!0})]}),r!=="reset"&&m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:m.jsx(uL,{className:"h-5 w-5 text-gray-400"})}),m.jsx("input",{type:h?"text":"password",value:a,onChange:W=>l(W.target.value),placeholder:"Enter your password",className:"w-full pl-12 pr-12 py-4 bg-gray-50/50 border border-gray-200 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 text-lg",required:!0}),m.jsx("button",{type:"button",onClick:()=>p(!h),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600 transition-colors",children:h?m.jsx(rL,{className:"h-5 w-5"}):m.jsx(oS,{className:"h-5 w-5"})})]}),g&&m.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 text-red-700 text-sm",children:g}),f&&m.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 text-green-700 text-sm",children:f}),m.jsx("button",{type:"submit",disabled:k||!s.trim()||r!=="reset"&&!a.trim(),className:"w-full bg-gradient-to-r from-blue-500 to-indigo-600 text-white py-4 rounded-2xl font-semibold text-lg hover:from-blue-600 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]",children:k?m.jsxs("div",{className:"flex items-center justify-center",children:[m.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"}),r==="reset"?"Sending...":r==="register"?"Creating Account...":"Signing In..."]}):m.jsxs(m.Fragment,{children:[r==="reset"&&m.jsx(pL,{className:"w-5 h-5 inline mr-2"}),r==="register"&&m.jsx(nw,{className:"w-5 h-5 inline mr-2"}),r==="login"&&m.jsx(fo,{className:"w-5 h-5 inline mr-2"}),r==="reset"?"Send Reset Email":r==="register"?"Create Account":"Sign In"]})}),r==="login"&&m.jsx("div",{className:"text-center",children:m.jsx("button",{type:"button",onClick:()=>T("reset"),className:"text-blue-600 hover:text-blue-700 text-sm transition-colors",children:"Forgot your password?"})})]}),m.jsx("div",{className:"mt-8 text-center",children:m.jsx("p",{className:"text-xs text-gray-500",children:"Secure access to professional invoice and quotation system"})})]})})})},NL=({onLogout:t,user:e,firebaseUser:n})=>{const r=()=>n&&n.email?n.email:"User";return m.jsx("header",{className:"bg-white/90 backdrop-blur-sm border-b border-gray-200 sticky top-0 z-50",children:m.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center mr-3",children:m.jsx(cc,{className:"w-6 h-6 text-white"})}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Invoice & Quotation System"}),m.jsx("p",{className:"text-gray-600 text-sm",children:"Professional document management"})]})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("div",{className:"text-right",children:[m.jsx("div",{className:"text-sm font-medium text-gray-800",children:r()}),m.jsx("div",{className:"flex items-center justify-end mt-1",children:m.jsxs("div",{className:"flex items-center px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm",children:[m.jsx(fo,{className:"w-3 h-3 mr-1"}),"Email Auth"]})})]}),m.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-xl transition-all",children:[m.jsx(cL,{className:"w-4 h-4"}),"Logout"]})]})]})})})},AL=({docType:t,onDocTypeChange:e})=>{const n=["Invoice","Quotation","Purchase Order"];return m.jsx("div",{className:"flex justify-center mb-6",children:m.jsx("div",{className:"bg-gray-100 rounded-lg p-1",children:n.map(r=>m.jsx("button",{className:`px-6 py-3 text-sm font-semibold transition-all duration-300 rounded-md ${t===r?"bg-white text-blue-600 shadow-md":"text-gray-600 hover:text-blue-600"}`,onClick:()=>e(r),children:r},r))})})},EL=({company:t,onChange:e,docType:n})=>{const r=s=>{e({...t,[s.target.name]:s.target.value})},i=()=>{switch(n){case"Purchase Order":return"Buyer Details";default:return"From"}};return m.jsxs("div",{className:"p-6 bg-blue-50 rounded-lg border border-blue-200 shadow-sm",children:[m.jsxs("div",{className:"flex items-center mb-4",children:[m.jsx(eL,{className:"w-5 h-5 text-blue-600 mr-2"}),m.jsx("h2",{className:"text-xl font-bold text-blue-800",children:i()})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("input",{type:"text",name:"name",value:t.name,onChange:r,placeholder:"Company Name",className:"w-full p-3 border border-blue-300 rounded-md focus:ring-2 focus:ring-blue-400 focus:border-transparent"}),m.jsx("textarea",{name:"address",value:t.address,onChange:r,placeholder:"Company Address",rows:3,className:"w-full p-3 border border-blue-300 rounded-md focus:ring-2 focus:ring-blue-400 focus:border-transparent resize-none"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsx("input",{type:"text",name:"phone",value:t.phone,onChange:r,placeholder:"Phone",className:"w-full p-3 border border-blue-300 rounded-md focus:ring-2 focus:ring-blue-400 focus:border-transparent"}),m.jsx("input",{type:"email",name:"email",value:t.email,onChange:r,placeholder:"Email",className:"w-full p-3 border border-blue-300 rounded-md focus:ring-2 focus:ring-blue-400 focus:border-transparent"})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsx("input",{type:"text",name:"gstin",value:t.gstin,onChange:r,placeholder:"GSTIN",className:"w-full p-3 border border-blue-300 rounded-md focus:ring-2 focus:ring-blue-400 focus:border-transparent"}),m.jsx("input",{type:"text",name:"website",value:t.website,onChange:r,placeholder:"Website",className:"w-full p-3 border border-blue-300 rounded-md focus:ring-2 focus:ring-blue-400 focus:border-transparent"})]})]})]})},IL=({client:t,onChange:e,docType:n,clientDataHook:r})=>{const{clients:i,searchClients:s}=r,[o,a]=Ue.useState([]),[l,h]=Ue.useState(!1),[p,g]=Ue.useState(-1),v=w=>{const _=w.target.value;if(e({...t,name:_}),_.length>1&&i.length>0){const T=s(_);a(T.slice(0,5)),h(!0),g(-1)}else a([]),h(!1)},f=w=>{e({name:w.Name||"",address:w.Address||"",phone:w.Phone||"",gstin:w.GSTIN||"",email:w.Email||""}),a([]),h(!1),g(-1)},E=w=>{!l||o.length===0||(w.key==="ArrowDown"?(w.preventDefault(),g(_=>(_+1)%o.length)):w.key==="ArrowUp"?(w.preventDefault(),g(_=>(_-1+o.length)%o.length)):w.key==="Enter"&&p!==-1?(w.preventDefault(),f(o[p])):w.key==="Escape"&&(a([]),h(!1),g(-1)))},k=w=>{w.target.name==="name"?v(w):e({...t,[w.target.name]:w.target.value})},P=()=>{switch(n){case"Purchase Order":return"Vendor Details";default:return"To"}};return m.jsxs("div",{className:"p-6 bg-green-50 rounded-lg border border-green-200 shadow-sm",children:[m.jsxs("div",{className:"flex items-center mb-4",children:[m.jsx(Lp,{className:"w-5 h-5 text-green-600 mr-2"}),m.jsx("h2",{className:"text-xl font-bold text-green-800",children:P()}),i.length>0&&m.jsxs("div",{className:"ml-auto flex items-center text-sm text-green-600",children:[m.jsx(ym,{className:"w-4 h-4 mr-1"}),m.jsxs("span",{children:[i.length," clients loaded"]})]})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"text",name:"name",value:t.name,onChange:k,onKeyDown:E,onFocus:()=>{t.name.length>1&&o.length>0&&h(!0)},onBlur:()=>{setTimeout(()=>h(!1),100)},placeholder:`${n==="Purchase Order"?"Vendor":"Client"} Name`,className:"w-full p-3 border border-green-300 rounded-md focus:ring-2 focus:ring-green-400 focus:border-transparent"}),l&&o.length>0&&m.jsx("ul",{className:"absolute z-10 bg-white border border-gray-300 w-full max-h-48 overflow-y-auto rounded-md shadow-lg mt-1",children:o.map((w,_)=>m.jsxs("li",{className:`p-3 cursor-pointer hover:bg-green-100 border-b border-gray-100 last:border-b-0 ${_===p?"bg-green-200":""}`,onMouseDown:()=>f(w),children:[m.jsx("div",{className:"font-medium text-gray-800",children:w.Name}),m.jsxs("div",{className:"text-sm text-gray-600 flex items-center",children:[m.jsx("span",{className:"mr-3",children:w.Phone}),w.Email&&m.jsxs("span",{className:"flex items-center text-blue-600",children:[m.jsx(fo,{className:"w-3 h-3 mr-1"}),w.Email]})]}),m.jsx("div",{className:"text-xs text-gray-500",children:w.GSTIN})]},_))})]}),m.jsx("textarea",{name:"address",value:t.address,onChange:k,placeholder:`${n==="Purchase Order"?"Vendor":"Client"} Address`,rows:3,className:"w-full p-3 border border-green-300 rounded-md focus:ring-2 focus:ring-green-400 focus:border-transparent resize-none"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsx("input",{type:"text",name:"phone",value:t.phone,onChange:k,placeholder:"Phone",className:"w-full p-3 border border-green-300 rounded-md focus:ring-2 focus:ring-green-400 focus:border-transparent"}),m.jsxs("div",{className:"relative",children:[m.jsx(fo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-500 w-4 h-4"}),m.jsx("input",{type:"email",name:"email",value:t.email,onChange:k,placeholder:"Email",className:"w-full pl-10 p-3 border border-green-300 rounded-md focus:ring-2 focus:ring-green-400 focus:border-transparent"})]})]}),m.jsx("input",{type:"text",name:"gstin",value:t.gstin,onChange:k,placeholder:`${n==="Purchase Order"?"Vendor":"Client"} GSTIN`,className:"w-full p-3 border border-green-300 rounded-md focus:ring-2 focus:ring-green-400 focus:border-transparent"})]})]})},TL=({shippingDetails:t,shippingSameAsBilling:e,onShippingDetailsChange:n,onShippingSameAsBillingChange:r,clientName:i,clientAddress:s})=>{const o=a=>{n({...t,[a.target.name]:a.target.value})};return m.jsxs("div",{className:"p-6 bg-indigo-50 rounded-lg border border-indigo-200 shadow-sm mb-8",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(xL,{className:"w-5 h-5 text-indigo-600 mr-2"}),m.jsx("h2",{className:"text-xl font-bold text-indigo-800",children:"Shipping Details"})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx("input",{type:"checkbox",id:"sameAsBilling",checked:e,onChange:a=>r(a.target.checked),className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),m.jsx("label",{htmlFor:"sameAsBilling",className:"ml-2 block text-sm text-gray-900",children:"Same as Vendor Details"})]})]}),!e&&m.jsxs("div",{className:"space-y-4",children:[m.jsx("input",{type:"text",name:"name",value:t.name,onChange:o,placeholder:"Shipping Name",className:"w-full p-3 border border-indigo-300 rounded-md focus:ring-2 focus:ring-indigo-400 focus:border-transparent"}),m.jsx("textarea",{name:"address",value:t.address,onChange:o,placeholder:"Shipping Address",rows:3,className:"w-full p-3 border border-indigo-300 rounded-md focus:ring-2 focus:ring-indigo-400 focus:border-transparent resize-none"})]}),e&&m.jsxs("div",{className:"text-gray-600 bg-white p-4 rounded-md border border-indigo-200",children:[m.jsx("p",{className:"font-medium",children:i||"Vendor Name"}),m.jsx("p",{className:"text-sm mt-1",children:s||"Vendor Address"})]})]})};class Ei{constructor(){}static getInstance(){return Ei.instance||(Ei.instance=new Ei),Ei.instance}static async getNextDocumentNumber(e){return Ei.getInstance().getNextNumber(e)}static async getRecentNumbers(e,n=10){return Ei.getInstance().getRecentNumbers(e,n)}static async checkDuplicateNumber(e,n,r){return Ei.getInstance().checkDuplicateNumber(e,n,r)}static validateDocumentNumber(e){if(!e||!e.trim())return{isValid:!1,error:"Document number is required"};if(!e.includes("#")||!e.includes("/"))return{isValid:!1,error:"Format should be #number/year (e.g., #123/2024)"};const n=e.match(/^#(\d+)\/(\d{4})$/);if(!n)return{isValid:!1,error:"Invalid format. Use #number/year (e.g., #123/2024)"};const[,r,i]=n,s=parseInt(r,10),o=parseInt(i,10),a=new Date().getFullYear();return s<1?{isValid:!1,error:"Document number must be greater than 0"}:o<2020||o>a+1?{isValid:!1,error:`Year should be between 2020 and ${a+1}`}:{isValid:!0}}async getNextNumber(e){try{const n=await Nn.getDocumentsByType(e),r=new Date().getFullYear();if(n.length===0)return this.formatNumber(1,r);const i=n.filter(a=>{const l=a.docDetails.number.match(/^#(\d+)\/(\d{4})$/);return l&&parseInt(l[2],10)===r});if(i.length===0)return this.formatNumber(1,r);const s=i.map(a=>this.extractNumber(a.docDetails.number)).filter(a=>a!==null).sort((a,l)=>l-a),o=s.length>0?s[0]:0;return this.formatNumber(o+1,r)}catch(n){console.error("Error getting next document number:",n);const r=new Date().getFullYear();return this.formatNumber(1,r)}}async getRecentNumbers(e,n=10){try{return(await Nn.getDocumentsByType(e)).sort((s,o)=>new Date(o.timestamp).getTime()-new Date(s.timestamp).getTime()).slice(0,n).map(s=>s.docDetails.number)}catch(r){return console.error("Error getting recent document numbers:",r),[]}}async checkDuplicateNumber(e,n,r){try{return await Nn.checkDuplicateNumber(e,n,r)}catch(i){return console.error("Error checking duplicate number:",i),!1}}extractNumber(e){const n=e.match(/^#(\d+)\/\d{4}$/);return n?parseInt(n[1],10):null}formatNumber(e,n){return`#${e}/${n}`}validateNumberFormat(e,n){return Ei.validateDocumentNumber(e).isValid}suggestCorrectFormat(e,n){const r=new Date().getFullYear(),i=e.match(/\d+/g);if(i&&i.length>0){const s=parseInt(i[0],10);return this.formatNumber(s,r)}return this.formatNumber(1,r)}}Ei.getInstance();const PL=({docType:t,value:e,onChange:n,className:r=""})=>{const[i,s]=Ue.useState(!1),[o,a]=Ue.useState([]),[l,h]=Ue.useState(!1);Ue.useEffect(()=>{p()},[t]);const p=async()=>{try{const f=await Ei.getRecentNumbers(t,5);a(f)}catch(f){console.error("Error loading recent numbers:",f)}},g=async()=>{s(!0);try{const f=await Ei.getNextDocumentNumber(t);n(f)}catch(f){console.error("Error generating next number:",f)}finally{s(!1)}},v=f=>{n(f.target.value)};return m.jsxs("div",{className:"relative",children:[m.jsxs("label",{className:"flex items-center text-gray-700 text-sm font-bold mb-2",children:[m.jsx(oL,{className:"w-4 h-4 mr-1"}),t," Number",m.jsx("button",{type:"button",onClick:()=>h(!l),className:"ml-2 text-blue-500 hover:text-blue-700 transition-colors",title:"Show suggestions",children:m.jsx(lL,{className:"w-3 h-3"})})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("div",{className:"flex-1 relative",children:m.jsx("input",{type:"text",value:e,onChange:v,placeholder:"Enter any format you want",className:`w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-400 focus:border-transparent ${r}`})}),m.jsx("button",{type:"button",onClick:g,disabled:i,className:"px-4 py-3 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",title:"Generate suggested number",children:i?m.jsx(Ca,{className:"w-4 h-4 animate-spin"}):m.jsx(Ca,{className:"w-4 h-4"})})]}),m.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"Enter any format you want - no restrictions"}),l&&m.jsxs("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg p-4",children:[m.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Quick Options"}),m.jsxs("button",{onClick:g,disabled:i,className:"w-full mb-3 p-2 bg-blue-50 border border-blue-200 rounded-md hover:bg-blue-100 transition-colors text-left flex items-center",children:[m.jsx(Ca,{className:`w-4 h-4 mr-2 text-blue-600 ${i?"animate-spin":""}`}),m.jsx("span",{className:"text-blue-700 font-medium",children:"Generate suggested number"})]}),o.length>0&&m.jsxs("div",{className:"mb-3",children:[m.jsxs("h5",{className:"text-xs font-medium text-gray-600 mb-2 flex items-center",children:[m.jsx(rS,{className:"w-3 h-3 mr-1"}),"Recent ",t," Numbers"]}),m.jsx("div",{className:"space-y-1",children:o.map((f,E)=>m.jsx("button",{onClick:()=>{n(f),h(!1)},className:"w-full text-left p-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:f},E))})]}),m.jsxs("div",{children:[m.jsx("h5",{className:"text-xs font-medium text-gray-600 mb-2",children:"Example Formats"}),m.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[m.jsx("div",{children:"#001/2024 - Standard format"}),m.jsx("div",{children:"INV-2024-001 - Custom prefix"}),m.jsx("div",{children:"QUO001 - Simple format"}),m.jsx("div",{children:"2024/Q/001 - Year/type/number"}),m.jsx("div",{children:"Any format you prefer!"})]})]}),m.jsx("button",{onClick:()=>h(!1),className:"mt-3 w-full p-2 text-sm text-gray-600 hover:text-gray-800 transition-colors",children:"Close"})]})]})},CL=({docType:t,docDetails:e,onChange:n})=>{const r=s=>{n({...e,[s.target.name]:s.target.value})},i=s=>{n({...e,number:s})};return m.jsxs("div",{className:"flex flex-wrap justify-between items-start mb-8 p-6 bg-gray-50 rounded-lg border border-gray-200 shadow-sm",children:[m.jsx("div",{className:"flex-1 min-w-[250px] mr-4 mb-4",children:m.jsx(PL,{docType:t,value:e.number,onChange:i})}),m.jsxs("div",{className:"flex-1 min-w-[200px] mr-4 mb-4",children:[m.jsxs("label",{className:"flex items-center text-gray-700 text-sm font-bold mb-2",children:[m.jsx(qf,{className:"w-4 h-4 mr-1"}),"Issue Date"]}),m.jsx("input",{type:"date",name:"issueDate",value:e.issueDate,onChange:r,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-400 focus:border-transparent"})]}),t==="Quotation"&&m.jsxs("div",{className:"flex-1 min-w-[200px] mr-4 mb-4",children:[m.jsxs("label",{className:"flex items-center text-gray-700 text-sm font-bold mb-2",children:[m.jsx(qf,{className:"w-4 h-4 mr-1"}),"Valid Until"]}),m.jsx("input",{type:"date",name:"validUntil",value:e.validUntil,onChange:r,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-400 focus:border-transparent"})]}),t==="Purchase Order"&&m.jsxs("div",{className:"flex-1 min-w-[200px] mr-4 mb-4",children:[m.jsxs("label",{className:"flex items-center text-gray-700 text-sm font-bold mb-2",children:[m.jsx(qf,{className:"w-4 h-4 mr-1"}),"Delivery Date"]}),m.jsx("input",{type:"date",name:"deliveryDate",value:e.deliveryDate,onChange:r,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-400 focus:border-transparent"})]}),m.jsxs("div",{className:"flex-1 min-w-[200px] mb-4",children:[m.jsxs("label",{className:"flex items-center text-gray-700 text-sm font-bold mb-2",children:[m.jsx(hL,{className:"w-4 h-4 mr-1"}),"Place of Supply"]}),m.jsx("input",{type:"text",name:"placeOfSupply",value:e.placeOfSupply,onChange:r,placeholder:"Place of Supply",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-400 focus:border-transparent"})]})]})},kL=({items:t,onChange:e,totals:n,isSimpleMode:r,onSimpleModeChange:i,gstMode:s,onGstModeChange:o,productDataHook:a})=>{const{products:l,searchProducts:h}=a,[p,g]=Ue.useState([]),[v,f]=Ue.useState(-1),[E,k]=Ue.useState(null),P=(x,C,j)=>{const N=[...t];if(C==="description"&&typeof j=="string")if(N[x]={...N[x],[C]:j},j.length>1&&l.length>0){const A=h(j);g(A.slice(0,5)),f(-1)}else g([]);else if(C==="cgstPercent"){const A=parseFloat(j);N[x]={...N[x],gstRate:isNaN(A)?0:A*2}}else N[x]={...N[x],[C]:typeof j=="string"&&parseFloat(j)||j};e(N)},w=(x,C)=>{const j=[...t];j[x]={...j[x],description:C.Description||"",hsnSac:C.HSN||"",unitPrice:parseFloat(C.Price)||0},e(j),g([]),f(-1),k(null)},_=(x,C)=>{E===x&&(C.key==="ArrowDown"?(C.preventDefault(),f(j=>(j+1)%p.length)):C.key==="ArrowUp"?(C.preventDefault(),f(j=>(j-1+p.length)%p.length)):C.key==="Enter"&&v!==-1&&p.length>0?(C.preventDefault(),w(x,p[v])):C.key==="Escape"&&(g([]),f(-1),k(null)))},T=()=>{const x={sNo:t.length+1,description:"",hsnSac:"",quantity:1,uom:r?"":"NOS",unitPrice:0,gstRate:18,taxableValue:r?0:void 0};e([...t,x])},L=x=>{const C=t.filter((j,N)=>N!==x).map((j,N)=>({...j,sNo:N+1}));e(C)},V=()=>{const x=!r;i(x);const C=t.map(j=>{if(x){const N=j.unitPrice/(1+j.gstRate/100);return{...j,taxableValue:j.quantity*N,hsnSac:"",quantity:1,uom:"",unitPrice:0}}else return{...j,quantity:1,uom:"NOS",unitPrice:(j.taxableValue||0)*(1+j.gstRate/100),taxableValue:void 0}});e(C)},W=()=>{switch(s){case"igst":return"IGST mode: All GST will be calculated as IGST (Inter-state transactions)";case"cgst_sgst":return"CGST+SGST mode: GST will be split equally between CGST and SGST (Intra-state transactions)";default:return"Auto mode: GST type determined by company and client GSTIN state codes"}},I=()=>s!=="auto"?s:n.isInterState?"igst":"cgst_sgst";return m.jsxs("div",{className:"mb-8",children:[m.jsxs("div",{className:"flex items-center justify-between mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:"Items Entry Mode"}),m.jsx("p",{className:"text-sm text-gray-600",children:r?"Simple mode: Enter description, taxable value, and GST only":"Detailed mode: Full item details with HSN, quantity, and unit price"}),l.length>0&&m.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[m.jsx(ym,{className:"w-3 h-3 inline mr-1"}),l.length," products loaded from Google Sheets"]})]}),m.jsxs("button",{onClick:V,className:"flex items-center gap-3 px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[m.jsx("span",{className:"text-sm font-medium text-gray-700",children:r?"Simple":"Detailed"}),r?m.jsx(wL,{className:"w-6 h-6 text-blue-500"}):m.jsx(_L,{className:"w-6 h-6 text-blue-500"})]})]}),m.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-orange-50 to-yellow-50 rounded-lg border border-orange-200",children:[m.jsxs("div",{className:"flex items-center mb-4",children:[m.jsx(nS,{className:"w-5 h-5 text-orange-600 mr-2"}),m.jsx("h3",{className:"text-lg font-semibold text-orange-800",children:"GST Calculation Mode"})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[m.jsxs("label",{className:"flex items-center p-3 bg-white rounded-lg border border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors",children:[m.jsx("input",{type:"radio",name:"gstMode",value:"auto",checked:s==="auto",onChange:x=>o(x.target.value),className:"mr-3 text-orange-600 focus:ring-orange-500"}),m.jsxs("div",{children:[m.jsx("div",{className:"font-medium text-gray-800",children:"Auto Detection"}),m.jsx("div",{className:"text-sm text-gray-600",children:"Based on GSTIN state codes"})]})]}),m.jsxs("label",{className:"flex items-center p-3 bg-white rounded-lg border border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors",children:[m.jsx("input",{type:"radio",name:"gstMode",value:"igst",checked:s==="igst",onChange:x=>o(x.target.value),className:"mr-3 text-orange-600 focus:ring-orange-500"}),m.jsxs("div",{children:[m.jsx("div",{className:"font-medium text-gray-800",children:"IGST Only"}),m.jsx("div",{className:"text-sm text-gray-600",children:"Inter-state transactions"})]})]}),m.jsxs("label",{className:"flex items-center p-3 bg-white rounded-lg border border-gray-200 cursor-pointer hover:bg-gray-50 transition-colors",children:[m.jsx("input",{type:"radio",name:"gstMode",value:"cgst_sgst",checked:s==="cgst_sgst",onChange:x=>o(x.target.value),className:"mr-3 text-orange-600 focus:ring-orange-500"}),m.jsxs("div",{children:[m.jsx("div",{className:"font-medium text-gray-800",children:"CGST + SGST"}),m.jsx("div",{className:"text-sm text-gray-600",children:"Intra-state transactions"})]})]})]}),m.jsxs("div",{className:"bg-white/70 rounded-lg p-3 border border-orange-100",children:[m.jsxs("p",{className:"text-sm text-orange-700",children:[m.jsx("strong",{children:"Current mode:"})," ",W()]}),m.jsxs("p",{className:"text-xs text-orange-600 mt-1",children:[m.jsx("strong",{children:"Effective calculation:"})," ",I()==="igst"?"IGST":"CGST + SGST"]})]})]}),m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"min-w-full bg-white border border-gray-300 rounded-lg overflow-hidden",children:[m.jsx("thead",{className:"bg-gray-100",children:m.jsxs("tr",{children:[m.jsx("th",{className:"py-3 px-2 text-left text-xs font-semibold text-gray-600 uppercase w-12",children:"S.No"}),m.jsx("th",{className:"py-3 px-2 text-left text-xs font-semibold text-gray-600 uppercase min-w-[200px]",children:"Description"}),!r&&m.jsxs(m.Fragment,{children:[m.jsx("th",{className:"py-3 px-2 text-left text-xs font-semibold text-gray-600 uppercase w-24",children:"HSN/SAC"}),m.jsx("th",{className:"py-3 px-2 text-left text-xs font-semibold text-gray-600 uppercase w-20",children:"Qty"}),m.jsx("th",{className:"py-3 px-2 text-left text-xs font-semibold text-gray-600 uppercase w-16",children:"UoM"}),m.jsx("th",{className:"py-3 px-2 text-left text-xs font-semibold text-gray-600 uppercase w-24",children:"Unit Price"})]}),m.jsx("th",{className:"py-3 px-2 text-left text-xs font-semibold text-gray-600 uppercase w-28",children:"Taxable Value"}),m.jsx("th",{className:"py-3 px-2 text-left text-xs font-semibold text-gray-600 uppercase w-20",children:"GST (%)"}),m.jsx("th",{className:"py-3 px-2 text-left text-xs font-semibold text-gray-600 uppercase w-24",children:"GST Amount"}),m.jsx("th",{className:"py-3 px-2 text-left text-xs font-semibold text-gray-600 uppercase w-24",children:"Total Amount"}),m.jsx("th",{className:"py-3 px-2 text-center text-xs font-semibold text-gray-600 uppercase w-16",children:"Action"})]})}),m.jsx("tbody",{children:t.map((x,C)=>{let j,N,A;if(r)j=x.taxableValue||0,N=j*x.gstRate/100,A=j+N;else{const D=x.unitPrice/(1+x.gstRate/100),J=x.unitPrice-D;j=x.quantity*D,N=x.quantity*J,A=x.quantity*x.unitPrice}return m.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[m.jsx("td",{className:"py-3 px-2 text-center text-sm",children:x.sNo}),m.jsxs("td",{className:"py-3 px-2 relative",children:[m.jsx("input",{type:"text",value:x.description,onChange:D=>P(C,"description",D.target.value),onFocus:()=>k(C),onBlur:()=>setTimeout(()=>k(null),100),onKeyDown:D=>_(C,D),placeholder:"Enter description",className:"w-full p-2 border border-gray-200 rounded-md focus:ring-1 focus:ring-blue-300 text-sm"}),E===C&&p.length>0&&m.jsx("ul",{className:"absolute z-10 bg-white border border-gray-300 w-full max-h-48 overflow-y-auto rounded-md shadow-lg mt-1",children:p.map((D,J)=>m.jsxs("li",{className:`p-2 cursor-pointer hover:bg-blue-100 text-sm ${J===v?"bg-blue-200":""}`,onMouseDown:()=>w(C,D),children:[m.jsx("div",{className:"font-medium",children:D.Description}),m.jsxs("div",{className:"text-xs text-gray-500",children:["HSN: ",D.HSN," - Price: ",D.Price,D.Category&&` - ${D.Category}`]})]},J))})]}),!r&&m.jsxs(m.Fragment,{children:[m.jsx("td",{className:"py-3 px-2",children:m.jsx("input",{type:"text",value:x.hsnSac,onChange:D=>P(C,"hsnSac",D.target.value),placeholder:"HSN/SAC",className:"w-full p-2 border border-gray-200 rounded-md focus:ring-1 focus:ring-blue-300 text-sm"})}),m.jsx("td",{className:"py-3 px-2",children:m.jsx("input",{type:"number",value:x.quantity,onChange:D=>P(C,"quantity",D.target.value),min:"0",step:"0.01",className:"w-full p-2 border border-gray-200 rounded-md focus:ring-1 focus:ring-blue-300 text-sm"})}),m.jsx("td",{className:"py-3 px-2",children:m.jsx("input",{type:"text",value:x.uom,onChange:D=>P(C,"uom",D.target.value),placeholder:"UoM",className:"w-full p-2 border border-gray-200 rounded-md focus:ring-1 focus:ring-blue-300 text-sm"})}),m.jsx("td",{className:"py-3 px-2",children:m.jsx("input",{type:"number",value:x.unitPrice,onChange:D=>P(C,"unitPrice",D.target.value),min:"0",step:"0.01",placeholder:"Unit Price",className:"w-full p-2 border border-gray-200 rounded-md focus:ring-1 focus:ring-blue-300 text-sm"})})]}),m.jsx("td",{className:"py-3 px-2",children:r?m.jsx("input",{type:"number",value:x.taxableValue||0,onChange:D=>P(C,"taxableValue",D.target.value),min:"0",step:"0.01",placeholder:"Taxable Value",className:"w-full p-2 border border-gray-200 rounded-md focus:ring-1 focus:ring-blue-300 text-sm"}):m.jsxs("span",{className:"font-medium text-gray-800 text-sm",children:["",j.toFixed(2)]})}),m.jsx("td",{className:"py-3 px-2",children:m.jsx("input",{type:"number",value:x.gstRate,onChange:D=>P(C,"gstRate",D.target.value),min:"0",step:"0.1",className:"w-full p-2 border border-gray-200 rounded-md focus:ring-1 focus:ring-blue-300 text-center text-sm"})}),m.jsxs("td",{className:"py-3 px-2 font-medium text-gray-800 text-sm",children:["",N.toFixed(2)]}),m.jsxs("td",{className:"py-3 px-2 font-medium text-gray-800 text-sm",children:["",A.toFixed(2)]}),m.jsx("td",{className:"py-3 px-2 text-center",children:m.jsx("button",{onClick:()=>L(C),className:"text-red-500 hover:text-red-700 transition-colors duration-200 p-1",title:"Remove Item",children:m.jsx(vm,{className:"w-4 h-4"})})})]},C)})})]})}),m.jsxs("button",{onClick:T,className:"mt-4 px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors duration-300 shadow-md flex items-center",children:[m.jsx(K2,{className:"w-5 h-5 mr-2"}),"Add Item"]})]})},LL=({bankDetails:t,onChange:e})=>{const n=r=>{e({...t,[r.target.name]:r.target.value})};return m.jsxs("div",{className:"p-6 bg-yellow-50 rounded-lg border border-yellow-200 shadow-sm mb-8",children:[m.jsxs("div",{className:"flex items-center mb-4",children:[m.jsx(nL,{className:"w-5 h-5 text-yellow-600 mr-2"}),m.jsx("h2",{className:"text-xl font-bold text-yellow-800",children:"Bank Details"})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Bank Name"}),m.jsx("input",{type:"text",name:"bankName",value:t.bankName,onChange:n,placeholder:"Bank Name",className:"w-full p-3 border border-yellow-300 rounded-md focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Account Number"}),m.jsx("input",{type:"text",name:"accountNumber",value:t.accountNumber,onChange:n,placeholder:"Account Number",className:"w-full p-3 border border-yellow-300 rounded-md focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Branch Name"}),m.jsx("input",{type:"text",name:"branchName",value:t.branchName,onChange:n,placeholder:"Branch Name",className:"w-full p-3 border border-yellow-300 rounded-md focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"IFSC Code"}),m.jsx("input",{type:"text",name:"ifscCode",value:t.ifscCode,onChange:n,placeholder:"IFSC Code",className:"w-full p-3 border border-yellow-300 rounded-md focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})]})]})]})},RL=({upiId:t})=>{const e=`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(`upi://pay?pa=${t}`)}`;return m.jsxs("div",{className:"p-6 bg-blue-50 rounded-lg border border-blue-200 shadow-sm mb-8 text-center",children:[m.jsxs("div",{className:"flex items-center justify-center mb-4",children:[m.jsx(fL,{className:"w-5 h-5 text-blue-600 mr-2"}),m.jsx("h2",{className:"text-xl font-bold text-blue-800",children:"Scan to Pay"})]}),m.jsxs("div",{className:"flex flex-col items-center",children:[m.jsx("img",{src:e,alt:"UPI QR Code",className:"rounded-lg shadow-md mb-4",onError:n=>{const r=n.target;r.onerror=null,r.src="https://placehold.co/150x150/e0e0e0/555555?text=QR+Error"}}),m.jsxs("p",{className:"text-gray-700 font-medium",children:["UPI ID: ",t]}),m.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Scan with any UPI app to pay"})]})]})},DL=({totals:t})=>{const e=n=>{const r=["","one ","two ","three ","four ","five ","six ","seven ","eight ","nine ","ten ","eleven ","twelve ","thirteen ","fourteen ","fifteen ","sixteen ","seventeen ","eighteen ","nineteen "],i=["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"],s=("000000000"+n).substr(-9).match(/^(\d{2})(\d{2})(\d{2})(\d{1})(\d{2})$/);if(!s)return"";let o="";return o+=Number(s[1])!==0?(r[Number(s[1])]||i[s[1][0]]+" "+r[s[1][1]])+"crore ":"",o+=Number(s[2])!==0?(r[Number(s[2])]||i[s[2][0]]+" "+r[s[2][1]])+"lakh ":"",o+=Number(s[3])!==0?(r[Number(s[3])]||i[s[3][0]]+" "+r[s[3][1]])+"thousand ":"",o+=Number(s[4])!==0?(r[Number(s[4])]||i[s[4][0]]+" "+r[s[4][1]])+"hundred ":"",o+=Number(s[5])!==0?(o!==""?"and ":"")+(r[Number(s[5])]||i[s[5][0]]+" "+r[s[5][1]]):"",o.trim()+" Only"};return m.jsx("div",{className:"flex justify-end mb-8",children:m.jsxs("div",{className:"w-full md:w-1/2 p-6 bg-gray-50 rounded-lg border border-gray-200 shadow-sm",children:[m.jsxs("div",{className:"flex items-center mb-4",children:[m.jsx(nS,{className:"w-5 h-5 text-gray-600 mr-2"}),m.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Summary"})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-gray-700 font-medium",children:"Total Taxable Value:"}),m.jsxs("span",{className:"text-gray-900 font-semibold",children:["Rs ",t.subTotalTaxableValue.toFixed(2)]})]}),!t.isInterState&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-gray-700 font-medium",children:"CGST:"}),m.jsxs("span",{className:"text-gray-900 font-semibold",children:["Rs ",t.cgst.toFixed(2)]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-gray-700 font-medium",children:"SGST:"}),m.jsxs("span",{className:"text-gray-900 font-semibold",children:["Rs ",t.sgst.toFixed(2)]})]})]}),t.isInterState&&m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-gray-700 font-medium",children:"IGST:"}),m.jsxs("span",{className:"text-gray-900 font-semibold",children:["Rs ",t.igst.toFixed(2)]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-gray-700 font-medium",children:"Total Tax Amount:"}),m.jsxs("span",{className:"text-gray-900 font-semibold",children:["Rs ",t.totalGSTAmountOverall.toFixed(2)]})]}),m.jsx("div",{className:"border-t border-gray-300 my-4"}),m.jsxs("div",{className:"flex justify-between text-xl font-bold text-blue-700",children:[m.jsx("span",{children:"Grand Total:"}),m.jsxs("span",{children:["Rs ",t.grandTotal.toFixed(2)]})]}),m.jsxs("div",{className:"text-gray-600 text-sm mt-2 italic",children:["(",e(Math.floor(t.grandTotal)),")"]})]})]})})},jL=({termsAndConditions:t,onChange:e})=>m.jsxs("div",{className:"mb-8 p-6 bg-gray-50 rounded-lg border border-gray-200 shadow-sm",children:[m.jsxs("div",{className:"flex items-center mb-4",children:[m.jsx(cc,{className:"w-5 h-5 text-gray-600 mr-2"}),m.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Terms & Conditions"})]}),m.jsx("textarea",{value:t,onChange:n=>e(n.target.value),rows:5,placeholder:"Enter terms and conditions...",className:"w-full p-4 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-400 focus:border-transparent resize-none"})]}),FL=({docType:t,clientName:e,clientEmail:n,docNumber:r,grandTotal:i})=>{const[s,o]=Ue.useState(""),[a,l]=Ue.useState(!1),[h,p]=Ue.useState(null),g=async()=>{l(!0),p(null),o("");try{await new Promise(k=>setTimeout(k,1500));const E=`To: ${n?`${e} <${n}>`:e||"Valued Client"}
Subject: Follow-up on ${t} #${r}

Dear ${e||"Valued Client"},

I hope this email finds you well.

I wanted to follow up regarding ${t} #${r} for the amount of ${i.toFixed(2)} that we sent to you recently.

${t==="Quotation"?"We would appreciate your feedback on our quotation and look forward to the opportunity to work with you.":t==="Invoice"?"We kindly request you to process the payment at your earliest convenience.":"We would like to confirm the delivery schedule and ensure all requirements are met."}

Please feel free to reach out if you have any questions or need any clarification regarding this ${t.toLowerCase()}.

Thank you for your business and we look forward to hearing from you soon.

Best regards,
SUN CREATIONS
Phone: 9578078500
Email: hi@printhink.in`;o(E)}catch{p("Failed to generate email. Please try again.")}finally{l(!1)}},v=()=>{s&&navigator.clipboard.writeText(s)};return m.jsxs("div",{className:"mb-8 p-6 bg-purple-50 rounded-lg border border-purple-200 shadow-sm",children:[m.jsxs("div",{className:"flex items-center mb-4",children:[m.jsx(fo,{className:"w-5 h-5 text-purple-600 mr-2"}),m.jsx("h2",{className:"text-xl font-bold text-purple-800",children:"Email Assistant"}),n&&m.jsxs("div",{className:"ml-auto flex items-center text-sm text-purple-600",children:[m.jsx(fo,{className:"w-4 h-4 mr-1"}),m.jsx("span",{children:n})]})]}),m.jsxs("button",{onClick:g,disabled:a||!e,className:"w-full px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors duration-300 shadow-md flex items-center justify-center mb-4 disabled:opacity-50 disabled:cursor-not-allowed",children:[m.jsx(vL,{className:"w-5 h-5 mr-2"}),a?"Generating Email...":"Generate Follow-up Email"]}),h&&m.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700 text-sm mb-4",children:h}),s&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Generated Email Draft:"}),m.jsx("textarea",{value:s,readOnly:!0,rows:15,className:"w-full p-4 border border-gray-300 rounded-md bg-white resize-y text-sm font-mono"}),m.jsxs("div",{className:"flex gap-3 mt-3",children:[m.jsxs("button",{onClick:v,className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 shadow-md flex items-center",children:[m.jsx(tL,{className:"w-4 h-4 mr-2"}),"Copy to Clipboard"]}),n&&m.jsxs("a",{href:`mailto:${n}?subject=${encodeURIComponent(`Follow-up on ${t} #${r}`)}&body=${encodeURIComponent(s.split(`
`).slice(2).join(`
`))}`,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 shadow-md flex items-center",children:[m.jsx(fo,{className:"w-4 h-4 mr-2"}),"Open in Email Client"]})]})]}),!e&&m.jsx("p",{className:"text-gray-500 text-sm",children:"Please enter client name to generate personalized email."}),e&&!n&&m.jsx("p",{className:"text-yellow-600 text-sm bg-yellow-50 p-3 rounded-lg border border-yellow-200 mt-4",children:' Add client email address to enable "Open in Email Client" feature and show recipient in email header.'})]})},OL=({documents:t,isLoading:e,error:n,onSave:r,onLoad:i,onDelete:s,onExport:o,onImport:a})=>{const l=h=>{var g;const p=(g=h.target.files)==null?void 0:g[0];p&&(a(p),h.target.value="")};return m.jsxs("div",{className:"mb-8 p-6 bg-gray-50 rounded-lg border border-gray-200 shadow-sm",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(aL,{className:"w-5 h-5 text-gray-600 mr-2"}),m.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Document History"})]}),m.jsx("div",{className:"flex items-center text-sm",children:m.jsxs("div",{className:"flex items-center text-orange-600",children:[m.jsx(ho,{className:"w-4 h-4 mr-1"}),m.jsx("span",{children:"Firebase Storage"})]})})]}),m.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[m.jsxs("button",{onClick:r,disabled:e,className:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-300 shadow-md disabled:opacity-50",children:[m.jsx(mL,{className:"w-4 h-4 mr-2"}),"Save Current Document"]}),m.jsxs("button",{onClick:o,disabled:t.length===0,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-300 shadow-md disabled:opacity-50",children:[m.jsx(_c,{className:"w-4 h-4 mr-2"}),"Export All (JSON)"]}),m.jsxs("label",{className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-300 shadow-md cursor-pointer",children:[m.jsx(cS,{className:"w-4 h-4 mr-2"}),"Import (JSON)",m.jsx("input",{type:"file",accept:".json",onChange:l,className:"hidden"})]})]}),n&&m.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700 text-sm mb-4",children:n}),e&&m.jsxs("div",{className:"text-center py-4",children:[m.jsx("div",{className:"inline-block w-6 h-6 border-2 border-blue-200 border-t-blue-600 rounded-full animate-spin"}),m.jsx("p",{className:"text-blue-600 mt-2",children:"Loading..."})]}),!e&&t.length===0&&m.jsx("p",{className:"text-center text-gray-500 py-8",children:"No documents saved yet."}),!e&&t.length>0&&m.jsx("div",{className:"space-y-3",children:t.map(h=>{var p,g,v,f;return m.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 bg-white border border-gray-200 rounded-lg shadow-sm",children:[m.jsxs("div",{className:"flex-1 mb-3 sm:mb-0",children:[m.jsxs("div",{className:"font-medium text-gray-800",children:[h.docType," #",((p=h.docDetails)==null?void 0:p.number)||"N/A"]}),m.jsxs("div",{className:"text-sm text-gray-600",children:["Client: ",((g=h.client)==null?void 0:g.name)||"N/A","  Total: ",((f=(v=h.totals)==null?void 0:v.grandTotal)==null?void 0:f.toFixed(2))||"0.00"]}),m.jsxs("div",{className:"text-xs text-gray-500 flex items-center",children:[m.jsxs("span",{children:["Saved: ",new Date(h.timestamp).toLocaleString()]}),m.jsx(ho,{className:"w-3 h-3 ml-2 text-orange-500",title:"Stored in Firebase"})]})]}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsxs("button",{onClick:()=>i(h.id),className:"px-3 py-1 bg-green-500 text-white rounded-md hover:bg-green-600 text-sm flex items-center",children:[m.jsx(oS,{className:"w-3 h-3 mr-1"}),"Load"]}),m.jsxs("button",{onClick:()=>s(h.id),className:"px-3 py-1 bg-red-500 text-white rounded-md hover:bg-red-600 text-sm flex items-center",children:[m.jsx(vm,{className:"w-3 h-3 mr-1"}),"Delete"]})]})]},h.id)})})]})};class ML{constructor(){this.BACKUP_VERSION="1.0.0",this.APP_VERSION="1.0.0"}async createFullBackup(){try{const e=await Nn.getAllDocuments(),n=this.getLocalStorageData(),r=this.getUserPreferences(),i={version:this.BACKUP_VERSION,timestamp:new Date().toISOString(),documents:e.map(l=>({...l,id:void 0})),settings:n,userPreferences:r,metadata:{totalDocuments:e.length,backupSize:"0 MB",appVersion:this.APP_VERSION}},s=JSON.stringify(i,null,2),o=(new Blob([s]).size/(1024*1024)).toFixed(2);i.metadata.backupSize=`${o} MB`;const a=JSON.stringify(i,null,2);return new Blob([a],{type:"application/json"})}catch(e){throw console.error("Error creating backup:",e),new Error("Failed to create backup")}}async downloadBackup(){try{const e=await this.createFullBackup(),n=URL.createObjectURL(e),r=document.createElement("a"),i=new Date().toISOString().slice(0,19).replace(/:/g,"-");r.href=n,r.download=`invoice-app-backup-${i}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}catch(e){throw console.error("Error downloading backup:",e),new Error("Failed to download backup")}}async restoreFromBackup(e){try{const n=await e.text(),r=JSON.parse(n);if(!this.validateBackupFormat(r))throw new Error("Invalid backup file format");if(!window.confirm(`This will restore ${r.metadata.totalDocuments} documents and replace all current data. This action cannot be undone. Continue?`))return{success:!1,message:"Restore cancelled by user",stats:null};await this.clearAllData(),r.documents.length>0&&await Nn.importDocuments(r.documents),this.restoreLocalStorageData(r.settings),this.restoreUserPreferences(r.userPreferences);const s={documentsRestored:r.documents.length,backupVersion:r.version,backupDate:r.timestamp,originalSize:r.metadata.backupSize};return{success:!0,message:`Successfully restored ${r.documents.length} documents`,stats:s}}catch(n){return console.error("Error restoring backup:",n),{success:!1,message:`Failed to restore backup: ${n.message}`,stats:null}}}validateBackupFormat(e){return e&&typeof e=="object"&&e.version&&e.timestamp&&Array.isArray(e.documents)&&e.metadata&&typeof e.metadata.totalDocuments=="number"}getLocalStorageData(){const e={};return["invoice_app_auth","invoice_app_documents","invoice_app_settings","invoice_app_preferences","imported_client_data","imported_product_data","client_sheet_url","product_sheet_url","last_client_sync","last_product_sync"].forEach(r=>{const i=localStorage.getItem(r);if(i)try{e[r]=JSON.parse(i)}catch{e[r]=i}}),e}getUserPreferences(){return{theme:localStorage.getItem("theme")||"light",language:localStorage.getItem("language")||"en",currency:localStorage.getItem("currency")||"INR",dateFormat:localStorage.getItem("dateFormat")||"DD/MM/YYYY"}}async clearAllData(){await Nn.clearAllDocuments();const e=["invoice_app_auth","firebase_session_token"];Object.keys(localStorage).forEach(r=>{r.startsWith("invoice_app_")&&!e.includes(r)&&localStorage.removeItem(r)})}restoreLocalStorageData(e){e&&Object.entries(e).forEach(([n,r])=>{if(n!=="invoice_app_auth"&&n!=="firebase_session_token")try{localStorage.setItem(n,typeof r=="string"?r:JSON.stringify(r))}catch(i){console.warn(`Failed to restore localStorage item: ${n}`,i)}})}restoreUserPreferences(e){e&&Object.entries(e).forEach(([n,r])=>{try{localStorage.setItem(n,r)}catch(i){console.warn(`Failed to restore preference: ${n}`,i)}})}async getBackupInfo(){try{const e=await Nn.getAllDocuments(),n={documents:e.slice(0,Math.min(10,e.length)),settings:this.getLocalStorageData(),userPreferences:this.getUserPreferences()},r=new Blob([JSON.stringify(n)]).size,i=e.length>0?r*e.length/Math.min(10,e.length)/(1024*1024):0;return{totalDocuments:e.length,lastBackup:localStorage.getItem("last_backup_date"),estimatedSize:`${i.toFixed(2)} MB`}}catch(e){return console.error("Error getting backup info:",e),{totalDocuments:0,lastBackup:null,estimatedSize:"0 MB"}}}updateLastBackupDate(){localStorage.setItem("last_backup_date",new Date().toISOString())}}const yf=new ML,VL=({onBackupComplete:t,onRestoreComplete:e})=>{const[n,r]=Ue.useState(!1),[i,s]=Ue.useState(!1),[o,a]=Ue.useState({totalDocuments:0,lastBackup:null,estimatedSize:"0 MB"}),[l,h]=Ue.useState(null);Ue.useEffect(()=>{p()},[]);const p=async()=>{try{const E=await yf.getBackupInfo();a(E)}catch(E){console.error("Error loading backup info:",E)}},g=async()=>{r(!0);try{await yf.downloadBackup(),yf.updateLastBackupDate(),await p(),t("Backup created and downloaded successfully!")}catch(E){console.error("Backup failed:",E),t("Failed to create backup. Please try again.")}finally{r(!1)}},v=async E=>{var P;const k=(P=E.target.files)==null?void 0:P[0];if(k){s(!0),h(null);try{const w=await yf.restoreFromBackup(k);w.success?(h(w.stats),e(w.message),await p(),setTimeout(()=>{window.location.reload()},2e3)):e(w.message)}catch(w){console.error("Restore failed:",w),e("Failed to restore backup. Please check the file and try again.")}finally{s(!1),E.target.value=""}}},f=E=>E?new Date(E).toLocaleString():"Never";return m.jsxs("div",{className:"mb-8 p-6 bg-gradient-to-r from-purple-50 to-indigo-50 rounded-lg border border-purple-200 shadow-sm",children:[m.jsxs("div",{className:"flex items-center mb-6",children:[m.jsx(yL,{className:"w-6 h-6 text-purple-600 mr-3"}),m.jsx("h2",{className:"text-2xl font-bold text-purple-800",children:"Backup & Restore"})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[m.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-lg p-4 border border-purple-100",children:[m.jsxs("div",{className:"flex items-center mb-2",children:[m.jsx(cc,{className:"w-5 h-5 text-blue-600 mr-2"}),m.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Documents"})]}),m.jsx("p",{className:"text-2xl font-bold text-blue-600",children:o.totalDocuments})]}),m.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-lg p-4 border border-purple-100",children:[m.jsxs("div",{className:"flex items-center mb-2",children:[m.jsx(iS,{className:"w-5 h-5 text-green-600 mr-2"}),m.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Estimated Size"})]}),m.jsx("p",{className:"text-2xl font-bold text-green-600",children:o.estimatedSize})]}),m.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-lg p-4 border border-purple-100",children:[m.jsxs("div",{className:"flex items-center mb-2",children:[m.jsx(rS,{className:"w-5 h-5 text-orange-600 mr-2"}),m.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Last Backup"})]}),m.jsx("p",{className:"text-sm font-bold text-orange-600",children:f(o.lastBackup)})]})]}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[m.jsxs("button",{onClick:g,disabled:n||o.totalDocuments===0,className:"flex-1 flex items-center justify-center px-6 py-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all duration-300 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-[1.02] active:scale-[0.98]",children:[m.jsx(_c,{className:"w-5 h-5 mr-2"}),n?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"}),"Creating Backup..."]}):"Create Full Backup"]}),m.jsxs("label",{className:"flex-1 flex items-center justify-center px-6 py-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 transition-all duration-300 shadow-lg cursor-pointer transform hover:scale-[1.02] active:scale-[0.98]",children:[m.jsx(cS,{className:"w-5 h-5 mr-2"}),i?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"}),"Restoring..."]}):"Restore from Backup",m.jsx("input",{type:"file",accept:".json",onChange:v,disabled:i,className:"hidden"})]})]}),m.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:m.jsxs("div",{className:"flex items-start",children:[m.jsx(Yk,{className:"w-5 h-5 text-yellow-600 mr-3 mt-0.5 flex-shrink-0"}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-semibold text-yellow-800 mb-1",children:"Important Notes"}),m.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[m.jsx("li",{children:" Backup includes all documents, settings, and user preferences"}),m.jsx("li",{children:" Restoring will replace ALL current data - this cannot be undone"}),m.jsx("li",{children:" Create regular backups to prevent data loss"}),m.jsx("li",{children:" Backup files are in JSON format and can be stored safely"})]})]})]})}),l&&m.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:m.jsxs("div",{className:"flex items-start",children:[m.jsx(gm,{className:"w-5 h-5 text-green-600 mr-3 mt-0.5"}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-semibold text-green-800 mb-2",children:"Restore Completed Successfully"}),m.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-green-700",children:[m.jsxs("div",{children:[m.jsx("span",{className:"font-medium",children:"Documents Restored:"})," ",l.documentsRestored]}),m.jsxs("div",{children:[m.jsx("span",{className:"font-medium",children:"Backup Version:"})," ",l.backupVersion]}),m.jsxs("div",{children:[m.jsx("span",{className:"font-medium",children:"Original Backup Date:"})," ",f(l.backupDate)]}),m.jsxs("div",{children:[m.jsx("span",{className:"font-medium",children:"Backup Size:"})," ",l.originalSize]})]}),m.jsx("p",{className:"text-xs text-green-600 mt-2 italic",children:"Page will refresh automatically to load restored data..."})]})]})}),m.jsxs("div",{className:"bg-white/50 backdrop-blur-sm rounded-lg p-4 border border-purple-100",children:[m.jsxs("h3",{className:"text-sm font-semibold text-gray-800 mb-3 flex items-center",children:[m.jsx(gL,{className:"w-4 h-4 mr-2"}),"What's Included in Backup"]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm text-gray-600",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"All saved documents (invoices, quotations, purchase orders)"]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Company and client information"]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Bank details and payment information"]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mr-2"}),"Application settings and preferences"]})]})]})]})},BL="modulepreload",UL=function(t){return"/"+t},rw={},zl=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=UL(l),l in rw)return;rw[l]=!0;const h=l.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${p}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":BL,h||(g.as="script"),g.crossOrigin="",g.href=l,a&&g.setAttribute("nonce",a),document.head.appendChild(g),h)return new Promise((v,f)=>{g.addEventListener("load",v),g.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},zL=({onMessage:t,clientDataHook:e})=>{const{clients:n,refreshData:r,addClient:i,updateClient:s,deleteClient:o,syncWithCloud:a,isLoading:l}=e,[h,p]=Ue.useState(""),[g,v]=Ue.useState(!1),[f,E]=Ue.useState(null),[k,P]=Ue.useState(localStorage.getItem("client_sheet_url")||""),[w,_]=Ue.useState(!1),[T,L]=Ue.useState("idle"),[V,W]=Ue.useState(localStorage.getItem("last_client_sync")||null),[I,x]=Ue.useState({lastUpdated:null,source:"none",count:0}),[C,j]=Ue.useState({Name:"",Address:"",Phone:"",GSTIN:"",Email:""});Dw.useEffect(()=>{N()},[]);const N=async()=>{try{const{firebaseManager:M}=await zl(async()=>{const{firebaseManager:Y}=await Promise.resolve().then(()=>kp);return{firebaseManager:Y}},void 0),z=await M.getClientDataInfo();x(z)}catch(M){console.error("Error loading cloud info:",M)}},A=n.filter(M=>{var z,Y,te,oe,ae;return((z=M.Name)==null?void 0:z.toLowerCase().includes(h.toLowerCase()))||((Y=M.Phone)==null?void 0:Y.includes(h))||((te=M.GSTIN)==null?void 0:te.toLowerCase().includes(h.toLowerCase()))||((oe=M.Email)==null?void 0:oe.toLowerCase().includes(h.toLowerCase()))||((ae=M.Address)==null?void 0:ae.toLowerCase().includes(h.toLowerCase()))}),D=M=>{if(!M)return"";if(M.includes("/export?format=csv")||M.includes("output=csv"))return M;const z=[/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/,/\/d\/([a-zA-Z0-9-_]+)/,/key=([a-zA-Z0-9-_]+)/,/^([a-zA-Z0-9-_]+)$/];let Y="";for(const ae of z){const ye=M.match(ae);if(ye){Y=ye[1];break}}if(!Y)throw new Error("Invalid Google Sheets URL. Please ensure the URL contains a valid spreadsheet ID.");let te="0";const oe=M.match(/[#&]gid=([0-9]+)/);return oe&&(te=oe[1]),`https://docs.google.com/spreadsheets/d/${Y}/export?format=csv&gid=${te}`},J=M=>{const z=M.trim().split(`
`);if(z.length===0)return[];const Y=z[0].split(",").map(oe=>oe.trim().replace(/^"|"$/g,"")),te=[];for(let oe=1;oe<z.length;oe++){const ae=z[oe].trim();if(!ae)continue;const ye=[];let Ae="",Te=!1;for(let Ze=0;Ze<ae.length;Ze++){const be=ae[Ze];be==='"'?Te=!Te:be===","&&!Te?(ye.push(Ae.trim().replace(/^"|"$/g,"")),Ae=""):Ae+=be}ye.push(Ae.trim().replace(/^"|"$/g,""));const Me={};let Ve=!1;Y.forEach((Ze,be)=>{const ie=(ye[be]||"").trim();Me[Ze]=ie,ie&&(Ve=!0)}),Ve&&te.push(Me)}return te},ue=async()=>{if(!k.trim()){t("Please enter a valid Google Sheets URL");return}_(!0),L("idle");try{const M=D(k),z=await fetch(M,{method:"GET",headers:{Accept:"text/csv,text/plain,*/*"}});if(!z.ok)throw z.status===404?new Error("Sheet not found. Please ensure the Google Sheet is published to web as CSV and the URL is correct."):z.status===403?new Error("Access denied. Please ensure the Google Sheet is publicly accessible."):new Error(`Failed to fetch data: ${z.status} ${z.statusText}`);const Y=await z.text();if(!Y||Y.trim().length===0)throw new Error("The sheet appears to be empty or contains no data.");const te=J(Y);if(te.length===0)throw new Error("No valid data rows found in the sheet. Please ensure your sheet contains data rows with at least one non-empty cell per row.");const{firebaseManager:oe}=await zl(async()=>{const{firebaseManager:ye}=await Promise.resolve().then(()=>kp);return{firebaseManager:ye}},void 0);await oe.saveClientData(te,"google_sheets",k),localStorage.setItem("imported_client_data",JSON.stringify(te)),localStorage.setItem("client_sheet_url",k);const ae=new Date().toISOString();localStorage.setItem("last_client_sync",ae),W(ae),L("success"),t(`Successfully loaded ${te.length} client records from Google Sheets and saved to cloud`),await r(),await N()}catch(M){console.error("Error loading client data:",M),L("error"),t(`Failed to load client data: ${M.message}`)}finally{_(!1)}},Z=()=>{try{if(n.length===0){t("No client data to export");return}const z=[["Name","Address","Phone","GSTIN","Email"].join(","),...n.map(oe=>[`"${(oe.Name||"").replace(/"/g,'""')}"`,`"${(oe.Address||"").replace(/"/g,'""')}"`,`"${(oe.Phone||"").replace(/"/g,'""')}"`,`"${(oe.GSTIN||"").replace(/"/g,'""')}"`,`"${(oe.Email||"").replace(/"/g,'""')}"`].join(","))].join(`
`),Y=new Blob([z],{type:"text/csv;charset=utf-8;"}),te=document.createElement("a");te.href=URL.createObjectURL(Y),te.download=`clients_${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(te),te.click(),document.body.removeChild(te),t(`Exported ${n.length} client records to CSV`)}catch(M){console.error("Error exporting client data:",M),t("Failed to export client data")}},ee=async()=>{if(!C.Name.trim()){t("Please enter a client name");return}try{await i(C)?(j({Name:"",Address:"",Phone:"",GSTIN:"",Email:""}),v(!1),t("New client added successfully and saved to cloud"),await N()):t("Failed to add new client")}catch(M){console.error("Error adding client:",M),t("Failed to add new client")}},Q=async()=>{if(!f||!f.Name.trim()){t("Please enter a client name");return}try{const M=n.findIndex(Y=>Y.Name===f.Name&&Y.Phone===f.Phone&&Y.GSTIN===f.GSTIN);if(M===-1){t("Client not found");return}await s(M,f)?(E(null),t("Client updated successfully and saved to cloud"),await N()):t("Failed to update client")}catch(M){console.error("Error updating client:",M),t("Failed to update client")}},X=async M=>{if(confirm(`Are you sure you want to delete ${M.Name}?`))try{await o(M)?(t("Client deleted successfully and updated in cloud"),await N()):t("Failed to delete client")}catch(z){console.error("Error deleting client:",z),t("Failed to delete client")}},se=async()=>{try{_(!0),await a()?(t("Client data synced successfully with cloud"),await N()):t("Failed to sync client data")}catch(M){console.error("Error syncing client data:",M),t("Failed to sync client data")}finally{_(!1)}},ge=M=>M?new Date(M).toLocaleString():"Never",O=M=>{switch(M){case"success":return m.jsx(gm,{className:"w-4 h-4 text-green-500"});case"error":return m.jsx(tS,{className:"w-4 h-4 text-red-500"});default:return m.jsx(ho,{className:"w-4 h-4 text-gray-400"})}};return m.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8",children:[m.jsxs("div",{className:"flex items-center justify-between mb-8",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(Lp,{className:"w-8 h-8 text-blue-600 mr-3"}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Client Management"}),m.jsx("p",{className:"text-gray-600",children:"Manage your client database with Google Sheets integration and cloud sync"})]})]}),m.jsxs("div",{className:"text-right",children:[m.jsx("div",{className:"text-2xl font-bold text-blue-600",children:n.length}),m.jsx("div",{className:"text-sm text-gray-500",children:"Total Clients"})]})]}),m.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(ho,{className:"w-5 h-5 text-blue-600 mr-2"}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-semibold text-blue-800",children:"Cloud Storage Status"}),m.jsx("p",{className:"text-xs text-blue-600",children:I.count>0?`${I.count} clients in cloud  Last updated: ${ge(I.lastUpdated)}`:"No cloud data found"})]})]}),m.jsxs("button",{onClick:se,disabled:w,className:"flex items-center px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 text-sm",children:[m.jsx(aS,{className:`w-4 h-4 mr-1 ${w?"animate-spin":""}`}),"Sync"]})]})}),m.jsxs("div",{className:"mb-8 p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[m.jsxs("div",{className:"flex items-center mb-4",children:[m.jsx(lS,{className:"w-6 h-6 text-blue-600 mr-3"}),m.jsx("h2",{className:"text-xl font-bold text-blue-800",children:"Google Sheets Integration"}),O(T)]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 mb-4",children:[m.jsxs("div",{className:"lg:col-span-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Google Sheets URL"}),m.jsx("input",{type:"url",value:k,onChange:M=>P(M.target.value),placeholder:"https://docs.google.com/spreadsheets/d/your-sheet-id/...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),m.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Expected columns: Name, Address, Phone, GSTIN, Email"})]}),m.jsx("div",{className:"flex flex-col justify-end",children:m.jsx("button",{onClick:ue,disabled:w||!k.trim(),className:"w-full flex items-center justify-center px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:w?m.jsxs(m.Fragment,{children:[m.jsx(Ca,{className:"w-4 h-4 mr-2 animate-spin"}),"Loading..."]}):m.jsxs(m.Fragment,{children:[m.jsx(_c,{className:"w-4 h-4 mr-2"}),"Import & Save to Cloud"]})})})]}),V&&m.jsxs("p",{className:"text-xs text-gray-600",children:["Last sync: ",ge(V)]}),m.jsxs("div",{className:"mt-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[m.jsx("h4",{className:"text-sm font-semibold text-yellow-800 mb-2",children:"Setup Instructions:"}),m.jsxs("ol",{className:"text-sm text-yellow-700 space-y-1 list-decimal list-inside",children:[m.jsx("li",{children:"Create a Google Sheet with columns: Name, Address, Phone, GSTIN, Email"}),m.jsx("li",{children:"Go to File  Share  Publish to web"}),m.jsx("li",{children:'Choose "Entire Document" and "Comma-separated values (.csv)"'}),m.jsx("li",{children:'Click "Publish" and copy the generated URL'}),m.jsx("li",{children:'Paste the URL above and click "Import & Save to Cloud"'})]})]})]}),m.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[m.jsxs("button",{onClick:()=>v(!0),className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[m.jsx(K2,{className:"w-4 h-4 mr-2"}),"Add New Client"]}),n.length>0&&m.jsxs("button",{onClick:Z,className:"flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[m.jsx(G2,{className:"w-4 h-4 mr-2"}),"Export as CSV"]})]}),n.length>0&&m.jsx("div",{className:"mb-6",children:m.jsxs("div",{className:"relative",children:[m.jsx(ym,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),m.jsx("input",{type:"text",value:h,onChange:M=>p(M.target.value),placeholder:"Search clients by name, phone, GSTIN, email, or address...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(g||f)&&m.jsxs("div",{className:"mb-6 p-6 bg-gray-50 rounded-lg border border-gray-200",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:f?"Edit Client":"Add New Client"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsx("input",{type:"text",value:f?f.Name:C.Name,onChange:M=>{f?E({...f,Name:M.target.value}):j({...C,Name:M.target.value})},placeholder:"Client Name *",className:"p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),m.jsx("input",{type:"text",value:f?f.Phone:C.Phone,onChange:M=>{f?E({...f,Phone:M.target.value}):j({...C,Phone:M.target.value})},placeholder:"Phone",className:"p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),m.jsx("input",{type:"text",value:f?f.GSTIN:C.GSTIN,onChange:M=>{f?E({...f,GSTIN:M.target.value}):j({...C,GSTIN:M.target.value})},placeholder:"GSTIN",className:"p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),m.jsx("input",{type:"email",value:f?f.Email:C.Email,onChange:M=>{f?E({...f,Email:M.target.value}):j({...C,Email:M.target.value})},placeholder:"Email",className:"p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),m.jsx("textarea",{value:f?f.Address:C.Address,onChange:M=>{f?E({...f,Address:M.target.value}):j({...C,Address:M.target.value})},placeholder:"Address",rows:2,className:"md:col-span-2 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]}),m.jsxs("div",{className:"flex gap-2 mt-4",children:[m.jsx("button",{onClick:f?Q:ee,disabled:f?!f.Name.trim():!C.Name.trim(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Update Client":"Add Client"}),m.jsx("button",{onClick:()=>{v(!1),E(null),j({Name:"",Address:"",Phone:"",GSTIN:"",Email:""})},className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]}),n.length===0?m.jsxs("div",{className:"text-center py-12",children:[m.jsx(Lp,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),m.jsx("h3",{className:"text-xl font-semibold text-gray-500 mb-2",children:"No clients found"}),m.jsx("p",{className:"text-gray-400 mb-6",children:"Import from Google Sheets or add clients manually to get started"})]}):m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"text-sm text-gray-600 mb-4 flex items-center justify-between",children:[m.jsxs("span",{children:["Showing ",A.length," of ",n.length," clients"]}),m.jsxs("div",{className:"flex items-center text-blue-600",children:[m.jsx(ho,{className:"w-4 h-4 mr-1"}),m.jsx("span",{children:"Synced to cloud"})]})]}),A.map((M,z)=>m.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200 hover:shadow-md transition-shadow",children:m.jsxs("div",{className:"flex items-start justify-between",children:[m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex items-center mb-2",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:M.Name}),M.Email&&m.jsx("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full",children:M.Email})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 text-sm text-gray-600",children:[m.jsxs("div",{children:[m.jsx("span",{className:"font-medium",children:"Phone:"})," ",M.Phone||"N/A"]}),m.jsxs("div",{children:[m.jsx("span",{className:"font-medium",children:"GSTIN:"})," ",M.GSTIN||"N/A"]}),m.jsxs("div",{className:"md:col-span-1",children:[m.jsx("span",{className:"font-medium",children:"Address:"})," ",M.Address||"N/A"]})]})]}),m.jsxs("div",{className:"flex gap-2 ml-4",children:[m.jsx("button",{onClick:()=>E({...M}),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"Edit client",children:m.jsx(uS,{className:"w-4 h-4"})}),m.jsx("button",{onClick:()=>X(M),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"Delete client",children:m.jsx(vm,{className:"w-4 h-4"})})]})]})},z))]})]})},qL=({onMessage:t,productDataHook:e})=>{const{products:n,refreshData:r,addProduct:i,updateProduct:s,deleteProduct:o,syncWithCloud:a,isLoading:l}=e,[h,p]=Ue.useState(""),[g,v]=Ue.useState(!1),[f,E]=Ue.useState(null),[k,P]=Ue.useState(localStorage.getItem("product_sheet_url")||""),[w,_]=Ue.useState(!1),[T,L]=Ue.useState("idle"),[V,W]=Ue.useState(localStorage.getItem("last_product_sync")||null),[I,x]=Ue.useState({lastUpdated:null,source:"none",count:0}),[C,j]=Ue.useState({Description:"",HSN:"",Price:"",Category:""});Dw.useEffect(()=>{N()},[]);const N=async()=>{try{const{firebaseManager:z}=await zl(async()=>{const{firebaseManager:te}=await Promise.resolve().then(()=>kp);return{firebaseManager:te}},void 0),Y=await z.getProductDataInfo();x(Y)}catch(z){console.error("Error loading cloud info:",z)}},A=n.filter(z=>{var Y,te,oe,ae;return((Y=z.Description)==null?void 0:Y.toLowerCase().includes(h.toLowerCase()))||((te=z.HSN)==null?void 0:te.includes(h))||((oe=z.Category)==null?void 0:oe.toLowerCase().includes(h.toLowerCase()))||((ae=z.Price)==null?void 0:ae.includes(h))}),D=[...new Set(n.map(z=>z.Category).filter(Boolean))],J=z=>{if(!z)return"";if(z.includes("/export?format=csv")||z.includes("output=csv"))return z;const Y=[/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/,/\/d\/([a-zA-Z0-9-_]+)/,/key=([a-zA-Z0-9-_]+)/,/^([a-zA-Z0-9-_]+)$/];let te="";for(const ye of Y){const Ae=z.match(ye);if(Ae){te=Ae[1];break}}if(!te)throw new Error("Invalid Google Sheets URL. Please ensure the URL contains a valid spreadsheet ID.");let oe="0";const ae=z.match(/[#&]gid=([0-9]+)/);return ae&&(oe=ae[1]),`https://docs.google.com/spreadsheets/d/${te}/export?format=csv&gid=${oe}`},ue=z=>{const Y=z.trim().split(`
`);if(Y.length===0)return[];const te=Y[0].split(",").map(ae=>ae.trim().replace(/^"|"$/g,"")),oe=[];for(let ae=1;ae<Y.length;ae++){const ye=Y[ae].trim();if(!ye)continue;const Ae=[];let Te="",Me=!1;for(let be=0;be<ye.length;be++){const ie=ye[be];ie==='"'?Me=!Me:ie===","&&!Me?(Ae.push(Te.trim().replace(/^"|"$/g,"")),Te=""):Te+=ie}Ae.push(Te.trim().replace(/^"|"$/g,""));const Ve={};let Ze=!1;te.forEach((be,ie)=>{const $e=(Ae[ie]||"").trim();Ve[be]=$e,$e&&(Ze=!0)}),Ze&&oe.push(Ve)}return oe},Z=async()=>{if(!k.trim()){t("Please enter a valid Google Sheets URL");return}_(!0),L("idle");try{const z=J(k),Y=await fetch(z,{method:"GET",headers:{Accept:"text/csv,text/plain,*/*"}});if(!Y.ok)throw Y.status===404?new Error("Sheet not found. Please ensure the Google Sheet is published to web as CSV and the URL is correct."):Y.status===403?new Error("Access denied. Please ensure the Google Sheet is publicly accessible."):new Error(`Failed to fetch data: ${Y.status} ${Y.statusText}`);const te=await Y.text();if(!te||te.trim().length===0)throw new Error("The sheet appears to be empty or contains no data.");const oe=ue(te);if(oe.length===0)throw new Error("No valid data rows found in the sheet. Please ensure your sheet contains data rows with at least one non-empty cell per row.");const{firebaseManager:ae}=await zl(async()=>{const{firebaseManager:Ae}=await Promise.resolve().then(()=>kp);return{firebaseManager:Ae}},void 0);await ae.saveProductData(oe,"google_sheets",k),localStorage.setItem("imported_product_data",JSON.stringify(oe)),localStorage.setItem("product_sheet_url",k);const ye=new Date().toISOString();localStorage.setItem("last_product_sync",ye),W(ye),L("success"),t(`Successfully loaded ${oe.length} product records from Google Sheets and saved to cloud`),await r(),await N()}catch(z){console.error("Error loading product data:",z),L("error"),t(`Failed to load product data: ${z.message}`)}finally{_(!1)}},ee=()=>{try{if(n.length===0){t("No product data to export");return}const Y=[["Description","HSN","Price","Category"].join(","),...n.map(ae=>[`"${(ae.Description||"").replace(/"/g,'""')}"`,`"${(ae.HSN||"").replace(/"/g,'""')}"`,`"${(ae.Price||"").replace(/"/g,'""')}"`,`"${(ae.Category||"").replace(/"/g,'""')}"`].join(","))].join(`
`),te=new Blob([Y],{type:"text/csv;charset=utf-8;"}),oe=document.createElement("a");oe.href=URL.createObjectURL(te),oe.download=`products_${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(oe),oe.click(),document.body.removeChild(oe),t(`Exported ${n.length} product records to CSV`)}catch(z){console.error("Error exporting product data:",z),t("Failed to export product data")}},Q=async()=>{if(!C.Description.trim()){t("Please enter a product description");return}try{await i(C)?(j({Description:"",HSN:"",Price:"",Category:""}),v(!1),t("New product added successfully and saved to cloud"),await N()):t("Failed to add new product")}catch(z){console.error("Error adding product:",z),t("Failed to add new product")}},X=async()=>{if(!f||!f.Description.trim()){t("Please enter a product description");return}try{const z=n.findIndex(te=>te.Description===f.Description&&te.HSN===f.HSN&&te.Price===f.Price);if(z===-1){t("Product not found");return}await s(z,f)?(E(null),t("Product updated successfully and saved to cloud"),await N()):t("Failed to update product")}catch(z){console.error("Error updating product:",z),t("Failed to update product")}},se=async z=>{if(confirm(`Are you sure you want to delete ${z.Description}?`))try{await o(z)?(t("Product deleted successfully and updated in cloud"),await N()):t("Failed to delete product")}catch(Y){console.error("Error deleting product:",Y),t("Failed to delete product")}},ge=async()=>{try{_(!0),await a()?(t("Product data synced successfully with cloud"),await N()):t("Failed to sync product data")}catch(z){console.error("Error syncing product data:",z),t("Failed to sync product data")}finally{_(!1)}},O=z=>z?new Date(z).toLocaleString():"Never",M=z=>{switch(z){case"success":return m.jsx(gm,{className:"w-4 h-4 text-green-500"});case"error":return m.jsx(tS,{className:"w-4 h-4 text-red-500"});default:return m.jsx(ho,{className:"w-4 h-4 text-gray-400"})}};return m.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8",children:[m.jsxs("div",{className:"flex items-center justify-between mb-8",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(Z5,{className:"w-8 h-8 text-purple-600 mr-3"}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Product Management"}),m.jsx("p",{className:"text-gray-600",children:"Manage your product catalog with Google Sheets integration and cloud sync"})]})]}),m.jsxs("div",{className:"text-right",children:[m.jsx("div",{className:"text-2xl font-bold text-purple-600",children:n.length}),m.jsx("div",{className:"text-sm text-gray-500",children:"Total Products"})]})]}),m.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-purple-50 to-indigo-50 rounded-lg border border-purple-200",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(ho,{className:"w-5 h-5 text-purple-600 mr-2"}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-semibold text-purple-800",children:"Cloud Storage Status"}),m.jsx("p",{className:"text-xs text-purple-600",children:I.count>0?`${I.count} products in cloud  Last updated: ${O(I.lastUpdated)}`:"No cloud data found"})]})]}),m.jsxs("button",{onClick:ge,disabled:w,className:"flex items-center px-3 py-1 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors disabled:opacity-50 text-sm",children:[m.jsx(aS,{className:`w-4 h-4 mr-1 ${w?"animate-spin":""}`}),"Sync"]})]})}),m.jsxs("div",{className:"mb-8 p-6 bg-gradient-to-r from-purple-50 to-indigo-50 rounded-lg border border-purple-200",children:[m.jsxs("div",{className:"flex items-center mb-4",children:[m.jsx(lS,{className:"w-6 h-6 text-purple-600 mr-3"}),m.jsx("h2",{className:"text-xl font-bold text-purple-800",children:"Google Sheets Integration"}),M(T)]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 mb-4",children:[m.jsxs("div",{className:"lg:col-span-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Google Sheets URL"}),m.jsx("input",{type:"url",value:k,onChange:z=>P(z.target.value),placeholder:"https://docs.google.com/spreadsheets/d/your-sheet-id/...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),m.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Expected columns: Description, HSN, Price, Category"})]}),m.jsx("div",{className:"flex flex-col justify-end",children:m.jsx("button",{onClick:Z,disabled:w||!k.trim(),className:"w-full flex items-center justify-center px-4 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:w?m.jsxs(m.Fragment,{children:[m.jsx(Ca,{className:"w-4 h-4 mr-2 animate-spin"}),"Loading..."]}):m.jsxs(m.Fragment,{children:[m.jsx(_c,{className:"w-4 h-4 mr-2"}),"Import & Save to Cloud"]})})})]}),V&&m.jsxs("p",{className:"text-xs text-gray-600",children:["Last sync: ",O(V)]}),m.jsxs("div",{className:"mt-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[m.jsx("h4",{className:"text-sm font-semibold text-yellow-800 mb-2",children:"Setup Instructions:"}),m.jsxs("ol",{className:"text-sm text-yellow-700 space-y-1 list-decimal list-inside",children:[m.jsx("li",{children:"Create a Google Sheet with columns: Description, HSN, Price, Category"}),m.jsx("li",{children:"Go to File  Share  Publish to web"}),m.jsx("li",{children:'Choose "Entire Document" and "Comma-separated values (.csv)"'}),m.jsx("li",{children:'Click "Publish" and copy the generated URL'}),m.jsx("li",{children:'Paste the URL above and click "Import & Save to Cloud"'})]})]})]}),m.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[m.jsxs("button",{onClick:()=>v(!0),className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[m.jsx(K2,{className:"w-4 h-4 mr-2"}),"Add New Product"]}),n.length>0&&m.jsxs("button",{onClick:ee,className:"flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[m.jsx(G2,{className:"w-4 h-4 mr-2"}),"Export as CSV"]})]}),n.length>0&&m.jsx("div",{className:"mb-6",children:m.jsxs("div",{className:"relative",children:[m.jsx(ym,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),m.jsx("input",{type:"text",value:h,onChange:z=>p(z.target.value),placeholder:"Search products by description, HSN, price, or category...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})}),D.length>0&&m.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[m.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:["Categories (",D.length,")"]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:D.map((z,Y)=>m.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-purple-100 text-purple-700 text-xs rounded-full",children:[m.jsx(tw,{className:"w-3 h-3 mr-1"}),z]},Y))})]}),(g||f)&&m.jsxs("div",{className:"mb-6 p-6 bg-gray-50 rounded-lg border border-gray-200",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:f?"Edit Product":"Add New Product"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsx("input",{type:"text",value:f?f.Description:C.Description,onChange:z=>{f?E({...f,Description:z.target.value}):j({...C,Description:z.target.value})},placeholder:"Product Description *",className:"md:col-span-2 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),m.jsx("input",{type:"text",value:f?f.HSN:C.HSN,onChange:z=>{f?E({...f,HSN:z.target.value}):j({...C,HSN:z.target.value})},placeholder:"HSN/SAC Code",className:"p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),m.jsx("input",{type:"text",value:f?f.Price:C.Price,onChange:z=>{f?E({...f,Price:z.target.value}):j({...C,Price:z.target.value})},placeholder:"Price",className:"p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),m.jsx("input",{type:"text",value:f?f.Category:C.Category,onChange:z=>{f?E({...f,Category:z.target.value}):j({...C,Category:z.target.value})},placeholder:"Category",className:"md:col-span-2 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),m.jsxs("div",{className:"flex gap-2 mt-4",children:[m.jsx("button",{onClick:f?X:Q,disabled:f?!f.Description.trim():!C.Description.trim(),className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Update Product":"Add Product"}),m.jsx("button",{onClick:()=>{v(!1),E(null),j({Description:"",HSN:"",Price:"",Category:""})},className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]}),n.length===0?m.jsxs("div",{className:"text-center py-12",children:[m.jsx(Z5,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),m.jsx("h3",{className:"text-xl font-semibold text-gray-500 mb-2",children:"No products found"}),m.jsx("p",{className:"text-gray-400 mb-6",children:"Import from Google Sheets or add products manually to get started"})]}):m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"text-sm text-gray-600 mb-4 flex items-center justify-between",children:[m.jsxs("span",{children:["Showing ",A.length," of ",n.length," products"]}),m.jsxs("div",{className:"flex items-center text-purple-600",children:[m.jsx(ho,{className:"w-4 h-4 mr-1"}),m.jsx("span",{children:"Synced to cloud"})]})]}),A.map((z,Y)=>m.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200 hover:shadow-md transition-shadow",children:m.jsxs("div",{className:"flex items-start justify-between",children:[m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex items-center mb-2",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:z.Description}),z.Category&&m.jsxs("span",{className:"ml-2 px-2 py-1 bg-purple-100 text-purple-700 text-xs rounded-full",children:[m.jsx(tw,{className:"w-3 h-3 inline mr-1"}),z.Category]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 text-sm text-gray-600",children:[m.jsxs("div",{children:[m.jsx("span",{className:"font-medium",children:"HSN/SAC:"})," ",z.HSN||"N/A"]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx(sS,{className:"w-4 h-4 mr-1"}),m.jsx("span",{className:"font-medium",children:"Price:"})," ",z.Price||"N/A"]})]})]}),m.jsxs("div",{className:"flex gap-2 ml-4",children:[m.jsx("button",{onClick:()=>E({...z}),className:"p-2 text-purple-600 hover:bg-purple-100 rounded-lg transition-colors",title:"Edit product",children:m.jsx(uS,{className:"w-4 h-4"})}),m.jsx("button",{onClick:()=>se(z),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"Delete product",children:m.jsx(vm,{className:"w-4 h-4"})})]})]})},Y))]})]})};function qt(t){"@babel/helpers - typeof";return qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qt(t)}var Sr=Uint8Array,hi=Uint16Array,Q2=Int32Array,wm=new Sr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),_m=new Sr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Y0=new Sr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),hS=function(t,e){for(var n=new hi(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new Q2(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},dS=hS(wm,2),fS=dS.b,J0=dS.r;fS[28]=258,J0[258]=28;var pS=hS(_m,0),HL=pS.b,iw=pS.r,X0=new hi(32768);for(var an=0;an<32768;++an){var ra=(an&43690)>>1|(an&21845)<<1;ra=(ra&52428)>>2|(ra&13107)<<2,ra=(ra&61680)>>4|(ra&3855)<<4,X0[an]=((ra&65280)>>8|(ra&255)<<8)>>1}var Rs=function(t,e,n){for(var r=t.length,i=0,s=new hi(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new hi(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new hi(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var h=i<<4|t[i],p=e-t[i],g=o[t[i]-1]++<<p,v=g|(1<<p)-1;g<=v;++g)a[X0[g]>>l]=h}else for(a=new hi(r),i=0;i<r;++i)t[i]&&(a[i]=X0[o[t[i]-1]++]>>15-t[i]);return a},Oa=new Sr(288);for(var an=0;an<144;++an)Oa[an]=8;for(var an=144;an<256;++an)Oa[an]=9;for(var an=256;an<280;++an)Oa[an]=7;for(var an=280;an<288;++an)Oa[an]=8;var ed=new Sr(32);for(var an=0;an<32;++an)ed[an]=5;var WL=Rs(Oa,9,0),$L=Rs(Oa,9,1),GL=Rs(ed,5,0),KL=Rs(ed,5,1),Ag=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},$i=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},Eg=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},Y2=function(t){return(t+7)/8|0},mS=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Sr(t.subarray(e,n))},QL=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Qi=function(t,e,n){var r=new Error(e||QL[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,Qi),!n)throw r;return r},YL=function(t,e,n,r){var i=t.length,s=0;if(!i||e.f&&!e.l)return n||new Sr(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new Sr(i*3));var h=function(Te){var Me=n.length;if(Te>Me){var Ve=new Sr(Math.max(Me*2,Te));Ve.set(n),n=Ve}},p=e.f||0,g=e.p||0,v=e.b||0,f=e.l,E=e.d,k=e.m,P=e.n,w=i*8;do{if(!f){p=$i(t,g,1);var _=$i(t,g+1,3);if(g+=3,_)if(_==1)f=$L,E=KL,k=9,P=5;else if(_==2){var W=$i(t,g,31)+257,I=$i(t,g+10,15)+4,x=W+$i(t,g+5,31)+1;g+=14;for(var C=new Sr(x),j=new Sr(19),N=0;N<I;++N)j[Y0[N]]=$i(t,g+N*3,7);g+=I*3;for(var A=Ag(j),D=(1<<A)-1,J=Rs(j,A,1),N=0;N<x;){var ue=J[$i(t,g,D)];g+=ue&15;var T=ue>>4;if(T<16)C[N++]=T;else{var Z=0,ee=0;for(T==16?(ee=3+$i(t,g,3),g+=2,Z=C[N-1]):T==17?(ee=3+$i(t,g,7),g+=3):T==18&&(ee=11+$i(t,g,127),g+=7);ee--;)C[N++]=Z}}var Q=C.subarray(0,W),X=C.subarray(W);k=Ag(Q),P=Ag(X),f=Rs(Q,k,1),E=Rs(X,P,1)}else Qi(1);else{var T=Y2(g)+4,L=t[T-4]|t[T-3]<<8,V=T+L;if(V>i){l&&Qi(0);break}a&&h(v+L),n.set(t.subarray(T,V),v),e.b=v+=L,e.p=g=V*8,e.f=p;continue}if(g>w){l&&Qi(0);break}}a&&h(v+131072);for(var se=(1<<k)-1,ge=(1<<P)-1,O=g;;O=g){var Z=f[Eg(t,g)&se],M=Z>>4;if(g+=Z&15,g>w){l&&Qi(0);break}if(Z||Qi(2),M<256)n[v++]=M;else if(M==256){O=g,f=null;break}else{var z=M-254;if(M>264){var N=M-257,Y=wm[N];z=$i(t,g,(1<<Y)-1)+fS[N],g+=Y}var te=E[Eg(t,g)&ge],oe=te>>4;te||Qi(3),g+=te&15;var X=HL[oe];if(oe>3){var Y=_m[oe];X+=Eg(t,g)&(1<<Y)-1,g+=Y}if(g>w){l&&Qi(0);break}a&&h(v+131072);var ae=v+z;if(v<X){var ye=s-X,Ae=Math.min(X,ae);for(ye+v<0&&Qi(3);v<Ae;++v)n[v]=r[ye+v]}for(;v<ae;++v)n[v]=n[v-X]}}e.l=f,e.p=O,e.b=v,e.f=p,f&&(p=1,e.m=k,e.d=E,e.n=P)}while(!p);return v!=n.length&&o?mS(n,0,v):n.subarray(0,v)},eo=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Yc=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},Ig=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:yS,l:0};if(i==1){var o=new Sr(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(V,W){return V.f-W.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],h=0,p=1,g=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};p!=i-1;)a=n[n[h].f<n[g].f?h++:g++],l=n[h!=p&&n[h].f<n[g].f?h++:g++],n[p++]={s:-1,f:a.f+l.f,l:a,r:l};for(var v=s[0].s,r=1;r<i;++r)s[r].s>v&&(v=s[r].s);var f=new hi(v+1),E=Z0(n[p-1],f,0);if(E>e){var r=0,k=0,P=E-e,w=1<<P;for(s.sort(function(W,I){return f[I.s]-f[W.s]||W.f-I.f});r<i;++r){var _=s[r].s;if(f[_]>e)k+=w-(1<<E-f[_]),f[_]=e;else break}for(k>>=P;k>0;){var T=s[r].s;f[T]<e?k-=1<<e-f[T]++-1:++r}for(;r>=0&&k;--r){var L=s[r].s;f[L]==e&&(--f[L],++k)}E=e}return{t:new Sr(f),l:E}},Z0=function(t,e,n){return t.s==-1?Math.max(Z0(t.l,e,n+1),Z0(t.r,e,n+1)):e[t.s]=n},sw=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new hi(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return{c:n.subarray(0,r),n:e}},Jc=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},gS=function(t,e,n){var r=n.length,i=Y2(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},ow=function(t,e,n,r,i,s,o,a,l,h,p){eo(e,p++,n),++i[256];for(var g=Ig(i,15),v=g.t,f=g.l,E=Ig(s,15),k=E.t,P=E.l,w=sw(v),_=w.c,T=w.n,L=sw(k),V=L.c,W=L.n,I=new hi(19),x=0;x<_.length;++x)++I[_[x]&31];for(var x=0;x<V.length;++x)++I[V[x]&31];for(var C=Ig(I,7),j=C.t,N=C.l,A=19;A>4&&!j[Y0[A-1]];--A);var D=h+5<<3,J=Jc(i,Oa)+Jc(s,ed)+o,ue=Jc(i,v)+Jc(s,k)+o+14+3*A+Jc(I,j)+2*I[16]+3*I[17]+7*I[18];if(l>=0&&D<=J&&D<=ue)return gS(e,p,t.subarray(l,l+h));var Z,ee,Q,X;if(eo(e,p,1+(ue<J)),p+=2,ue<J){Z=Rs(v,f,0),ee=v,Q=Rs(k,P,0),X=k;var se=Rs(j,N,0);eo(e,p,T-257),eo(e,p+5,W-1),eo(e,p+10,A-4),p+=14;for(var x=0;x<A;++x)eo(e,p+3*x,j[Y0[x]]);p+=3*A;for(var ge=[_,V],O=0;O<2;++O)for(var M=ge[O],x=0;x<M.length;++x){var z=M[x]&31;eo(e,p,se[z]),p+=j[z],z>15&&(eo(e,p,M[x]>>5&127),p+=M[x]>>12)}}else Z=WL,ee=Oa,Q=GL,X=ed;for(var x=0;x<a;++x){var Y=r[x];if(Y>255){var z=Y>>18&31;Yc(e,p,Z[z+257]),p+=ee[z+257],z>7&&(eo(e,p,Y>>23&31),p+=wm[z]);var te=Y&31;Yc(e,p,Q[te]),p+=X[te],te>3&&(Yc(e,p,Y>>5&8191),p+=_m[te])}else Yc(e,p,Z[Y]),p+=ee[Y]}return Yc(e,p,Z[256]),p+ee[256]},JL=new Q2([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),yS=new Sr(0),XL=function(t,e,n,r,i,s){var o=s.z||t.length,a=new Sr(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),h=s.l,p=(s.r||0)&7;if(e){p&&(l[0]=s.r>>3);for(var g=JL[e-1],v=g>>13,f=g&8191,E=(1<<n)-1,k=s.p||new hi(32768),P=s.h||new hi(E+1),w=Math.ceil(n/3),_=2*w,T=function(Ze){return(t[Ze]^t[Ze+1]<<w^t[Ze+2]<<_)&E},L=new Q2(25e3),V=new hi(288),W=new hi(32),I=0,x=0,C=s.i||0,j=0,N=s.w||0,A=0;C+2<o;++C){var D=T(C),J=C&32767,ue=P[D];if(k[J]=ue,P[D]=J,N<=C){var Z=o-C;if((I>7e3||j>24576)&&(Z>423||!h)){p=ow(t,l,0,L,V,W,x,j,A,C-A,p),j=I=x=0,A=C;for(var ee=0;ee<286;++ee)V[ee]=0;for(var ee=0;ee<30;++ee)W[ee]=0}var Q=2,X=0,se=f,ge=J-ue&32767;if(Z>2&&D==T(C-ge))for(var O=Math.min(v,Z)-1,M=Math.min(32767,C),z=Math.min(258,Z);ge<=M&&--se&&J!=ue;){if(t[C+Q]==t[C+Q-ge]){for(var Y=0;Y<z&&t[C+Y]==t[C+Y-ge];++Y);if(Y>Q){if(Q=Y,X=ge,Y>O)break;for(var te=Math.min(ge,Y-2),oe=0,ee=0;ee<te;++ee){var ae=C-ge+ee&32767,ye=k[ae],Ae=ae-ye&32767;Ae>oe&&(oe=Ae,ue=ae)}}}J=ue,ue=k[J],ge+=J-ue&32767}if(X){L[j++]=268435456|J0[Q]<<18|iw[X];var Te=J0[Q]&31,Me=iw[X]&31;x+=wm[Te]+_m[Me],++V[257+Te],++W[Me],N=C+Q,++I}else L[j++]=t[C],++V[t[C]]}}for(C=Math.max(C,N);C<o;++C)L[j++]=t[C],++V[t[C]];p=ow(t,l,h,L,V,W,x,j,A,C-A,p),h||(s.r=p&7|l[p/8|0]<<3,p-=7,s.h=P,s.p=k,s.i=C,s.w=N)}else{for(var C=s.w||0;C<o+h;C+=65535){var Ve=C+65535;Ve>=o&&(l[p/8|0]=h,Ve=o),p=gS(l,p+1,t.subarray(C,Ve))}s.i=o}return mS(a,0,r+Y2(p)+i)},vS=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},ZL=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new Sr(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return XL(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},wS=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},eR=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=vS();i.p(e.dictionary),wS(t,2,i.d())}},tR=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Qi(6,"invalid zlib data"),(t[1]>>5&1)==+!e&&Qi(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function e1(t,e){e||(e={});var n=vS();n.p(t);var r=ZL(t,e,e.dictionary?6:2,4);return eR(r,e),wS(r,r.length-4,n.d()),r}function nR(t,e){return YL(t.subarray(tR(t,e),-4),{i:2},e,e)}var rR=typeof TextDecoder<"u"&&new TextDecoder,iR=0;try{rR.decode(yS,{stream:!0}),iR=1}catch{}var dt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Tg(){dt.console&&typeof dt.console.log=="function"&&dt.console.log.apply(dt.console,arguments)}var Qt={log:Tg,warn:function(t){dt.console&&(typeof dt.console.warn=="function"?dt.console.warn.apply(dt.console,arguments):Tg.call(null,arguments))},error:function(t){dt.console&&(typeof dt.console.error=="function"?dt.console.error.apply(dt.console,arguments):Tg(t))}};function Pg(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){vl(r.response,e,n)},r.onerror=function(){Qt.error("could not download file")},r.send()}function aw(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function vf(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var xh,t1,vl=dt.saveAs||((typeof window>"u"?"undefined":qt(window))!=="object"||window!==dt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=dt.URL||dt.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?aw(i.href)?Pg(t,e,n):vf(i,i.target="_blank"):vf(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){vf(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(aw(t))Pg(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){vf(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:qt(s)!=="object"&&(Qt.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return Pg(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(dt.HTMLElement)||dt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":qt(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var p=a.result;p=o?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=p:location=p,r=null},a.readAsDataURL(t)}else{var l=dt.URL||dt.webkitURL,h=l.createObjectURL(t);r?r.location=h:location.href=h,r=null,setTimeout(function(){l.revokeObjectURL(h)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function _S(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),h=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),h.length==1&&(h="0"+h),"#"+a+l+h}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Cg(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=gr(n,r,i,s,e[0],7,-680876936),s=gr(s,n,r,i,e[1],12,-389564586),i=gr(i,s,n,r,e[2],17,606105819),r=gr(r,i,s,n,e[3],22,-1044525330),n=gr(n,r,i,s,e[4],7,-176418897),s=gr(s,n,r,i,e[5],12,1200080426),i=gr(i,s,n,r,e[6],17,-1473231341),r=gr(r,i,s,n,e[7],22,-45705983),n=gr(n,r,i,s,e[8],7,1770035416),s=gr(s,n,r,i,e[9],12,-1958414417),i=gr(i,s,n,r,e[10],17,-42063),r=gr(r,i,s,n,e[11],22,-1990404162),n=gr(n,r,i,s,e[12],7,1804603682),s=gr(s,n,r,i,e[13],12,-40341101),i=gr(i,s,n,r,e[14],17,-1502002290),n=yr(n,r=gr(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=yr(s,n,r,i,e[6],9,-1069501632),i=yr(i,s,n,r,e[11],14,643717713),r=yr(r,i,s,n,e[0],20,-373897302),n=yr(n,r,i,s,e[5],5,-701558691),s=yr(s,n,r,i,e[10],9,38016083),i=yr(i,s,n,r,e[15],14,-660478335),r=yr(r,i,s,n,e[4],20,-405537848),n=yr(n,r,i,s,e[9],5,568446438),s=yr(s,n,r,i,e[14],9,-1019803690),i=yr(i,s,n,r,e[3],14,-187363961),r=yr(r,i,s,n,e[8],20,1163531501),n=yr(n,r,i,s,e[13],5,-1444681467),s=yr(s,n,r,i,e[2],9,-51403784),i=yr(i,s,n,r,e[7],14,1735328473),n=vr(n,r=yr(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=vr(s,n,r,i,e[8],11,-2022574463),i=vr(i,s,n,r,e[11],16,1839030562),r=vr(r,i,s,n,e[14],23,-35309556),n=vr(n,r,i,s,e[1],4,-1530992060),s=vr(s,n,r,i,e[4],11,1272893353),i=vr(i,s,n,r,e[7],16,-155497632),r=vr(r,i,s,n,e[10],23,-1094730640),n=vr(n,r,i,s,e[13],4,681279174),s=vr(s,n,r,i,e[0],11,-358537222),i=vr(i,s,n,r,e[3],16,-722521979),r=vr(r,i,s,n,e[6],23,76029189),n=vr(n,r,i,s,e[9],4,-640364487),s=vr(s,n,r,i,e[12],11,-421815835),i=vr(i,s,n,r,e[15],16,530742520),n=wr(n,r=vr(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=wr(s,n,r,i,e[7],10,1126891415),i=wr(i,s,n,r,e[14],15,-1416354905),r=wr(r,i,s,n,e[5],21,-57434055),n=wr(n,r,i,s,e[12],6,1700485571),s=wr(s,n,r,i,e[3],10,-1894986606),i=wr(i,s,n,r,e[10],15,-1051523),r=wr(r,i,s,n,e[1],21,-2054922799),n=wr(n,r,i,s,e[8],6,1873313359),s=wr(s,n,r,i,e[15],10,-30611744),i=wr(i,s,n,r,e[6],15,-1560198380),r=wr(r,i,s,n,e[13],21,1309151649),n=wr(n,r,i,s,e[4],6,-145523070),s=wr(s,n,r,i,e[11],10,-1120210379),i=wr(i,s,n,r,e[2],15,718787259),r=wr(r,i,s,n,e[9],21,-343485551),t[0]=ya(n,t[0]),t[1]=ya(r,t[1]),t[2]=ya(i,t[2]),t[3]=ya(s,t[3])}function bm(t,e,n,r,i,s){return e=ya(ya(e,t),ya(r,s)),ya(e<<i|e>>>32-i,n)}function gr(t,e,n,r,i,s,o){return bm(e&n|~e&r,t,e,i,s,o)}function yr(t,e,n,r,i,s,o){return bm(e&r|n&~r,t,e,i,s,o)}function vr(t,e,n,r,i,s,o){return bm(e^n^r,t,e,i,s,o)}function wr(t,e,n,r,i,s,o){return bm(n^(e|~r),t,e,i,s,o)}function bS(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)Cg(r,sR(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Cg(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,Cg(r,i),r}function sR(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}xh=dt.atob.bind(dt),t1=dt.btoa.bind(dt);var lw="0123456789abcdef".split("");function oR(t){for(var e="",n=0;n<4;n++)e+=lw[t>>8*n+4&15]+lw[t>>8*n&15];return e}function aR(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function n1(t){return bS(t).map(aR).join("")}var lR=function(t){for(var e=0;e<t.length;e++)t[e]=oR(t[e]);return t.join("")}(bS("hello"))!="5d41402abc4b2a76b9719d911017c592";function ya(t,e){if(lR){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function r1(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var h=0;for(l=0;l<256;l++){var p=a[l];h=(h+p+o.charCodeAt(l))%256,a[l]=a[h],a[h]=p}n=t,r=a}else a=r;var g=e.length,v=0,f=0,E="";for(l=0;l<g;l++)f=(f+(p=a[v=(v+1)%256]))%256,a[v]=a[f],a[f]=p,o=a[(a[v]+a[f])%256],E+=String.fromCharCode(e.charCodeAt(l)^o);return E}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var uw={print:4,modify:8,copy:16,"annot-forms":32};function Nu(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(uw.perm!==void 0)throw new Error("Invalid permission: "+a);i+=uw[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=n1(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=r1(this.encryptionKey,this.padding)}function Au(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function cw(t){if(qt(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){dt.console&&Qt.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function td(t){if(!(this instanceof td))return new td(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function xS(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function fa(t,e,n,r,i){if(!(this instanceof fa))return new fa(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,xS.call(this,r,i)}function Sl(t,e,n,r,i){if(!(this instanceof Sl))return new Sl(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,xS.call(this,r,i)}function ot(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,h="S",p=null;qt(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(p=t.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),h=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var g=t.putOnlyUsedFonts||!1,v={},f={internal:{},__private__:{}};f.__private__.PubSub=cw;var E="1.3",k=f.__private__.getPdfVersion=function(){return E};f.__private__.setPdfVersion=function(y){E=y};var P={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return P};var w=f.__private__.getPageFormat=function(y){return P[y]};i=i||"a4";var _={COMPAT:"compat",ADVANCED:"advanced"},T=_.COMPAT;function L(){this.saveGraphicsState(),ie(new Ye(Ge,0,0,-Ge,0,dr()*Ge).toString()+" cm"),this.setFontSize(this.getFontSize()/Ge),h="n",T=_.ADVANCED}function V(){this.restoreGraphicsState(),h="S",T=_.COMPAT}var W=f.__private__.combineFontStyleAndFontWeight=function(y,B){if(y=="bold"&&B=="normal"||y=="bold"&&B==400||y=="normal"&&B=="italic"||y=="bold"&&B=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return B&&(y=B==400||B==="normal"?y==="italic"?"italic":"normal":B!=700&&B!=="bold"||y!=="normal"?(B==700?"bold":B)+""+y:"bold"),y};f.advancedAPI=function(y){var B=T===_.COMPAT;return B&&L.call(this),typeof y!="function"||(y(this),B&&V.call(this)),this},f.compatAPI=function(y){var B=T===_.ADVANCED;return B&&V.call(this),typeof y!="function"||(y(this),B&&L.call(this)),this},f.isAdvancedAPI=function(){return T===_.ADVANCED};var I,x=function(y){if(T!==_.ADVANCED)throw new Error(y+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},C=f.roundToPrecision=f.__private__.roundToPrecision=function(y,B){var re=e||B;if(isNaN(y)||isNaN(re))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return y.toFixed(re).replace(/0+$/,"")};I=f.hpf=f.__private__.hpf=typeof l=="number"?function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return C(y,l)}:l==="smart"?function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return C(y,y>-1&&y<1?16:5)}:function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.hpf");return C(y,16)};var j=f.f2=f.__private__.f2=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.f2");return C(y,2)},N=f.__private__.f3=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.f3");return C(y,3)},A=f.scale=f.__private__.scale=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.scale");return T===_.COMPAT?y*Ge:T===_.ADVANCED?y:void 0},D=function(y){return T===_.COMPAT?dr()-y:T===_.ADVANCED?y:void 0},J=function(y){return A(D(y))};f.__private__.setPrecision=f.setPrecision=function(y){typeof parseInt(y,10)=="number"&&(e=parseInt(y,10))};var ue,Z="00000000000000000000000000000000",ee=f.__private__.getFileId=function(){return Z},Q=f.__private__.setFileId=function(y){return Z=y!==void 0&&/^[a-fA-F0-9]{32}$/.test(y)?y.toUpperCase():Z.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(rn=new Nu(p.userPermissions,p.userPassword,p.ownerPassword,Z)),Z};f.setFileId=function(y){return Q(y),this},f.getFileId=function(){return ee()};var X=f.__private__.convertDateToPDFDate=function(y){var B=y.getTimezoneOffset(),re=B<0?"+":"-",le=Math.floor(Math.abs(B/60)),pe=Math.abs(B%60),Se=[re,z(le),"'",z(pe),"'"].join("");return["D:",y.getFullYear(),z(y.getMonth()+1),z(y.getDate()),z(y.getHours()),z(y.getMinutes()),z(y.getSeconds()),Se].join("")},se=f.__private__.convertPDFDateToDate=function(y){var B=parseInt(y.substr(2,4),10),re=parseInt(y.substr(6,2),10)-1,le=parseInt(y.substr(8,2),10),pe=parseInt(y.substr(10,2),10),Se=parseInt(y.substr(12,2),10),Le=parseInt(y.substr(14,2),10);return new Date(B,re,le,pe,Se,Le,0)},ge=f.__private__.setCreationDate=function(y){var B;if(y===void 0&&(y=new Date),y instanceof Date)B=X(y);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(y))throw new Error("Invalid argument passed to jsPDF.setCreationDate");B=y}return ue=B},O=f.__private__.getCreationDate=function(y){var B=ue;return y==="jsDate"&&(B=se(ue)),B};f.setCreationDate=function(y){return ge(y),this},f.getCreationDate=function(y){return O(y)};var M,z=f.__private__.padd2=function(y){return("0"+parseInt(y)).slice(-2)},Y=f.__private__.padd2Hex=function(y){return("00"+(y=y.toString())).substr(y.length)},te=0,oe=[],ae=[],ye=0,Ae=[],Te=[],Me=!1,Ve=ae,Ze=function(){te=0,ye=0,ae=[],oe=[],Ae=[],Di=mn(),hr=mn()};f.__private__.setCustomOutputDestination=function(y){Me=!0,Ve=y};var be=function(y){Me||(Ve=y)};f.__private__.resetCustomOutputDestination=function(){Me=!1,Ve=ae};var ie=f.__private__.out=function(y){return y=y.toString(),ye+=y.length+1,Ve.push(y),Ve},$e=f.__private__.write=function(y){return ie(arguments.length===1?y.toString():Array.prototype.join.call(arguments," "))},De=f.__private__.getArrayBuffer=function(y){for(var B=y.length,re=new ArrayBuffer(B),le=new Uint8Array(re);B--;)le[B]=y.charCodeAt(B);return re},Ce=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return Ce};var Oe=t.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(y){return Oe=T===_.ADVANCED?y/Ge:y,this};var qe,Be=f.__private__.getFontSize=f.getFontSize=function(){return T===_.COMPAT?Oe:Oe*Ge},tt=t.R2L||!1;f.__private__.setR2L=f.setR2L=function(y){return tt=y,this},f.__private__.getR2L=f.getR2L=function(){return tt};var rt,ut=f.__private__.setZoomMode=function(y){var B=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(y))qe=y;else if(isNaN(y)){if(B.indexOf(y)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+y+'" is not recognized.');qe=y}else qe=parseInt(y,10)};f.__private__.getZoomMode=function(){return qe};var nt,ht=f.__private__.setPageMode=function(y){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(y)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+y+'" is not recognized.');rt=y};f.__private__.getPageMode=function(){return rt};var kt=f.__private__.setLayoutMode=function(y){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(y)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+y+'" is not recognized.');nt=y};f.__private__.getLayoutMode=function(){return nt},f.__private__.setDisplayMode=f.setDisplayMode=function(y,B,re){return ut(y),kt(B),ht(re),this};var ct={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(y){if(Object.keys(ct).indexOf(y)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ct[y]},f.__private__.getDocumentProperties=function(){return ct},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(y){for(var B in ct)ct.hasOwnProperty(B)&&y[B]&&(ct[B]=y[B]);return this},f.__private__.setDocumentProperty=function(y,B){if(Object.keys(ct).indexOf(y)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ct[y]=B};var xt,Ge,pn,It,Mr,Ft={},Yt={},gi=[],Pt={},ss={},tn={},Jn={},Zr=null,Jt=0,at=[],Lt=new cw(f),yi=t.hotfixes||[],Cn={},ur={},ei=[],Ye=function y(B,re,le,pe,Se,Le){if(!(this instanceof y))return new y(B,re,le,pe,Se,Le);isNaN(B)&&(B=1),isNaN(re)&&(re=0),isNaN(le)&&(le=0),isNaN(pe)&&(pe=1),isNaN(Se)&&(Se=0),isNaN(Le)&&(Le=0),this._matrix=[B,re,le,pe,Se,Le]};Object.defineProperty(Ye.prototype,"sx",{get:function(){return this._matrix[0]},set:function(y){this._matrix[0]=y}}),Object.defineProperty(Ye.prototype,"shy",{get:function(){return this._matrix[1]},set:function(y){this._matrix[1]=y}}),Object.defineProperty(Ye.prototype,"shx",{get:function(){return this._matrix[2]},set:function(y){this._matrix[2]=y}}),Object.defineProperty(Ye.prototype,"sy",{get:function(){return this._matrix[3]},set:function(y){this._matrix[3]=y}}),Object.defineProperty(Ye.prototype,"tx",{get:function(){return this._matrix[4]},set:function(y){this._matrix[4]=y}}),Object.defineProperty(Ye.prototype,"ty",{get:function(){return this._matrix[5]},set:function(y){this._matrix[5]=y}}),Object.defineProperty(Ye.prototype,"a",{get:function(){return this._matrix[0]},set:function(y){this._matrix[0]=y}}),Object.defineProperty(Ye.prototype,"b",{get:function(){return this._matrix[1]},set:function(y){this._matrix[1]=y}}),Object.defineProperty(Ye.prototype,"c",{get:function(){return this._matrix[2]},set:function(y){this._matrix[2]=y}}),Object.defineProperty(Ye.prototype,"d",{get:function(){return this._matrix[3]},set:function(y){this._matrix[3]=y}}),Object.defineProperty(Ye.prototype,"e",{get:function(){return this._matrix[4]},set:function(y){this._matrix[4]=y}}),Object.defineProperty(Ye.prototype,"f",{get:function(){return this._matrix[5]},set:function(y){this._matrix[5]=y}}),Object.defineProperty(Ye.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ye.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ye.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ye.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ye.prototype.join=function(y){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(I).join(y)},Ye.prototype.multiply=function(y){var B=y.sx*this.sx+y.shy*this.shx,re=y.sx*this.shy+y.shy*this.sy,le=y.shx*this.sx+y.sy*this.shx,pe=y.shx*this.shy+y.sy*this.sy,Se=y.tx*this.sx+y.ty*this.shx+this.tx,Le=y.tx*this.shy+y.ty*this.sy+this.ty;return new Ye(B,re,le,pe,Se,Le)},Ye.prototype.decompose=function(){var y=this.sx,B=this.shy,re=this.shx,le=this.sy,pe=this.tx,Se=this.ty,Le=Math.sqrt(y*y+B*B),He=(y/=Le)*re+(B/=Le)*le;re-=y*He,le-=B*He;var c=Math.sqrt(re*re+le*le);return He/=c,y*(le/=c)<B*(re/=c)&&(y=-y,B=-B,He=-He,Le=-Le),{scale:new Ye(Le,0,0,c,0,0),translate:new Ye(1,0,0,1,pe,Se),rotate:new Ye(y,B,-B,y,0,0),skew:new Ye(1,0,He,1,0,0)}},Ye.prototype.toString=function(y){return this.join(" ")},Ye.prototype.inversed=function(){var y=this.sx,B=this.shy,re=this.shx,le=this.sy,pe=this.tx,Se=this.ty,Le=1/(y*le-B*re),He=le*Le,c=-B*Le,S=-re*Le,F=y*Le;return new Ye(He,c,S,F,-He*pe-S*Se,-c*pe-F*Se)},Ye.prototype.applyToPoint=function(y){var B=y.x*this.sx+y.y*this.shx+this.tx,re=y.x*this.shy+y.y*this.sy+this.ty;return new Ws(B,re)},Ye.prototype.applyToRectangle=function(y){var B=this.applyToPoint(y),re=this.applyToPoint(new Ws(y.x+y.w,y.y+y.h));return new Bo(B.x,B.y,re.x-B.x,re.y-B.y)},Ye.prototype.clone=function(){var y=this.sx,B=this.shy,re=this.shx,le=this.sy,pe=this.tx,Se=this.ty;return new Ye(y,B,re,le,pe,Se)},f.Matrix=Ye;var Vr=f.matrixMult=function(y,B){return B.multiply(y)},cr=new Ye(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=cr;var kn=function(y,B){if(!ss[y]){var re=(B instanceof fa?"Sh":"P")+(Object.keys(Pt).length+1).toString(10);B.id=re,ss[y]=re,Pt[re]=B,Lt.publish("addPattern",B)}};f.ShadingPattern=fa,f.TilingPattern=Sl,f.addShadingPattern=function(y,B){return x("addShadingPattern()"),kn(y,B),this},f.beginTilingPattern=function(y){x("beginTilingPattern()"),Uo(y.boundingBox[0],y.boundingBox[1],y.boundingBox[2]-y.boundingBox[0],y.boundingBox[3]-y.boundingBox[1],y.matrix)},f.endTilingPattern=function(y,B){x("endTilingPattern()"),B.stream=Te[M].join(`
`),kn(y,B),Lt.publish("endTilingPattern",B),ei.pop().restore()};var _n=f.__private__.newObject=function(){var y=mn();return Ln(y,!0),y},mn=f.__private__.newObjectDeferred=function(){return te++,oe[te]=function(){return ye},te},Ln=function(y,B){return B=typeof B=="boolean"&&B,oe[y]=ye,B&&ie(y+" 0 obj"),y},Eo=f.__private__.newAdditionalObject=function(){var y={objId:mn(),content:""};return Ae.push(y),y},Di=mn(),hr=mn(),Br=f.__private__.decodeColorString=function(y){var B=y.split(" ");if(B.length!==2||B[1]!=="g"&&B[1]!=="G")B.length===5&&(B[4]==="k"||B[4]==="K")&&(B=[(1-B[0])*(1-B[3]),(1-B[1])*(1-B[3]),(1-B[2])*(1-B[3]),"r"]);else{var re=parseFloat(B[0]);B=[re,re,re,"r"]}for(var le="#",pe=0;pe<3;pe++)le+=("0"+Math.floor(255*parseFloat(B[pe])).toString(16)).slice(-2);return le},Er=f.__private__.encodeColorString=function(y){var B;typeof y=="string"&&(y={ch1:y});var re=y.ch1,le=y.ch2,pe=y.ch3,Se=y.ch4,Le=y.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof re=="string"&&re.charAt(0)!=="#"){var He=new _S(re);if(He.ok)re=He.toHex();else if(!/^\d*\.?\d*$/.test(re))throw new Error('Invalid color "'+re+'" passed to jsPDF.encodeColorString.')}if(typeof re=="string"&&/^#[0-9A-Fa-f]{3}$/.test(re)&&(re="#"+re[1]+re[1]+re[2]+re[2]+re[3]+re[3]),typeof re=="string"&&/^#[0-9A-Fa-f]{6}$/.test(re)){var c=parseInt(re.substr(1),16);re=c>>16&255,le=c>>8&255,pe=255&c}if(le===void 0||Se===void 0&&re===le&&le===pe)if(typeof re=="string")B=re+" "+Le[0];else switch(y.precision){case 2:B=j(re/255)+" "+Le[0];break;case 3:default:B=N(re/255)+" "+Le[0]}else if(Se===void 0||qt(Se)==="object"){if(Se&&!isNaN(Se.a)&&Se.a===0)return B=["1.","1.","1.",Le[1]].join(" ");if(typeof re=="string")B=[re,le,pe,Le[1]].join(" ");else switch(y.precision){case 2:B=[j(re/255),j(le/255),j(pe/255),Le[1]].join(" ");break;default:case 3:B=[N(re/255),N(le/255),N(pe/255),Le[1]].join(" ")}}else if(typeof re=="string")B=[re,le,pe,Se,Le[2]].join(" ");else switch(y.precision){case 2:B=[j(re),j(le),j(pe),j(Se),Le[2]].join(" ");break;case 3:default:B=[N(re),N(le),N(pe),N(Se),Le[2]].join(" ")}return B},Ir=f.__private__.getFilters=function(){return o},bn=f.__private__.putStream=function(y){var B=(y=y||{}).data||"",re=y.filters||Ir(),le=y.alreadyAppliedFilters||[],pe=y.addLength1||!1,Se=B.length,Le=y.objectId,He=function(gt){return gt};if(p!==null&&Le===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(He=rn.encryptor(Le,0));var c={};re===!0&&(re=["FlateEncode"]);var S=y.additionalKeyValues||[],F=(c=ot.API.processDataByFilters!==void 0?ot.API.processDataByFilters(B,re):{data:B,reverseChain:[]}).reverseChain+(Array.isArray(le)?le.join(" "):le.toString());if(c.data.length!==0&&(S.push({key:"Length",value:c.data.length}),pe===!0&&S.push({key:"Length1",value:Se})),F.length!=0)if(F.split("/").length-1==1)S.push({key:"Filter",value:F});else{S.push({key:"Filter",value:"["+F+"]"});for(var $=0;$<S.length;$+=1)if(S[$].key==="DecodeParms"){for(var fe=[],_e=0;_e<c.reverseChain.split("/").length-1;_e+=1)fe.push("null");fe.push(S[$].value),S[$].value="["+fe.join(" ")+"]"}}ie("<<");for(var Re=0;Re<S.length;Re++)ie("/"+S[Re].key+" "+S[Re].value);ie(">>"),c.data.length!==0&&(ie("stream"),ie(He(c.data)),ie("endstream"))},ti=f.__private__.putPage=function(y){var B=y.number,re=y.data,le=y.objId,pe=y.contentsObjId;Ln(le,!0),ie("<</Type /Page"),ie("/Parent "+y.rootDictionaryObjId+" 0 R"),ie("/Resources "+y.resourceDictionaryObjId+" 0 R"),ie("/MediaBox ["+parseFloat(I(y.mediaBox.bottomLeftX))+" "+parseFloat(I(y.mediaBox.bottomLeftY))+" "+I(y.mediaBox.topRightX)+" "+I(y.mediaBox.topRightY)+"]"),y.cropBox!==null&&ie("/CropBox ["+I(y.cropBox.bottomLeftX)+" "+I(y.cropBox.bottomLeftY)+" "+I(y.cropBox.topRightX)+" "+I(y.cropBox.topRightY)+"]"),y.bleedBox!==null&&ie("/BleedBox ["+I(y.bleedBox.bottomLeftX)+" "+I(y.bleedBox.bottomLeftY)+" "+I(y.bleedBox.topRightX)+" "+I(y.bleedBox.topRightY)+"]"),y.trimBox!==null&&ie("/TrimBox ["+I(y.trimBox.bottomLeftX)+" "+I(y.trimBox.bottomLeftY)+" "+I(y.trimBox.topRightX)+" "+I(y.trimBox.topRightY)+"]"),y.artBox!==null&&ie("/ArtBox ["+I(y.artBox.bottomLeftX)+" "+I(y.artBox.bottomLeftY)+" "+I(y.artBox.topRightX)+" "+I(y.artBox.topRightY)+"]"),typeof y.userUnit=="number"&&y.userUnit!==1&&ie("/UserUnit "+y.userUnit),Lt.publish("putPage",{objId:le,pageContext:at[B],pageNumber:B,page:re}),ie("/Contents "+pe+" 0 R"),ie(">>"),ie("endobj");var Se=re.join(`
`);return T===_.ADVANCED&&(Se+=`
Q`),Ln(pe,!0),bn({data:Se,filters:Ir(),objectId:pe}),ie("endobj"),le},os=f.__private__.putPages=function(){var y,B,re=[];for(y=1;y<=Jt;y++)at[y].objId=mn(),at[y].contentsObjId=mn();for(y=1;y<=Jt;y++)re.push(ti({number:y,data:Te[y],objId:at[y].objId,contentsObjId:at[y].contentsObjId,mediaBox:at[y].mediaBox,cropBox:at[y].cropBox,bleedBox:at[y].bleedBox,trimBox:at[y].trimBox,artBox:at[y].artBox,userUnit:at[y].userUnit,rootDictionaryObjId:Di,resourceDictionaryObjId:hr}));Ln(Di,!0),ie("<</Type /Pages");var le="/Kids [";for(B=0;B<Jt;B++)le+=re[B]+" 0 R ";ie(le+"]"),ie("/Count "+Jt),ie(">>"),ie("endobj"),Lt.publish("postPutPages")},as=function(y){Lt.publish("putFont",{font:y,out:ie,newObject:_n,putStream:bn}),y.isAlreadyPutted!==!0&&(y.objectNumber=_n(),ie("<<"),ie("/Type /Font"),ie("/BaseFont /"+Au(y.postScriptName)),ie("/Subtype /Type1"),typeof y.encoding=="string"&&ie("/Encoding /"+y.encoding),ie("/FirstChar 32"),ie("/LastChar 255"),ie(">>"),ie("endobj"))},ls=function(){for(var y in Ft)Ft.hasOwnProperty(y)&&(g===!1||g===!0&&v.hasOwnProperty(y))&&as(Ft[y])},Fs=function(y){y.objectNumber=_n();var B=[];B.push({key:"Type",value:"/XObject"}),B.push({key:"Subtype",value:"/Form"}),B.push({key:"BBox",value:"["+[I(y.x),I(y.y),I(y.x+y.width),I(y.y+y.height)].join(" ")+"]"}),B.push({key:"Matrix",value:"["+y.matrix.toString()+"]"});var re=y.pages[1].join(`
`);bn({data:re,additionalKeyValues:B,objectId:y.objectNumber}),ie("endobj")},Os=function(){for(var y in Cn)Cn.hasOwnProperty(y)&&Fs(Cn[y])},Kl=function(y,B){var re,le=[],pe=1/(B-1);for(re=0;re<1;re+=pe)le.push(re);if(le.push(1),y[0].offset!=0){var Se={offset:0,color:y[0].color};y.unshift(Se)}if(y[y.length-1].offset!=1){var Le={offset:1,color:y[y.length-1].color};y.push(Le)}for(var He="",c=0,S=0;S<le.length;S++){for(re=le[S];re>y[c+1].offset;)c++;var F=y[c].offset,$=(re-F)/(y[c+1].offset-F),fe=y[c].color,_e=y[c+1].color;He+=Y(Math.round((1-$)*fe[0]+$*_e[0]).toString(16))+Y(Math.round((1-$)*fe[1]+$*_e[1]).toString(16))+Y(Math.round((1-$)*fe[2]+$*_e[2]).toString(16))}return He.trim()},Io=function(y,B){B||(B=21);var re=_n(),le=Kl(y.colors,B),pe=[];pe.push({key:"FunctionType",value:"0"}),pe.push({key:"Domain",value:"[0.0 1.0]"}),pe.push({key:"Size",value:"["+B+"]"}),pe.push({key:"BitsPerSample",value:"8"}),pe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),pe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),bn({data:le,additionalKeyValues:pe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:re}),ie("endobj"),y.objectNumber=_n(),ie("<< /ShadingType "+y.type),ie("/ColorSpace /DeviceRGB");var Se="/Coords ["+I(parseFloat(y.coords[0]))+" "+I(parseFloat(y.coords[1]))+" ";y.type===2?Se+=I(parseFloat(y.coords[2]))+" "+I(parseFloat(y.coords[3])):Se+=I(parseFloat(y.coords[2]))+" "+I(parseFloat(y.coords[3]))+" "+I(parseFloat(y.coords[4]))+" "+I(parseFloat(y.coords[5])),ie(Se+="]"),y.matrix&&ie("/Matrix ["+y.matrix.toString()+"]"),ie("/Function "+re+" 0 R"),ie("/Extend [true true]"),ie(">>"),ie("endobj")},Ql=function(y,B){var re=mn(),le=_n();B.push({resourcesOid:re,objectOid:le}),y.objectNumber=le;var pe=[];pe.push({key:"Type",value:"/Pattern"}),pe.push({key:"PatternType",value:"1"}),pe.push({key:"PaintType",value:"1"}),pe.push({key:"TilingType",value:"1"}),pe.push({key:"BBox",value:"["+y.boundingBox.map(I).join(" ")+"]"}),pe.push({key:"XStep",value:I(y.xStep)}),pe.push({key:"YStep",value:I(y.yStep)}),pe.push({key:"Resources",value:re+" 0 R"}),y.matrix&&pe.push({key:"Matrix",value:"["+y.matrix.toString()+"]"}),bn({data:y.stream,additionalKeyValues:pe,objectId:y.objectNumber}),ie("endobj")},us=function(y){var B;for(B in Pt)Pt.hasOwnProperty(B)&&(Pt[B]instanceof fa?Io(Pt[B]):Pt[B]instanceof Sl&&Ql(Pt[B],y))},cs=function(y){for(var B in y.objectNumber=_n(),ie("<<"),y)switch(B){case"opacity":ie("/ca "+j(y[B]));break;case"stroke-opacity":ie("/CA "+j(y[B]))}ie(">>"),ie("endobj")},ji=function(){var y;for(y in tn)tn.hasOwnProperty(y)&&cs(tn[y])},Ms=function(){for(var y in ie("/XObject <<"),Cn)Cn.hasOwnProperty(y)&&Cn[y].objectNumber>=0&&ie("/"+y+" "+Cn[y].objectNumber+" 0 R");Lt.publish("putXobjectDict"),ie(">>")},bc=function(){rn.oid=_n(),ie("<<"),ie("/Filter /Standard"),ie("/V "+rn.v),ie("/R "+rn.r),ie("/U <"+rn.toHexString(rn.U)+">"),ie("/O <"+rn.toHexString(rn.O)+">"),ie("/P "+rn.P),ie(">>"),ie("endobj")},Wa=function(){for(var y in ie("/Font <<"),Ft)Ft.hasOwnProperty(y)&&(g===!1||g===!0&&v.hasOwnProperty(y))&&ie("/"+y+" "+Ft[y].objectNumber+" 0 R");ie(">>")},Yl=function(){if(Object.keys(Pt).length>0){for(var y in ie("/Shading <<"),Pt)Pt.hasOwnProperty(y)&&Pt[y]instanceof fa&&Pt[y].objectNumber>=0&&ie("/"+y+" "+Pt[y].objectNumber+" 0 R");Lt.publish("putShadingPatternDict"),ie(">>")}},Vs=function(y){if(Object.keys(Pt).length>0){for(var B in ie("/Pattern <<"),Pt)Pt.hasOwnProperty(B)&&Pt[B]instanceof f.TilingPattern&&Pt[B].objectNumber>=0&&Pt[B].objectNumber<y&&ie("/"+B+" "+Pt[B].objectNumber+" 0 R");Lt.publish("putTilingPatternDict"),ie(">>")}},$a=function(){if(Object.keys(tn).length>0){var y;for(y in ie("/ExtGState <<"),tn)tn.hasOwnProperty(y)&&tn[y].objectNumber>=0&&ie("/"+y+" "+tn[y].objectNumber+" 0 R");Lt.publish("putGStateDict"),ie(">>")}},nn=function(y){Ln(y.resourcesOid,!0),ie("<<"),ie("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Wa(),Yl(),Vs(y.objectOid),$a(),Ms(),ie(">>"),ie("endobj")},Ga=function(){var y=[];ls(),ji(),Os(),us(y),Lt.publish("putResources"),y.forEach(nn),nn({resourcesOid:hr,objectOid:Number.MAX_SAFE_INTEGER}),Lt.publish("postPutResources")},Ka=function(){Lt.publish("putAdditionalObjects");for(var y=0;y<Ae.length;y++){var B=Ae[y];Ln(B.objId,!0),ie(B.content),ie("endobj")}Lt.publish("postPutAdditionalObjects")},Jl=function(y){Yt[y.fontName]=Yt[y.fontName]||{},Yt[y.fontName][y.fontStyle]=y.id},Qa=function(y,B,re,le,pe){var Se={id:"F"+(Object.keys(Ft).length+1).toString(10),postScriptName:y,fontName:B,fontStyle:re,encoding:le,isStandardFont:pe||!1,metadata:{}};return Lt.publish("addFont",{font:Se,instance:this}),Ft[Se.id]=Se,Jl(Se),Se.id},Xl=function(y){for(var B=0,re=Ce.length;B<re;B++){var le=Qa.call(this,y[B][0],y[B][1],y[B][2],Ce[B][3],!0);g===!1&&(v[le]=!0);var pe=y[B][0].split("-");Jl({id:le,fontName:pe[0],fontStyle:pe[1]||""})}Lt.publish("addFonts",{fonts:Ft,dictionary:Yt})},Ur=function(y){return y.foo=function(){try{return y.apply(this,arguments)}catch(le){var B=le.stack||"";~B.indexOf(" at ")&&(B=B.split(" at ")[1]);var re="Error in function "+B.split(`
`)[0].split("<")[0]+": "+le.message;if(!dt.console)throw new Error(re);dt.console.error(re,le),dt.alert&&alert(re)}},y.foo.bar=y,y.foo},To=function(y,B){var re,le,pe,Se,Le,He,c,S,F;if(pe=(B=B||{}).sourceEncoding||"Unicode",Le=B.outputEncoding,(B.autoencode||Le)&&Ft[xt].metadata&&Ft[xt].metadata[pe]&&Ft[xt].metadata[pe].encoding&&(Se=Ft[xt].metadata[pe].encoding,!Le&&Ft[xt].encoding&&(Le=Ft[xt].encoding),!Le&&Se.codePages&&(Le=Se.codePages[0]),typeof Le=="string"&&(Le=Se[Le]),Le)){for(c=!1,He=[],re=0,le=y.length;re<le;re++)(S=Le[y.charCodeAt(re)])?He.push(String.fromCharCode(S)):He.push(y[re]),He[re].charCodeAt(0)>>8&&(c=!0);y=He.join("")}for(re=y.length;c===void 0&&re!==0;)y.charCodeAt(re-1)>>8&&(c=!0),re--;if(!c)return y;for(He=B.noBOM?[]:[254,255],re=0,le=y.length;re<le;re++){if((F=(S=y.charCodeAt(re))>>8)>>8)throw new Error("Character at position "+re+" of string '"+y+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");He.push(F),He.push(S-(F<<8))}return String.fromCharCode.apply(void 0,He)},gn=f.__private__.pdfEscape=f.pdfEscape=function(y,B){return To(y,B).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Tr=f.__private__.beginPage=function(y){Te[++Jt]=[],at[Jt]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(y[0]),topRightY:Number(y[1])}},Ya(Jt),be(Te[M])},Bs=function(y,B){var re,le,pe;switch(n=B||n,typeof y=="string"&&(re=w(y.toLowerCase()),Array.isArray(re)&&(le=re[0],pe=re[1])),Array.isArray(y)&&(le=y[0]*Ge,pe=y[1]*Ge),isNaN(le)&&(le=i[0],pe=i[1]),(le>14400||pe>14400)&&(Qt.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),le=Math.min(14400,le),pe=Math.min(14400,pe)),i=[le,pe],n.substr(0,1)){case"l":pe>le&&(i=[pe,le]);break;case"p":le>pe&&(i=[pe,le])}Tr(i),tl(el),ie(Xn),il!==0&&ie(il+" J"),Vo!==0&&ie(Vo+" j"),Lt.publish("addPage",{pageNumber:Jt})},Po=function(y){y>0&&y<=Jt&&(Te.splice(y,1),at.splice(y,1),Jt--,M>Jt&&(M=Jt),this.setPage(M))},Ya=function(y){y>0&&y<=Jt&&(M=y)},Bt=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return Te.length-1},Us=function(y,B,re){var le,pe=void 0;return re=re||{},y=y!==void 0?y:Ft[xt].fontName,B=B!==void 0?B:Ft[xt].fontStyle,le=y.toLowerCase(),Yt[le]!==void 0&&Yt[le][B]!==void 0?pe=Yt[le][B]:Yt[y]!==void 0&&Yt[y][B]!==void 0?pe=Yt[y][B]:re.disableWarning===!1&&Qt.warn("Unable to look up font label for font '"+y+"', '"+B+"'. Refer to getFontList() for available fonts."),pe||re.noFallback||(pe=Yt.times[B])==null&&(pe=Yt.times.normal),pe},zs=f.__private__.putInfo=function(){var y=_n(),B=function(le){return le};for(var re in p!==null&&(B=rn.encryptor(y,0)),ie("<<"),ie("/Producer ("+gn(B("jsPDF "+ot.version))+")"),ct)ct.hasOwnProperty(re)&&ct[re]&&ie("/"+re.substr(0,1).toUpperCase()+re.substr(1)+" ("+gn(B(ct[re]))+")");ie("/CreationDate ("+gn(B(ue))+")"),ie(">>"),ie("endobj")},Fi=f.__private__.putCatalog=function(y){var B=(y=y||{}).rootDictionaryObjId||Di;switch(_n(),ie("<<"),ie("/Type /Catalog"),ie("/Pages "+B+" 0 R"),qe||(qe="fullwidth"),qe){case"fullwidth":ie("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ie("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ie("/OpenAction [3 0 R /Fit]");break;case"original":ie("/OpenAction [3 0 R /XYZ null null 1]");break;default:var re=""+qe;re.substr(re.length-1)==="%"&&(qe=parseInt(qe)/100),typeof qe=="number"&&ie("/OpenAction [3 0 R /XYZ null null "+j(qe)+"]")}switch(nt||(nt="continuous"),nt){case"continuous":ie("/PageLayout /OneColumn");break;case"single":ie("/PageLayout /SinglePage");break;case"two":case"twoleft":ie("/PageLayout /TwoColumnLeft");break;case"tworight":ie("/PageLayout /TwoColumnRight")}rt&&ie("/PageMode /"+rt),Lt.publish("putCatalog"),ie(">>"),ie("endobj")},xc=f.__private__.putTrailer=function(){ie("trailer"),ie("<<"),ie("/Size "+(te+1)),ie("/Root "+te+" 0 R"),ie("/Info "+(te-1)+" 0 R"),p!==null&&ie("/Encrypt "+rn.oid+" 0 R"),ie("/ID [ <"+Z+"> <"+Z+"> ]"),ie(">>")},Zl=f.__private__.putHeader=function(){ie("%PDF-"+E),ie("%")},Sc=f.__private__.putXRef=function(){var y="0000000000";ie("xref"),ie("0 "+(te+1)),ie("0000000000 65535 f ");for(var B=1;B<=te;B++)typeof oe[B]=="function"?ie((y+oe[B]()).slice(-10)+" 00000 n "):oe[B]!==void 0?ie((y+oe[B]).slice(-10)+" 00000 n "):ie("0000000000 00000 n ")},Oi=f.__private__.buildDocument=function(){Ze(),be(ae),Lt.publish("buildDocument"),Zl(),os(),Ka(),Ga(),p!==null&&bc(),zs(),Fi();var y=ye;return Sc(),xc(),ie("startxref"),ie(""+y),ie("%%EOF"),be(Te[M]),ae.join(`
`)},Co=f.__private__.getBlob=function(y){return new Blob([De(y)],{type:"application/pdf"})},ko=f.output=f.__private__.output=Ur(function(y,B){switch(typeof(B=B||{})=="string"?B={filename:B}:B.filename=B.filename||"generated.pdf",y){case void 0:return Oi();case"save":f.save(B.filename);break;case"arraybuffer":return De(Oi());case"blob":return Co(Oi());case"bloburi":case"bloburl":if(dt.URL!==void 0&&typeof dt.URL.createObjectURL=="function")return dt.URL&&dt.URL.createObjectURL(Co(Oi()))||void 0;Qt.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var re="",le=Oi();try{re=t1(le)}catch{re=t1(unescape(encodeURIComponent(le)))}return"data:application/pdf;filename="+B.filename+";base64,"+re;case"pdfobjectnewwindow":if(Object.prototype.toString.call(dt)==="[object Window]"){var pe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Se=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';B.pdfObjectUrl&&(pe=B.pdfObjectUrl,Se="");var Le='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+pe+'"'+Se+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(B)+");<\/script></body></html>",He=dt.open();return He!==null&&He.document.write(Le),He}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(dt)==="[object Window]"){var c='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(B.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+B.filename+'" width="500px" height="400px" /></body></html>',S=dt.open();if(S!==null){S.document.write(c);var F=this;S.document.documentElement.querySelector("#pdfViewer").onload=function(){S.document.title=B.filename,S.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(F.output("bloburl"))}}return S}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(dt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var $='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",B)+'"></iframe></body></html>',fe=dt.open();if(fe!==null&&(fe.document.write($),fe.document.title=B.filename),fe||typeof safari>"u")return fe;break;case"datauri":case"dataurl":return dt.document.location.href=this.output("datauristring",B);default:return null}}),hs=function(y){return Array.isArray(yi)===!0&&yi.indexOf(y)>-1};switch(r){case"pt":Ge=1;break;case"mm":Ge=72/25.4;break;case"cm":Ge=72/2.54;break;case"in":Ge=72;break;case"px":Ge=hs("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ge=12;break;case"ex":Ge=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Ge=r}var rn=null;ge(),Q();var eu=function(y){return p!==null?rn.encryptor(y,0):function(B){return B}},Ja=f.__private__.getPageInfo=f.getPageInfo=function(y){if(isNaN(y)||y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:at[y].objId,pageNumber:y,pageContext:at[y]}},ft=f.__private__.getPageInfoByObjId=function(y){if(isNaN(y)||y%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var B in at)if(at[B].objId===y)break;return Ja(B)},ds=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:at[M].objId,pageNumber:M,pageContext:at[M]}};f.addPage=function(){return Bs.apply(this,arguments),this},f.setPage=function(){return Ya.apply(this,arguments),be.call(this,Te[M]),this},f.insertPage=function(y){return this.addPage(),this.movePage(M,y),this},f.movePage=function(y,B){var re,le;if(y>B){re=Te[y],le=at[y];for(var pe=y;pe>B;pe--)Te[pe]=Te[pe-1],at[pe]=at[pe-1];Te[B]=re,at[B]=le,this.setPage(B)}else if(y<B){re=Te[y],le=at[y];for(var Se=y;Se<B;Se++)Te[Se]=Te[Se+1],at[Se]=at[Se+1];Te[B]=re,at[B]=le,this.setPage(B)}return this},f.deletePage=function(){return Po.apply(this,arguments),this},f.__private__.text=f.text=function(y,B,re,le,pe){var Se,Le,He,c,S,F,$,fe,_e,Re=(le=le||{}).scope||this;if(typeof y=="number"&&typeof B=="number"&&(typeof re=="string"||Array.isArray(re))){var gt=re;re=B,B=y,y=gt}if(arguments[3]instanceof Ye?(x("The transform parameter of text() with a Matrix value"),_e=pe):(He=arguments[4],c=arguments[5],qt($=arguments[3])==="object"&&$!==null||(typeof He=="string"&&(c=He,He=null),typeof $=="string"&&(c=$,$=null),typeof $=="number"&&(He=$,$=null),le={flags:$,angle:He,align:c})),isNaN(B)||isNaN(re)||y==null)throw new Error("Invalid arguments passed to jsPDF.text");if(y.length===0)return Re;var Nt="",yt=!1,Vt=typeof le.lineHeightFactor=="number"?le.lineHeightFactor:Mt,Gt=Re.internal.scaleFactor;function zi(Xt){return Xt=Xt.split("	").join(Array(le.TabLen||9).join(" ")),gn(Xt,$)}function Zn(Xt){for(var Zt,Sn=Xt.concat(),Un=[],Ys=Sn.length;Ys--;)typeof(Zt=Sn.shift())=="string"?Un.push(Zt):Array.isArray(Xt)&&(Zt.length===1||Zt[1]===void 0&&Zt[2]===void 0)?Un.push(Zt[0]):Un.push([Zt[0],Zt[1],Zt[2]]);return Un}function gs(Xt,Zt){var Sn;if(typeof Xt=="string")Sn=Zt(Xt)[0];else if(Array.isArray(Xt)){for(var Un,Ys,Lc=Xt.concat(),fu=[],Td=Lc.length;Td--;)typeof(Un=Lc.shift())=="string"?fu.push(Zt(Un)[0]):Array.isArray(Un)&&typeof Un[0]=="string"&&(Ys=Zt(Un[0],Un[1],Un[2]),fu.push([Ys[0],Ys[1],Ys[2]]));Sn=fu}return Sn}var ys=!1,Ac=!0;if(typeof y=="string")ys=!0;else if(Array.isArray(y)){var Ec=y.concat();Le=[];for(var su,er=Ec.length;er--;)(typeof(su=Ec.shift())!="string"||Array.isArray(su)&&typeof su[0]!="string")&&(Ac=!1);ys=Ac}if(ys===!1)throw new Error('Type of text must be string or Array. "'+y+'" is not recognized.');typeof y=="string"&&(y=y.match(/[\r?\n]/)?y.split(/\r\n|\r|\n/g):[y]);var ou=Oe/Re.internal.scaleFactor,au=ou*(Vt-1);switch(le.baseline){case"bottom":re-=au;break;case"top":re+=ou-au;break;case"hanging":re+=ou-2*au;break;case"middle":re+=ou/2-au}if((F=le.maxWidth||0)>0&&(typeof y=="string"?y=Re.splitTextToSize(y,F):Object.prototype.toString.call(y)==="[object Array]"&&(y=y.reduce(function(Xt,Zt){return Xt.concat(Re.splitTextToSize(Zt,F))},[]))),Se={text:y,x:B,y:re,options:le,mutex:{pdfEscape:gn,activeFontKey:xt,fonts:Ft,activeFontSize:Oe}},Lt.publish("preProcessText",Se),y=Se.text,He=(le=Se.options).angle,!(_e instanceof Ye)&&He&&typeof He=="number"){He*=Math.PI/180,le.rotationDirection===0&&(He=-He),T===_.ADVANCED&&(He=-He);var lu=Math.cos(He),Ic=Math.sin(He);_e=new Ye(lu,Ic,-Ic,lu,0,0)}else He&&He instanceof Ye&&(_e=He);T!==_.ADVANCED||_e||(_e=cr),(S=le.charSpace||Hs)!==void 0&&(Nt+=I(A(S))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(fe=le.horizontalScale)!==void 0&&(Nt+=I(100*fe)+` Tz
`),le.lang;var zr=-1,xm=le.renderingMode!==void 0?le.renderingMode:le.stroke,Tc=Re.internal.getCurrentPageInfo().pageContext;switch(xm){case 0:case!1:case"fill":zr=0;break;case 1:case!0:case"stroke":zr=1;break;case 2:case"fillThenStroke":zr=2;break;case 3:case"invisible":zr=3;break;case 4:case"fillAndAddForClipping":zr=4;break;case 5:case"strokeAndAddPathForClipping":zr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":zr=6;break;case 7:case"addToPathForClipping":zr=7}var Nd=Tc.usedRenderingMode!==void 0?Tc.usedRenderingMode:-1;zr!==-1?Nt+=zr+` Tr
`:Nd!==-1&&(Nt+=`0 Tr
`),zr!==-1&&(Tc.usedRenderingMode=zr),c=le.align||"left";var wi,uu=Oe*Vt,Ad=Re.internal.pageSize.getWidth(),Ed=Ft[xt];S=le.charSpace||Hs,F=le.maxWidth||0,$=Object.assign({autoencode:!0,noBOM:!0},le.flags);var Ho=[],sl=function(Xt){return Re.getStringUnitWidth(Xt,{font:Ed,charSpace:S,fontSize:Oe,doKerning:!1})*Oe/Gt};if(Object.prototype.toString.call(y)==="[object Array]"){var qr;Le=Zn(y),c!=="left"&&(wi=Le.map(sl));var Pr,Wo=0;if(c==="right"){B-=wi[0],y=[],er=Le.length;for(var Gs=0;Gs<er;Gs++)Gs===0?(Pr=ii(B),qr=Bn(re)):(Pr=A(Wo-wi[Gs]),qr=-uu),y.push([Le[Gs],Pr,qr]),Wo=wi[Gs]}else if(c==="center"){B-=wi[0]/2,y=[],er=Le.length;for(var Ks=0;Ks<er;Ks++)Ks===0?(Pr=ii(B),qr=Bn(re)):(Pr=A((Wo-wi[Ks])/2),qr=-uu),y.push([Le[Ks],Pr,qr]),Wo=wi[Ks]}else if(c==="left"){y=[],er=Le.length;for(var cu=0;cu<er;cu++)y.push(Le[cu])}else if(c==="justify"&&Ed.encoding==="Identity-H"){y=[],er=Le.length,F=F!==0?F:Ad;for(var Qs=0,xn=0;xn<er;xn++)if(qr=xn===0?Bn(re):-uu,Pr=xn===0?ii(B):Qs,xn<er-1){var Pc=A((F-wi[xn])/(Le[xn].split(" ").length-1)),Cr=Le[xn].split(" ");y.push([Cr[0]+" ",Pr,qr]),Qs=0;for(var _i=1;_i<Cr.length;_i++){var hu=(sl(Cr[_i-1]+" "+Cr[_i])-sl(Cr[_i]))*Gt+Pc;_i==Cr.length-1?y.push([Cr[_i],hu,0]):y.push([Cr[_i]+" ",hu,0]),Qs-=hu}}else y.push([Le[xn],Pr,qr]);y.push(["",Qs,0])}else{if(c!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(y=[],er=Le.length,F=F!==0?F:Ad,xn=0;xn<er;xn++)qr=xn===0?Bn(re):-uu,Pr=xn===0?ii(B):0,xn<er-1?Ho.push(I(A((F-wi[xn])/(Le[xn].split(" ").length-1)))):Ho.push(0),y.push([Le[xn],Pr,qr])}}var Id=typeof le.R2L=="boolean"?le.R2L:tt;Id===!0&&(y=gs(y,function(Xt,Zt,Sn){return[Xt.split("").reverse().join(""),Zt,Sn]})),Se={text:y,x:B,y:re,options:le,mutex:{pdfEscape:gn,activeFontKey:xt,fonts:Ft,activeFontSize:Oe}},Lt.publish("postProcessText",Se),y=Se.text,yt=Se.mutex.isHex||!1;var Cc=Ft[xt].encoding;Cc!=="WinAnsiEncoding"&&Cc!=="StandardEncoding"||(y=gs(y,function(Xt,Zt,Sn){return[zi(Xt),Zt,Sn]})),Le=Zn(y),y=[];for(var ol,al,$o,ll=0,du=1,ul=Array.isArray(Le[0])?du:ll,Go="",kc=function(Xt,Zt,Sn){var Un="";return Sn instanceof Ye?(Sn=typeof le.angle=="number"?Vr(Sn,new Ye(1,0,0,1,Xt,Zt)):Vr(new Ye(1,0,0,1,Xt,Zt),Sn),T===_.ADVANCED&&(Sn=Vr(new Ye(1,0,0,-1,0,0),Sn)),Un=Sn.join(" ")+` Tm
`):Un=I(Xt)+" "+I(Zt)+` Td
`,Un},bi=0;bi<Le.length;bi++){switch(Go="",ul){case du:$o=(yt?"<":"(")+Le[bi][0]+(yt?">":")"),ol=parseFloat(Le[bi][1]),al=parseFloat(Le[bi][2]);break;case ll:$o=(yt?"<":"(")+Le[bi]+(yt?">":")"),ol=ii(B),al=Bn(re)}Ho!==void 0&&Ho[bi]!==void 0&&(Go=Ho[bi]+` Tw
`),bi===0?y.push(Go+kc(ol,al,_e)+$o):ul===ll?y.push(Go+$o):ul===du&&y.push(Go+kc(ol,al,_e)+$o)}y=ul===ll?y.join(` Tj
T* `):y.join(` Tj
`),y+=` Tj
`;var xi=`BT
/`;return xi+=xt+" "+Oe+` Tf
`,xi+=I(Oe*Vt)+` TL
`,xi+=Bi+`
`,xi+=Nt,xi+=y,ie(xi+="ET"),v[xt]=!0,Re};var Nc=f.__private__.clip=f.clip=function(y){return ie(y==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return Nc("evenodd")},f.__private__.discardPath=f.discardPath=function(){return ie("n"),this};var vi=f.__private__.isValidStyle=function(y){var B=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(y)!==-1&&(B=!0),B};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(y){return vi(y)&&(h=y),this};var tu=f.__private__.getStyle=f.getStyle=function(y){var B=h;switch(y){case"D":case"S":B="S";break;case"F":B="f";break;case"FD":case"DF":B="B";break;case"f":case"f*":case"B":case"B*":B=y}return B},ni=f.close=function(){return ie("h"),this};f.stroke=function(){return ie("S"),this},f.fill=function(y){return Lo("f",y),this},f.fillEvenOdd=function(y){return Lo("f*",y),this},f.fillStroke=function(y){return Lo("B",y),this},f.fillStrokeEvenOdd=function(y){return Lo("B*",y),this};var Lo=function(y,B){qt(B)==="object"?Do(B,y):ie(y)},Xa=function(y){y===null||T===_.ADVANCED&&y===void 0||(y=tu(y),ie(y))};function Ro(y,B,re,le,pe){var Se=new Sl(B||this.boundingBox,re||this.xStep,le||this.yStep,this.gState,pe||this.matrix);Se.stream=this.stream;var Le=y+"$$"+this.cloneIndex+++"$$";return kn(Le,Se),Se}var Do=function(y,B){var re=ss[y.key],le=Pt[re];if(le instanceof fa)ie("q"),ie(nu(B)),le.gState&&f.setGState(le.gState),ie(y.matrix.toString()+" cm"),ie("/"+re+" sh"),ie("Q");else if(le instanceof Sl){var pe=new Ye(1,0,0,-1,0,dr());y.matrix&&(pe=pe.multiply(y.matrix||cr),re=Ro.call(le,y.key,y.boundingBox,y.xStep,y.yStep,pe).id),ie("q"),ie("/Pattern cs"),ie("/"+re+" scn"),le.gState&&f.setGState(le.gState),ie(B),ie("Q")}},nu=function(y){switch(y){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Mi=f.moveTo=function(y,B){return ie(I(A(y))+" "+I(J(B))+" m"),this},ri=f.lineTo=function(y,B){return ie(I(A(y))+" "+I(J(B))+" l"),this},Vi=f.curveTo=function(y,B,re,le,pe,Se){return ie([I(A(y)),I(J(B)),I(A(re)),I(J(le)),I(A(pe)),I(J(Se)),"c"].join(" ")),this};f.__private__.line=f.line=function(y,B,re,le,pe){if(isNaN(y)||isNaN(B)||isNaN(re)||isNaN(le)||!vi(pe))throw new Error("Invalid arguments passed to jsPDF.line");return T===_.COMPAT?this.lines([[re-y,le-B]],y,B,[1,1],pe||"S"):this.lines([[re-y,le-B]],y,B,[1,1]).stroke()},f.__private__.lines=f.lines=function(y,B,re,le,pe,Se){var Le,He,c,S,F,$,fe,_e,Re,gt,Nt,yt;if(typeof y=="number"&&(yt=re,re=B,B=y,y=yt),le=le||[1,1],Se=Se||!1,isNaN(B)||isNaN(re)||!Array.isArray(y)||!Array.isArray(le)||!vi(pe)||typeof Se!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Mi(B,re),Le=le[0],He=le[1],S=y.length,gt=B,Nt=re,c=0;c<S;c++)(F=y[c]).length===2?(gt=F[0]*Le+gt,Nt=F[1]*He+Nt,ri(gt,Nt)):($=F[0]*Le+gt,fe=F[1]*He+Nt,_e=F[2]*Le+gt,Re=F[3]*He+Nt,gt=F[4]*Le+gt,Nt=F[5]*He+Nt,Vi($,fe,_e,Re,gt,Nt));return Se&&ni(),Xa(pe),this},f.path=function(y){for(var B=0;B<y.length;B++){var re=y[B],le=re.c;switch(re.op){case"m":Mi(le[0],le[1]);break;case"l":ri(le[0],le[1]);break;case"c":Vi.apply(this,le);break;case"h":ni()}}return this},f.__private__.rect=f.rect=function(y,B,re,le,pe){if(isNaN(y)||isNaN(B)||isNaN(re)||isNaN(le)||!vi(pe))throw new Error("Invalid arguments passed to jsPDF.rect");return T===_.COMPAT&&(le=-le),ie([I(A(y)),I(J(B)),I(A(re)),I(A(le)),"re"].join(" ")),Xa(pe),this},f.__private__.triangle=f.triangle=function(y,B,re,le,pe,Se,Le){if(isNaN(y)||isNaN(B)||isNaN(re)||isNaN(le)||isNaN(pe)||isNaN(Se)||!vi(Le))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[re-y,le-B],[pe-re,Se-le],[y-pe,B-Se]],y,B,[1,1],Le,!0),this},f.__private__.roundedRect=f.roundedRect=function(y,B,re,le,pe,Se,Le){if(isNaN(y)||isNaN(B)||isNaN(re)||isNaN(le)||isNaN(pe)||isNaN(Se)||!vi(Le))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var He=4/3*(Math.SQRT2-1);return pe=Math.min(pe,.5*re),Se=Math.min(Se,.5*le),this.lines([[re-2*pe,0],[pe*He,0,pe,Se-Se*He,pe,Se],[0,le-2*Se],[0,Se*He,-pe*He,Se,-pe,Se],[2*pe-re,0],[-pe*He,0,-pe,-Se*He,-pe,-Se],[0,2*Se-le],[0,-Se*He,pe*He,-Se,pe,-Se]],y+pe,B,[1,1],Le,!0),this},f.__private__.ellipse=f.ellipse=function(y,B,re,le,pe){if(isNaN(y)||isNaN(B)||isNaN(re)||isNaN(le)||!vi(pe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Se=4/3*(Math.SQRT2-1)*re,Le=4/3*(Math.SQRT2-1)*le;return Mi(y+re,B),Vi(y+re,B-Le,y+Se,B-le,y,B-le),Vi(y-Se,B-le,y-re,B-Le,y-re,B),Vi(y-re,B+Le,y-Se,B+le,y,B+le),Vi(y+Se,B+le,y+re,B+Le,y+re,B),Xa(pe),this},f.__private__.circle=f.circle=function(y,B,re,le){if(isNaN(y)||isNaN(B)||isNaN(re)||!vi(le))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(y,B,re,re,le)},f.setFont=function(y,B,re){return re&&(B=W(B,re)),xt=Us(y,B,{disableWarning:!1}),this};var Za=f.__private__.getFont=f.getFont=function(){return Ft[Us.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var y,B,re={};for(y in Yt)if(Yt.hasOwnProperty(y))for(B in re[y]=[],Yt[y])Yt[y].hasOwnProperty(B)&&re[y].push(B);return re},f.addFont=function(y,B,re,le,pe){var Se=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Se.indexOf(arguments[3])!==-1?pe=arguments[3]:arguments[3]&&Se.indexOf(arguments[3])==-1&&(re=W(re,le)),pe=pe||"Identity-H",Qa.call(this,y,B,re,pe)};var Mt,el=t.lineWidth||.200025,jo=f.__private__.getLineWidth=f.getLineWidth=function(){return el},tl=f.__private__.setLineWidth=f.setLineWidth=function(y){return el=y,ie(I(A(y))+" w"),this};f.__private__.setLineDash=ot.API.setLineDash=ot.API.setLineDashPattern=function(y,B){if(y=y||[],B=B||0,isNaN(B)||!Array.isArray(y))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return y=y.map(function(re){return I(A(re))}).join(" "),B=I(A(B)),ie("["+y+"] "+B+" d"),this};var nl=f.__private__.getLineHeight=f.getLineHeight=function(){return Oe*Mt};f.__private__.getLineHeight=f.getLineHeight=function(){return Oe*Mt};var rl=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(y){return typeof(y=y||1.15)=="number"&&(Mt=y),this},qs=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return Mt};rl(t.lineHeight);var ii=f.__private__.getHorizontalCoordinate=function(y){return A(y)},Bn=f.__private__.getVerticalCoordinate=function(y){return T===_.ADVANCED?y:at[M].mediaBox.topRightY-at[M].mediaBox.bottomLeftY-A(y)},ru=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(y){return I(ii(y))},fs=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(y){return I(Bn(y))},Xn=t.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return Br(Xn)},f.__private__.setStrokeColor=f.setDrawColor=function(y,B,re,le){return Xn=Er({ch1:y,ch2:B,ch3:re,ch4:le,pdfColorType:"draw",precision:2}),ie(Xn),this};var Fo=t.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return Br(Fo)},f.__private__.setFillColor=f.setFillColor=function(y,B,re,le){return Fo=Er({ch1:y,ch2:B,ch3:re,ch4:le,pdfColorType:"fill",precision:2}),ie(Fo),this};var Bi=t.textColor||"0 g",Oo=f.__private__.getTextColor=f.getTextColor=function(){return Br(Bi)};f.__private__.setTextColor=f.setTextColor=function(y,B,re,le){return Bi=Er({ch1:y,ch2:B,ch3:re,ch4:le,pdfColorType:"text",precision:3}),this};var Hs=t.charSpace,Mo=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(Hs||0)};f.__private__.setCharSpace=f.setCharSpace=function(y){if(isNaN(y))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Hs=y,this};var il=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(y){var B=f.CapJoinStyles[y];if(B===void 0)throw new Error("Line cap style of '"+y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return il=B,ie(B+" J"),this};var Vo=0;f.__private__.setLineJoin=f.setLineJoin=function(y){var B=f.CapJoinStyles[y];if(B===void 0)throw new Error("Line join style of '"+y+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Vo=B,ie(B+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(y){if(y=y||0,isNaN(y))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ie(I(A(y))+" M"),this},f.GState=td,f.setGState=function(y){(y=typeof y=="string"?tn[Jn[y]]:ps(null,y)).equals(Zr)||(ie("/"+y.id+" gs"),Zr=y)};var ps=function(y,B){if(!y||!Jn[y]){var re=!1;for(var le in tn)if(tn.hasOwnProperty(le)&&tn[le].equals(B)){re=!0;break}if(re)B=tn[le];else{var pe="GS"+(Object.keys(tn).length+1).toString(10);tn[pe]=B,B.id=pe}return y&&(Jn[y]=B.id),Lt.publish("addGState",B),B}};f.addGState=function(y,B){return ps(y,B),this},f.saveGraphicsState=function(){return ie("q"),gi.push({key:xt,size:Oe,color:Bi}),this},f.restoreGraphicsState=function(){ie("Q");var y=gi.pop();return xt=y.key,Oe=y.size,Bi=y.color,Zr=null,this},f.setCurrentTransformationMatrix=function(y){return ie(y.toString()+" cm"),this},f.comment=function(y){return ie("#"+y),this};var Ws=function(y,B){var re=y||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return re},set:function(Se){isNaN(Se)||(re=parseFloat(Se))}});var le=B||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return le},set:function(Se){isNaN(Se)||(le=parseFloat(Se))}});var pe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return pe},set:function(Se){pe=Se.toString()}}),this},Bo=function(y,B,re,le){Ws.call(this,y,B),this.type="rect";var pe=re||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return pe},set:function(Le){isNaN(Le)||(pe=parseFloat(Le))}});var Se=le||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Se},set:function(Le){isNaN(Le)||(Se=parseFloat(Le))}}),this},$s=function(){this.page=Jt,this.currentPage=M,this.pages=Te.slice(0),this.pagesContext=at.slice(0),this.x=pn,this.y=It,this.matrix=Mr,this.width=ms(M),this.height=dr(M),this.outputDestination=Ve,this.id="",this.objectNumber=-1};$s.prototype.restore=function(){Jt=this.page,M=this.currentPage,at=this.pagesContext,Te=this.pages,pn=this.x,It=this.y,Mr=this.matrix,zo(M,this.width),qo(M,this.height),Ve=this.outputDestination};var Uo=function(y,B,re,le,pe){ei.push(new $s),Jt=M=0,Te=[],pn=y,It=B,Mr=pe,Tr([re,le])},iu=function(y){if(ur[y])ei.pop().restore();else{var B=new $s,re="Xo"+(Object.keys(Cn).length+1).toString(10);B.id=re,ur[y]=re,Cn[re]=B,Lt.publish("addFormObject",B),ei.pop().restore()}};for(var Ui in f.beginFormObject=function(y,B,re,le,pe){return Uo(y,B,re,le,pe),this},f.endFormObject=function(y){return iu(y),this},f.doFormObject=function(y,B){var re=Cn[ur[y]];return ie("q"),ie(B.toString()+" cm"),ie("/"+re.id+" Do"),ie("Q"),this},f.getFormObject=function(y){var B=Cn[ur[y]];return{x:B.x,y:B.y,width:B.width,height:B.height,matrix:B.matrix}},f.save=function(y,B){return y=y||"generated.pdf",(B=B||{}).returnPromise=B.returnPromise||!1,B.returnPromise===!1?(vl(Co(Oi()),y),typeof vl.unload=="function"&&dt.setTimeout&&setTimeout(vl.unload,911),this):new Promise(function(re,le){try{var pe=vl(Co(Oi()),y);typeof vl.unload=="function"&&dt.setTimeout&&setTimeout(vl.unload,911),re(pe)}catch(Se){le(Se.message)}})},ot.API)ot.API.hasOwnProperty(Ui)&&(Ui==="events"&&ot.API.events.length?function(y,B){var re,le,pe;for(pe=B.length-1;pe!==-1;pe--)re=B[pe][0],le=B[pe][1],y.subscribe.apply(y,[re].concat(typeof le=="function"?[le]:le))}(Lt,ot.API.events):f[Ui]=ot.API[Ui]);var ms=f.getPageWidth=function(y){return(at[y=y||M].mediaBox.topRightX-at[y].mediaBox.bottomLeftX)/Ge},zo=f.setPageWidth=function(y,B){at[y].mediaBox.topRightX=B*Ge+at[y].mediaBox.bottomLeftX},dr=f.getPageHeight=function(y){return(at[y=y||M].mediaBox.topRightY-at[y].mediaBox.bottomLeftY)/Ge},qo=f.setPageHeight=function(y,B){at[y].mediaBox.topRightY=B*Ge+at[y].mediaBox.bottomLeftY};return f.internal={pdfEscape:gn,getStyle:tu,getFont:Za,getFontSize:Be,getCharSpace:Mo,getTextColor:Oo,getLineHeight:nl,getLineHeightFactor:qs,getLineWidth:jo,write:$e,getHorizontalCoordinate:ii,getVerticalCoordinate:Bn,getCoordinateString:ru,getVerticalCoordinateString:fs,collections:{},newObject:_n,newAdditionalObject:Eo,newObjectDeferred:mn,newObjectDeferredBegin:Ln,getFilters:Ir,putStream:bn,events:Lt,scaleFactor:Ge,pageSize:{getWidth:function(){return ms(M)},setWidth:function(y){zo(M,y)},getHeight:function(){return dr(M)},setHeight:function(y){qo(M,y)}},encryptionOptions:p,encryption:rn,getEncryptor:eu,output:ko,getNumberOfPages:Bt,pages:Te,out:ie,f2:j,f3:N,getPageInfo:Ja,getPageInfoByObjId:ft,getCurrentPageInfo:ds,getPDFVersion:k,Point:Ws,Rectangle:Bo,Matrix:Ye,hasHotfix:hs},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return ms(M)},set:function(y){zo(M,y)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return dr(M)},set:function(y){qo(M,y)},enumerable:!0,configurable:!0}),Xl.call(f,Ce),xt="F1",Bs(i,n),Lt.publish("initialized"),f}Nu.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Nu.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Nu.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Nu.prototype.processOwnerPassword=function(t,e){return r1(n1(e).substr(0,5),t)},Nu.prototype.encryptor=function(t,e){var n=n1(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return r1(n,r)}},td.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||qt(t)!==qt(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},ot.API={events:[]},ot.version="2.5.2";var vn=ot.API,J2=1,Gl=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},wu=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},vt=function(t){return t.toFixed(2)},ia=function(t){return t.toFixed(5)};vn.__acroform__={};var Xr=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},hw=function(t){return t*J2},bs=function(t){var e=new NS,n=Xe.internal.getHeight(t)||0,r=Xe.internal.getWidth(t)||0;return e.BBox=[0,0,Number(vt(r)),Number(vt(n))],e},uR=vn.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},cR=vn.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},hR=vn.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},In=vn.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return hR(t,e-1)},Tn=vn.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return uR(t,e-1)},Pn=vn.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return cR(t,e-1)},dR=vn.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(vt(l.lowerLeft_X)),Number(vt(l.lowerLeft_Y)),Number(vt(l.upperRight_X)),Number(vt(l.upperRight_Y))]},fR=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=i1(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+vt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=bs(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},i1=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(N){return N.split(`
`)}):i.map(function(N){return[N]});var s=n,o=Xe.internal.getHeight(t)||0;o=o<0?-o:o;var a=Xe.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(N,A,D){if(N+1<i.length){var J=A+" "+i[N+1][0];return wf(J,t,D).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var h,p,g=wf("3",t,s).height,v=t.multiline?o-s:(o-g)/2,f=v+=2,E=0,k=0,P=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+wf(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var w="",_=0,T=0;T<i.length;T++)if(i.hasOwnProperty(T)){var L=!1;if(i[T].length!==1&&P!==i[T].length-1){if((g+2)*(_+2)+2>o)continue e;w+=i[T][P],L=!0,k=T,T--}else{w=(w+=i[T][P]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var V=parseInt(T),W=l(V,w,s),I=T>=i.length-1;if(W&&!I){w+=" ",P=0;continue}if(W||I){if(I)k=V;else if(t.multiline&&(g+2)*(_+2)+2>o)continue e}else{if(!t.multiline||(g+2)*(_+2)+2>o)continue e;k=V}}for(var x="",C=E;C<=k;C++){var j=i[C];if(t.multiline){if(C===k){x+=j[P]+" ",P=(P+1)%j.length;continue}if(C===E){x+=j[j.length-1]+" ";continue}}x+=j[0]+" "}switch(x=x.substr(x.length-1)==" "?x.substr(0,x.length-1):x,p=wf(x,t,s).width,t.textAlign){case"right":h=a-p-2;break;case"center":h=(a-p)/2;break;case"left":default:h=2}e+=vt(h)+" "+vt(f)+` Td
`,e+="("+Gl(x)+`) Tj
`,e+=-vt(h)+` 0 Td
`,f=-(s+2),p=0,E=L?k:k+1,_++,w=""}break}return r.text=e,r.fontSize=s,r},wf=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},pR={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},mR=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},gR=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),qt(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},yR=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(rs.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(pR)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");J2=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new AS,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&mR(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],h=a.Rect;if(a.Rect&&(a.Rect=dR(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Xe.createDefaultAppearanceStream(a),qt(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=h,a.hasAppearanceStream&&!a.appearanceStreamContent){var p=fR(a);l.push({key:"AP",value:"<</N "+p+">>"}),i.internal.acroformPlugin.xForms.push(p)}if(a.appearanceStreamContent){var g="";for(var v in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(v)){var f=a.appearanceStreamContent[v];if(g+="/"+v+" ",g+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var o in f)if(f.hasOwnProperty(o)){var E=f[o];typeof E=="function"&&(E=E.call(i,a)),g+="/"+o+" "+E+" ",i.internal.acroformPlugin.xForms.indexOf(E)>=0||i.internal.acroformPlugin.xForms.push(E)}}else typeof(E=f)=="function"&&(E=E.call(i,a)),g+="/"+o+" "+E,i.internal.acroformPlugin.xForms.indexOf(E)>=0||i.internal.acroformPlugin.xForms.push(E);g+=">>"}l.push({key:"AP",value:`<<
`+g+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&gR(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},SS=vn.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),qt(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+Gl(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},kg=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Gl(r(t))+")"},Es=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Es.prototype.toString=function(){return this.objId+" 0 R"},Es.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Es.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:SS(i,this.objId,this.scope)}):i instanceof Es?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var NS=function(){Es.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Xr(NS,Es);var AS=function(){Es.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Gl(n(t))+")"}},set:function(n){t=n}})};Xr(AS,Es);var rs=function t(){Es.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');e=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!In(e,3)},set:function(w){w?this.F=Tn(e,3):this.F=Pn(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');n=w}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(w){r=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(w){r[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(w){r[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(w){r[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(w){r[3]=w}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Rp)return;s="FieldObject"+t.FieldNum++}var w=function(_){return _};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+Gl(w(s))+")"},set:function(w){s=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(w){s=w}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(w){o=w}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(w){a=w}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(w){l=w}});var h=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return h===void 0?50/J2:h},set:function(w){h=w}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(w){p=w}});var g="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!g||this instanceof Rp||this instanceof ka))return kg(g,this.objId,this.scope)},set:function(w){w=w.toString(),g=w}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof qn?v:kg(v,this.objId,this.scope)},set:function(w){w=w.toString(),v=this instanceof qn?w:w.substr(0,1)==="("?wu(w.substr(1,w.length-2)):wu(w)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof qn?wu(v.substr(1,v.length-1)):v},set:function(w){w=w.toString(),v=this instanceof qn?"/"+w:w}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof qn?f:kg(f,this.objId,this.scope)},set:function(w){w=w.toString(),f=this instanceof qn?w:w.substr(0,1)==="("?wu(w.substr(1,w.length-2)):wu(w)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof qn?wu(f.substr(1,f.length-1)):f},set:function(w){w=w.toString(),f=this instanceof qn?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var E,k=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return k},set:function(w){w=!!w,k=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(E)return E},set:function(w){E=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,1)},set:function(w){w?this.Ff=Tn(this.Ff,1):this.Ff=Pn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,2)},set:function(w){w?this.Ff=Tn(this.Ff,2):this.Ff=Pn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,3)},set:function(w){w?this.Ff=Tn(this.Ff,3):this.Ff=Pn(this.Ff,3)}});var P=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(P!==null)return P},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');P=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(P){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:P=2;break;case"center":case 1:P=1;break;case"left":case 0:default:P=0}}})};Xr(rs,Es);var Il=function(){rs.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return SS(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,h=[];l=o.exec(s);)h.push(l[a]);return h}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,18)},set:function(n){n?this.Ff=Tn(this.Ff,18):this.Ff=Pn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Tn(this.Ff,19):this.Ff=Pn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,20)},set:function(n){n?(this.Ff=Tn(this.Ff,20),e.sort()):this.Ff=Pn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,22)},set:function(n){n?this.Ff=Tn(this.Ff,22):this.Ff=Pn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,23)},set:function(n){n?this.Ff=Tn(this.Ff,23):this.Ff=Pn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,27)},set:function(n){n?this.Ff=Tn(this.Ff,27):this.Ff=Pn(this.Ff,27)}}),this.hasAppearanceStream=!1};Xr(Il,rs);var Tl=function(){Il.call(this),this.fontName="helvetica",this.combo=!1};Xr(Tl,Il);var Pl=function(){Tl.call(this),this.combo=!0};Xr(Pl,Tl);var Sh=function(){Pl.call(this),this.edit=!0};Xr(Sh,Pl);var qn=function(){rs.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,15)},set:function(n){n?this.Ff=Tn(this.Ff,15):this.Ff=Pn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,16)},set:function(n){n?this.Ff=Tn(this.Ff,16):this.Ff=Pn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,17)},set:function(n){n?this.Ff=Tn(this.Ff,17):this.Ff=Pn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,26)},set:function(n){n?this.Ff=Tn(this.Ff,26):this.Ff=Pn(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Gl(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){qt(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Xr(qn,rs);var Nh=function(){qn.call(this),this.pushButton=!0};Xr(Nh,qn);var Cl=function(){qn.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Xr(Cl,qn);var Rp=function(){var t,e;rs.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+Gl(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){qt(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Xe.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Xr(Rp,rs),Cl.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Cl.prototype.createOption=function(t){var e=new Rp;return e.Parent=this,e.optionName=t,this.Kids.push(e),vR.call(this.scope,e),e};var Ah=function(){qn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Xe.CheckBox.createAppearanceStream()};Xr(Ah,qn);var ka=function(){rs.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,13)},set:function(e){e?this.Ff=Tn(this.Ff,13):this.Ff=Pn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,21)},set:function(e){e?this.Ff=Tn(this.Ff,21):this.Ff=Pn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,23)},set:function(e){e?this.Ff=Tn(this.Ff,23):this.Ff=Pn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,24)},set:function(e){e?this.Ff=Tn(this.Ff,24):this.Ff=Pn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,25)},set:function(e){e?this.Ff=Tn(this.Ff,25):this.Ff=Pn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,26)},set:function(e){e?this.Ff=Tn(this.Ff,26):this.Ff=Pn(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Xr(ka,rs);var Eh=function(){ka.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,14)},set:function(t){t?this.Ff=Tn(this.Ff,14):this.Ff=Pn(this.Ff,14)}}),this.password=!0};Xr(Eh,ka);var Xe={CheckBox:{createAppearanceStream:function(){return{N:{On:Xe.CheckBox.YesNormal},D:{On:Xe.CheckBox.YesPushDown,Off:Xe.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=bs(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=i1(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+vt(Xe.internal.getWidth(t))+" "+vt(Xe.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+vt(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=bs(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=Xe.internal.getHeight(t),o=Xe.internal.getWidth(t),a=i1(t,t.caption);return i.push("1 g"),i.push("0 0 "+vt(o)+" "+vt(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+vt(o-1)+" "+vt(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+vt(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=bs(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+vt(Xe.internal.getWidth(t))+" "+vt(Xe.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Xe.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Xe.RadioButton.Circle.YesNormal,e.D[t]=Xe.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=bs(t);e.scope=t.scope;var n=[],r=Xe.internal.getWidth(t)<=Xe.internal.getHeight(t)?Xe.internal.getWidth(t)/4:Xe.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Xe.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+ia(Xe.internal.getWidth(t)/2)+" "+ia(Xe.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=bs(t);e.scope=t.scope;var n=[],r=Xe.internal.getWidth(t)<=Xe.internal.getHeight(t)?Xe.internal.getWidth(t)/4:Xe.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Xe.internal.Bezier_C).toFixed(5)),o=Number((r*Xe.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+ia(Xe.internal.getWidth(t)/2)+" "+ia(Xe.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+ia(Xe.internal.getWidth(t)/2)+" "+ia(Xe.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=bs(t);e.scope=t.scope;var n=[],r=Xe.internal.getWidth(t)<=Xe.internal.getHeight(t)?Xe.internal.getWidth(t)/4:Xe.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Xe.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+ia(Xe.internal.getWidth(t)/2)+" "+ia(Xe.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Xe.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Xe.RadioButton.Cross.YesNormal,e.D[t]=Xe.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=bs(t);e.scope=t.scope;var n=[],r=Xe.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+vt(Xe.internal.getWidth(t)-2)+" "+vt(Xe.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(vt(r.x1.x)+" "+vt(r.x1.y)+" m"),n.push(vt(r.x2.x)+" "+vt(r.x2.y)+" l"),n.push(vt(r.x4.x)+" "+vt(r.x4.y)+" m"),n.push(vt(r.x3.x)+" "+vt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=bs(t);e.scope=t.scope;var n=Xe.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+vt(Xe.internal.getWidth(t))+" "+vt(Xe.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+vt(Xe.internal.getWidth(t)-2)+" "+vt(Xe.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(vt(n.x1.x)+" "+vt(n.x1.y)+" m"),r.push(vt(n.x2.x)+" "+vt(n.x2.y)+" l"),r.push(vt(n.x4.x)+" "+vt(n.x4.y)+" m"),r.push(vt(n.x3.x)+" "+vt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=bs(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+vt(Xe.internal.getWidth(t))+" "+vt(Xe.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};Xe.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Xe.internal.getWidth(t),n=Xe.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},Xe.internal.getWidth=function(t){var e=0;return qt(t)==="object"&&(e=hw(t.Rect[2])),e},Xe.internal.getHeight=function(t){var e=0;return qt(t)==="object"&&(e=hw(t.Rect[3])),e};var vR=vn.addField=function(t){if(yR(this,t),!(t instanceof rs))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};vn.AcroFormChoiceField=Il,vn.AcroFormListBox=Tl,vn.AcroFormComboBox=Pl,vn.AcroFormEditBox=Sh,vn.AcroFormButton=qn,vn.AcroFormPushButton=Nh,vn.AcroFormRadioButton=Cl,vn.AcroFormCheckBox=Ah,vn.AcroFormTextField=ka,vn.AcroFormPasswordField=Eh,vn.AcroFormAppearance=Xe,vn.AcroForm={ChoiceField:Il,ListBox:Tl,ComboBox:Pl,EditBox:Sh,Button:qn,PushButton:Nh,RadioButton:Cl,CheckBox:Ah,TextField:ka,PasswordField:Eh,Appearance:Xe},ot.AcroForm={ChoiceField:Il,ListBox:Tl,ComboBox:Pl,EditBox:Sh,Button:qn,PushButton:Nh,RadioButton:Cl,CheckBox:Ah,TextField:ka,PasswordField:Eh,Appearance:Xe};var wR=ot.AcroForm;function ES(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(N,A){var D,J,ue,Z,ee,Q=e;if((A=A||e)==="RGBA"||N.data!==void 0&&N.data instanceof Uint8ClampedArray&&"height"in N&&"width"in N)return"RGBA";if(W(N))for(ee in n)for(ue=n[ee],D=0;D<ue.length;D+=1){for(Z=!0,J=0;J<ue[D].length;J+=1)if(ue[D][J]!==void 0&&ue[D][J]!==N[J]){Z=!1;break}if(Z===!0){Q=ee;break}}else for(ee in n)for(ue=n[ee],D=0;D<ue.length;D+=1){for(Z=!0,J=0;J<ue[D].length;J+=1)if(ue[D][J]!==void 0&&ue[D][J]!==N.charCodeAt(J)){Z=!1;break}if(Z===!0){Q=ee;break}}return Q===e&&A!==e&&(Q=A),Q},i=function N(A){for(var D=this.internal.write,J=this.internal.putStream,ue=(0,this.internal.getFilters)();ue.indexOf("FlateEncode")!==-1;)ue.splice(ue.indexOf("FlateEncode"),1);A.objectId=this.internal.newObject();var Z=[];if(Z.push({key:"Type",value:"/XObject"}),Z.push({key:"Subtype",value:"/Image"}),Z.push({key:"Width",value:A.width}),Z.push({key:"Height",value:A.height}),A.colorSpace===P.INDEXED?Z.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(A.palette.length/3-1)+" "+("sMask"in A&&A.sMask!==void 0?A.objectId+2:A.objectId+1)+" 0 R]"}):(Z.push({key:"ColorSpace",value:"/"+A.colorSpace}),A.colorSpace===P.DEVICE_CMYK&&Z.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Z.push({key:"BitsPerComponent",value:A.bitsPerComponent}),"decodeParameters"in A&&A.decodeParameters!==void 0&&Z.push({key:"DecodeParms",value:"<<"+A.decodeParameters+">>"}),"transparency"in A&&Array.isArray(A.transparency)){for(var ee="",Q=0,X=A.transparency.length;Q<X;Q++)ee+=A.transparency[Q]+" "+A.transparency[Q]+" ";Z.push({key:"Mask",value:"["+ee+"]"})}A.sMask!==void 0&&Z.push({key:"SMask",value:A.objectId+1+" 0 R"});var se=A.filter!==void 0?["/"+A.filter]:void 0;if(J({data:A.data,additionalKeyValues:Z,alreadyAppliedFilters:se,objectId:A.objectId}),D("endobj"),"sMask"in A&&A.sMask!==void 0){var ge="/Predictor "+A.predictor+" /Colors 1 /BitsPerComponent "+A.bitsPerComponent+" /Columns "+A.width,O={width:A.width,height:A.height,colorSpace:"DeviceGray",bitsPerComponent:A.bitsPerComponent,decodeParameters:ge,data:A.sMask};"filter"in A&&(O.filter=A.filter),N.call(this,O)}if(A.colorSpace===P.INDEXED){var M=this.internal.newObject();J({data:x(new Uint8Array(A.palette)),objectId:M}),D("endobj")}},s=function(){var N=this.internal.collections.addImage_images;for(var A in N)i.call(this,N[A])},o=function(){var N,A=this.internal.collections.addImage_images,D=this.internal.write;for(var J in A)D("/I"+(N=A[J]).index,N.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var N=this.internal.collections.addImage_images;return a.call(this),N},h=function(){return Object.keys(this.internal.collections.addImage_images).length},p=function(N){return typeof t["process"+N.toUpperCase()]=="function"},g=function(N){return qt(N)==="object"&&N.nodeType===1},v=function(N,A){if(N.nodeName==="IMG"&&N.hasAttribute("src")){var D=""+N.getAttribute("src");if(D.indexOf("data:image/")===0)return xh(unescape(D).split("base64,").pop());var J=t.loadFile(D,!0);if(J!==void 0)return J}if(N.nodeName==="CANVAS"){if(N.width===0||N.height===0)throw new Error("Given canvas must have data. Canvas width: "+N.width+", height: "+N.height);var ue;switch(A){case"PNG":ue="image/png";break;case"WEBP":ue="image/webp";break;case"JPEG":case"JPG":default:ue="image/jpeg"}return xh(N.toDataURL(ue,1).split("base64,").pop())}},f=function(N){var A=this.internal.collections.addImage_images;if(A){for(var D in A)if(N===A[D].alias)return A[D]}},E=function(N,A,D){return N||A||(N=-96,A=-96),N<0&&(N=-1*D.width*72/N/this.internal.scaleFactor),A<0&&(A=-1*D.height*72/A/this.internal.scaleFactor),N===0&&(N=A*D.width/D.height),A===0&&(A=N*D.height/D.width),[N,A]},k=function(N,A,D,J,ue,Z){var ee=E.call(this,D,J,ue),Q=this.internal.getCoordinateString,X=this.internal.getVerticalCoordinateString,se=l.call(this);if(D=ee[0],J=ee[1],se[ue.index]=ue,Z){Z*=Math.PI/180;var ge=Math.cos(Z),O=Math.sin(Z),M=function(Y){return Y.toFixed(4)},z=[M(ge),M(O),M(-1*O),M(ge),0,0,"cm"]}this.internal.write("q"),Z?(this.internal.write([1,"0","0",1,Q(N),X(A+J),"cm"].join(" ")),this.internal.write(z.join(" ")),this.internal.write([Q(D),"0","0",Q(J),"0","0","cm"].join(" "))):this.internal.write([Q(D),"0","0",Q(J),Q(N),X(A+J),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ue.index+" Do"),this.internal.write("Q")},P=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},_=t.__addimage__.sHashCode=function(N){var A,D,J=0;if(typeof N=="string")for(D=N.length,A=0;A<D;A++)J=(J<<5)-J+N.charCodeAt(A),J|=0;else if(W(N))for(D=N.byteLength/2,A=0;A<D;A++)J=(J<<5)-J+N[A],J|=0;return J},T=t.__addimage__.validateStringAsBase64=function(N){(N=N||"").toString().trim();var A=!0;return N.length===0&&(A=!1),N.length%4!=0&&(A=!1),/^[A-Za-z0-9+/]+$/.test(N.substr(0,N.length-2))===!1&&(A=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(N.substr(-2))===!1&&(A=!1),A},L=t.__addimage__.extractImageFromDataUrl=function(N){var A=(N=N||"").split("base64,"),D=null;if(A.length===2){var J=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(A[0]);Array.isArray(J)&&(D={mimeType:J[1],charset:J[2],data:A[1]})}return D},V=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(N){return V()&&N instanceof ArrayBuffer};var W=t.__addimage__.isArrayBufferView=function(N){return V()&&typeof Uint32Array<"u"&&(N instanceof Int8Array||N instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&N instanceof Uint8ClampedArray||N instanceof Int16Array||N instanceof Uint16Array||N instanceof Int32Array||N instanceof Uint32Array||N instanceof Float32Array||N instanceof Float64Array)},I=t.__addimage__.binaryStringToUint8Array=function(N){for(var A=N.length,D=new Uint8Array(A),J=0;J<A;J++)D[J]=N.charCodeAt(J);return D},x=t.__addimage__.arrayBufferToBinaryString=function(N){for(var A="",D=W(N)?N:new Uint8Array(N),J=0;J<D.length;J+=8192)A+=String.fromCharCode.apply(null,D.subarray(J,J+8192));return A};t.addImage=function(){var N,A,D,J,ue,Z,ee,Q,X;if(typeof arguments[1]=="number"?(A=e,D=arguments[1],J=arguments[2],ue=arguments[3],Z=arguments[4],ee=arguments[5],Q=arguments[6],X=arguments[7]):(A=arguments[1],D=arguments[2],J=arguments[3],ue=arguments[4],Z=arguments[5],ee=arguments[6],Q=arguments[7],X=arguments[8]),qt(N=arguments[0])==="object"&&!g(N)&&"imageData"in N){var se=N;N=se.imageData,A=se.format||A||e,D=se.x||D||0,J=se.y||J||0,ue=se.w||se.width||ue,Z=se.h||se.height||Z,ee=se.alias||ee,Q=se.compression||Q,X=se.rotation||se.angle||X}var ge=this.internal.getFilters();if(Q===void 0&&ge.indexOf("FlateEncode")!==-1&&(Q="SLOW"),isNaN(D)||isNaN(J))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var O=C.call(this,N,A,ee,Q);return k.call(this,D,J,ue,Z,O,X),this};var C=function(N,A,D,J){var ue,Z,ee;if(typeof N=="string"&&r(N)===e){N=unescape(N);var Q=j(N,!1);(Q!==""||(Q=t.loadFile(N,!0))!==void 0)&&(N=Q)}if(g(N)&&(N=v(N,A)),A=r(N,A),!p(A))throw new Error("addImage does not support files of type '"+A+"', please ensure that a plugin for '"+A+"' support is added.");if(((ee=D)==null||ee.length===0)&&(D=function(X){return typeof X=="string"||W(X)?_(X):W(X.data)?_(X.data):null}(N)),(ue=f.call(this,D))||(V()&&(N instanceof Uint8Array||A==="RGBA"||(Z=N,N=I(N))),ue=this["process"+A.toUpperCase()](N,h.call(this),D,function(X){return X&&typeof X=="string"&&(X=X.toUpperCase()),X in t.image_compression?X:w.NONE}(J),Z)),!ue)throw new Error("An unknown error occurred whilst processing the image.");return ue},j=t.__addimage__.convertBase64ToBinaryString=function(N,A){var D;A=typeof A!="boolean"||A;var J,ue="";if(typeof N=="string"){J=(D=L(N))!==null?D.data:N;try{ue=xh(J)}catch(Z){if(A)throw T(J)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Z.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ue};t.getImageProperties=function(N){var A,D,J="";if(g(N)&&(N=v(N)),typeof N=="string"&&r(N)===e&&((J=j(N,!1))===""&&(J=t.loadFile(N)||""),N=J),D=r(N),!p(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(!V()||N instanceof Uint8Array||(N=I(N)),!(A=this["process"+D.toUpperCase()](N)))throw new Error("An unknown error occurred whilst processing the image");return A.fileType=D,A}})(ot.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};ot.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),h=n.pageContext.annotations,p=!1,g=0;g<h.length&&!p;g++)switch((r=h[g]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var v=0;v<h.length;v++){r=h[v];var f=this.internal.pdfEscape,E=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var k=this.internal.newAdditionalObject(),P=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(k.objId),_=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+f(w(r.contents))+")",s+=" /Popup "+P.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+f(w(_))+") >>",k.content=s;var T=k.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+T,r.open&&(s+=" /Open true"),s+=" >>",P.content=s,this.internal.write(k.objId,"0 R",P.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var L=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+f(E(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+L+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var V=this.annotations._nameMap[r.options.name];r.options.pageNumber=V.page,r.options.top=V.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+f(E(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var W=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+W+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:h(r),w:l(n+i),h:h(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),h=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var p=this.splitTextToSize(n,a).length;o=Math.ceil(h*p)}else a=l,o=h;return this.text(n,r,i,s),i+=.2*h,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-h,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(ot.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(k){return e[k.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(k){return typeof k=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(k)},a=t.__arabicParser__.isArabicEndLetter=function(k){return o(k)&&s(k)&&e[k.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(k){return o(k)&&i.indexOf(k.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(k){return o(k)&&s(k)&&e[k.charCodeAt(0)].length>=1};var h=t.__arabicParser__.arabicLetterHasFinalForm=function(k){return o(k)&&s(k)&&e[k.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(k){return o(k)&&s(k)&&e[k.charCodeAt(0)].length>=3};var p=t.__arabicParser__.arabicLetterHasMedialForm=function(k){return o(k)&&s(k)&&e[k.charCodeAt(0)].length==4},g=t.__arabicParser__.resolveLigatures=function(k){var P=0,w=n,_="",T=0;for(P=0;P<k.length;P+=1)w[k.charCodeAt(P)]!==void 0?(T++,typeof(w=w[k.charCodeAt(P)])=="number"&&(_+=String.fromCharCode(w),w=n,T=0),P===k.length-1&&(w=n,_+=k.charAt(P-(T-1)),P-=T-1,T=0)):(w=n,_+=k.charAt(P-T),P-=T,T=0);return _};t.__arabicParser__.isArabicDiacritic=function(k){return k!==void 0&&r[k.charCodeAt(0)]!==void 0};var v=t.__arabicParser__.getCorrectForm=function(k,P,w){return o(k)?s(k)===!1?-1:!h(k)||!o(P)&&!o(w)||!o(w)&&a(P)||a(k)&&!o(P)||a(k)&&l(P)||a(k)&&a(P)?0:p(k)&&o(P)&&!a(P)&&o(w)&&h(w)?3:a(k)||!o(w)?1:2:-1},f=function(k){var P=0,w=0,_=0,T="",L="",V="",W=(k=k||"").split("\\s+"),I=[];for(P=0;P<W.length;P+=1){for(I.push(""),w=0;w<W[P].length;w+=1)T=W[P][w],L=W[P][w-1],V=W[P][w+1],o(T)?(_=v(T,L,V),I[P]+=_!==-1?String.fromCharCode(e[T.charCodeAt(0)][_]):T):I[P]+=T;I[P]=g(I[P])}return I.join(" ")},E=t.__arabicParser__.processArabic=t.processArabic=function(){var k,P=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(P)){var _=0;for(w=[],_=0;_<P.length;_+=1)Array.isArray(P[_])?w.push([f(P[_][0]),P[_][1],P[_][2]]):w.push([f(P[_])]);k=w}else k=f(P);return typeof arguments[0]=="string"?k:(arguments[0].text=k,arguments[0])};t.events.push(["preProcessText",E])}(ot.API),ot.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(ot.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(k){l=k}});var h=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return h},set:function(k){h=k}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(k){p=k}});var g=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return g},set:function(k){g=k}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(k){v=k}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(k){f=k}});var E=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return E},set:function(k){E=k}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,h){r.call(this);var p=(h=h||{}).fontSize||this.getFontSize(),g=h.font||this.getFont(),v=h.scaleFactor||this.internal.scaleFactor,f=0,E=0,k=0,P=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var w=h.maxWidth;w>0?typeof l=="string"?l=this.splitTextToSize(l,w):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(T,L){return T.concat(P.splitTextToSize(L,w))},[])):l=Array.isArray(l)?l:[l];for(var _=0;_<l.length;_++)f<(k=this.getStringUnitWidth(l[_],{font:g})*p)&&(f=k);return f!==0&&(E=l.length),{w:f/=v,h:Math.max((E*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/v,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var h=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,g=this.internal.__cell__.margins||e,v=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return h.lineNumber!==void 0&&(h.lineNumber===l.lineNumber?(l.x=(h.x||0)+(h.width||0),l.y=h.y||0):h.y+h.height+l.height+g.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=g.top,f&&v&&(this.printHeaderRow(l.lineNumber,!0),l.y+=v[0].height)):l.y=h.y+h.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-p,l.y+p,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+p,{align:"center",baseline:"top",maxWidth:l.width-p-p}):this.text(l.text,l.x+p,l.y+p,{align:"left",baseline:"top",maxWidth:l.width-p-p})),this.internal.__cell__.lastCell=l,this};t.table=function(l,h,p,g,v){if(r.call(this),!p)throw new Error("No data for PDF table.");var f,E,k,P,w=[],_=[],T=[],L={},V={},W=[],I=[],x=(v=v||{}).autoSize||!1,C=v.printHeaders!==!1,j=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,N=v.margins||Object.assign({width:this.getPageWidth()},e),A=typeof v.padding=="number"?v.padding:3,D=v.headerBackgroundColor||"#c8c8c8",J=v.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=C,this.internal.__cell__.margins=N,this.internal.__cell__.table_font_size=j,this.internal.__cell__.padding=A,this.internal.__cell__.headerBackgroundColor=D,this.internal.__cell__.headerTextColor=J,this.setFontSize(j),g==null)_=w=Object.keys(p[0]),T=w.map(function(){return"left"});else if(Array.isArray(g)&&qt(g[0])==="object")for(w=g.map(function(se){return se.name}),_=g.map(function(se){return se.prompt||se.name||""}),T=g.map(function(se){return se.align||"left"}),f=0;f<g.length;f+=1)V[g[f].name]=g[f].width*(19.049976/25.4);else Array.isArray(g)&&typeof g[0]=="string"&&(_=w=g,T=w.map(function(){return"left"}));if(x||Array.isArray(g)&&typeof g[0]=="string")for(f=0;f<w.length;f+=1){for(L[P=w[f]]=p.map(function(se){return se[P]}),this.setFont(void 0,"bold"),W.push(this.getTextDimensions(_[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),E=L[P],this.setFont(void 0,"normal"),k=0;k<E.length;k+=1)W.push(this.getTextDimensions(E[k],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);V[P]=Math.max.apply(null,W)+A+A,W=[]}if(C){var ue={};for(f=0;f<w.length;f+=1)ue[w[f]]={},ue[w[f]].text=_[f],ue[w[f]].align=T[f];var Z=a.call(this,ue,V);I=w.map(function(se){return new s(l,h,V[se],Z,ue[se].text,void 0,ue[se].align)}),this.setTableHeaderRow(I),this.printHeaderRow(1,!1)}var ee=g.reduce(function(se,ge){return se[ge.name]=ge.align,se},{});for(f=0;f<p.length;f+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:f,data:p[f]},this);var Q=a.call(this,p[f],V);for(k=0;k<w.length;k+=1){var X=p[f][w[k]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:f,col:k,data:X},this),o.call(this,new s(l,h,V[w[k]],Q,X,f+2,ee[w[k]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=h,this};var a=function(l,h){var p=this.internal.__cell__.padding,g=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(l).map(function(f){var E=l[f];return this.splitTextToSize(E.hasOwnProperty("text")?E.text:E,h[f]-p-p)},this).map(function(f){return this.getLineHeightFactor()*f.length*g/v+p+p},this).reduce(function(f,E){return Math.max(f,E)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,h){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var g=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(g[0],g[1],g[2],g[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){p=this.internal.__cell__.tableHeaderRow[f].clone(),h&&(p.y=this.internal.__cell__.margins.top||0,v.push(p)),p.lineNumber=l;var E=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,p),this.setTextColor(E)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),n=!1}}(ot.API);var IS={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},TS=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],s1=ES(TS),PS=[100,200,300,400,500,600,700,800,900],_R=ES(PS);function o1(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return IS[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof s1[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function dw(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var bR={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},fw={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function pw(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function xR(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},bR,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=o1(e[a])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[r]))throw new Error("Could not find a font-family for the rule '"+pw(s)+"' and default family '"+r+"'.");if(o=function(l,h){if(h[l])return h[l];var p=s1[l],g=p<=s1.normal?-1:1,v=dw(h,TS,p,g);if(!v)throw new Error("Could not find a matching font-stretch value for "+l);return v}(s.stretch,o),o=function(l,h){if(h[l])return h[l];for(var p=IS[l],g=0;g<p.length;++g)if(h[p[g]])return h[p[g]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,h){if(h[l])return h[l];if(l===400&&h[500])return h[500];if(l===500&&h[400])return h[400];var p=_R[l],g=dw(h,PS,p,l<400?-1:1);if(!g)throw new Error("Could not find a matching font-weight for value "+l);return g}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+pw(s)+"'.");return o}function mw(t){return t.trimLeft()}function SR(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function NR(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var _f,gw,yw,Lg=["times"];(function(t){var e,n,r,i,s,o,a,l,h,p=function(O){return O=O||{},this.isStrokeTransparent=O.isStrokeTransparent||!1,this.strokeOpacity=O.strokeOpacity||1,this.strokeStyle=O.strokeStyle||"#000000",this.fillStyle=O.fillStyle||"#000000",this.isFillTransparent=O.isFillTransparent||!1,this.fillOpacity=O.fillOpacity||1,this.font=O.font||"10px sans-serif",this.textBaseline=O.textBaseline||"alphabetic",this.textAlign=O.textAlign||"left",this.lineWidth=O.lineWidth||1,this.lineJoin=O.lineJoin||"miter",this.lineCap=O.lineCap||"butt",this.path=O.path||[],this.transform=O.transform!==void 0?O.transform.clone():new l,this.globalCompositeOperation=O.globalCompositeOperation||"normal",this.globalAlpha=O.globalAlpha||1,this.clip_path=O.clip_path||[],this.currentPoint=O.currentPoint||new o,this.miterLimit=O.miterLimit||10,this.lastPoint=O.lastPoint||new o,this.lineDashOffset=O.lineDashOffset||0,this.lineDash=O.lineDash||[],this.margin=O.margin||[0,0,0,0],this.prevPageLastElemOffset=O.prevPageLastElemOffset||0,this.ignoreClearRect=typeof O.ignoreClearRect!="boolean"||O.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new g(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,h=new p}]);var g=function(O){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var M=O;Object.defineProperty(this,"pdf",{get:function(){return M}});var z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return z},set:function(be){z=!!be}});var Y=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Y},set:function(be){Y=!!be}});var te=0;Object.defineProperty(this,"posX",{get:function(){return te},set:function(be){isNaN(be)||(te=be)}});var oe=0;Object.defineProperty(this,"posY",{get:function(){return oe},set:function(be){isNaN(be)||(oe=be)}}),Object.defineProperty(this,"margin",{get:function(){return h.margin},set:function(be){var ie;typeof be=="number"?ie=[be,be,be,be]:((ie=new Array(4))[0]=be[0],ie[1]=be.length>=2?be[1]:ie[0],ie[2]=be.length>=3?be[2]:ie[0],ie[3]=be.length>=4?be[3]:ie[1]),h.margin=ie}});var ae=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ae},set:function(be){ae=be}});var ye=0;Object.defineProperty(this,"lastBreak",{get:function(){return ye},set:function(be){ye=be}});var Ae=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ae},set:function(be){Ae=be}}),Object.defineProperty(this,"ctx",{get:function(){return h},set:function(be){be instanceof p&&(h=be)}}),Object.defineProperty(this,"path",{get:function(){return h.path},set:function(be){h.path=be}});var Te=[];Object.defineProperty(this,"ctxStack",{get:function(){return Te},set:function(be){Te=be}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(be){var ie;ie=v(be),this.ctx.fillStyle=ie.style,this.ctx.isFillTransparent=ie.a===0,this.ctx.fillOpacity=ie.a,this.pdf.setFillColor(ie.r,ie.g,ie.b,{a:ie.a}),this.pdf.setTextColor(ie.r,ie.g,ie.b,{a:ie.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(be){var ie=v(be);this.ctx.strokeStyle=ie.style,this.ctx.isStrokeTransparent=ie.a===0,this.ctx.strokeOpacity=ie.a,ie.a===0?this.pdf.setDrawColor(255,255,255):(ie.a,this.pdf.setDrawColor(ie.r,ie.g,ie.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(be){["butt","round","square"].indexOf(be)!==-1&&(this.ctx.lineCap=be,this.pdf.setLineCap(be))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(be){isNaN(be)||(this.ctx.lineWidth=be,this.pdf.setLineWidth(be))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(be){["bevel","round","miter"].indexOf(be)!==-1&&(this.ctx.lineJoin=be,this.pdf.setLineJoin(be))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(be){isNaN(be)||(this.ctx.miterLimit=be,this.pdf.setMiterLimit(be))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(be){this.ctx.textBaseline=be}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(be){["right","end","center","left","start"].indexOf(be)!==-1&&(this.ctx.textAlign=be)}});var Me=null;function Ve(be,ie){if(Me===null){var $e=function(De){var Ce=[];return Object.keys(De).forEach(function(Oe){De[Oe].forEach(function(qe){var Be=null;switch(qe){case"bold":Be={family:Oe,weight:"bold"};break;case"italic":Be={family:Oe,style:"italic"};break;case"bolditalic":Be={family:Oe,weight:"bold",style:"italic"};break;case"":case"normal":Be={family:Oe}}Be!==null&&(Be.ref={name:Oe,style:qe},Ce.push(Be))})}),Ce}(be.getFontList());Me=function(De){for(var Ce={},Oe=0;Oe<De.length;++Oe){var qe=o1(De[Oe]),Be=qe.family,tt=qe.stretch,rt=qe.style,ut=qe.weight;Ce[Be]=Ce[Be]||{},Ce[Be][tt]=Ce[Be][tt]||{},Ce[Be][tt][rt]=Ce[Be][tt][rt]||{},Ce[Be][tt][rt][ut]=qe}return Ce}($e.concat(ie))}return Me}var Ze=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ze},set:function(be){Me=null,Ze=be}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(be){var ie;if(this.ctx.font=be,(ie=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(be))!==null){var $e=ie[1],De=(ie[2],ie[3]),Ce=ie[4],Oe=(ie[5],ie[6]),qe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ce)[2];Ce=Math.floor(qe==="px"?parseFloat(Ce)*this.pdf.internal.scaleFactor:qe==="em"?parseFloat(Ce)*this.pdf.getFontSize():parseFloat(Ce)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ce);var Be=function(ct){var xt,Ge,pn=[],It=ct.trim();if(It==="")return Lg;if(It in fw)return[fw[It]];for(;It!=="";){switch(Ge=null,xt=(It=mw(It)).charAt(0)){case'"':case"'":Ge=SR(It.substring(1),xt);break;default:Ge=NR(It)}if(Ge===null||(pn.push(Ge[0]),(It=mw(Ge[1]))!==""&&It.charAt(0)!==","))return Lg;It=It.replace(/^,/,"")}return pn}(Oe);if(this.fontFaces){var tt=xR(Ve(this.pdf,this.fontFaces),Be.map(function(ct){return{family:ct,stretch:"normal",weight:De,style:$e}}));this.pdf.setFont(tt.ref.name,tt.ref.style)}else{var rt="";(De==="bold"||parseInt(De,10)>=700||$e==="bold")&&(rt="bold"),$e==="italic"&&(rt+="italic"),rt.length===0&&(rt="normal");for(var ut="",nt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ht=0;ht<Be.length;ht++){if(this.pdf.internal.getFont(Be[ht],rt,{noFallback:!0,disableWarning:!0})!==void 0){ut=Be[ht];break}if(rt==="bolditalic"&&this.pdf.internal.getFont(Be[ht],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ut=Be[ht],rt="bold";else if(this.pdf.internal.getFont(Be[ht],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ut=Be[ht],rt="normal";break}}if(ut===""){for(var kt=0;kt<Be.length;kt++)if(nt[Be[kt]]){ut=nt[Be[kt]];break}}ut=ut===""?"Times":ut,this.pdf.setFont(ut,rt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(be){this.ctx.globalCompositeOperation=be}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(be){this.ctx.globalAlpha=be}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(be){this.ctx.lineDashOffset=be,ge.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(be){this.ctx.lineDash=be,ge.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(be){this.ctx.ignoreClearRect=!!be}})};g.prototype.setLineDash=function(O){this.lineDash=O},g.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},g.prototype.fill=function(){L.call(this,"fill",!1)},g.prototype.stroke=function(){L.call(this,"stroke",!1)},g.prototype.beginPath=function(){this.path=[{type:"begin"}]},g.prototype.moveTo=function(O,M){if(isNaN(O)||isNaN(M))throw Qt.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var z=this.ctx.transform.applyToPoint(new o(O,M));this.path.push({type:"mt",x:z.x,y:z.y}),this.ctx.lastPoint=new o(O,M)},g.prototype.closePath=function(){var O=new o(0,0),M=0;for(M=this.path.length-1;M!==-1;M--)if(this.path[M].type==="begin"&&qt(this.path[M+1])==="object"&&typeof this.path[M+1].x=="number"){O=new o(this.path[M+1].x,this.path[M+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(O.x,O.y)},g.prototype.lineTo=function(O,M){if(isNaN(O)||isNaN(M))throw Qt.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var z=this.ctx.transform.applyToPoint(new o(O,M));this.path.push({type:"lt",x:z.x,y:z.y}),this.ctx.lastPoint=new o(z.x,z.y)},g.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),L.call(this,null,!0)},g.prototype.quadraticCurveTo=function(O,M,z,Y){if(isNaN(z)||isNaN(Y)||isNaN(O)||isNaN(M))throw Qt.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var te=this.ctx.transform.applyToPoint(new o(z,Y)),oe=this.ctx.transform.applyToPoint(new o(O,M));this.path.push({type:"qct",x1:oe.x,y1:oe.y,x:te.x,y:te.y}),this.ctx.lastPoint=new o(te.x,te.y)},g.prototype.bezierCurveTo=function(O,M,z,Y,te,oe){if(isNaN(te)||isNaN(oe)||isNaN(O)||isNaN(M)||isNaN(z)||isNaN(Y))throw Qt.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ae=this.ctx.transform.applyToPoint(new o(te,oe)),ye=this.ctx.transform.applyToPoint(new o(O,M)),Ae=this.ctx.transform.applyToPoint(new o(z,Y));this.path.push({type:"bct",x1:ye.x,y1:ye.y,x2:Ae.x,y2:Ae.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new o(ae.x,ae.y)},g.prototype.arc=function(O,M,z,Y,te,oe){if(isNaN(O)||isNaN(M)||isNaN(z)||isNaN(Y)||isNaN(te))throw Qt.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(oe=!!oe,!this.ctx.transform.isIdentity){var ae=this.ctx.transform.applyToPoint(new o(O,M));O=ae.x,M=ae.y;var ye=this.ctx.transform.applyToPoint(new o(0,z)),Ae=this.ctx.transform.applyToPoint(new o(0,0));z=Math.sqrt(Math.pow(ye.x-Ae.x,2)+Math.pow(ye.y-Ae.y,2))}Math.abs(te-Y)>=2*Math.PI&&(Y=0,te=2*Math.PI),this.path.push({type:"arc",x:O,y:M,radius:z,startAngle:Y,endAngle:te,counterclockwise:oe})},g.prototype.arcTo=function(O,M,z,Y,te){throw new Error("arcTo not implemented.")},g.prototype.rect=function(O,M,z,Y){if(isNaN(O)||isNaN(M)||isNaN(z)||isNaN(Y))throw Qt.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(O,M),this.lineTo(O+z,M),this.lineTo(O+z,M+Y),this.lineTo(O,M+Y),this.lineTo(O,M),this.lineTo(O+z,M),this.lineTo(O,M)},g.prototype.fillRect=function(O,M,z,Y){if(isNaN(O)||isNaN(M)||isNaN(z)||isNaN(Y))throw Qt.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var te={};this.lineCap!=="butt"&&(te.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(te.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(O,M,z,Y),this.fill(),te.hasOwnProperty("lineCap")&&(this.lineCap=te.lineCap),te.hasOwnProperty("lineJoin")&&(this.lineJoin=te.lineJoin)}},g.prototype.strokeRect=function(O,M,z,Y){if(isNaN(O)||isNaN(M)||isNaN(z)||isNaN(Y))throw Qt.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");E.call(this)||(this.beginPath(),this.rect(O,M,z,Y),this.stroke())},g.prototype.clearRect=function(O,M,z,Y){if(isNaN(O)||isNaN(M)||isNaN(z)||isNaN(Y))throw Qt.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(O,M,z,Y))},g.prototype.save=function(O){O=typeof O!="boolean"||O;for(var M=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("q");if(this.pdf.setPage(M),O){this.ctx.fontSize=this.pdf.internal.getFontSize();var Y=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Y}},g.prototype.restore=function(O){O=typeof O!="boolean"||O;for(var M=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("Q");this.pdf.setPage(M),O&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},g.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(O){var M,z,Y,te;if(O.isCanvasGradient===!0&&(O=O.getColor()),!O)return{r:0,g:0,b:0,a:0,style:O};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(O))M=0,z=0,Y=0,te=0;else{var oe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(O);if(oe!==null)M=parseInt(oe[1]),z=parseInt(oe[2]),Y=parseInt(oe[3]),te=1;else if((oe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(O))!==null)M=parseInt(oe[1]),z=parseInt(oe[2]),Y=parseInt(oe[3]),te=parseFloat(oe[4]);else{if(te=1,typeof O=="string"&&O.charAt(0)!=="#"){var ae=new _S(O);O=ae.ok?ae.toHex():"#000000"}O.length===4?(M=O.substring(1,2),M+=M,z=O.substring(2,3),z+=z,Y=O.substring(3,4),Y+=Y):(M=O.substring(1,3),z=O.substring(3,5),Y=O.substring(5,7)),M=parseInt(M,16),z=parseInt(z,16),Y=parseInt(Y,16)}}return{r:M,g:z,b:Y,a:te,style:O}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},E=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};g.prototype.fillText=function(O,M,z,Y){if(isNaN(M)||isNaN(z)||typeof O!="string")throw Qt.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Y=isNaN(Y)?void 0:Y,!f.call(this)){var te=Q(this.ctx.transform.rotation),oe=this.ctx.transform.scaleX;A.call(this,{text:O,x:M,y:z,scale:oe,angle:te,align:this.textAlign,maxWidth:Y})}},g.prototype.strokeText=function(O,M,z,Y){if(isNaN(M)||isNaN(z)||typeof O!="string")throw Qt.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!E.call(this)){Y=isNaN(Y)?void 0:Y;var te=Q(this.ctx.transform.rotation),oe=this.ctx.transform.scaleX;A.call(this,{text:O,x:M,y:z,scale:oe,renderingMode:"stroke",angle:te,align:this.textAlign,maxWidth:Y})}},g.prototype.measureText=function(O){if(typeof O!="string")throw Qt.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var M=this.pdf,z=this.pdf.internal.scaleFactor,Y=M.internal.getFontSize(),te=M.getStringUnitWidth(O)*Y/M.internal.scaleFactor,oe=function(ae){var ye=(ae=ae||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ye}}),this};return new oe({width:te*=Math.round(96*z/72*1e4)/1e4})},g.prototype.scale=function(O,M){if(isNaN(O)||isNaN(M))throw Qt.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var z=new l(O,0,0,M,0,0);this.ctx.transform=this.ctx.transform.multiply(z)},g.prototype.rotate=function(O){if(isNaN(O))throw Qt.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var M=new l(Math.cos(O),Math.sin(O),-Math.sin(O),Math.cos(O),0,0);this.ctx.transform=this.ctx.transform.multiply(M)},g.prototype.translate=function(O,M){if(isNaN(O)||isNaN(M))throw Qt.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var z=new l(1,0,0,1,O,M);this.ctx.transform=this.ctx.transform.multiply(z)},g.prototype.transform=function(O,M,z,Y,te,oe){if(isNaN(O)||isNaN(M)||isNaN(z)||isNaN(Y)||isNaN(te)||isNaN(oe))throw Qt.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ae=new l(O,M,z,Y,te,oe);this.ctx.transform=this.ctx.transform.multiply(ae)},g.prototype.setTransform=function(O,M,z,Y,te,oe){O=isNaN(O)?1:O,M=isNaN(M)?0:M,z=isNaN(z)?0:z,Y=isNaN(Y)?1:Y,te=isNaN(te)?0:te,oe=isNaN(oe)?0:oe,this.ctx.transform=new l(O,M,z,Y,te,oe)};var k=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};g.prototype.drawImage=function(O,M,z,Y,te,oe,ae,ye,Ae){var Te=this.pdf.getImageProperties(O),Me=1,Ve=1,Ze=1,be=1;Y!==void 0&&ye!==void 0&&(Ze=ye/Y,be=Ae/te,Me=Te.width/Y*ye/Y,Ve=Te.height/te*Ae/te),oe===void 0&&(oe=M,ae=z,M=0,z=0),Y!==void 0&&ye===void 0&&(ye=Y,Ae=te),Y===void 0&&ye===void 0&&(ye=Te.width,Ae=Te.height);for(var ie,$e=this.ctx.transform.decompose(),De=Q($e.rotate.shx),Ce=new l,Oe=(Ce=(Ce=(Ce=Ce.multiply($e.translate)).multiply($e.skew)).multiply($e.scale)).applyToRectangle(new a(oe-M*Ze,ae-z*be,Y*Me,te*Ve)),qe=P.call(this,Oe),Be=[],tt=0;tt<qe.length;tt+=1)Be.indexOf(qe[tt])===-1&&Be.push(qe[tt]);if(T(Be),this.autoPaging)for(var rt=Be[0],ut=Be[Be.length-1],nt=rt;nt<ut+1;nt++){this.pdf.setPage(nt);var ht=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],kt=nt===1?this.posY+this.margin[0]:this.margin[0],ct=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ge=nt===1?0:ct+(nt-2)*xt;if(this.ctx.clip_path.length!==0){var pn=this.path;ie=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(ie,this.posX+this.margin[3],-Ge+kt+this.ctx.prevPageLastElemOffset),V.call(this,"fill",!0),this.path=pn}var It=JSON.parse(JSON.stringify(Oe));It=_([It],this.posX+this.margin[3],-Ge+kt+this.ctx.prevPageLastElemOffset)[0];var Mr=(nt>rt||nt<ut)&&k.call(this);Mr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ht,xt,null).clip().discardPath()),this.pdf.addImage(O,"JPEG",It.x,It.y,It.w,It.h,null,null,De),Mr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(O,"JPEG",Oe.x,Oe.y,Oe.w,Oe.h,null,null,De)};var P=function(O,M,z){var Y=[];M=M||this.pdf.internal.pageSize.width,z=z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var te=this.posY+this.ctx.prevPageLastElemOffset;switch(O.type){default:case"mt":case"lt":Y.push(Math.floor((O.y+te)/z)+1);break;case"arc":Y.push(Math.floor((O.y+te-O.radius)/z)+1),Y.push(Math.floor((O.y+te+O.radius)/z)+1);break;case"qct":var oe=X(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x,O.y);Y.push(Math.floor((oe.y+te)/z)+1),Y.push(Math.floor((oe.y+oe.h+te)/z)+1);break;case"bct":var ae=se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x2,O.y2,O.x,O.y);Y.push(Math.floor((ae.y+te)/z)+1),Y.push(Math.floor((ae.y+ae.h+te)/z)+1);break;case"rect":Y.push(Math.floor((O.y+te)/z)+1),Y.push(Math.floor((O.y+O.h+te)/z)+1)}for(var ye=0;ye<Y.length;ye+=1)for(;this.pdf.internal.getNumberOfPages()<Y[ye];)w.call(this);return Y},w=function(){var O=this.fillStyle,M=this.strokeStyle,z=this.font,Y=this.lineCap,te=this.lineWidth,oe=this.lineJoin;this.pdf.addPage(),this.fillStyle=O,this.strokeStyle=M,this.font=z,this.lineCap=Y,this.lineWidth=te,this.lineJoin=oe},_=function(O,M,z){for(var Y=0;Y<O.length;Y++)switch(O[Y].type){case"bct":O[Y].x2+=M,O[Y].y2+=z;case"qct":O[Y].x1+=M,O[Y].y1+=z;case"mt":case"lt":case"arc":default:O[Y].x+=M,O[Y].y+=z}return O},T=function(O){return O.sort(function(M,z){return M-z})},L=function(O,M){for(var z,Y,te=this.fillStyle,oe=this.strokeStyle,ae=this.lineCap,ye=this.lineWidth,Ae=Math.abs(ye*this.ctx.transform.scaleX),Te=this.lineJoin,Me=JSON.parse(JSON.stringify(this.path)),Ve=JSON.parse(JSON.stringify(this.path)),Ze=[],be=0;be<Ve.length;be++)if(Ve[be].x!==void 0)for(var ie=P.call(this,Ve[be]),$e=0;$e<ie.length;$e+=1)Ze.indexOf(ie[$e])===-1&&Ze.push(ie[$e]);for(var De=0;De<Ze.length;De++)for(;this.pdf.internal.getNumberOfPages()<Ze[De];)w.call(this);if(T(Ze),this.autoPaging)for(var Ce=Ze[0],Oe=Ze[Ze.length-1],qe=Ce;qe<Oe+1;qe++){this.pdf.setPage(qe),this.fillStyle=te,this.strokeStyle=oe,this.lineCap=ae,this.lineWidth=Ae,this.lineJoin=Te;var Be=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],tt=qe===1?this.posY+this.margin[0]:this.margin[0],rt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ut=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],nt=qe===1?0:rt+(qe-2)*ut;if(this.ctx.clip_path.length!==0){var ht=this.path;z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(z,this.posX+this.margin[3],-nt+tt+this.ctx.prevPageLastElemOffset),V.call(this,O,!0),this.path=ht}if(Y=JSON.parse(JSON.stringify(Me)),this.path=_(Y,this.posX+this.margin[3],-nt+tt+this.ctx.prevPageLastElemOffset),M===!1||qe===0){var kt=(qe>Ce||qe<Oe)&&k.call(this);kt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Be,ut,null).clip().discardPath()),V.call(this,O,M),kt&&this.pdf.restoreGraphicsState()}this.lineWidth=ye}else this.lineWidth=Ae,V.call(this,O,M),this.lineWidth=ye;this.path=Me},V=function(O,M){if((O!=="stroke"||M||!E.call(this))&&(O==="stroke"||M||!f.call(this))){for(var z,Y,te=[],oe=this.path,ae=0;ae<oe.length;ae++){var ye=oe[ae];switch(ye.type){case"begin":te.push({begin:!0});break;case"close":te.push({close:!0});break;case"mt":te.push({start:ye,deltas:[],abs:[]});break;case"lt":var Ae=te.length;if(oe[ae-1]&&!isNaN(oe[ae-1].x)&&(z=[ye.x-oe[ae-1].x,ye.y-oe[ae-1].y],Ae>0)){for(;Ae>=0;Ae--)if(te[Ae-1].close!==!0&&te[Ae-1].begin!==!0){te[Ae-1].deltas.push(z),te[Ae-1].abs.push(ye);break}}break;case"bct":z=[ye.x1-oe[ae-1].x,ye.y1-oe[ae-1].y,ye.x2-oe[ae-1].x,ye.y2-oe[ae-1].y,ye.x-oe[ae-1].x,ye.y-oe[ae-1].y],te[te.length-1].deltas.push(z);break;case"qct":var Te=oe[ae-1].x+2/3*(ye.x1-oe[ae-1].x),Me=oe[ae-1].y+2/3*(ye.y1-oe[ae-1].y),Ve=ye.x+2/3*(ye.x1-ye.x),Ze=ye.y+2/3*(ye.y1-ye.y),be=ye.x,ie=ye.y;z=[Te-oe[ae-1].x,Me-oe[ae-1].y,Ve-oe[ae-1].x,Ze-oe[ae-1].y,be-oe[ae-1].x,ie-oe[ae-1].y],te[te.length-1].deltas.push(z);break;case"arc":te.push({deltas:[],abs:[],arc:!0}),Array.isArray(te[te.length-1].abs)&&te[te.length-1].abs.push(ye)}}Y=M?null:O==="stroke"?"stroke":"fill";for(var $e=!1,De=0;De<te.length;De++)if(te[De].arc)for(var Ce=te[De].abs,Oe=0;Oe<Ce.length;Oe++){var qe=Ce[Oe];qe.type==="arc"?x.call(this,qe.x,qe.y,qe.radius,qe.startAngle,qe.endAngle,qe.counterclockwise,void 0,M,!$e):D.call(this,qe.x,qe.y),$e=!0}else if(te[De].close===!0)this.pdf.internal.out("h"),$e=!1;else if(te[De].begin!==!0){var Be=te[De].start.x,tt=te[De].start.y;J.call(this,te[De].deltas,Be,tt),$e=!0}Y&&C.call(this,Y),M&&j.call(this)}},W=function(O){var M=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,z=M*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return O-z;case"top":return O+M-z;case"hanging":return O+M-2*z;case"middle":return O+M/2-z;case"ideographic":return O;case"alphabetic":default:return O}},I=function(O){return O+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};g.prototype.createLinearGradient=function(){var O=function(){};return O.colorStops=[],O.addColorStop=function(M,z){this.colorStops.push([M,z])},O.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},O.isCanvasGradient=!0,O},g.prototype.createPattern=function(){return this.createLinearGradient()},g.prototype.createRadialGradient=function(){return this.createLinearGradient()};var x=function(O,M,z,Y,te,oe,ae,ye,Ae){for(var Te=Z.call(this,z,Y,te,oe),Me=0;Me<Te.length;Me++){var Ve=Te[Me];Me===0&&(Ae?N.call(this,Ve.x1+O,Ve.y1+M):D.call(this,Ve.x1+O,Ve.y1+M)),ue.call(this,O,M,Ve.x2,Ve.y2,Ve.x3,Ve.y3,Ve.x4,Ve.y4)}ye?j.call(this):C.call(this,ae)},C=function(O){switch(O){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},j=function(){this.pdf.clip(),this.pdf.discardPath()},N=function(O,M){this.pdf.internal.out(n(O)+" "+r(M)+" m")},A=function(O){var M;switch(O.align){case"right":case"end":M="right";break;case"center":M="center";break;case"left":case"start":default:M="left"}var z=this.pdf.getTextDimensions(O.text),Y=W.call(this,O.y),te=I.call(this,Y)-z.h,oe=this.ctx.transform.applyToPoint(new o(O.x,Y)),ae=this.ctx.transform.decompose(),ye=new l;ye=(ye=(ye=ye.multiply(ae.translate)).multiply(ae.skew)).multiply(ae.scale);for(var Ae,Te,Me,Ve=this.ctx.transform.applyToRectangle(new a(O.x,Y,z.w,z.h)),Ze=ye.applyToRectangle(new a(O.x,te,z.w,z.h)),be=P.call(this,Ze),ie=[],$e=0;$e<be.length;$e+=1)ie.indexOf(be[$e])===-1&&ie.push(be[$e]);if(T(ie),this.autoPaging)for(var De=ie[0],Ce=ie[ie.length-1],Oe=De;Oe<Ce+1;Oe++){this.pdf.setPage(Oe);var qe=Oe===1?this.posY+this.margin[0]:this.margin[0],Be=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],tt=this.pdf.internal.pageSize.height-this.margin[2],rt=tt-this.margin[0],ut=this.pdf.internal.pageSize.width-this.margin[1],nt=ut-this.margin[3],ht=Oe===1?0:Be+(Oe-2)*rt;if(this.ctx.clip_path.length!==0){var kt=this.path;Ae=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(Ae,this.posX+this.margin[3],-1*ht+qe),V.call(this,"fill",!0),this.path=kt}var ct=_([JSON.parse(JSON.stringify(Ze))],this.posX+this.margin[3],-ht+qe+this.ctx.prevPageLastElemOffset)[0];O.scale>=.01&&(Te=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Te*O.scale),Me=this.lineWidth,this.lineWidth=Me*O.scale);var xt=this.autoPaging!=="text";if(xt||ct.y+ct.h<=tt){if(xt||ct.y>=qe&&ct.x<=ut){var Ge=xt?O.text:this.pdf.splitTextToSize(O.text,O.maxWidth||ut-ct.x)[0],pn=_([JSON.parse(JSON.stringify(Ve))],this.posX+this.margin[3],-ht+qe+this.ctx.prevPageLastElemOffset)[0],It=xt&&(Oe>De||Oe<Ce)&&k.call(this);It&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],nt,rt,null).clip().discardPath()),this.pdf.text(Ge,pn.x,pn.y,{angle:O.angle,align:M,renderingMode:O.renderingMode}),It&&this.pdf.restoreGraphicsState()}}else ct.y<tt&&(this.ctx.prevPageLastElemOffset+=tt-ct.y);O.scale>=.01&&(this.pdf.setFontSize(Te),this.lineWidth=Me)}else O.scale>=.01&&(Te=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Te*O.scale),Me=this.lineWidth,this.lineWidth=Me*O.scale),this.pdf.text(O.text,oe.x+this.posX,oe.y+this.posY,{angle:O.angle,align:M,renderingMode:O.renderingMode,maxWidth:O.maxWidth}),O.scale>=.01&&(this.pdf.setFontSize(Te),this.lineWidth=Me)},D=function(O,M,z,Y){z=z||0,Y=Y||0,this.pdf.internal.out(n(O+z)+" "+r(M+Y)+" l")},J=function(O,M,z){return this.pdf.lines(O,M,z,null,null)},ue=function(O,M,z,Y,te,oe,ae,ye){this.pdf.internal.out([e(i(z+O)),e(s(Y+M)),e(i(te+O)),e(s(oe+M)),e(i(ae+O)),e(s(ye+M)),"c"].join(" "))},Z=function(O,M,z,Y){for(var te=2*Math.PI,oe=Math.PI/2;M>z;)M-=te;var ae=Math.abs(z-M);ae<te&&Y&&(ae=te-ae);for(var ye=[],Ae=Y?-1:1,Te=M;ae>1e-5;){var Me=Te+Ae*Math.min(ae,oe);ye.push(ee.call(this,O,Te,Me)),ae-=Math.abs(Me-Te),Te=Me}return ye},ee=function(O,M,z){var Y=(z-M)/2,te=O*Math.cos(Y),oe=O*Math.sin(Y),ae=te,ye=-oe,Ae=ae*ae+ye*ye,Te=Ae+ae*te+ye*oe,Me=4/3*(Math.sqrt(2*Ae*Te)-Te)/(ae*oe-ye*te),Ve=ae-Me*ye,Ze=ye+Me*ae,be=Ve,ie=-Ze,$e=Y+M,De=Math.cos($e),Ce=Math.sin($e);return{x1:O*Math.cos(M),y1:O*Math.sin(M),x2:Ve*De-Ze*Ce,y2:Ve*Ce+Ze*De,x3:be*De-ie*Ce,y3:be*Ce+ie*De,x4:O*Math.cos(z),y4:O*Math.sin(z)}},Q=function(O){return 180*O/Math.PI},X=function(O,M,z,Y,te,oe){var ae=O+.5*(z-O),ye=M+.5*(Y-M),Ae=te+.5*(z-te),Te=oe+.5*(Y-oe),Me=Math.min(O,te,ae,Ae),Ve=Math.max(O,te,ae,Ae),Ze=Math.min(M,oe,ye,Te),be=Math.max(M,oe,ye,Te);return new a(Me,Ze,Ve-Me,be-Ze)},se=function(O,M,z,Y,te,oe,ae,ye){var Ae,Te,Me,Ve,Ze,be,ie,$e,De,Ce,Oe,qe,Be,tt,rt=z-O,ut=Y-M,nt=te-z,ht=oe-Y,kt=ae-te,ct=ye-oe;for(Te=0;Te<41;Te++)De=(ie=(Me=O+(Ae=Te/40)*rt)+Ae*((Ze=z+Ae*nt)-Me))+Ae*(Ze+Ae*(te+Ae*kt-Ze)-ie),Ce=($e=(Ve=M+Ae*ut)+Ae*((be=Y+Ae*ht)-Ve))+Ae*(be+Ae*(oe+Ae*ct-be)-$e),Te==0?(Oe=De,qe=Ce,Be=De,tt=Ce):(Oe=Math.min(Oe,De),qe=Math.min(qe,Ce),Be=Math.max(Be,De),tt=Math.max(tt,Ce));return new a(Math.round(Oe),Math.round(qe),Math.round(Be-Oe),Math.round(tt-qe))},ge=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var O,M,z=(O=this.ctx.lineDash,M=this.ctx.lineDashOffset,JSON.stringify({lineDash:O,lineDashOffset:M}));this.prevLineDash!==z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=z)}}})(ot.API),function(t){var e=function(s){var o,a,l,h,p,g,v,f,E,k;for(a=[],l=0,h=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;h>l;l+=4)(p=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(g=(p=((p=((p=((p=(p-(k=p%85))/85)-(E=p%85))/85)-(f=p%85))/85)-(v=p%85))/85)%85,a.push(g+33,v+33,f+33,E+33,k+33)):a.push(122);return function(P,w){for(var _=w;_>0;_--)P.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(s){var o,a,l,h,p,g=String,v="length",f=255,E="charCodeAt",k="slice",P="replace";for(s[k](-2),s=s[k](0,-2)[P](/\s/g,"")[P]("z","!!!!!"),l=[],h=0,p=(s+=o="uuuuu"[k](s[v]%5||5))[v];p>h;h+=5)a=52200625*(s[E](h)-33)+614125*(s[E](h+1)-33)+7225*(s[E](h+2)-33)+85*(s[E](h+3)-33)+(s[E](h+4)-33),l.push(f&a>>24,f&a>>16,f&a>>8,f&a);return function(w,_){for(var T=_;T>0;T--)w.pop()}(l,o[v]),g.fromCharCode.apply(g,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=e1(o)).reduce(function(l,h){return l+String.fromCharCode(h)},"")};t.processDataByFilters=function(s,o){var a=0,l=s||"",h=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(p){return("0"+p.charCodeAt().toString(16)).slice(-2)}).join("")+">",h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:h.reverse().join(" ")}}}(ot.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,h,p){var g=new XMLHttpRequest,v=0,f=function(E){var k=E.length,P=[],w=String.fromCharCode;for(v=0;v<k;v+=1)P.push(w(255&E.charCodeAt(v)));return P.join("")};if(g.open("GET",l,!h),g.overrideMimeType("text/plain; charset=x-user-defined"),h===!1&&(g.onload=function(){g.status===200?p(f(this.responseText)):p(void 0)}),g.send(null),h&&g.status===200)return f(g.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(ot.API),function(t){function e(){return(dt.html2canvas?Promise.resolve(dt.html2canvas):zl(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(dt.DOMPurify?Promise.resolve(dt.DOMPurify):zl(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=qt(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var h in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[h]=a.style[h];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),h=o.convert(Promise.resolve(),l);return h=(h=h.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(h,p){for(var g=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),v=h.firstChild;v;v=v.nextSibling)p!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||g.appendChild(l(v,p));return h.nodeType===1&&(h.nodeName==="CANVAS"?(g.width=h.width,g.height=h.height,g.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(g.value=h.value),g.addEventListener("load",function(){g.scrollTop=h.scrollTop,g.scrollLeft=h.scrollLeft},!0)),g}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,h=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,g=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete g.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=h,h)for(var v=0;v<h.length;++v){var f=h[v],E=f.src.find(function(k){return k.format==="truetype"});E&&l.addFont(E.url,f.ref.name,f.ref.style)}return g.windowHeight=g.windowHeight||0,g.windowHeight=g.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):g.windowHeight,l.context2d.save(!0),a(this.prop.container,g)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,h){return Math.floor(l*h/72*96)}return this.then(function(){(o=o||ot.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,h){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,h){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,h?this.progress.stack.concat(h):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(h,p){return l.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,function(g){return l.updateProgress(null,h),g}).then(h,p).then(function(g){return l.updateProgress(1),g})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var h=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),p=l.call(h,o,a);return s.convert(p,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,ot.getPageSize=function(o,a,l){if(qt(o)==="object"){var h=o;o=h.orientation,a=h.unit||a,l=h.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var p,g=(""+l).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+a}var f,E=0,k=0;if(v.hasOwnProperty(g))E=v[g][1]/p,k=v[g][0]/p;else try{E=l[1],k=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",k>E&&(f=k,k=E,E=f);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",E>k&&(f=k,k=E,E=f)}return{width:k,height:E,unit:a,k:p,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(o1):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(ot.API),ot.API.addJS=function(t){return yw=t,this.internal.events.subscribe("postPutResources",function(){_f=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(_f+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),gw=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+yw+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){_f!==void 0&&gw!==void 0&&this.internal.out("/Names <</JavaScript "+_f+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var h=this.internal.pages.length,p=[];for(s=0;s<h;s++){var g=n.internal.newObject();p.push(g);var v=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var f=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<p.length;s++)n.internal.write("(page_"+(s+1)+")"+p[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+f+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var h=0;h<r.children.length;h++)this.renderItems(r.children[h])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(ot.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,h=this.decode.DCT_DECODE,p=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(g){for(var v,f=256*g.charCodeAt(4)+g.charCodeAt(5),E=g.length,k={width:0,height:0,numcomponents:1},P=4;P<E;P+=2){if(P+=f,e.indexOf(g.charCodeAt(P+1))!==-1){v=256*g.charCodeAt(P+5)+g.charCodeAt(P+6),k={width:256*g.charCodeAt(P+7)+g.charCodeAt(P+8),height:v,numcomponents:g.charCodeAt(P+9)};break}f=256*g.charCodeAt(P+2)+g.charCodeAt(P+3)}return k}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}p={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:h,index:r,alias:i}}return p}}(ot.API);var _u,bf,vw,ww,_w,AR=function(){var t,e,n;function r(s){var o,a,l,h,p,g,v,f,E,k,P,w,_,T;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},g=null;;){switch(o=this.readUInt32(),E=(function(){var L,V;for(V=[],L=0;L<4;++L)V.push(String.fromCharCode(this.data[this.pos++]));return V}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":g&&this.animation.frames.push(g),this.pos+=4,g={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},p=this.readUInt16(),h=this.readUInt16()||100,g.delay=1e3*p/h,g.disposeOp=this.data[this.pos++],g.blendOp=this.data[this.pos++],g.data=[];break;case"IDAT":case"fdAT":for(E==="fdAT"&&(this.pos+=4,o-=4),s=(g!=null?g.data:void 0)||this.imgData,w=0;0<=o?w<o:w>o;0<=o?++w:--w)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((k=l-this.transparency.indexed.length)>0)for(_=0;0<=k?_<k:_>k;0<=k?++_:--_)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":v=(P=this.read(o)).indexOf(0),f=String.fromCharCode.apply(String,P.slice(0,v)),this.text[f]=String.fromCharCode.apply(String,P.slice(v+1));break;case"IEND":return g&&this.animation.frames.push(g),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(T=this.colorType)===4||T===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,h=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function p(g,v,f,E){var k,P,w,_,T,L,V,W,I,x,C,j,N,A,D,J,ue,Z,ee,Q,X,se=Math.ceil((h.width-g)/f),ge=Math.ceil((h.height-v)/E),O=h.width==se&&h.height==ge;for(A=o*se,j=O?a:new Uint8Array(A*ge),L=s.length,N=0,P=0;N<ge&&l<L;){switch(s[l++]){case 0:for(_=ue=0;ue<A;_=ue+=1)j[P++]=s[l++];break;case 1:for(_=Z=0;Z<A;_=Z+=1)k=s[l++],T=_<o?0:j[P-o],j[P++]=(k+T)%256;break;case 2:for(_=ee=0;ee<A;_=ee+=1)k=s[l++],w=(_-_%o)/o,D=N&&j[(N-1)*A+w*o+_%o],j[P++]=(D+k)%256;break;case 3:for(_=Q=0;Q<A;_=Q+=1)k=s[l++],w=(_-_%o)/o,T=_<o?0:j[P-o],D=N&&j[(N-1)*A+w*o+_%o],j[P++]=(k+Math.floor((T+D)/2))%256;break;case 4:for(_=X=0;X<A;_=X+=1)k=s[l++],w=(_-_%o)/o,T=_<o?0:j[P-o],N===0?D=J=0:(D=j[(N-1)*A+w*o+_%o],J=w&&j[(N-1)*A+(w-1)*o+_%o]),V=T+D-J,W=Math.abs(V-T),x=Math.abs(V-D),C=Math.abs(V-J),I=W<=x&&W<=C?T:x<=C?D:J,j[P++]=(k+I)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!O){var M=((v+N*E)*h.width+g)*o,z=N*A;for(_=0;_<se;_+=1){for(var Y=0;Y<o;Y+=1)a[M++]=j[z++];M+=(f-1)*o}}N++}}return s=nR(s),h.interlaceMethod==1?(p(0,0,8,8),p(4,0,8,8),p(0,4,4,8),p(2,0,4,4),p(0,2,2,4),p(1,0,2,2),p(0,1,1,2)):p(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,h,p,g,v,f;for(a=this.palette,p=this.transparency.indexed||[],h=new Uint8Array((p.length||0)+a.length),l=0,s=0,o=g=0,v=a.length;g<v;o=g+=3)h[l++]=a[o],h[l++]=a[o+1],h[l++]=a[o+2],h[l++]=(f=p[s++])!=null?f:255;return h},r.prototype.copyToImageData=function(s,o){var a,l,h,p,g,v,f,E,k,P,w;if(l=this.colors,k=null,a=this.hasAlphaChannel,this.palette.length&&(k=(w=this._decodedPalette)!=null?w:this._decodedPalette=this.decodePalette(),l=4,a=!0),E=(h=s.data||s).length,g=k||o,p=v=0,l===1)for(;p<E;)f=k?4*o[p/4]:v,P=g[f++],h[p++]=P,h[p++]=P,h[p++]=P,h[p++]=a?g[f++]:255,v=f;else for(;p<E;)f=k?4*o[p/4]:v,h[p++]=g[f++],h[p++]=g[f++],h[p++]=g[f++],h[p++]=a?g[f++]:255,v=f},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(dt)==="[object Window]"){try{e=dt.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var o;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,h,p,g,v,f;if(this.animation){for(f=[],a=p=0,g=(v=this.animation.frames).length;p<g;a=++p)o=v[a],l=s.createImageData(o.width,o.height),h=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,h),o.imageData=l,f.push(o.image=t(l));return f}},r.prototype.renderFrame=function(s,o){var a,l,h;return a=(l=this.animation.frames)[o],h=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(h!=null?h.disposeOp:void 0)===1?s.clearRect(h.xOffset,h.yOffset,h.width,h.height):(h!=null?h.disposeOp:void 0)===2&&s.putImageData(h.imageData,h.xOffset,h.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,h,p,g,v=this;return a=0,g=this.animation,h=g.numFrames,l=g.frames,p=g.numPlays,(o=function(){var f,E;if(f=a++%h,E=l[f],v.renderFrame(s,f),h>1&&a/h<p)return v.animation._timeout=setTimeout(o,E.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function ER(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var h=!0,p=[],g=0,v=null,f=0,E=null;for(this.width=n,this.height=r;h&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,E=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((N=t[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var k=t[e++];g=t[e++]|t[e++]<<8,v=t[e++],!(1&k)&&(v=null),f=k>>2&7,e++;break;case 254:for(;;){if(!((N=t[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var P=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,_=t[e++]|t[e++]<<8,T=t[e++]|t[e++]<<8,L=t[e++],V=L>>6&1,W=1<<(7&L)+1,I=a,x=l,C=!1;L>>7&&(C=!0,I=e,x=W,e+=3*W);var j=e;for(e++;;){var N;if(!((N=t[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}p.push({x:P,y:w,width:_,height:T,has_local_palette:C,palette_offset:I,palette_size:x,data_offset:j,data_length:e-j,transparent_index:v,interlaced:!!V,delay:g,disposal:f});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return E},this.frameInfo=function(A){if(A<0||A>=p.length)throw new Error("Frame index out of range.");return p[A]},this.decodeAndBlitFrameBGRA=function(A,D){var J=this.frameInfo(A),ue=J.width*J.height,Z=new Uint8Array(ue);bw(t,J.data_offset,Z,ue);var ee=J.palette_offset,Q=J.transparent_index;Q===null&&(Q=256);var X=J.width,se=n-X,ge=X,O=4*(J.y*n+J.x),M=4*((J.y+J.height)*n+J.x),z=O,Y=4*se;J.interlaced===!0&&(Y+=4*n*7);for(var te=8,oe=0,ae=Z.length;oe<ae;++oe){var ye=Z[oe];if(ge===0&&(ge=X,(z+=Y)>=M&&(Y=4*se+4*n*(te-1),z=O+(X+se)*(te<<1),te>>=1)),ye===Q)z+=4;else{var Ae=t[ee+3*ye],Te=t[ee+3*ye+1],Me=t[ee+3*ye+2];D[z++]=Me,D[z++]=Te,D[z++]=Ae,D[z++]=255}--ge}},this.decodeAndBlitFrameRGBA=function(A,D){var J=this.frameInfo(A),ue=J.width*J.height,Z=new Uint8Array(ue);bw(t,J.data_offset,Z,ue);var ee=J.palette_offset,Q=J.transparent_index;Q===null&&(Q=256);var X=J.width,se=n-X,ge=X,O=4*(J.y*n+J.x),M=4*((J.y+J.height)*n+J.x),z=O,Y=4*se;J.interlaced===!0&&(Y+=4*n*7);for(var te=8,oe=0,ae=Z.length;oe<ae;++oe){var ye=Z[oe];if(ge===0&&(ge=X,(z+=Y)>=M&&(Y=4*se+4*n*(te-1),z=O+(X+se)*(te<<1),te>>=1)),ye===Q)z+=4;else{var Ae=t[ee+3*ye],Te=t[ee+3*ye+1],Me=t[ee+3*ye+2];D[z++]=Ae,D[z++]=Te,D[z++]=Me,D[z++]=255}--ge}}}function bw(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,h=(1<<l)-1,p=0,g=0,v=0,f=t[e++],E=new Int32Array(4096),k=null;;){for(;p<16&&f!==0;)g|=t[e++]<<p,p+=8,f===1?f=t[e++]:--f;if(p<l)break;var P=g&h;if(g>>=l,p-=l,P!==s){if(P===o)break;for(var w=P<a?P:k,_=0,T=w;T>s;)T=E[T]>>8,++_;var L=T;if(v+_+(w!==P?1:0)>r)return void Qt.log("Warning, gif stream longer than expected.");n[v++]=L;var V=v+=_;for(w!==P&&(n[v++]=L),T=w;_--;)T=E[T],n[--V]=255&T,T>>=8;k!==null&&a<4096&&(E[a++]=k<<8|L,a>=h+1&&l<12&&(++l,h=h<<1|1)),k=P}else a=o+1,h=(1<<(l=i+1))-1,k=null}return v!==r&&Qt.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Rg(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),h=new Array(64),p=new Array(64),g=new Array(65535),v=new Array(65535),f=new Array(64),E=new Array(64),k=[],P=0,w=7,_=new Array(64),T=new Array(64),L=new Array(64),V=new Array(256),W=new Array(2048),I=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],x=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],C=[0,1,2,3,4,5,6,7,8,9,10,11],j=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],N=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],A=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ue=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Z(O,M){for(var z=0,Y=0,te=new Array,oe=1;oe<=16;oe++){for(var ae=1;ae<=O[oe];ae++)te[M[Y]]=[],te[M[Y]][0]=z,te[M[Y]][1]=oe,Y++,z++;z*=2}return te}function ee(O){for(var M=O[0],z=O[1]-1;z>=0;)M&1<<z&&(P|=1<<w),z--,--w<0&&(P==255?(Q(255),Q(0)):Q(P),w=7,P=0)}function Q(O){k.push(O)}function X(O){Q(O>>8&255),Q(255&O)}function se(O,M,z,Y,te){for(var oe,ae=te[0],ye=te[240],Ae=function(Ce,Oe){var qe,Be,tt,rt,ut,nt,ht,kt,ct,xt,Ge=0;for(ct=0;ct<8;++ct){qe=Ce[Ge],Be=Ce[Ge+1],tt=Ce[Ge+2],rt=Ce[Ge+3],ut=Ce[Ge+4],nt=Ce[Ge+5],ht=Ce[Ge+6];var pn=qe+(kt=Ce[Ge+7]),It=qe-kt,Mr=Be+ht,Ft=Be-ht,Yt=tt+nt,gi=tt-nt,Pt=rt+ut,ss=rt-ut,tn=pn+Pt,Jn=pn-Pt,Zr=Mr+Yt,Jt=Mr-Yt;Ce[Ge]=tn+Zr,Ce[Ge+4]=tn-Zr;var at=.707106781*(Jt+Jn);Ce[Ge+2]=Jn+at,Ce[Ge+6]=Jn-at;var Lt=.382683433*((tn=ss+gi)-(Jt=Ft+It)),yi=.5411961*tn+Lt,Cn=1.306562965*Jt+Lt,ur=.707106781*(Zr=gi+Ft),ei=It+ur,Ye=It-ur;Ce[Ge+5]=Ye+yi,Ce[Ge+3]=Ye-yi,Ce[Ge+1]=ei+Cn,Ce[Ge+7]=ei-Cn,Ge+=8}for(Ge=0,ct=0;ct<8;++ct){qe=Ce[Ge],Be=Ce[Ge+8],tt=Ce[Ge+16],rt=Ce[Ge+24],ut=Ce[Ge+32],nt=Ce[Ge+40],ht=Ce[Ge+48];var Vr=qe+(kt=Ce[Ge+56]),cr=qe-kt,kn=Be+ht,_n=Be-ht,mn=tt+nt,Ln=tt-nt,Eo=rt+ut,Di=rt-ut,hr=Vr+Eo,Br=Vr-Eo,Er=kn+mn,Ir=kn-mn;Ce[Ge]=hr+Er,Ce[Ge+32]=hr-Er;var bn=.707106781*(Ir+Br);Ce[Ge+16]=Br+bn,Ce[Ge+48]=Br-bn;var ti=.382683433*((hr=Di+Ln)-(Ir=_n+cr)),os=.5411961*hr+ti,as=1.306562965*Ir+ti,ls=.707106781*(Er=Ln+_n),Fs=cr+ls,Os=cr-ls;Ce[Ge+40]=Os+os,Ce[Ge+24]=Os-os,Ce[Ge+8]=Fs+as,Ce[Ge+56]=Fs-as,Ge++}for(ct=0;ct<64;++ct)xt=Ce[ct]*Oe[ct],f[ct]=xt>0?xt+.5|0:xt-.5|0;return f}(O,M),Te=0;Te<64;++Te)E[I[Te]]=Ae[Te];var Me=E[0]-z;z=E[0],Me==0?ee(Y[0]):(ee(Y[v[oe=32767+Me]]),ee(g[oe]));for(var Ve=63;Ve>0&&E[Ve]==0;)Ve--;if(Ve==0)return ee(ae),z;for(var Ze,be=1;be<=Ve;){for(var ie=be;E[be]==0&&be<=Ve;)++be;var $e=be-ie;if($e>=16){Ze=$e>>4;for(var De=1;De<=Ze;++De)ee(ye);$e&=15}oe=32767+E[be],ee(te[($e<<4)+v[oe]]),ee(g[oe]),be++}return Ve!=63&&ee(ae),z}function ge(O){O=Math.min(Math.max(O,1),100),s!=O&&(function(M){for(var z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Y=0;Y<64;Y++){var te=o((z[Y]*M+50)/100);te=Math.min(Math.max(te,1),255),a[I[Y]]=te}for(var oe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ae=0;ae<64;ae++){var ye=o((oe[ae]*M+50)/100);ye=Math.min(Math.max(ye,1),255),l[I[ae]]=ye}for(var Ae=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Te=0,Me=0;Me<8;Me++)for(var Ve=0;Ve<8;Ve++)h[Te]=1/(a[I[Te]]*Ae[Me]*Ae[Ve]*8),p[Te]=1/(l[I[Te]]*Ae[Me]*Ae[Ve]*8),Te++}(O<50?Math.floor(5e3/O):Math.floor(200-2*O)),s=O)}this.encode=function(O,M){M&&ge(M),k=new Array,P=0,w=7,X(65496),X(65504),X(16),Q(74),Q(70),Q(73),Q(70),Q(0),Q(1),Q(1),Q(0),X(1),X(1),Q(0),Q(0),function(){X(65499),X(132),Q(0);for(var Be=0;Be<64;Be++)Q(a[Be]);Q(1);for(var tt=0;tt<64;tt++)Q(l[tt])}(),function(Be,tt){X(65472),X(17),Q(8),X(tt),X(Be),Q(3),Q(1),Q(17),Q(0),Q(2),Q(17),Q(1),Q(3),Q(17),Q(1)}(O.width,O.height),function(){X(65476),X(418),Q(0);for(var Be=0;Be<16;Be++)Q(x[Be+1]);for(var tt=0;tt<=11;tt++)Q(C[tt]);Q(16);for(var rt=0;rt<16;rt++)Q(j[rt+1]);for(var ut=0;ut<=161;ut++)Q(N[ut]);Q(1);for(var nt=0;nt<16;nt++)Q(A[nt+1]);for(var ht=0;ht<=11;ht++)Q(D[ht]);Q(17);for(var kt=0;kt<16;kt++)Q(J[kt+1]);for(var ct=0;ct<=161;ct++)Q(ue[ct])}(),X(65498),X(12),Q(3),Q(1),Q(0),Q(2),Q(17),Q(3),Q(17),Q(0),Q(63),Q(0);var z=0,Y=0,te=0;P=0,w=7,this.encode.displayName="_encode_";for(var oe,ae,ye,Ae,Te,Me,Ve,Ze,be,ie=O.data,$e=O.width,De=O.height,Ce=4*$e,Oe=0;Oe<De;){for(oe=0;oe<Ce;){for(Te=Ce*Oe+oe,Ve=-1,Ze=0,be=0;be<64;be++)Me=Te+(Ze=be>>3)*Ce+(Ve=4*(7&be)),Oe+Ze>=De&&(Me-=Ce*(Oe+1+Ze-De)),oe+Ve>=Ce&&(Me-=oe+Ve-Ce+4),ae=ie[Me++],ye=ie[Me++],Ae=ie[Me++],_[be]=(W[ae]+W[ye+256>>0]+W[Ae+512>>0]>>16)-128,T[be]=(W[ae+768>>0]+W[ye+1024>>0]+W[Ae+1280>>0]>>16)-128,L[be]=(W[ae+1280>>0]+W[ye+1536>>0]+W[Ae+1792>>0]>>16)-128;z=se(_,h,z,e,r),Y=se(T,p,Y,n,i),te=se(L,p,te,n,i),oe+=32}Oe+=8}if(w>=0){var qe=[];qe[1]=w+1,qe[0]=(1<<w+1)-1,ee(qe)}return X(65497),new Uint8Array(k)},t=t||50,function(){for(var O=String.fromCharCode,M=0;M<256;M++)V[M]=O(M)}(),e=Z(x,C),n=Z(A,D),r=Z(j,N),i=Z(J,ue),function(){for(var O=1,M=2,z=1;z<=15;z++){for(var Y=O;Y<M;Y++)v[32767+Y]=z,g[32767+Y]=[],g[32767+Y][1]=z,g[32767+Y][0]=Y;for(var te=-(M-1);te<=-O;te++)v[32767+te]=z,g[32767+te]=[],g[32767+te][1]=z,g[32767+te][0]=M-1+te;O<<=1,M<<=1}}(),function(){for(var O=0;O<256;O++)W[O]=19595*O,W[O+256>>0]=38470*O,W[O+512>>0]=7471*O+32768,W[O+768>>0]=-11059*O,W[O+1024>>0]=-21709*O,W[O+1280>>0]=32768*O+8421375,W[O+1536>>0]=-27439*O,W[O+1792>>0]=-5329*O}(),ge(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Gi(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function xw(t){function e(x){if(!x)throw Error("assert :P")}function n(x,C,j){for(var N=0;4>N;N++)if(x[C+N]!=j.charCodeAt(N))return!0;return!1}function r(x,C,j,N,A){for(var D=0;D<A;D++)x[C+D]=j[N+D]}function i(x,C,j,N){for(var A=0;A<N;A++)x[C+A]=j}function s(x){return new Int32Array(x)}function o(x,C){for(var j=[],N=0;N<x;N++)j.push(new C);return j}function a(x,C){var j=[];return function N(A,D,J){for(var ue=J[D],Z=0;Z<ue&&(A.push(J.length>D+1?[]:new C),!(J.length<D+1));Z++)N(A[Z],D+1,J)}(j,0,x),j}var l=function(){var x=this;function C(u,d){for(var b=1<<d-1>>>0;u&b;)b>>>=1;return b?(u&b-1)+b:u}function j(u,d,b,R,U){e(!(R%b));do u[d+(R-=b)]=U;while(0<R)}function N(u,d,b,R,U){if(e(2328>=U),512>=U)var q=s(512);else if((q=s(U))==null)return 0;return function(H,G,K,ne,ce,ve){var we,me,Ie=G,xe=1<<K,he=s(16),de=s(16);for(e(ce!=0),e(ne!=null),e(H!=null),e(0<K),me=0;me<ce;++me){if(15<ne[me])return 0;++he[ne[me]]}if(he[0]==ce)return 0;for(de[1]=0,we=1;15>we;++we){if(he[we]>1<<we)return 0;de[we+1]=de[we]+he[we]}for(me=0;me<ce;++me)we=ne[me],0<ne[me]&&(ve[de[we]++]=me);if(de[15]==1)return(ne=new A).g=0,ne.value=ve[0],j(H,Ie,1,xe,ne),xe;var Ne,ke=-1,Ee=xe-1,Ke=0,ze=1,lt=1,We=1<<K;for(me=0,we=1,ce=2;we<=K;++we,ce<<=1){if(ze+=lt<<=1,0>(lt-=he[we]))return 0;for(;0<he[we];--he[we])(ne=new A).g=we,ne.value=ve[me++],j(H,Ie+Ke,ce,We,ne),Ke=C(Ke,we)}for(we=K+1,ce=2;15>=we;++we,ce<<=1){if(ze+=lt<<=1,0>(lt-=he[we]))return 0;for(;0<he[we];--he[we]){if(ne=new A,(Ke&Ee)!=ke){for(Ie+=We,Ne=1<<(ke=we)-K;15>ke&&!(0>=(Ne-=he[ke]));)++ke,Ne<<=1;xe+=We=1<<(Ne=ke-K),H[G+(ke=Ke&Ee)].g=Ne+K,H[G+ke].value=Ie-G-ke}ne.g=we-K,ne.value=ve[me++],j(H,Ie+(Ke>>K),ce,We,ne),Ke=C(Ke,we)}}return ze!=2*de[15]-1?0:xe}(u,d,b,R,U,q)}function A(){this.value=this.g=0}function D(){this.value=this.g=0}function J(){this.G=o(5,A),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(er,D)}function ue(u,d,b,R){e(u!=null),e(d!=null),e(2147483648>R),u.Ca=254,u.I=0,u.b=-8,u.Ka=0,u.oa=d,u.pa=b,u.Jd=d,u.Yc=b+R,u.Zc=4<=R?b+R-4+1:b,oe(u)}function Z(u,d){for(var b=0;0<d--;)b|=ye(u,128)<<d;return b}function ee(u,d){var b=Z(u,d);return ae(u)?-b:b}function Q(u,d,b,R){var U,q=0;for(e(u!=null),e(d!=null),e(4294967288>R),u.Sb=R,u.Ra=0,u.u=0,u.h=0,4<R&&(R=4),U=0;U<R;++U)q+=d[b+U]<<8*U;u.Ra=q,u.bb=R,u.oa=d,u.pa=b}function X(u){for(;8<=u.u&&u.bb<u.Sb;)u.Ra>>>=8,u.Ra+=u.oa[u.pa+u.bb]<<lu-8>>>0,++u.bb,u.u-=8;z(u)&&(u.h=1,u.u=0)}function se(u,d){if(e(0<=d),!u.h&&d<=au){var b=M(u)&ou[d];return u.u+=d,X(u),b}return u.h=1,u.u=0}function ge(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function O(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function M(u){return u.Ra>>>(u.u&lu-1)>>>0}function z(u){return e(u.bb<=u.Sb),u.h||u.bb==u.Sb&&u.u>lu}function Y(u,d){u.u=d,u.h=z(u)}function te(u){u.u>=Ic&&(e(u.u>=Ic),X(u))}function oe(u){e(u!=null&&u.oa!=null),u.pa<u.Zc?(u.I=(u.oa[u.pa++]|u.I<<8)>>>0,u.b+=8):(e(u!=null&&u.oa!=null),u.pa<u.Yc?(u.b+=8,u.I=u.oa[u.pa++]|u.I<<8):u.Ka?u.b=0:(u.I<<=8,u.b+=8,u.Ka=1))}function ae(u){return Z(u,1)}function ye(u,d){var b=u.Ca;0>u.b&&oe(u);var R=u.b,U=b*d>>>8,q=(u.I>>>R>U)+0;for(q?(b-=U,u.I-=U+1<<R>>>0):b=U+1,R=b,U=0;256<=R;)U+=8,R>>=8;return R=7^U+zr[R],u.b-=R,u.Ca=(b<<R)-1,q}function Ae(u,d,b){u[d+0]=b>>24&255,u[d+1]=b>>16&255,u[d+2]=b>>8&255,u[d+3]=b>>0&255}function Te(u,d){return u[d+0]<<0|u[d+1]<<8}function Me(u,d){return Te(u,d)|u[d+2]<<16}function Ve(u,d){return Te(u,d)|Te(u,d+2)<<16}function Ze(u,d){var b=1<<d;return e(u!=null),e(0<d),u.X=s(b),u.X==null?0:(u.Mb=32-d,u.Xa=d,1)}function be(u,d){e(u!=null),e(d!=null),e(u.Xa==d.Xa),r(d.X,0,u.X,0,1<<d.Xa)}function ie(){this.X=[],this.Xa=this.Mb=0}function $e(u,d,b,R){e(b!=null),e(R!=null);var U=b[0],q=R[0];return U==0&&(U=(u*q+d/2)/d),q==0&&(q=(d*U+u/2)/u),0>=U||0>=q?0:(b[0]=U,R[0]=q,1)}function De(u,d){return u+(1<<d)-1>>>d}function Ce(u,d){return((4278255360&u)+(4278255360&d)>>>0&4278255360)+((16711935&u)+(16711935&d)>>>0&16711935)>>>0}function Oe(u,d){x[d]=function(b,R,U,q,H,G,K){var ne;for(ne=0;ne<H;++ne){var ce=x[u](G[K+ne-1],U,q+ne);G[K+ne]=Ce(b[R+ne],ce)}}}function qe(){this.ud=this.hd=this.jd=0}function Be(u,d){return((4278124286&(u^d))>>>1)+(u&d)>>>0}function tt(u){return 0<=u&&256>u?u:0>u?0:255<u?255:void 0}function rt(u,d){return tt(u+(u-d+.5>>1))}function ut(u,d,b){return Math.abs(d-b)-Math.abs(u-b)}function nt(u,d,b,R,U,q,H){for(R=q[H-1],b=0;b<U;++b)q[H+b]=R=Ce(u[d+b],R)}function ht(u,d,b,R,U){var q;for(q=0;q<b;++q){var H=u[d+q],G=H>>8&255,K=16711935&(K=(K=16711935&H)+((G<<16)+G));R[U+q]=(4278255360&H)+K>>>0}}function kt(u,d){d.jd=u>>0&255,d.hd=u>>8&255,d.ud=u>>16&255}function ct(u,d,b,R,U,q){var H;for(H=0;H<R;++H){var G=d[b+H],K=G>>>8,ne=G,ce=255&(ce=(ce=G>>>16)+((u.jd<<24>>24)*(K<<24>>24)>>>5));ne=255&(ne=(ne=ne+((u.hd<<24>>24)*(K<<24>>24)>>>5))+((u.ud<<24>>24)*(ce<<24>>24)>>>5)),U[q+H]=(4278255360&G)+(ce<<16)+ne}}function xt(u,d,b,R,U){x[d]=function(q,H,G,K,ne,ce,ve,we,me){for(K=ve;K<we;++K)for(ve=0;ve<me;++ve)ne[ce++]=U(G[R(q[H++])])},x[u]=function(q,H,G,K,ne,ce,ve){var we=8>>q.b,me=q.Ea,Ie=q.K[0],xe=q.w;if(8>we)for(q=(1<<q.b)-1,xe=(1<<we)-1;H<G;++H){var he,de=0;for(he=0;he<me;++he)he&q||(de=R(K[ne++])),ce[ve++]=U(Ie[de&xe]),de>>=we}else x["VP8LMapColor"+b](K,ne,Ie,xe,ce,ve,H,G,me)}}function Ge(u,d,b,R,U){for(b=d+b;d<b;){var q=u[d++];R[U++]=q>>16&255,R[U++]=q>>8&255,R[U++]=q>>0&255}}function pn(u,d,b,R,U){for(b=d+b;d<b;){var q=u[d++];R[U++]=q>>16&255,R[U++]=q>>8&255,R[U++]=q>>0&255,R[U++]=q>>24&255}}function It(u,d,b,R,U){for(b=d+b;d<b;){var q=(H=u[d++])>>16&240|H>>12&15,H=H>>0&240|H>>28&15;R[U++]=q,R[U++]=H}}function Mr(u,d,b,R,U){for(b=d+b;d<b;){var q=(H=u[d++])>>16&248|H>>13&7,H=H>>5&224|H>>3&31;R[U++]=q,R[U++]=H}}function Ft(u,d,b,R,U){for(b=d+b;d<b;){var q=u[d++];R[U++]=q>>0&255,R[U++]=q>>8&255,R[U++]=q>>16&255}}function Yt(u,d,b,R,U,q){if(q==0)for(b=d+b;d<b;)Ae(R,((q=u[d++])[0]>>24|q[1]>>8&65280|q[2]<<8&16711680|q[3]<<24)>>>0),U+=32;else r(R,U,u,d,b)}function gi(u,d){x[d][0]=x[u+"0"],x[d][1]=x[u+"1"],x[d][2]=x[u+"2"],x[d][3]=x[u+"3"],x[d][4]=x[u+"4"],x[d][5]=x[u+"5"],x[d][6]=x[u+"6"],x[d][7]=x[u+"7"],x[d][8]=x[u+"8"],x[d][9]=x[u+"9"],x[d][10]=x[u+"10"],x[d][11]=x[u+"11"],x[d][12]=x[u+"12"],x[d][13]=x[u+"13"],x[d][14]=x[u+"0"],x[d][15]=x[u+"0"]}function Pt(u){return u==Am||u==Em||u==Dd||u==Im}function ss(){this.eb=[],this.size=this.A=this.fb=0}function tn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Jn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ss,this.f.kb=new tn,this.sd=null}function Zr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Jt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function at(u){return alert("todo:WebPSamplerProcessPlane"),u.T}function Lt(u,d){var b=u.T,R=d.ba.f.RGBA,U=R.eb,q=R.fb+u.ka*R.A,H=Ni[d.ba.S],G=u.y,K=u.O,ne=u.f,ce=u.N,ve=u.ea,we=u.W,me=d.cc,Ie=d.dc,xe=d.Mc,he=d.Nc,de=u.ka,Ne=u.ka+u.T,ke=u.U,Ee=ke+1>>1;for(de==0?H(G,K,null,null,ne,ce,ve,we,ne,ce,ve,we,U,q,null,null,ke):(H(d.ec,d.fc,G,K,me,Ie,xe,he,ne,ce,ve,we,U,q-R.A,U,q,ke),++b);de+2<Ne;de+=2)me=ne,Ie=ce,xe=ve,he=we,ce+=u.Rc,we+=u.Rc,q+=2*R.A,H(G,(K+=2*u.fa)-u.fa,G,K,me,Ie,xe,he,ne,ce,ve,we,U,q-R.A,U,q,ke);return K+=u.fa,u.j+Ne<u.o?(r(d.ec,d.fc,G,K,ke),r(d.cc,d.dc,ne,ce,Ee),r(d.Mc,d.Nc,ve,we,Ee),b--):1&Ne||H(G,K,null,null,ne,ce,ve,we,ne,ce,ve,we,U,q+R.A,null,null,ke),b}function yi(u,d,b){var R=u.F,U=[u.J];if(R!=null){var q=u.U,H=d.ba.S,G=H==Rd||H==Dd;d=d.ba.f.RGBA;var K=[0],ne=u.ka;K[0]=u.T,u.Kb&&(ne==0?--K[0]:(--ne,U[0]-=u.width),u.j+u.ka+u.T==u.o&&(K[0]=u.o-u.j-ne));var ce=d.eb;ne=d.fb+ne*d.A,u=Zt(R,U[0],u.width,q,K,ce,ne+(G?0:3),d.A),e(b==K),u&&Pt(H)&&xi(ce,ne,G,q,K,d.A)}return 0}function Cn(u){var d=u.ma,b=d.ba.S,R=11>b,U=b==kd||b==Ld||b==Rd||b==Nm||b==12||Pt(b);if(d.memory=null,d.Ib=null,d.Jb=null,d.Nd=null,!Ac(d.Oa,u,U?11:12))return 0;if(U&&Pt(b)&&Le(),u.da)alert("todo:use_scaling");else{if(R){if(d.Ib=at,u.Kb){if(b=u.U+1>>1,d.memory=s(u.U+2*b),d.memory==null)return 0;d.ec=d.memory,d.fc=0,d.cc=d.ec,d.dc=d.fc+u.U,d.Mc=d.cc,d.Nc=d.dc+b,d.Ib=Lt,Le()}}else alert("todo:EmitYUV");U&&(d.Jb=yi,R&&pe())}if(R&&!ly){for(u=0;256>u;++u)YS[u]=89858*(u-128)+Fd>>jd,ZS[u]=-22014*(u-128)+Fd,XS[u]=-45773*(u-128),JS[u]=113618*(u-128)+Fd>>jd;for(u=Dc;u<Cm;++u)d=76283*(u-16)+Fd>>jd,e3[u-Dc]=Vt(d,255),t3[u-Dc]=Vt(d+8>>4,15);ly=1}return 1}function ur(u){var d=u.ma,b=u.U,R=u.T;return e(!(1&u.ka)),0>=b||0>=R?0:(b=d.Ib(u,d),d.Jb!=null&&d.Jb(u,d,b),d.Dc+=b,1)}function ei(u){u.ma.memory=null}function Ye(u,d,b,R){return se(u,8)!=47?0:(d[0]=se(u,14)+1,b[0]=se(u,14)+1,R[0]=se(u,1),se(u,3)!=0?0:!u.h)}function Vr(u,d){if(4>u)return u+1;var b=u-2>>1;return(2+(1&u)<<b)+se(d,b)+1}function cr(u,d){return 120<d?d-120:1<=(b=((b=FS[d-1])>>4)*u+(8-(15&b)))?b:1;var b}function kn(u,d,b){var R=M(b),U=u[d+=255&R].g-8;return 0<U&&(Y(b,b.u+8),R=M(b),d+=u[d].value,d+=R&(1<<U)-1),Y(b,b.u+u[d].g),u[d].value}function _n(u,d,b){return b.g+=u.g,b.value+=u.value<<d>>>0,e(8>=b.g),u.g}function mn(u,d,b){var R=u.xc;return e((d=R==0?0:u.vc[u.md*(b>>R)+(d>>R)])<u.Wb),u.Ya[d]}function Ln(u,d,b,R){var U=u.ab,q=u.c*d,H=u.C;d=H+d;var G=b,K=R;for(R=u.Ta,b=u.Ua;0<U--;){var ne=u.gc[U],ce=H,ve=d,we=G,me=K,Ie=(K=R,G=b,ne.Ea);switch(e(ce<ve),e(ve<=ne.nc),ne.hc){case 2:Nd(we,me,(ve-ce)*Ie,K,G);break;case 0:var xe=ce,he=ve,de=K,Ne=G,ke=(We=ne).Ea;xe==0&&(xm(we,me,null,null,1,de,Ne),nt(we,me+1,0,0,ke-1,de,Ne+1),me+=ke,Ne+=ke,++xe);for(var Ee=1<<We.b,Ke=Ee-1,ze=De(ke,We.b),lt=We.K,We=We.w+(xe>>We.b)*ze;xe<he;){var Ot=lt,Ut=We,Rt=1;for(Tc(we,me,de,Ne-ke,1,de,Ne);Rt<ke;){var At=(Rt&~Ke)+Ee;At>ke&&(At=ke),(0,Ho[Ot[Ut++]>>8&15])(we,me+ +Rt,de,Ne+Rt-ke,At-Rt,de,Ne+Rt),Rt=At}me+=ke,Ne+=ke,++xe&Ke||(We+=ze)}ve!=ne.nc&&r(K,G-Ie,K,G+(ve-ce-1)*Ie,Ie);break;case 1:for(Ie=we,he=me,ke=(we=ne.Ea)-(Ne=we&~(de=(me=1<<ne.b)-1)),xe=De(we,ne.b),Ee=ne.K,ne=ne.w+(ce>>ne.b)*xe;ce<ve;){for(Ke=Ee,ze=ne,lt=new qe,We=he+Ne,Ot=he+we;he<We;)kt(Ke[ze++],lt),sl(lt,Ie,he,me,K,G),he+=me,G+=me;he<Ot&&(kt(Ke[ze++],lt),sl(lt,Ie,he,ke,K,G),he+=ke,G+=ke),++ce&de||(ne+=xe)}break;case 3:if(we==K&&me==G&&0<ne.b){for(he=K,we=Ie=G+(ve-ce)*Ie-(Ne=(ve-ce)*De(ne.Ea,ne.b)),me=K,de=G,xe=[],Ne=(ke=Ne)-1;0<=Ne;--Ne)xe[Ne]=me[de+Ne];for(Ne=ke-1;0<=Ne;--Ne)he[we+Ne]=xe[Ne];wi(ne,ce,ve,K,Ie,K,G)}else wi(ne,ce,ve,we,me,K,G)}G=R,K=b}K!=b&&r(R,b,G,K,q)}function Eo(u,d){var b=u.V,R=u.Ba+u.c*u.C,U=d-u.C;if(e(d<=u.l.o),e(16>=U),0<U){var q=u.l,H=u.Ta,G=u.Ua,K=q.width;if(Ln(u,U,b,R),U=G=[G],e((b=u.C)<(R=d)),e(q.v<q.va),R>q.o&&(R=q.o),b<q.j){var ne=q.j-b;b=q.j,U[0]+=ne*K}if(b>=R?b=0:(U[0]+=4*q.v,q.ka=b-q.j,q.U=q.va-q.v,q.T=R-b,b=1),b){if(G=G[0],11>(b=u.ca).S){var ce=b.f.RGBA,ve=(R=b.S,U=q.U,q=q.T,ne=ce.eb,ce.A),we=q;for(ce=ce.fb+u.Ma*ce.A;0<we--;){var me=H,Ie=G,xe=U,he=ne,de=ce;switch(R){case Cd:qr(me,Ie,xe,he,de);break;case kd:Pr(me,Ie,xe,he,de);break;case Am:Pr(me,Ie,xe,he,de),xi(he,de,0,xe,1,0);break;case X2:Ks(me,Ie,xe,he,de);break;case Ld:Yt(me,Ie,xe,he,de,1);break;case Em:Yt(me,Ie,xe,he,de,1),xi(he,de,0,xe,1,0);break;case Rd:Yt(me,Ie,xe,he,de,0);break;case Dd:Yt(me,Ie,xe,he,de,0),xi(he,de,1,xe,1,0);break;case Nm:Wo(me,Ie,xe,he,de);break;case Im:Wo(me,Ie,xe,he,de),Xt(he,de,xe,1,0);break;case Z2:Gs(me,Ie,xe,he,de);break;default:e(0)}G+=K,ce+=ve}u.Ma+=q}else alert("todo:EmitRescaledRowsYUVA");e(u.Ma<=b.height)}}u.C=d,e(u.C<=u.i)}function Di(u){var d;if(0<u.ua)return 0;for(d=0;d<u.Wb;++d){var b=u.Ya[d].G,R=u.Ya[d].H;if(0<b[1][R[1]+0].g||0<b[2][R[2]+0].g||0<b[3][R[3]+0].g)return 0}return 1}function hr(u,d,b,R,U,q){if(u.Z!=0){var H=u.qd,G=u.rd;for(e(Qo[u.Z]!=null);d<b;++d)Qo[u.Z](H,G,R,U,R,U,q),H=R,G=U,U+=q;u.qd=H,u.rd=G}}function Br(u,d){var b=u.l.ma,R=b.Z==0||b.Z==1?u.l.j:u.C;if(R=u.C<R?R:u.C,e(d<=u.l.o),d>R){var U=u.l.width,q=b.ca,H=b.tb+U*R,G=u.V,K=u.Ba+u.c*R,ne=u.gc;e(u.ab==1),e(ne[0].hc==3),Ad(ne[0],R,d,G,K,q,H),hr(b,R,d,q,H,U)}u.C=u.Ma=d}function Er(u,d,b,R,U,q,H){var G=u.$/R,K=u.$%R,ne=u.m,ce=u.s,ve=b+u.$,we=ve;U=b+R*U;var me=b+R*q,Ie=280+ce.ua,xe=u.Pb?G:16777216,he=0<ce.ua?ce.Wa:null,de=ce.wc,Ne=ve<me?mn(ce,K,G):null;e(u.C<q),e(me<=U);var ke=!1;e:for(;;){for(;ke||ve<me;){var Ee=0;if(G>=xe){var Ke=ve-b;e((xe=u).Pb),xe.wd=xe.m,xe.xd=Ke,0<xe.s.ua&&be(xe.s.Wa,xe.s.vb),xe=G+MS}if(K&de||(Ne=mn(ce,K,G)),e(Ne!=null),Ne.Qb&&(d[ve]=Ne.qb,ke=!0),!ke)if(te(ne),Ne.jc){Ee=ne,Ke=d;var ze=ve,lt=Ne.pd[M(Ee)&er-1];e(Ne.jc),256>lt.g?(Y(Ee,Ee.u+lt.g),Ke[ze]=lt.value,Ee=0):(Y(Ee,Ee.u+lt.g-256),e(256<=lt.value),Ee=lt.value),Ee==0&&(ke=!0)}else Ee=kn(Ne.G[0],Ne.H[0],ne);if(ne.h)break;if(ke||256>Ee){if(!ke)if(Ne.nd)d[ve]=(Ne.qb|Ee<<8)>>>0;else{if(te(ne),ke=kn(Ne.G[1],Ne.H[1],ne),te(ne),Ke=kn(Ne.G[2],Ne.H[2],ne),ze=kn(Ne.G[3],Ne.H[3],ne),ne.h)break;d[ve]=(ze<<24|ke<<16|Ee<<8|Ke)>>>0}if(ke=!1,++ve,++K>=R&&(K=0,++G,H!=null&&G<=q&&!(G%16)&&H(u,G),he!=null))for(;we<ve;)Ee=d[we++],he.X[(506832829*Ee&4294967295)>>>he.Mb]=Ee}else if(280>Ee){if(Ee=Vr(Ee-256,ne),Ke=kn(Ne.G[4],Ne.H[4],ne),te(ne),Ke=cr(R,Ke=Vr(Ke,ne)),ne.h)break;if(ve-b<Ke||U-ve<Ee)break e;for(ze=0;ze<Ee;++ze)d[ve+ze]=d[ve+ze-Ke];for(ve+=Ee,K+=Ee;K>=R;)K-=R,++G,H!=null&&G<=q&&!(G%16)&&H(u,G);if(e(ve<=U),K&de&&(Ne=mn(ce,K,G)),he!=null)for(;we<ve;)Ee=d[we++],he.X[(506832829*Ee&4294967295)>>>he.Mb]=Ee}else{if(!(Ee<Ie))break e;for(ke=Ee-280,e(he!=null);we<ve;)Ee=d[we++],he.X[(506832829*Ee&4294967295)>>>he.Mb]=Ee;Ee=ve,e(!(ke>>>(Ke=he).Xa)),d[Ee]=Ke.X[ke],ke=!0}ke||e(ne.h==z(ne))}if(u.Pb&&ne.h&&ve<U)e(u.m.h),u.a=5,u.m=u.wd,u.$=u.xd,0<u.s.ua&&be(u.s.vb,u.s.Wa);else{if(ne.h)break e;H!=null&&H(u,G>q?q:G),u.a=0,u.$=ve-b}return 1}return u.a=3,0}function Ir(u){e(u!=null),u.vc=null,u.yc=null,u.Ya=null;var d=u.Wa;d!=null&&(d.X=null),u.vb=null,e(u!=null)}function bn(){var u=new iu;return u==null?null:(u.a=0,u.xb=ny,gi("Predictor","VP8LPredictors"),gi("Predictor","VP8LPredictors_C"),gi("PredictorAdd","VP8LPredictorsAdd"),gi("PredictorAdd","VP8LPredictorsAdd_C"),Nd=ht,sl=ct,qr=Ge,Pr=pn,Wo=It,Gs=Mr,Ks=Ft,x.VP8LMapColor32b=uu,x.VP8LMapColor8b=Ed,u)}function ti(u,d,b,R,U){var q=1,H=[u],G=[d],K=R.m,ne=R.s,ce=null,ve=0;e:for(;;){if(b)for(;q&&se(K,1);){var we=H,me=G,Ie=R,xe=1,he=Ie.m,de=Ie.gc[Ie.ab],Ne=se(he,2);if(Ie.Oc&1<<Ne)q=0;else{switch(Ie.Oc|=1<<Ne,de.hc=Ne,de.Ea=we[0],de.nc=me[0],de.K=[null],++Ie.ab,e(4>=Ie.ab),Ne){case 0:case 1:de.b=se(he,3)+2,xe=ti(De(de.Ea,de.b),De(de.nc,de.b),0,Ie,de.K),de.K=de.K[0];break;case 3:var ke,Ee=se(he,8)+1,Ke=16<Ee?0:4<Ee?1:2<Ee?2:3;if(we[0]=De(de.Ea,Ke),de.b=Ke,ke=xe=ti(Ee,1,0,Ie,de.K)){var ze,lt=Ee,We=de,Ot=1<<(8>>We.b),Ut=s(Ot);if(Ut==null)ke=0;else{var Rt=We.K[0],At=We.w;for(Ut[0]=We.K[0][0],ze=1;ze<1*lt;++ze)Ut[ze]=Ce(Rt[At+ze],Ut[ze-1]);for(;ze<4*Ot;++ze)Ut[ze]=0;We.K[0]=null,We.K[0]=Ut,ke=1}}xe=ke;break;case 2:break;default:e(0)}q=xe}}if(H=H[0],G=G[0],q&&se(K,1)&&!(q=1<=(ve=se(K,4))&&11>=ve)){R.a=3;break e}var Kt;if(Kt=q)t:{var $t,bt,Rn,Hr=R,Dn=H,Wr=G,zt=ve,oi=b,ai=Hr.m,Wn=Hr.s,tr=[null],kr=1,Ai=0,vs=OS[zt];n:for(;;){if(oi&&se(ai,1)){var $n=se(ai,3)+2,Xs=De(Dn,$n),cl=De(Wr,$n),pu=Xs*cl;if(!ti(Xs,cl,0,Hr,tr))break n;for(tr=tr[0],Wn.xc=$n,$t=0;$t<pu;++$t){var Yo=tr[$t]>>8&65535;tr[$t]=Yo,Yo>=kr&&(kr=Yo+1)}}if(ai.h)break n;for(bt=0;5>bt;++bt){var yn=ey[bt];!bt&&0<zt&&(yn+=1<<zt),Ai<yn&&(Ai=yn)}var km=o(kr*vs,A),hy=kr,dy=o(hy,J);if(dy==null)var Md=null;else e(65536>=hy),Md=dy;var jc=s(Ai);if(Md==null||jc==null||km==null){Hr.a=1;break n}var Vd=km;for($t=Rn=0;$t<kr;++$t){var Hi=Md[$t],mu=Hi.G,gu=Hi.H,fy=0,Bd=1,py=0;for(bt=0;5>bt;++bt){yn=ey[bt],mu[bt]=Vd,gu[bt]=Rn,!bt&&0<zt&&(yn+=1<<zt);i:{var Ud,Lm=yn,zd=Hr,Fc=jc,i3=Vd,s3=Rn,Rm=0,Jo=zd.m,o3=se(Jo,1);if(i(Fc,0,0,Lm),o3){var a3=se(Jo,1)+1,l3=se(Jo,1),my=se(Jo,l3==0?1:8);Fc[my]=1,a3==2&&(Fc[my=se(Jo,8)]=1);var qd=1}else{var gy=s(19),yy=se(Jo,4)+4;if(19<yy){zd.a=3;var Hd=0;break i}for(Ud=0;Ud<yy;++Ud)gy[jS[Ud]]=se(Jo,3);var Dm=void 0,Oc=void 0,vy=zd,u3=gy,Wd=Lm,wy=Fc,jm=0,Xo=vy.m,_y=8,by=o(128,A);r:for(;N(by,0,7,u3,19);){if(se(Xo,1)){var c3=2+2*se(Xo,3);if((Dm=2+se(Xo,c3))>Wd)break r}else Dm=Wd;for(Oc=0;Oc<Wd&&Dm--;){te(Xo);var xy=by[0+(127&M(Xo))];Y(Xo,Xo.u+xy.g);var yu=xy.value;if(16>yu)wy[Oc++]=yu,yu!=0&&(_y=yu);else{var h3=yu==16,Sy=yu-16,d3=RS[Sy],Ny=se(Xo,LS[Sy])+d3;if(Oc+Ny>Wd)break r;for(var f3=h3?_y:0;0<Ny--;)wy[Oc++]=f3}}jm=1;break r}jm||(vy.a=3),qd=jm}(qd=qd&&!Jo.h)&&(Rm=N(i3,s3,8,Fc,Lm)),qd&&Rm!=0?Hd=Rm:(zd.a=3,Hd=0)}if(Hd==0)break n;if(Bd&&DS[bt]==1&&(Bd=Vd[Rn].g==0),fy+=Vd[Rn].g,Rn+=Hd,3>=bt){var Mc,Fm=jc[0];for(Mc=1;Mc<yn;++Mc)jc[Mc]>Fm&&(Fm=jc[Mc]);py+=Fm}}if(Hi.nd=Bd,Hi.Qb=0,Bd&&(Hi.qb=(mu[3][gu[3]+0].value<<24|mu[1][gu[1]+0].value<<16|mu[2][gu[2]+0].value)>>>0,fy==0&&256>mu[0][gu[0]+0].value&&(Hi.Qb=1,Hi.qb+=mu[0][gu[0]+0].value<<8)),Hi.jc=!Hi.Qb&&6>py,Hi.jc){var $d,Zs=Hi;for($d=0;$d<er;++$d){var Zo=$d,ea=Zs.pd[Zo],Gd=Zs.G[0][Zs.H[0]+Zo];256<=Gd.value?(ea.g=Gd.g+256,ea.value=Gd.value):(ea.g=0,ea.value=0,Zo>>=_n(Gd,8,ea),Zo>>=_n(Zs.G[1][Zs.H[1]+Zo],16,ea),Zo>>=_n(Zs.G[2][Zs.H[2]+Zo],0,ea),_n(Zs.G[3][Zs.H[3]+Zo],24,ea))}}}Wn.vc=tr,Wn.Wb=kr,Wn.Ya=Md,Wn.yc=km,Kt=1;break t}Kt=0}if(!(q=Kt)){R.a=3;break e}if(0<ve){if(ne.ua=1<<ve,!Ze(ne.Wa,ve)){R.a=1,q=0;break e}}else ne.ua=0;var Om=R,Ay=H,p3=G,Mm=Om.s,Vm=Mm.xc;if(Om.c=Ay,Om.i=p3,Mm.md=De(Ay,Vm),Mm.wc=Vm==0?-1:(1<<Vm)-1,b){R.xb=WS;break e}if((ce=s(H*G))==null){R.a=1,q=0;break e}q=(q=Er(R,ce,0,H,G,G,null))&&!K.h;break e}return q?(U!=null?U[0]=ce:(e(ce==null),e(b)),R.$=0,b||Ir(ne)):Ir(ne),q}function os(u,d){var b=u.c*u.i,R=b+d+16*d;return e(u.c<=d),u.V=s(R),u.V==null?(u.Ta=null,u.Ua=0,u.a=1,0):(u.Ta=u.V,u.Ua=u.Ba+b+d,1)}function as(u,d){var b=u.C,R=d-b,U=u.V,q=u.Ba+u.c*b;for(e(d<=u.l.o);0<R;){var H=16<R?16:R,G=u.l.ma,K=u.l.width,ne=K*H,ce=G.ca,ve=G.tb+K*b,we=u.Ta,me=u.Ua;Ln(u,H,U,q),Sn(we,me,ce,ve,ne),hr(G,b,b+H,ce,ve,K),R-=H,U+=H*u.c,b+=H}e(b==d),u.C=u.Ma=d}function ls(){this.ub=this.yd=this.td=this.Rb=0}function Fs(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Os(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Kl(){this.Yb=function(){var u=[];return function d(b,R,U){for(var q=U[R],H=0;H<q&&(b.push(U.length>R+1?[]:0),!(U.length<R+1));H++)d(b[H],R+1,U)}(u,0,[3,11]),u}()}function Io(){this.jb=s(3),this.Wc=a([4,8],Kl),this.Xc=a([4,17],Kl)}function Ql(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function us(){this.ld=this.La=this.dd=this.tc=0}function cs(){this.Na=this.la=0}function ji(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ms(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function bc(){this.uc=this.M=this.Nb=0,this.wa=Array(new us),this.Y=0,this.ya=Array(new Ms),this.aa=0,this.l=new Vs}function Wa(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Yl(){this.cb=this.a=0,this.sc="",this.m=new ge,this.Od=new ls,this.Kc=new Fs,this.ed=new Ql,this.Qa=new Os,this.Ic=this.$c=this.Aa=0,this.D=new bc,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,ge),this.ia=0,this.pb=o(4,ji),this.Pa=new Io,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Wa),this.Hd=0,this.rb=Array(new cs),this.sb=0,this.wa=Array(new us),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ms),this.L=this.aa=0,this.gd=a([4,2],us),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Vs(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function $a(){var u=new Yl;return u!=null&&(u.a=0,u.sc="OK",u.cb=0,u.Xb=0,Rc||(Rc=Jl)),u}function nn(u,d,b){return u.a==0&&(u.a=d,u.sc=b,u.cb=0),0}function Ga(u,d,b){return 3<=b&&u[d+0]==157&&u[d+1]==1&&u[d+2]==42}function Ka(u,d){if(u==null)return 0;if(u.a=0,u.sc="OK",d==null)return nn(u,2,"null VP8Io passed to VP8GetHeaders()");var b=d.data,R=d.w,U=d.ha;if(4>U)return nn(u,7,"Truncated header.");var q=b[R+0]|b[R+1]<<8|b[R+2]<<16,H=u.Od;if(H.Rb=!(1&q),H.td=q>>1&7,H.yd=q>>4&1,H.ub=q>>5,3<H.td)return nn(u,3,"Incorrect keyframe parameters.");if(!H.yd)return nn(u,4,"Frame not displayable.");R+=3,U-=3;var G=u.Kc;if(H.Rb){if(7>U)return nn(u,7,"cannot parse picture header");if(!Ga(b,R,U))return nn(u,3,"Bad code word");G.c=16383&(b[R+4]<<8|b[R+3]),G.Td=b[R+4]>>6,G.i=16383&(b[R+6]<<8|b[R+5]),G.Ud=b[R+6]>>6,R+=7,U-=7,u.za=G.c+15>>4,u.Ub=G.i+15>>4,d.width=G.c,d.height=G.i,d.Da=0,d.j=0,d.v=0,d.va=d.width,d.o=d.height,d.da=0,d.ib=d.width,d.hb=d.height,d.U=d.width,d.T=d.height,i((q=u.Pa).jb,0,255,q.jb.length),e((q=u.Qa)!=null),q.Cb=0,q.Bb=0,q.Fb=1,i(q.Zb,0,0,q.Zb.length),i(q.Lb,0,0,q.Lb)}if(H.ub>U)return nn(u,7,"bad partition length");ue(q=u.m,b,R,H.ub),R+=H.ub,U-=H.ub,H.Rb&&(G.Ld=ae(q),G.Kd=ae(q)),G=u.Qa;var K,ne=u.Pa;if(e(q!=null),e(G!=null),G.Cb=ae(q),G.Cb){if(G.Bb=ae(q),ae(q)){for(G.Fb=ae(q),K=0;4>K;++K)G.Zb[K]=ae(q)?ee(q,7):0;for(K=0;4>K;++K)G.Lb[K]=ae(q)?ee(q,6):0}if(G.Bb)for(K=0;3>K;++K)ne.jb[K]=ae(q)?Z(q,8):255}else G.Bb=0;if(q.Ka)return nn(u,3,"cannot parse segment header");if((G=u.ed).zd=ae(q),G.Tb=Z(q,6),G.wb=Z(q,3),G.Pc=ae(q),G.Pc&&ae(q)){for(ne=0;4>ne;++ne)ae(q)&&(G.vd[ne]=ee(q,6));for(ne=0;4>ne;++ne)ae(q)&&(G.od[ne]=ee(q,6))}if(u.L=G.Tb==0?0:G.zd?1:2,q.Ka)return nn(u,3,"cannot parse filter header");var ce=U;if(U=K=R,R=K+ce,G=ce,u.Xb=(1<<Z(u.m,2))-1,ce<3*(ne=u.Xb))b=7;else{for(K+=3*ne,G-=3*ne,ce=0;ce<ne;++ce){var ve=b[U+0]|b[U+1]<<8|b[U+2]<<16;ve>G&&(ve=G),ue(u.Jc[+ce],b,K,ve),K+=ve,G-=ve,U+=3}ue(u.Jc[+ne],b,K,G),b=K<R?0:5}if(b!=0)return nn(u,b,"cannot parse partitions");for(b=Z(K=u.m,7),U=ae(K)?ee(K,4):0,R=ae(K)?ee(K,4):0,G=ae(K)?ee(K,4):0,ne=ae(K)?ee(K,4):0,K=ae(K)?ee(K,4):0,ce=u.Qa,ve=0;4>ve;++ve){if(ce.Cb){var we=ce.Zb[ve];ce.Fb||(we+=b)}else{if(0<ve){u.pb[ve]=u.pb[0];continue}we=b}var me=u.pb[ve];me.Sc[0]=Tm[Vt(we+U,127)],me.Sc[1]=Pm[Vt(we+0,127)],me.Eb[0]=2*Tm[Vt(we+R,127)],me.Eb[1]=101581*Pm[Vt(we+G,127)]>>16,8>me.Eb[1]&&(me.Eb[1]=8),me.Qc[0]=Tm[Vt(we+ne,117)],me.Qc[1]=Pm[Vt(we+K,127)],me.lc=we+K}if(!H.Rb)return nn(u,4,"Not a key frame.");for(ae(q),H=u.Pa,b=0;4>b;++b){for(U=0;8>U;++U)for(R=0;3>R;++R)for(G=0;11>G;++G)ne=ye(q,qS[b][U][R][G])?Z(q,8):US[b][U][R][G],H.Wc[b][U].Yb[R][G]=ne;for(U=0;17>U;++U)H.Xc[b][U]=H.Wc[b][HS[U]]}return u.kc=ae(q),u.kc&&(u.Bd=Z(q,8)),u.cb=1}function Jl(u,d,b,R,U,q,H){var G=d[U].Yb[b];for(b=0;16>U;++U){if(!ye(u,G[b+0]))return U;for(;!ye(u,G[b+1]);)if(G=d[++U].Yb[0],b=0,U==16)return 16;var K=d[U+1].Yb;if(ye(u,G[b+2])){var ne=u,ce=0;if(ye(ne,(we=G)[(ve=b)+3]))if(ye(ne,we[ve+6])){for(G=0,ve=2*(ce=ye(ne,we[ve+8]))+(we=ye(ne,we[ve+9+ce])),ce=0,we=VS[ve];we[G];++G)ce+=ce+ye(ne,we[G]);ce+=3+(8<<ve)}else ye(ne,we[ve+7])?(ce=7+2*ye(ne,165),ce+=ye(ne,145)):ce=5+ye(ne,159);else ce=ye(ne,we[ve+4])?3+ye(ne,we[ve+5]):2;G=K[2]}else ce=1,G=K[1];K=H+BS[U],0>(ne=u).b&&oe(ne);var ve,we=ne.b,me=(ve=ne.Ca>>1)-(ne.I>>we)>>31;--ne.b,ne.Ca+=me,ne.Ca|=1,ne.I-=(ve+1&me)<<we,q[K]=((ce^me)-me)*R[(0<U)+0]}return 16}function Qa(u){var d=u.rb[u.sb-1];d.la=0,d.Na=0,i(u.zc,0,0,u.zc.length),u.ja=0}function Xl(u,d){if(u==null)return 0;if(d==null)return nn(u,2,"NULL VP8Io parameter in VP8Decode().");if(!u.cb&&!Ka(u,d))return 0;if(e(u.cb),d.ac==null||d.ac(d)){d.ob&&(u.L=0);var b=Od[u.L];if(u.L==2?(u.yb=0,u.zb=0):(u.yb=d.v-b>>4,u.zb=d.j-b>>4,0>u.yb&&(u.yb=0),0>u.zb&&(u.zb=0)),u.Va=d.o+15+b>>4,u.Hb=d.va+15+b>>4,u.Hb>u.za&&(u.Hb=u.za),u.Va>u.Ub&&(u.Va=u.Ub),0<u.L){var R=u.ed;for(b=0;4>b;++b){var U;if(u.Qa.Cb){var q=u.Qa.Lb[b];u.Qa.Fb||(q+=R.Tb)}else q=R.Tb;for(U=0;1>=U;++U){var H=u.gd[b][U],G=q;if(R.Pc&&(G+=R.vd[0],U&&(G+=R.od[0])),0<(G=0>G?0:63<G?63:G)){var K=G;0<R.wb&&(K=4<R.wb?K>>2:K>>1)>9-R.wb&&(K=9-R.wb),1>K&&(K=1),H.dd=K,H.tc=2*G+K,H.ld=40<=G?2:15<=G?1:0}else H.tc=0;H.La=U}}}b=0}else nn(u,6,"Frame setup failed"),b=u.a;if(b=b==0){if(b){u.$c=0,0<u.Aa||(u.Ic=r3);e:{b=u.Ic,R=4*(K=u.za);var ne=32*K,ce=K+1,ve=0<u.L?K*(0<u.Aa?2:1):0,we=(u.Aa==2?2:1)*K;if((H=R+832+(U=3*(16*b+Od[u.L])/2*ne)+(q=u.Fa!=null&&0<u.Fa.length?u.Kc.c*u.Kc.i:0))!=H)b=0;else{if(H>u.Vb){if(u.Vb=0,u.Ec=s(H),u.Fc=0,u.Ec==null){b=nn(u,1,"no memory during frame initialization.");break e}u.Vb=H}H=u.Ec,G=u.Fc,u.Ac=H,u.Bc=G,G+=R,u.Gd=o(ne,Wa),u.Hd=0,u.rb=o(ce+1,cs),u.sb=1,u.wa=ve?o(ve,us):null,u.Y=0,u.D.Nb=0,u.D.wa=u.wa,u.D.Y=u.Y,0<u.Aa&&(u.D.Y+=K),e(!0),u.oc=H,u.pc=G,G+=832,u.ya=o(we,Ms),u.aa=0,u.D.ya=u.ya,u.D.aa=u.aa,u.Aa==2&&(u.D.aa+=K),u.R=16*K,u.B=8*K,K=(ne=Od[u.L])*u.R,ne=ne/2*u.B,u.sa=H,u.ta=G+K,u.qa=u.sa,u.ra=u.ta+16*b*u.R+ne,u.Ha=u.qa,u.Ia=u.ra+8*b*u.B+ne,u.$c=0,G+=U,u.mb=q?H:null,u.nb=q?G:null,e(G+q<=u.Fc+u.Vb),Qa(u),i(u.Ac,u.Bc,0,R),b=1}}if(b){if(d.ka=0,d.y=u.sa,d.O=u.ta,d.f=u.qa,d.N=u.ra,d.ea=u.Ha,d.Vd=u.Ia,d.fa=u.R,d.Rc=u.B,d.F=null,d.J=0,!Td){for(b=-255;255>=b;++b)Un[255+b]=0>b?-b:b;for(b=-1020;1020>=b;++b)Ys[1020+b]=-128>b?-128:127<b?127:b;for(b=-112;112>=b;++b)Lc[112+b]=-16>b?-16:15<b?15:b;for(b=-255;510>=b;++b)fu[255+b]=0>b?0:255<b?255:b;Td=1}cu=zs,Qs=Po,Pc=Ya,Cr=Bt,_i=Us,xn=Bs,hu=Fo,Id=Bi,Cc=Mo,ol=il,al=Oo,$o=Hs,ll=Vo,du=ps,ul=qs,Go=ii,kc=Bn,bi=ru,qi[0]=vi,qi[1]=xc,qi[2]=ds,qi[3]=Nc,qi[4]=tu,qi[5]=Lo,qi[6]=ni,qi[7]=Xa,qi[8]=Do,qi[9]=Ro,Ko[0]=hs,Ko[1]=Sc,Ko[2]=Oi,Ko[3]=Co,Ko[4]=rn,Ko[5]=eu,Ko[6]=Ja,Js[0]=Vi,Js[1]=Zl,Js[2]=nu,Js[3]=Mi,Js[4]=Mt,Js[5]=Za,Js[6]=el,b=1}else b=0}b&&(b=function(me,Ie){for(me.M=0;me.M<me.Va;++me.M){var xe,he=me.Jc[me.M&me.Xb],de=me.m,Ne=me;for(xe=0;xe<Ne.za;++xe){var ke=de,Ee=Ne,Ke=Ee.Ac,ze=Ee.Bc+4*xe,lt=Ee.zc,We=Ee.ya[Ee.aa+xe];if(Ee.Qa.Bb?We.$b=ye(ke,Ee.Pa.jb[0])?2+ye(ke,Ee.Pa.jb[2]):ye(ke,Ee.Pa.jb[1]):We.$b=0,Ee.kc&&(We.Ad=ye(ke,Ee.Bd)),We.Za=!ye(ke,145)+0,We.Za){var Ot=We.Ob,Ut=0;for(Ee=0;4>Ee;++Ee){var Rt,At=lt[0+Ee];for(Rt=0;4>Rt;++Rt){At=zS[Ke[ze+Rt]][At];for(var Kt=ty[ye(ke,At[0])];0<Kt;)Kt=ty[2*Kt+ye(ke,At[Kt])];At=-Kt,Ke[ze+Rt]=At}r(Ot,Ut,Ke,ze,4),Ut+=4,lt[0+Ee]=At}}else At=ye(ke,156)?ye(ke,128)?1:3:ye(ke,163)?2:0,We.Ob[0]=At,i(Ke,ze,At,4),i(lt,0,At,4);We.Dd=ye(ke,142)?ye(ke,114)?ye(ke,183)?1:3:2:0}if(Ne.m.Ka)return nn(me,7,"Premature end-of-partition0 encountered.");for(;me.ja<me.za;++me.ja){if(Ne=he,ke=(de=me).rb[de.sb-1],Ke=de.rb[de.sb+de.ja],xe=de.ya[de.aa+de.ja],ze=de.kc?xe.Ad:0)ke.la=Ke.la=0,xe.Za||(ke.Na=Ke.Na=0),xe.Hc=0,xe.Gc=0,xe.ia=0;else{var $t,bt;if(ke=Ke,Ke=Ne,ze=de.Pa.Xc,lt=de.ya[de.aa+de.ja],We=de.pb[lt.$b],Ee=lt.ad,Ot=0,Ut=de.rb[de.sb-1],At=Rt=0,i(Ee,Ot,0,384),lt.Za)var Rn=0,Hr=ze[3];else{Kt=s(16);var Dn=ke.Na+Ut.Na;if(Dn=Rc(Ke,ze[1],Dn,We.Eb,0,Kt,0),ke.Na=Ut.Na=(0<Dn)+0,1<Dn)cu(Kt,0,Ee,Ot);else{var Wr=Kt[0]+3>>3;for(Kt=0;256>Kt;Kt+=16)Ee[Ot+Kt]=Wr}Rn=1,Hr=ze[0]}var zt=15&ke.la,oi=15&Ut.la;for(Kt=0;4>Kt;++Kt){var ai=1&oi;for(Wr=bt=0;4>Wr;++Wr)zt=zt>>1|(ai=(Dn=Rc(Ke,Hr,Dn=ai+(1&zt),We.Sc,Rn,Ee,Ot))>Rn)<<7,bt=bt<<2|(3<Dn?3:1<Dn?2:Ee[Ot+0]!=0),Ot+=16;zt>>=4,oi=oi>>1|ai<<7,Rt=(Rt<<8|bt)>>>0}for(Hr=zt,Rn=oi>>4,$t=0;4>$t;$t+=2){for(bt=0,zt=ke.la>>4+$t,oi=Ut.la>>4+$t,Kt=0;2>Kt;++Kt){for(ai=1&oi,Wr=0;2>Wr;++Wr)Dn=ai+(1&zt),zt=zt>>1|(ai=0<(Dn=Rc(Ke,ze[2],Dn,We.Qc,0,Ee,Ot)))<<3,bt=bt<<2|(3<Dn?3:1<Dn?2:Ee[Ot+0]!=0),Ot+=16;zt>>=2,oi=oi>>1|ai<<5}At|=bt<<4*$t,Hr|=zt<<4<<$t,Rn|=(240&oi)<<$t}ke.la=Hr,Ut.la=Rn,lt.Hc=Rt,lt.Gc=At,lt.ia=43690&At?0:We.ia,ze=!(Rt|At)}if(0<de.L&&(de.wa[de.Y+de.ja]=de.gd[xe.$b][xe.Za],de.wa[de.Y+de.ja].La|=!ze),Ne.Ka)return nn(me,7,"Premature end-of-file encountered.")}if(Qa(me),de=Ie,Ne=1,xe=(he=me).D,ke=0<he.L&&he.M>=he.zb&&he.M<=he.Va,he.Aa==0)e:{if(xe.M=he.M,xe.uc=ke,gs(he,xe),Ne=1,xe=(bt=he.D).Nb,ke=(At=Od[he.L])*he.R,Ke=At/2*he.B,Kt=16*xe*he.R,Wr=8*xe*he.B,ze=he.sa,lt=he.ta-ke+Kt,We=he.qa,Ee=he.ra-Ke+Wr,Ot=he.Ha,Ut=he.Ia-Ke+Wr,oi=(zt=bt.M)==0,Rt=zt>=he.Va-1,he.Aa==2&&gs(he,bt),bt.uc)for(ai=(Dn=he).D.M,e(Dn.D.uc),bt=Dn.yb;bt<Dn.Hb;++bt){Rn=bt,Hr=ai;var Wn=(tr=(yn=Dn).D).Nb;$t=yn.R;var tr=tr.wa[tr.Y+Rn],kr=yn.sa,Ai=yn.ta+16*Wn*$t+16*Rn,vs=tr.dd,$n=tr.tc;if($n!=0)if(e(3<=$n),yn.L==1)0<Rn&&Go(kr,Ai,$t,$n+4),tr.La&&bi(kr,Ai,$t,$n),0<Hr&&ul(kr,Ai,$t,$n+4),tr.La&&kc(kr,Ai,$t,$n);else{var Xs=yn.B,cl=yn.qa,pu=yn.ra+8*Wn*Xs+8*Rn,Yo=yn.Ha,yn=yn.Ia+8*Wn*Xs+8*Rn;Wn=tr.ld,0<Rn&&(Id(kr,Ai,$t,$n+4,vs,Wn),ol(cl,pu,Yo,yn,Xs,$n+4,vs,Wn)),tr.La&&($o(kr,Ai,$t,$n,vs,Wn),du(cl,pu,Yo,yn,Xs,$n,vs,Wn)),0<Hr&&(hu(kr,Ai,$t,$n+4,vs,Wn),Cc(cl,pu,Yo,yn,Xs,$n+4,vs,Wn)),tr.La&&(al(kr,Ai,$t,$n,vs,Wn),ll(cl,pu,Yo,yn,Xs,$n,vs,Wn))}}if(he.ia&&alert("todo:DitherRow"),de.put!=null){if(bt=16*zt,zt=16*(zt+1),oi?(de.y=he.sa,de.O=he.ta+Kt,de.f=he.qa,de.N=he.ra+Wr,de.ea=he.Ha,de.W=he.Ia+Wr):(bt-=At,de.y=ze,de.O=lt,de.f=We,de.N=Ee,de.ea=Ot,de.W=Ut),Rt||(zt-=At),zt>de.o&&(zt=de.o),de.F=null,de.J=null,he.Fa!=null&&0<he.Fa.length&&bt<zt&&(de.J=qo(he,de,bt,zt-bt),de.F=he.mb,de.F==null&&de.F.length==0)){Ne=nn(he,3,"Could not decode alpha data.");break e}bt<de.j&&(At=de.j-bt,bt=de.j,e(!(1&At)),de.O+=he.R*At,de.N+=he.B*(At>>1),de.W+=he.B*(At>>1),de.F!=null&&(de.J+=de.width*At)),bt<zt&&(de.O+=de.v,de.N+=de.v>>1,de.W+=de.v>>1,de.F!=null&&(de.J+=de.v),de.ka=bt-de.j,de.U=de.va-de.v,de.T=zt-bt,Ne=de.put(de))}xe+1!=he.Ic||Rt||(r(he.sa,he.ta-ke,ze,lt+16*he.R,ke),r(he.qa,he.ra-Ke,We,Ee+8*he.B,Ke),r(he.Ha,he.Ia-Ke,Ot,Ut+8*he.B,Ke))}if(!Ne)return nn(me,6,"Output aborted.")}return 1}(u,d)),d.bc!=null&&d.bc(d),b&=1}return b?(u.cb=0,b):0}function Ur(u,d,b,R,U){U=u[d+b+32*R]+(U>>3),u[d+b+32*R]=-256&U?0>U?0:255:U}function To(u,d,b,R,U,q){Ur(u,d,0,b,R+U),Ur(u,d,1,b,R+q),Ur(u,d,2,b,R-q),Ur(u,d,3,b,R-U)}function gn(u){return(20091*u>>16)+u}function Tr(u,d,b,R){var U,q=0,H=s(16);for(U=0;4>U;++U){var G=u[d+0]+u[d+8],K=u[d+0]-u[d+8],ne=(35468*u[d+4]>>16)-gn(u[d+12]),ce=gn(u[d+4])+(35468*u[d+12]>>16);H[q+0]=G+ce,H[q+1]=K+ne,H[q+2]=K-ne,H[q+3]=G-ce,q+=4,d++}for(U=q=0;4>U;++U)G=(u=H[q+0]+4)+H[q+8],K=u-H[q+8],ne=(35468*H[q+4]>>16)-gn(H[q+12]),Ur(b,R,0,0,G+(ce=gn(H[q+4])+(35468*H[q+12]>>16))),Ur(b,R,1,0,K+ne),Ur(b,R,2,0,K-ne),Ur(b,R,3,0,G-ce),q++,R+=32}function Bs(u,d,b,R){var U=u[d+0]+4,q=35468*u[d+4]>>16,H=gn(u[d+4]),G=35468*u[d+1]>>16;To(b,R,0,U+H,u=gn(u[d+1]),G),To(b,R,1,U+q,u,G),To(b,R,2,U-q,u,G),To(b,R,3,U-H,u,G)}function Po(u,d,b,R,U){Tr(u,d,b,R),U&&Tr(u,d+16,b,R+4)}function Ya(u,d,b,R){Qs(u,d+0,b,R,1),Qs(u,d+32,b,R+128,1)}function Bt(u,d,b,R){var U;for(u=u[d+0]+4,U=0;4>U;++U)for(d=0;4>d;++d)Ur(b,R,d,U,u)}function Us(u,d,b,R){u[d+0]&&Cr(u,d+0,b,R),u[d+16]&&Cr(u,d+16,b,R+4),u[d+32]&&Cr(u,d+32,b,R+128),u[d+48]&&Cr(u,d+48,b,R+128+4)}function zs(u,d,b,R){var U,q=s(16);for(U=0;4>U;++U){var H=u[d+0+U]+u[d+12+U],G=u[d+4+U]+u[d+8+U],K=u[d+4+U]-u[d+8+U],ne=u[d+0+U]-u[d+12+U];q[0+U]=H+G,q[8+U]=H-G,q[4+U]=ne+K,q[12+U]=ne-K}for(U=0;4>U;++U)H=(u=q[0+4*U]+3)+q[3+4*U],G=q[1+4*U]+q[2+4*U],K=q[1+4*U]-q[2+4*U],ne=u-q[3+4*U],b[R+0]=H+G>>3,b[R+16]=ne+K>>3,b[R+32]=H-G>>3,b[R+48]=ne-K>>3,R+=64}function Fi(u,d,b){var R,U=d-32,q=si,H=255-u[U-1];for(R=0;R<b;++R){var G,K=q,ne=H+u[d-1];for(G=0;G<b;++G)u[d+G]=K[ne+u[U+G]];d+=32}}function xc(u,d){Fi(u,d,4)}function Zl(u,d){Fi(u,d,8)}function Sc(u,d){Fi(u,d,16)}function Oi(u,d){var b;for(b=0;16>b;++b)r(u,d+32*b,u,d-32,16)}function Co(u,d){var b;for(b=16;0<b;--b)i(u,d,u[d-1],16),d+=32}function ko(u,d,b){var R;for(R=0;16>R;++R)i(d,b+32*R,u,16)}function hs(u,d){var b,R=16;for(b=0;16>b;++b)R+=u[d-1+32*b]+u[d+b-32];ko(R>>5,u,d)}function rn(u,d){var b,R=8;for(b=0;16>b;++b)R+=u[d-1+32*b];ko(R>>4,u,d)}function eu(u,d){var b,R=8;for(b=0;16>b;++b)R+=u[d+b-32];ko(R>>4,u,d)}function Ja(u,d){ko(128,u,d)}function ft(u,d,b){return u+2*d+b+2>>2}function ds(u,d){var b,R=d-32;for(R=new Uint8Array([ft(u[R-1],u[R+0],u[R+1]),ft(u[R+0],u[R+1],u[R+2]),ft(u[R+1],u[R+2],u[R+3]),ft(u[R+2],u[R+3],u[R+4])]),b=0;4>b;++b)r(u,d+32*b,R,0,R.length)}function Nc(u,d){var b=u[d-1],R=u[d-1+32],U=u[d-1+64],q=u[d-1+96];Ae(u,d+0,16843009*ft(u[d-1-32],b,R)),Ae(u,d+32,16843009*ft(b,R,U)),Ae(u,d+64,16843009*ft(R,U,q)),Ae(u,d+96,16843009*ft(U,q,q))}function vi(u,d){var b,R=4;for(b=0;4>b;++b)R+=u[d+b-32]+u[d-1+32*b];for(R>>=3,b=0;4>b;++b)i(u,d+32*b,R,4)}function tu(u,d){var b=u[d-1+0],R=u[d-1+32],U=u[d-1+64],q=u[d-1-32],H=u[d+0-32],G=u[d+1-32],K=u[d+2-32],ne=u[d+3-32];u[d+0+96]=ft(R,U,u[d-1+96]),u[d+1+96]=u[d+0+64]=ft(b,R,U),u[d+2+96]=u[d+1+64]=u[d+0+32]=ft(q,b,R),u[d+3+96]=u[d+2+64]=u[d+1+32]=u[d+0+0]=ft(H,q,b),u[d+3+64]=u[d+2+32]=u[d+1+0]=ft(G,H,q),u[d+3+32]=u[d+2+0]=ft(K,G,H),u[d+3+0]=ft(ne,K,G)}function ni(u,d){var b=u[d+1-32],R=u[d+2-32],U=u[d+3-32],q=u[d+4-32],H=u[d+5-32],G=u[d+6-32],K=u[d+7-32];u[d+0+0]=ft(u[d+0-32],b,R),u[d+1+0]=u[d+0+32]=ft(b,R,U),u[d+2+0]=u[d+1+32]=u[d+0+64]=ft(R,U,q),u[d+3+0]=u[d+2+32]=u[d+1+64]=u[d+0+96]=ft(U,q,H),u[d+3+32]=u[d+2+64]=u[d+1+96]=ft(q,H,G),u[d+3+64]=u[d+2+96]=ft(H,G,K),u[d+3+96]=ft(G,K,K)}function Lo(u,d){var b=u[d-1+0],R=u[d-1+32],U=u[d-1+64],q=u[d-1-32],H=u[d+0-32],G=u[d+1-32],K=u[d+2-32],ne=u[d+3-32];u[d+0+0]=u[d+1+64]=q+H+1>>1,u[d+1+0]=u[d+2+64]=H+G+1>>1,u[d+2+0]=u[d+3+64]=G+K+1>>1,u[d+3+0]=K+ne+1>>1,u[d+0+96]=ft(U,R,b),u[d+0+64]=ft(R,b,q),u[d+0+32]=u[d+1+96]=ft(b,q,H),u[d+1+32]=u[d+2+96]=ft(q,H,G),u[d+2+32]=u[d+3+96]=ft(H,G,K),u[d+3+32]=ft(G,K,ne)}function Xa(u,d){var b=u[d+0-32],R=u[d+1-32],U=u[d+2-32],q=u[d+3-32],H=u[d+4-32],G=u[d+5-32],K=u[d+6-32],ne=u[d+7-32];u[d+0+0]=b+R+1>>1,u[d+1+0]=u[d+0+64]=R+U+1>>1,u[d+2+0]=u[d+1+64]=U+q+1>>1,u[d+3+0]=u[d+2+64]=q+H+1>>1,u[d+0+32]=ft(b,R,U),u[d+1+32]=u[d+0+96]=ft(R,U,q),u[d+2+32]=u[d+1+96]=ft(U,q,H),u[d+3+32]=u[d+2+96]=ft(q,H,G),u[d+3+64]=ft(H,G,K),u[d+3+96]=ft(G,K,ne)}function Ro(u,d){var b=u[d-1+0],R=u[d-1+32],U=u[d-1+64],q=u[d-1+96];u[d+0+0]=b+R+1>>1,u[d+2+0]=u[d+0+32]=R+U+1>>1,u[d+2+32]=u[d+0+64]=U+q+1>>1,u[d+1+0]=ft(b,R,U),u[d+3+0]=u[d+1+32]=ft(R,U,q),u[d+3+32]=u[d+1+64]=ft(U,q,q),u[d+3+64]=u[d+2+64]=u[d+0+96]=u[d+1+96]=u[d+2+96]=u[d+3+96]=q}function Do(u,d){var b=u[d-1+0],R=u[d-1+32],U=u[d-1+64],q=u[d-1+96],H=u[d-1-32],G=u[d+0-32],K=u[d+1-32],ne=u[d+2-32];u[d+0+0]=u[d+2+32]=b+H+1>>1,u[d+0+32]=u[d+2+64]=R+b+1>>1,u[d+0+64]=u[d+2+96]=U+R+1>>1,u[d+0+96]=q+U+1>>1,u[d+3+0]=ft(G,K,ne),u[d+2+0]=ft(H,G,K),u[d+1+0]=u[d+3+32]=ft(b,H,G),u[d+1+32]=u[d+3+64]=ft(R,b,H),u[d+1+64]=u[d+3+96]=ft(U,R,b),u[d+1+96]=ft(q,U,R)}function nu(u,d){var b;for(b=0;8>b;++b)r(u,d+32*b,u,d-32,8)}function Mi(u,d){var b;for(b=0;8>b;++b)i(u,d,u[d-1],8),d+=32}function ri(u,d,b){var R;for(R=0;8>R;++R)i(d,b+32*R,u,8)}function Vi(u,d){var b,R=8;for(b=0;8>b;++b)R+=u[d+b-32]+u[d-1+32*b];ri(R>>4,u,d)}function Za(u,d){var b,R=4;for(b=0;8>b;++b)R+=u[d+b-32];ri(R>>3,u,d)}function Mt(u,d){var b,R=4;for(b=0;8>b;++b)R+=u[d-1+32*b];ri(R>>3,u,d)}function el(u,d){ri(128,u,d)}function jo(u,d,b){var R=u[d-b],U=u[d+0],q=3*(U-R)+Sm[1020+u[d-2*b]-u[d+b]],H=Pd[112+(q+4>>3)];u[d-b]=si[255+R+Pd[112+(q+3>>3)]],u[d+0]=si[255+U-H]}function tl(u,d,b,R){var U=u[d+0],q=u[d+b];return Si[255+u[d-2*b]-u[d-b]]>R||Si[255+q-U]>R}function nl(u,d,b,R){return 4*Si[255+u[d-b]-u[d+0]]+Si[255+u[d-2*b]-u[d+b]]<=R}function rl(u,d,b,R,U){var q=u[d-3*b],H=u[d-2*b],G=u[d-b],K=u[d+0],ne=u[d+b],ce=u[d+2*b],ve=u[d+3*b];return 4*Si[255+G-K]+Si[255+H-ne]>R?0:Si[255+u[d-4*b]-q]<=U&&Si[255+q-H]<=U&&Si[255+H-G]<=U&&Si[255+ve-ce]<=U&&Si[255+ce-ne]<=U&&Si[255+ne-K]<=U}function qs(u,d,b,R){var U=2*R+1;for(R=0;16>R;++R)nl(u,d+R,b,U)&&jo(u,d+R,b)}function ii(u,d,b,R){var U=2*R+1;for(R=0;16>R;++R)nl(u,d+R*b,1,U)&&jo(u,d+R*b,1)}function Bn(u,d,b,R){var U;for(U=3;0<U;--U)qs(u,d+=4*b,b,R)}function ru(u,d,b,R){var U;for(U=3;0<U;--U)ii(u,d+=4,b,R)}function fs(u,d,b,R,U,q,H,G){for(q=2*q+1;0<U--;){if(rl(u,d,b,q,H))if(tl(u,d,b,G))jo(u,d,b);else{var K=u,ne=d,ce=b,ve=K[ne-2*ce],we=K[ne-ce],me=K[ne+0],Ie=K[ne+ce],xe=K[ne+2*ce],he=27*(Ne=Sm[1020+3*(me-we)+Sm[1020+ve-Ie]])+63>>7,de=18*Ne+63>>7,Ne=9*Ne+63>>7;K[ne-3*ce]=si[255+K[ne-3*ce]+Ne],K[ne-2*ce]=si[255+ve+de],K[ne-ce]=si[255+we+he],K[ne+0]=si[255+me-he],K[ne+ce]=si[255+Ie-de],K[ne+2*ce]=si[255+xe-Ne]}d+=R}}function Xn(u,d,b,R,U,q,H,G){for(q=2*q+1;0<U--;){if(rl(u,d,b,q,H))if(tl(u,d,b,G))jo(u,d,b);else{var K=u,ne=d,ce=b,ve=K[ne-ce],we=K[ne+0],me=K[ne+ce],Ie=Pd[112+((xe=3*(we-ve))+4>>3)],xe=Pd[112+(xe+3>>3)],he=Ie+1>>1;K[ne-2*ce]=si[255+K[ne-2*ce]+he],K[ne-ce]=si[255+ve+xe],K[ne+0]=si[255+we-Ie],K[ne+ce]=si[255+me-he]}d+=R}}function Fo(u,d,b,R,U,q){fs(u,d,b,1,16,R,U,q)}function Bi(u,d,b,R,U,q){fs(u,d,1,b,16,R,U,q)}function Oo(u,d,b,R,U,q){var H;for(H=3;0<H;--H)Xn(u,d+=4*b,b,1,16,R,U,q)}function Hs(u,d,b,R,U,q){var H;for(H=3;0<H;--H)Xn(u,d+=4,1,b,16,R,U,q)}function Mo(u,d,b,R,U,q,H,G){fs(u,d,U,1,8,q,H,G),fs(b,R,U,1,8,q,H,G)}function il(u,d,b,R,U,q,H,G){fs(u,d,1,U,8,q,H,G),fs(b,R,1,U,8,q,H,G)}function Vo(u,d,b,R,U,q,H,G){Xn(u,d+4*U,U,1,8,q,H,G),Xn(b,R+4*U,U,1,8,q,H,G)}function ps(u,d,b,R,U,q,H,G){Xn(u,d+4,1,U,8,q,H,G),Xn(b,R+4,1,U,8,q,H,G)}function Ws(){this.ba=new Jn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Jt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Bo(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function $s(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Uo(){this.ua=0,this.Wa=new ie,this.vb=new ie,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new J,this.yc=new A}function iu(){this.xb=this.a=0,this.l=new Vs,this.ca=new Jn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new O,this.Pb=0,this.wd=new O,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Uo,this.ab=0,this.gc=o(4,$s),this.Oc=0}function Ui(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Vs,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ms(u,d,b,R,U,q,H){for(u=u==null?0:u[d+0],d=0;d<H;++d)U[q+d]=u+b[R+d]&255,u=U[q+d]}function zo(u,d,b,R,U,q,H){var G;if(u==null)ms(null,null,b,R,U,q,H);else for(G=0;G<H;++G)U[q+G]=u[d+G]+b[R+G]&255}function dr(u,d,b,R,U,q,H){if(u==null)ms(null,null,b,R,U,q,H);else{var G,K=u[d+0],ne=K,ce=K;for(G=0;G<H;++G)ne=ce+(K=u[d+G])-ne,ce=b[R+G]+(-256&ne?0>ne?0:255:ne)&255,ne=K,U[q+G]=ce}}function qo(u,d,b,R){var U=d.width,q=d.o;if(e(u!=null&&d!=null),0>b||0>=R||b+R>q)return null;if(!u.Cc){if(u.ga==null){var H;if(u.ga=new Ui,(H=u.ga==null)||(H=d.width*d.o,e(u.Gb.length==0),u.Gb=s(H),u.Uc=0,u.Gb==null?H=0:(u.mb=u.Gb,u.nb=u.Uc,u.rc=null,H=1),H=!H),!H){H=u.ga;var G=u.Fa,K=u.P,ne=u.qc,ce=u.mb,ve=u.nb,we=K+1,me=ne-1,Ie=H.l;if(e(G!=null&&ce!=null&&d!=null),Qo[0]=null,Qo[1]=ms,Qo[2]=zo,Qo[3]=dr,H.ca=ce,H.tb=ve,H.c=d.width,H.i=d.height,e(0<H.c&&0<H.i),1>=ne)d=0;else if(H.$a=G[K+0]>>0&3,H.Z=G[K+0]>>2&3,H.Lc=G[K+0]>>4&3,K=G[K+0]>>6&3,0>H.$a||1<H.$a||4<=H.Z||1<H.Lc||K)d=0;else if(Ie.put=ur,Ie.ac=Cn,Ie.bc=ei,Ie.ma=H,Ie.width=d.width,Ie.height=d.height,Ie.Da=d.Da,Ie.v=d.v,Ie.va=d.va,Ie.j=d.j,Ie.o=d.o,H.$a)e:{e(H.$a==1),d=bn();t:for(;;){if(d==null){d=0;break e}if(e(H!=null),H.mc=d,d.c=H.c,d.i=H.i,d.l=H.l,d.l.ma=H,d.l.width=H.c,d.l.height=H.i,d.a=0,Q(d.m,G,we,me),!ti(H.c,H.i,1,d,null)||(d.ab==1&&d.gc[0].hc==3&&Di(d.s)?(H.ic=1,G=d.c*d.i,d.Ta=null,d.Ua=0,d.V=s(G),d.Ba=0,d.V==null?(d.a=1,d=0):d=1):(H.ic=0,d=os(d,H.c)),!d))break t;d=1;break e}H.mc=null,d=0}else d=me>=H.c*H.i;H=!d}if(H)return null;u.ga.Lc!=1?u.Ga=0:R=q-b}e(u.ga!=null),e(b+R<=q);e:{if(d=(G=u.ga).c,q=G.l.o,G.$a==0){if(we=u.rc,me=u.Vc,Ie=u.Fa,K=u.P+1+b*d,ne=u.mb,ce=u.nb+b*d,e(K<=u.P+u.qc),G.Z!=0)for(e(Qo[G.Z]!=null),H=0;H<R;++H)Qo[G.Z](we,me,Ie,K,ne,ce,d),we=ne,me=ce,ce+=d,K+=d;else for(H=0;H<R;++H)r(ne,ce,Ie,K,d),we=ne,me=ce,ce+=d,K+=d;u.rc=we,u.Vc=me}else{if(e(G.mc!=null),d=b+R,e((H=G.mc)!=null),e(d<=H.i),H.C>=d)d=1;else if(G.ic||pe(),G.ic){G=H.V,we=H.Ba,me=H.c;var xe=H.i,he=(Ie=1,K=H.$/me,ne=H.$%me,ce=H.m,ve=H.s,H.$),de=me*xe,Ne=me*d,ke=ve.wc,Ee=he<Ne?mn(ve,ne,K):null;e(he<=de),e(d<=xe),e(Di(ve));t:for(;;){for(;!ce.h&&he<Ne;){if(ne&ke||(Ee=mn(ve,ne,K)),e(Ee!=null),te(ce),256>(xe=kn(Ee.G[0],Ee.H[0],ce)))G[we+he]=xe,++he,++ne>=me&&(ne=0,++K<=d&&!(K%16)&&Br(H,K));else{if(!(280>xe)){Ie=0;break t}xe=Vr(xe-256,ce);var Ke,ze=kn(Ee.G[4],Ee.H[4],ce);if(te(ce),!(he>=(ze=cr(me,ze=Vr(ze,ce)))&&de-he>=xe)){Ie=0;break t}for(Ke=0;Ke<xe;++Ke)G[we+he+Ke]=G[we+he+Ke-ze];for(he+=xe,ne+=xe;ne>=me;)ne-=me,++K<=d&&!(K%16)&&Br(H,K);he<Ne&&ne&ke&&(Ee=mn(ve,ne,K))}e(ce.h==z(ce))}Br(H,K>d?d:K);break t}!Ie||ce.h&&he<de?(Ie=0,H.a=ce.h?5:3):H.$=he,d=Ie}else d=Er(H,H.V,H.Ba,H.c,H.i,d,as);if(!d){R=0;break e}}b+R>=q&&(u.Cc=1),R=1}if(!R)return null;if(u.Cc&&((R=u.ga)!=null&&(R.mc=null),u.ga=null,0<u.Ga))return alert("todo:WebPDequantizeLevels"),null}return u.nb+b*U}function y(u,d,b,R,U,q){for(;0<U--;){var H,G=u,K=d+(b?1:0),ne=u,ce=d+(b?0:3);for(H=0;H<R;++H){var ve=ne[ce+4*H];ve!=255&&(ve*=32897,G[K+4*H+0]=G[K+4*H+0]*ve>>23,G[K+4*H+1]=G[K+4*H+1]*ve>>23,G[K+4*H+2]=G[K+4*H+2]*ve>>23)}d+=q}}function B(u,d,b,R,U){for(;0<R--;){var q;for(q=0;q<b;++q){var H=u[d+2*q+0],G=15&(ne=u[d+2*q+1]),K=4369*G,ne=(240&ne|ne>>4)*K>>16;u[d+2*q+0]=(240&H|H>>4)*K>>16&240|(15&H|H<<4)*K>>16>>4&15,u[d+2*q+1]=240&ne|G}d+=U}}function re(u,d,b,R,U,q,H,G){var K,ne,ce=255;for(ne=0;ne<U;++ne){for(K=0;K<R;++K){var ve=u[d+K];q[H+4*K]=ve,ce&=ve}d+=b,H+=G}return ce!=255}function le(u,d,b,R,U){var q;for(q=0;q<U;++q)b[R+q]=u[d+q]>>8}function pe(){xi=y,Xt=B,Zt=re,Sn=le}function Se(u,d,b){x[u]=function(R,U,q,H,G,K,ne,ce,ve,we,me,Ie,xe,he,de,Ne,ke){var Ee,Ke=ke-1>>1,ze=G[K+0]|ne[ce+0]<<16,lt=ve[we+0]|me[Ie+0]<<16;e(R!=null);var We=3*ze+lt+131074>>2;for(d(R[U+0],255&We,We>>16,xe,he),q!=null&&(We=3*lt+ze+131074>>2,d(q[H+0],255&We,We>>16,de,Ne)),Ee=1;Ee<=Ke;++Ee){var Ot=G[K+Ee]|ne[ce+Ee]<<16,Ut=ve[we+Ee]|me[Ie+Ee]<<16,Rt=ze+Ot+lt+Ut+524296,At=Rt+2*(Ot+lt)>>3;We=At+ze>>1,ze=(Rt=Rt+2*(ze+Ut)>>3)+Ot>>1,d(R[U+2*Ee-1],255&We,We>>16,xe,he+(2*Ee-1)*b),d(R[U+2*Ee-0],255&ze,ze>>16,xe,he+(2*Ee-0)*b),q!=null&&(We=Rt+lt>>1,ze=At+Ut>>1,d(q[H+2*Ee-1],255&We,We>>16,de,Ne+(2*Ee-1)*b),d(q[H+2*Ee+0],255&ze,ze>>16,de,Ne+(2*Ee+0)*b)),ze=Ot,lt=Ut}1&ke||(We=3*ze+lt+131074>>2,d(R[U+ke-1],255&We,We>>16,xe,he+(ke-1)*b),q!=null&&(We=3*lt+ze+131074>>2,d(q[H+ke-1],255&We,We>>16,de,Ne+(ke-1)*b)))}}function Le(){Ni[Cd]=$S,Ni[kd]=ry,Ni[X2]=GS,Ni[Ld]=iy,Ni[Rd]=sy,Ni[Nm]=oy,Ni[Z2]=KS,Ni[Am]=ry,Ni[Em]=iy,Ni[Dd]=sy,Ni[Im]=oy}function He(u){return u&~QS?0>u?0:255:u>>ay}function c(u,d){return He((19077*u>>8)+(26149*d>>8)-14234)}function S(u,d,b){return He((19077*u>>8)-(6419*d>>8)-(13320*b>>8)+8708)}function F(u,d){return He((19077*u>>8)+(33050*d>>8)-17685)}function $(u,d,b,R,U){R[U+0]=c(u,b),R[U+1]=S(u,d,b),R[U+2]=F(u,d)}function fe(u,d,b,R,U){R[U+0]=F(u,d),R[U+1]=S(u,d,b),R[U+2]=c(u,b)}function _e(u,d,b,R,U){var q=S(u,d,b);d=q<<3&224|F(u,d)>>3,R[U+0]=248&c(u,b)|q>>5,R[U+1]=d}function Re(u,d,b,R,U){var q=240&F(u,d)|15;R[U+0]=240&c(u,b)|S(u,d,b)>>4,R[U+1]=q}function gt(u,d,b,R,U){R[U+0]=255,$(u,d,b,R,U+1)}function Nt(u,d,b,R,U){fe(u,d,b,R,U),R[U+3]=255}function yt(u,d,b,R,U){$(u,d,b,R,U),R[U+3]=255}function Vt(u,d){return 0>u?0:u>d?d:u}function Gt(u,d,b){x[u]=function(R,U,q,H,G,K,ne,ce,ve){for(var we=ce+(-2&ve)*b;ce!=we;)d(R[U+0],q[H+0],G[K+0],ne,ce),d(R[U+1],q[H+0],G[K+0],ne,ce+b),U+=2,++H,++K,ce+=2*b;1&ve&&d(R[U+0],q[H+0],G[K+0],ne,ce)}}function zi(u,d,b){return b==0?u==0?d==0?6:5:d==0?4:0:b}function Zn(u,d,b,R,U){switch(u>>>30){case 3:Qs(d,b,R,U,0);break;case 2:xn(d,b,R,U);break;case 1:Cr(d,b,R,U)}}function gs(u,d){var b,R,U=d.M,q=d.Nb,H=u.oc,G=u.pc+40,K=u.oc,ne=u.pc+584,ce=u.oc,ve=u.pc+600;for(b=0;16>b;++b)H[G+32*b-1]=129;for(b=0;8>b;++b)K[ne+32*b-1]=129,ce[ve+32*b-1]=129;for(0<U?H[G-1-32]=K[ne-1-32]=ce[ve-1-32]=129:(i(H,G-32-1,127,21),i(K,ne-32-1,127,9),i(ce,ve-32-1,127,9)),R=0;R<u.za;++R){var we=d.ya[d.aa+R];if(0<R){for(b=-1;16>b;++b)r(H,G+32*b-4,H,G+32*b+12,4);for(b=-1;8>b;++b)r(K,ne+32*b-4,K,ne+32*b+4,4),r(ce,ve+32*b-4,ce,ve+32*b+4,4)}var me=u.Gd,Ie=u.Hd+R,xe=we.ad,he=we.Hc;if(0<U&&(r(H,G-32,me[Ie].y,0,16),r(K,ne-32,me[Ie].f,0,8),r(ce,ve-32,me[Ie].ea,0,8)),we.Za){var de=H,Ne=G-32+16;for(0<U&&(R>=u.za-1?i(de,Ne,me[Ie].y[15],4):r(de,Ne,me[Ie+1].y,0,4)),b=0;4>b;b++)de[Ne+128+b]=de[Ne+256+b]=de[Ne+384+b]=de[Ne+0+b];for(b=0;16>b;++b,he<<=2)de=H,Ne=G+uy[b],qi[we.Ob[b]](de,Ne),Zn(he,xe,16*+b,de,Ne)}else if(de=zi(R,U,we.Ob[0]),Ko[de](H,G),he!=0)for(b=0;16>b;++b,he<<=2)Zn(he,xe,16*+b,H,G+uy[b]);for(b=we.Gc,de=zi(R,U,we.Dd),Js[de](K,ne),Js[de](ce,ve),he=xe,de=K,Ne=ne,255&(we=b>>0)&&(170&we?Pc(he,256,de,Ne):_i(he,256,de,Ne)),we=ce,he=ve,255&(b>>=8)&&(170&b?Pc(xe,320,we,he):_i(xe,320,we,he)),U<u.Ub-1&&(r(me[Ie].y,0,H,G+480,16),r(me[Ie].f,0,K,ne+224,8),r(me[Ie].ea,0,ce,ve+224,8)),b=8*q*u.B,me=u.sa,Ie=u.ta+16*R+16*q*u.R,xe=u.qa,we=u.ra+8*R+b,he=u.Ha,de=u.Ia+8*R+b,b=0;16>b;++b)r(me,Ie+b*u.R,H,G+32*b,16);for(b=0;8>b;++b)r(xe,we+b*u.B,K,ne+32*b,8),r(he,de+b*u.B,ce,ve+32*b,8)}}function ys(u,d,b,R,U,q,H,G,K){var ne=[0],ce=[0],ve=0,we=K!=null?K.kd:0,me=K??new Bo;if(u==null||12>b)return 7;me.data=u,me.w=d,me.ha=b,d=[d],b=[b],me.gb=[me.gb];e:{var Ie=d,xe=b,he=me.gb;if(e(u!=null),e(xe!=null),e(he!=null),he[0]=0,12<=xe[0]&&!n(u,Ie[0],"RIFF")){if(n(u,Ie[0]+8,"WEBP")){he=3;break e}var de=Ve(u,Ie[0]+4);if(12>de||4294967286<de){he=3;break e}if(we&&de>xe[0]-8){he=7;break e}he[0]=de,Ie[0]+=12,xe[0]-=12}he=0}if(he!=0)return he;for(de=0<me.gb[0],b=b[0];;){e:{var Ne=u;xe=d,he=b;var ke=ne,Ee=ce,Ke=Ie=[0];if((We=ve=[ve])[0]=0,8>he[0])he=7;else{if(!n(Ne,xe[0],"VP8X")){if(Ve(Ne,xe[0]+4)!=10){he=3;break e}if(18>he[0]){he=7;break e}var ze=Ve(Ne,xe[0]+8),lt=1+Me(Ne,xe[0]+12);if(2147483648<=lt*(Ne=1+Me(Ne,xe[0]+15))){he=3;break e}Ke!=null&&(Ke[0]=ze),ke!=null&&(ke[0]=lt),Ee!=null&&(Ee[0]=Ne),xe[0]+=18,he[0]-=18,We[0]=1}he=0}}if(ve=ve[0],Ie=Ie[0],he!=0)return he;if(xe=!!(2&Ie),!de&&ve)return 3;if(q!=null&&(q[0]=!!(16&Ie)),H!=null&&(H[0]=xe),G!=null&&(G[0]=0),H=ne[0],Ie=ce[0],ve&&xe&&K==null){he=0;break}if(4>b){he=7;break}if(de&&ve||!de&&!ve&&!n(u,d[0],"ALPH")){b=[b],me.na=[me.na],me.P=[me.P],me.Sa=[me.Sa];e:{ze=u,he=d,de=b;var We=me.gb;ke=me.na,Ee=me.P,Ke=me.Sa,lt=22,e(ze!=null),e(de!=null),Ne=he[0];var Ot=de[0];for(e(ke!=null),e(Ke!=null),ke[0]=null,Ee[0]=null,Ke[0]=0;;){if(he[0]=Ne,de[0]=Ot,8>Ot){he=7;break e}var Ut=Ve(ze,Ne+4);if(4294967286<Ut){he=3;break e}var Rt=8+Ut+1&-2;if(lt+=Rt,0<We&&lt>We){he=3;break e}if(!n(ze,Ne,"VP8 ")||!n(ze,Ne,"VP8L")){he=0;break e}if(Ot[0]<Rt){he=7;break e}n(ze,Ne,"ALPH")||(ke[0]=ze,Ee[0]=Ne+8,Ke[0]=Ut),Ne+=Rt,Ot-=Rt}}if(b=b[0],me.na=me.na[0],me.P=me.P[0],me.Sa=me.Sa[0],he!=0)break}b=[b],me.Ja=[me.Ja],me.xa=[me.xa];e:if(We=u,he=d,de=b,ke=me.gb[0],Ee=me.Ja,Ke=me.xa,ze=he[0],Ne=!n(We,ze,"VP8 "),lt=!n(We,ze,"VP8L"),e(We!=null),e(de!=null),e(Ee!=null),e(Ke!=null),8>de[0])he=7;else{if(Ne||lt){if(We=Ve(We,ze+4),12<=ke&&We>ke-12){he=3;break e}if(we&&We>de[0]-8){he=7;break e}Ee[0]=We,he[0]+=8,de[0]-=8,Ke[0]=lt}else Ke[0]=5<=de[0]&&We[ze+0]==47&&!(We[ze+4]>>5),Ee[0]=de[0];he=0}if(b=b[0],me.Ja=me.Ja[0],me.xa=me.xa[0],d=d[0],he!=0)break;if(4294967286<me.Ja)return 3;if(G==null||xe||(G[0]=me.xa?2:1),H=[H],Ie=[Ie],me.xa){if(5>b){he=7;break}G=H,we=Ie,xe=q,u==null||5>b?u=0:5<=b&&u[d+0]==47&&!(u[d+4]>>5)?(de=[0],We=[0],ke=[0],Q(Ee=new O,u,d,b),Ye(Ee,de,We,ke)?(G!=null&&(G[0]=de[0]),we!=null&&(we[0]=We[0]),xe!=null&&(xe[0]=ke[0]),u=1):u=0):u=0}else{if(10>b){he=7;break}G=Ie,u==null||10>b||!Ga(u,d+3,b-3)?u=0:(we=u[d+0]|u[d+1]<<8|u[d+2]<<16,xe=16383&(u[d+7]<<8|u[d+6]),u=16383&(u[d+9]<<8|u[d+8]),1&we||3<(we>>1&7)||!(we>>4&1)||we>>5>=me.Ja||!xe||!u?u=0:(H&&(H[0]=xe),G&&(G[0]=u),u=1))}if(!u||(H=H[0],Ie=Ie[0],ve&&(ne[0]!=H||ce[0]!=Ie)))return 3;K!=null&&(K[0]=me,K.offset=d-K.w,e(4294967286>d-K.w),e(K.offset==K.ha-b));break}return he==0||he==7&&ve&&K==null?(q!=null&&(q[0]|=me.na!=null&&0<me.na.length),R!=null&&(R[0]=H),U!=null&&(U[0]=Ie),0):he}function Ac(u,d,b){var R=d.width,U=d.height,q=0,H=0,G=R,K=U;if(d.Da=u!=null&&0<u.Da,d.Da&&(G=u.cd,K=u.bd,q=u.v,H=u.j,11>b||(q&=-2,H&=-2),0>q||0>H||0>=G||0>=K||q+G>R||H+K>U))return 0;if(d.v=q,d.j=H,d.va=q+G,d.o=H+K,d.U=G,d.T=K,d.da=u!=null&&0<u.da,d.da){if(!$e(G,K,b=[u.ib],q=[u.hb]))return 0;d.ib=b[0],d.hb=q[0]}return d.ob=u!=null&&u.ob,d.Kb=u==null||!u.Sd,d.da&&(d.ob=d.ib<3*R/4&&d.hb<3*U/4,d.Kb=0),1}function Ec(u){if(u==null)return 2;if(11>u.S){var d=u.f.RGBA;d.fb+=(u.height-1)*d.A,d.A=-d.A}else d=u.f.kb,u=u.height,d.O+=(u-1)*d.fa,d.fa=-d.fa,d.N+=(u-1>>1)*d.Ab,d.Ab=-d.Ab,d.W+=(u-1>>1)*d.Db,d.Db=-d.Db,d.F!=null&&(d.J+=(u-1)*d.lb,d.lb=-d.lb);return 0}function su(u,d,b,R){if(R==null||0>=u||0>=d)return 2;if(b!=null){if(b.Da){var U=b.cd,q=b.bd,H=-2&b.v,G=-2&b.j;if(0>H||0>G||0>=U||0>=q||H+U>u||G+q>d)return 2;u=U,d=q}if(b.da){if(!$e(u,d,U=[b.ib],q=[b.hb]))return 2;u=U[0],d=q[0]}}R.width=u,R.height=d;e:{var K=R.width,ne=R.height;if(u=R.S,0>=K||0>=ne||!(u>=Cd&&13>u))u=2;else{if(0>=R.Rd&&R.sd==null){H=q=U=d=0;var ce=(G=K*cy[u])*ne;if(11>u||(q=(ne+1)/2*(d=(K+1)/2),u==12&&(H=(U=K)*ne)),(ne=s(ce+2*q+H))==null){u=1;break e}R.sd=ne,11>u?((K=R.f.RGBA).eb=ne,K.fb=0,K.A=G,K.size=ce):((K=R.f.kb).y=ne,K.O=0,K.fa=G,K.Fd=ce,K.f=ne,K.N=0+ce,K.Ab=d,K.Cd=q,K.ea=ne,K.W=0+ce+q,K.Db=d,K.Ed=q,u==12&&(K.F=ne,K.J=0+ce+2*q),K.Tc=H,K.lb=U)}if(d=1,U=R.S,q=R.width,H=R.height,U>=Cd&&13>U)if(11>U)u=R.f.RGBA,d&=(G=Math.abs(u.A))*(H-1)+q<=u.size,d&=G>=q*cy[U],d&=u.eb!=null;else{u=R.f.kb,G=(q+1)/2,ce=(H+1)/2,K=Math.abs(u.fa),ne=Math.abs(u.Ab);var ve=Math.abs(u.Db),we=Math.abs(u.lb),me=we*(H-1)+q;d&=K*(H-1)+q<=u.Fd,d&=ne*(ce-1)+G<=u.Cd,d=(d&=ve*(ce-1)+G<=u.Ed)&K>=q&ne>=G&ve>=G,d&=u.y!=null,d&=u.f!=null,d&=u.ea!=null,U==12&&(d&=we>=q,d&=me<=u.Tc,d&=u.F!=null)}else d=0;u=d?0:2}}return u!=0||b!=null&&b.fd&&(u=Ec(R)),u}var er=64,ou=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],au=24,lu=32,Ic=8,zr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Oe("Predictor0","PredictorAdd0"),x.Predictor0=function(){return 4278190080},x.Predictor1=function(u){return u},x.Predictor2=function(u,d,b){return d[b+0]},x.Predictor3=function(u,d,b){return d[b+1]},x.Predictor4=function(u,d,b){return d[b-1]},x.Predictor5=function(u,d,b){return Be(Be(u,d[b+1]),d[b+0])},x.Predictor6=function(u,d,b){return Be(u,d[b-1])},x.Predictor7=function(u,d,b){return Be(u,d[b+0])},x.Predictor8=function(u,d,b){return Be(d[b-1],d[b+0])},x.Predictor9=function(u,d,b){return Be(d[b+0],d[b+1])},x.Predictor10=function(u,d,b){return Be(Be(u,d[b-1]),Be(d[b+0],d[b+1]))},x.Predictor11=function(u,d,b){var R=d[b+0];return 0>=ut(R>>24&255,u>>24&255,(d=d[b-1])>>24&255)+ut(R>>16&255,u>>16&255,d>>16&255)+ut(R>>8&255,u>>8&255,d>>8&255)+ut(255&R,255&u,255&d)?R:u},x.Predictor12=function(u,d,b){var R=d[b+0];return(tt((u>>24&255)+(R>>24&255)-((d=d[b-1])>>24&255))<<24|tt((u>>16&255)+(R>>16&255)-(d>>16&255))<<16|tt((u>>8&255)+(R>>8&255)-(d>>8&255))<<8|tt((255&u)+(255&R)-(255&d)))>>>0},x.Predictor13=function(u,d,b){var R=d[b-1];return(rt((u=Be(u,d[b+0]))>>24&255,R>>24&255)<<24|rt(u>>16&255,R>>16&255)<<16|rt(u>>8&255,R>>8&255)<<8|rt(u>>0&255,R>>0&255))>>>0};var xm=x.PredictorAdd0;x.PredictorAdd1=nt,Oe("Predictor2","PredictorAdd2"),Oe("Predictor3","PredictorAdd3"),Oe("Predictor4","PredictorAdd4"),Oe("Predictor5","PredictorAdd5"),Oe("Predictor6","PredictorAdd6"),Oe("Predictor7","PredictorAdd7"),Oe("Predictor8","PredictorAdd8"),Oe("Predictor9","PredictorAdd9"),Oe("Predictor10","PredictorAdd10"),Oe("Predictor11","PredictorAdd11"),Oe("Predictor12","PredictorAdd12"),Oe("Predictor13","PredictorAdd13");var Tc=x.PredictorAdd2;xt("ColorIndexInverseTransform","MapARGB","32b",function(u){return u>>8&255},function(u){return u}),xt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(u){return u},function(u){return u>>8&255});var Nd,wi=x.ColorIndexInverseTransform,uu=x.MapARGB,Ad=x.VP8LColorIndexInverseTransformAlpha,Ed=x.MapAlpha,Ho=x.VP8LPredictorsAdd=[];Ho.length=16,(x.VP8LPredictors=[]).length=16,(x.VP8LPredictorsAdd_C=[]).length=16,(x.VP8LPredictors_C=[]).length=16;var sl,qr,Pr,Wo,Gs,Ks,cu,Qs,xn,Pc,Cr,_i,hu,Id,Cc,ol,al,$o,ll,du,ul,Go,kc,bi,xi,Xt,Zt,Sn,Un=s(511),Ys=s(2041),Lc=s(225),fu=s(767),Td=0,Sm=Ys,Pd=Lc,si=fu,Si=Un,Cd=0,kd=1,X2=2,Ld=3,Rd=4,Nm=5,Z2=6,Am=7,Em=8,Dd=9,Im=10,LS=[2,3,7],RS=[3,3,11],ey=[280,256,256,256,40],DS=[0,1,1,1,0],jS=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],FS=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],OS=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],MS=8,Tm=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Pm=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Rc=null,VS=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],BS=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ty=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],US=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],zS=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],qS=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],HS=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ko=[],qi=[],Js=[],WS=1,ny=2,Qo=[],Ni=[];Se("UpsampleRgbLinePair",$,3),Se("UpsampleBgrLinePair",fe,3),Se("UpsampleRgbaLinePair",yt,4),Se("UpsampleBgraLinePair",Nt,4),Se("UpsampleArgbLinePair",gt,4),Se("UpsampleRgba4444LinePair",Re,2),Se("UpsampleRgb565LinePair",_e,2);var $S=x.UpsampleRgbLinePair,GS=x.UpsampleBgrLinePair,ry=x.UpsampleRgbaLinePair,iy=x.UpsampleBgraLinePair,sy=x.UpsampleArgbLinePair,oy=x.UpsampleRgba4444LinePair,KS=x.UpsampleRgb565LinePair,jd=16,Fd=1<<jd-1,Dc=-227,Cm=482,ay=6,QS=(256<<ay)-1,ly=0,YS=s(256),JS=s(256),XS=s(256),ZS=s(256),e3=s(Cm-Dc),t3=s(Cm-Dc);Gt("YuvToRgbRow",$,3),Gt("YuvToBgrRow",fe,3),Gt("YuvToRgbaRow",yt,4),Gt("YuvToBgraRow",Nt,4),Gt("YuvToArgbRow",gt,4),Gt("YuvToRgba4444Row",Re,2),Gt("YuvToRgb565Row",_e,2);var uy=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Od=[0,2,8],n3=[8,7,6,4,4,2,2,2,1,1,1,1],r3=1;this.WebPDecodeRGBA=function(u,d,b,R,U){var q=kd,H=new Ws,G=new Jn;H.ba=G,G.S=q,G.width=[G.width],G.height=[G.height];var K=G.width,ne=G.height,ce=new Zr;if(ce==null||u==null)var ve=2;else e(ce!=null),ve=ys(u,d,b,ce.width,ce.height,ce.Pd,ce.Qd,ce.format,null);if(ve!=0?K=0:(K!=null&&(K[0]=ce.width[0]),ne!=null&&(ne[0]=ce.height[0]),K=1),K){G.width=G.width[0],G.height=G.height[0],R!=null&&(R[0]=G.width),U!=null&&(U[0]=G.height);e:{if(R=new Vs,(U=new Bo).data=u,U.w=d,U.ha=b,U.kd=1,d=[0],e(U!=null),((u=ys(U.data,U.w,U.ha,null,null,null,d,null,U))==0||u==7)&&d[0]&&(u=4),(d=u)==0){if(e(H!=null),R.data=U.data,R.w=U.w+U.offset,R.ha=U.ha-U.offset,R.put=ur,R.ac=Cn,R.bc=ei,R.ma=H,U.xa){if((u=bn())==null){H=1;break e}if(function(we,me){var Ie=[0],xe=[0],he=[0];t:for(;;){if(we==null)return 0;if(me==null)return we.a=2,0;if(we.l=me,we.a=0,Q(we.m,me.data,me.w,me.ha),!Ye(we.m,Ie,xe,he)){we.a=3;break t}if(we.xb=ny,me.width=Ie[0],me.height=xe[0],!ti(Ie[0],xe[0],1,we,null))break t;return 1}return e(we.a!=0),0}(u,R)){if(R=(d=su(R.width,R.height,H.Oa,H.ba))==0){t:{R=u;n:for(;;){if(R==null){R=0;break t}if(e(R.s.yc!=null),e(R.s.Ya!=null),e(0<R.s.Wb),e((b=R.l)!=null),e((U=b.ma)!=null),R.xb!=0){if(R.ca=U.ba,R.tb=U.tb,e(R.ca!=null),!Ac(U.Oa,b,Ld)){R.a=2;break n}if(!os(R,b.width)||b.da)break n;if((b.da||Pt(R.ca.S))&&pe(),11>R.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),R.ca.f.kb.F!=null&&pe()),R.Pb&&0<R.s.ua&&R.s.vb.X==null&&!Ze(R.s.vb,R.s.Wa.Xa)){R.a=1;break n}R.xb=0}if(!Er(R,R.V,R.Ba,R.c,R.i,b.o,Eo))break n;U.Dc=R.Ma,R=1;break t}e(R.a!=0),R=0}R=!R}R&&(d=u.a)}else d=u.a}else{if((u=new $a)==null){H=1;break e}if(u.Fa=U.na,u.P=U.P,u.qc=U.Sa,Ka(u,R)){if((d=su(R.width,R.height,H.Oa,H.ba))==0){if(u.Aa=0,b=H.Oa,e((U=u)!=null),b!=null){if(0<(K=0>(K=b.Md)?0:100<K?255:255*K/100)){for(ne=ce=0;4>ne;++ne)12>(ve=U.pb[ne]).lc&&(ve.ia=K*n3[0>ve.lc?0:ve.lc]>>3),ce|=ve.ia;ce&&(alert("todo:VP8InitRandom"),U.ia=1)}U.Ga=b.Id,100<U.Ga?U.Ga=100:0>U.Ga&&(U.Ga=0)}Xl(u,R)||(d=u.a)}}else d=u.a}d==0&&H.Oa!=null&&H.Oa.fd&&(d=Ec(H.ba))}H=d}q=H!=0?null:11>q?G.f.RGBA.eb:G.f.kb.y}else q=null;return q};var cy=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function h(x,C){for(var j="",N=0;N<4;N++)j+=String.fromCharCode(x[C++]);return j}function p(x,C){return(x[C+0]<<0|x[C+1]<<8|x[C+2]<<16)>>>0}function g(x,C){return(x[C+0]<<0|x[C+1]<<8|x[C+2]<<16|x[C+3]<<24)>>>0}new l;var v=[0],f=[0],E=[],k=new l,P=t,w=function(x,C){var j={},N=0,A=!1,D=0,J=0;if(j.frames=[],!function(M,z,Y,te){for(var oe=0;oe<te;oe++)if(M[z+oe]!=Y.charCodeAt(oe))return!0;return!1}(x,C,"RIFF",4)){var ue,Z;for(g(x,C+=4),C+=8;C<x.length;){var ee=h(x,C),Q=g(x,C+=4);C+=4;var X=Q+(1&Q);switch(ee){case"VP8 ":case"VP8L":j.frames[N]===void 0&&(j.frames[N]={}),(O=j.frames[N]).src_off=A?J:C-8,O.src_size=D+Q+8,N++,A&&(A=!1,D=0,J=0);break;case"VP8X":(O=j.header={}).feature_flags=x[C];var se=C+4;O.canvas_width=1+p(x,se),se+=3,O.canvas_height=1+p(x,se),se+=3;break;case"ALPH":A=!0,D=X+8,J=C-8;break;case"ANIM":(O=j.header).bgcolor=g(x,C),se=C+4,O.loop_count=(ue=x)[(Z=se)+0]<<0|ue[Z+1]<<8,se+=2;break;case"ANMF":var ge,O;(O=j.frames[N]={}).offset_x=2*p(x,C),C+=3,O.offset_y=2*p(x,C),C+=3,O.width=1+p(x,C),C+=3,O.height=1+p(x,C),C+=3,O.duration=p(x,C),C+=3,ge=x[C++],O.dispose=1&ge,O.blend=ge>>1&1}ee!="ANMF"&&(C+=X)}return j}}(P,0);w.response=P,w.rgbaoutput=!0,w.dataurl=!1;var _=w.header?w.header:null,T=w.frames?w.frames:null;if(_){_.loop_counter=_.loop_count,v=[_.canvas_height],f=[_.canvas_width];for(var L=0;L<T.length&&T[L].blend!=0;L++);}var V=T[0],W=k.WebPDecodeRGBA(P,V.src_off,V.src_size,f,v);V.rgba=W,V.imgwidth=f[0],V.imgheight=v[0];for(var I=0;I<f[0]*v[0]*4;I++)E[I]=W[I];return this.width=f,this.height=v,this.data=E,this}(function(t){var e=function(){return typeof e1=="function"},n=function(v,f,E,k){var P=4,w=o;switch(k){case t.image_compression.FAST:P=1,w=s;break;case t.image_compression.MEDIUM:P=6,w=a;break;case t.image_compression.SLOW:P=9,w=l}v=r(v,f,E,w);var _=e1(v,{level:P});return t.__addimage__.arrayBufferToBinaryString(_)},r=function(v,f,E,k){for(var P,w,_,T=v.length/f,L=new Uint8Array(v.length+T),V=p(),W=0;W<T;W+=1){if(_=W*f,P=v.subarray(_,_+f),k)L.set(k(P,E,w),_+W);else{for(var I,x=V.length,C=[];I<x;I+=1)C[I]=V[I](P,E,w);var j=g(C.concat());L.set(C[j],_+W)}w=P}return L},i=function(v){var f=Array.apply([],v);return f.unshift(0),f},s=function(v,f){var E,k=[],P=v.length;k[0]=1;for(var w=0;w<P;w+=1)E=v[w-f]||0,k[w+1]=v[w]-E+256&255;return k},o=function(v,f,E){var k,P=[],w=v.length;P[0]=2;for(var _=0;_<w;_+=1)k=E&&E[_]||0,P[_+1]=v[_]-k+256&255;return P},a=function(v,f,E){var k,P,w=[],_=v.length;w[0]=3;for(var T=0;T<_;T+=1)k=v[T-f]||0,P=E&&E[T]||0,w[T+1]=v[T]+256-(k+P>>>1)&255;return w},l=function(v,f,E){var k,P,w,_,T=[],L=v.length;T[0]=4;for(var V=0;V<L;V+=1)k=v[V-f]||0,P=E&&E[V]||0,w=E&&E[V-f]||0,_=h(k,P,w),T[V+1]=v[V]-_+256&255;return T},h=function(v,f,E){if(v===f&&f===E)return v;var k=Math.abs(f-E),P=Math.abs(v-E),w=Math.abs(v+f-E-E);return k<=P&&k<=w?v:P<=w?f:E},p=function(){return[i,s,o,a,l]},g=function(v){var f=v.map(function(E){return E.reduce(function(k,P){return k+Math.abs(P)},0)});return f.indexOf(Math.min.apply(null,f))};t.processPNG=function(v,f,E,k){var P,w,_,T,L,V,W,I,x,C,j,N,A,D,J,ue=this.decode.FLATE_DECODE,Z="";if(this.__addimage__.isArrayBuffer(v)&&(v=new Uint8Array(v)),this.__addimage__.isArrayBufferView(v)){if(v=(_=new AR(v)).imgData,w=_.bits,P=_.colorSpace,L=_.colors,[4,6].indexOf(_.colorType)!==-1){if(_.bits===8){x=(I=_.pixelBitlength==32?new Uint32Array(_.decodePixels().buffer):_.pixelBitlength==16?new Uint16Array(_.decodePixels().buffer):new Uint8Array(_.decodePixels().buffer)).length,j=new Uint8Array(x*_.colors),C=new Uint8Array(x);var ee,Q=_.pixelBitlength-_.bits;for(D=0,J=0;D<x;D++){for(A=I[D],ee=0;ee<Q;)j[J++]=A>>>ee&255,ee+=_.bits;C[D]=A>>>ee&255}}if(_.bits===16){x=(I=new Uint32Array(_.decodePixels().buffer)).length,j=new Uint8Array(x*(32/_.pixelBitlength)*_.colors),C=new Uint8Array(x*(32/_.pixelBitlength)),N=_.colors>1,D=0,J=0;for(var X=0;D<x;)A=I[D++],j[J++]=A>>>0&255,N&&(j[J++]=A>>>16&255,A=I[D++],j[J++]=A>>>0&255),C[X++]=A>>>16&255;w=8}k!==t.image_compression.NONE&&e()?(v=n(j,_.width*_.colors,_.colors,k),W=n(C,_.width,1,k)):(v=j,W=C,ue=void 0)}if(_.colorType===3&&(P=this.color_spaces.INDEXED,V=_.palette,_.transparency.indexed)){var se=_.transparency.indexed,ge=0;for(D=0,x=se.length;D<x;++D)ge+=se[D];if((ge/=255)===x-1&&se.indexOf(0)!==-1)T=[se.indexOf(0)];else if(ge!==x){for(I=_.decodePixels(),C=new Uint8Array(I.length),D=0,x=I.length;D<x;D++)C[D]=se[I[D]];W=n(C,_.width,1)}}var O=function(M){var z;switch(M){case t.image_compression.FAST:z=11;break;case t.image_compression.MEDIUM:z=13;break;case t.image_compression.SLOW:z=14;break;default:z=12}return z}(k);return ue===this.decode.FLATE_DECODE&&(Z="/Predictor "+O+" "),Z+="/Colors "+L+" /BitsPerComponent "+w+" /Columns "+_.width,(this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),(W&&this.__addimage__.isArrayBuffer(W)||this.__addimage__.isArrayBufferView(W))&&(W=this.__addimage__.arrayBufferToBinaryString(W)),{alias:E,data:v,index:f,filter:ue,decodeParameters:Z,transparency:T,palette:V,sMask:W,predictor:O,width:_.width,height:_.height,bitsPerComponent:w,colorSpace:P}}}})(ot.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new ER(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var h={data:l,width:o,height:a},p=new Rg(100).encode(h,100);return t.processJPEG.call(this,p,n,r,i)},t.processGIF87A=t.processGIF89A}(ot.API),Gi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Gi.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){Qt.log("bit decode error:"+n)}},Gi.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},Gi.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,h=this.palette[a];if(this.data[o]=h.blue,this.data[o+1]=h.green,this.data[o+2]=h.red,this.data[o+3]=255,2*i+1>=this.width)break;h=this.palette[l],this.data[o+4]=h.blue,this.data[o+4+1]=h.green,this.data[o+4+2]=h.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Gi.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},Gi.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,h=s>>15?255:0,p=r*this.width*4+4*i;this.data[p]=l,this.data[p+1]=a,this.data[p+2]=o,this.data[p+3]=h}this.pos+=t}},Gi.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,h=(o>>11)/e*255|0,p=i*this.width*4+4*s;this.data[p]=h,this.data[p+1]=l,this.data[p+2]=a,this.data[p+3]=255}this.pos+=t}},Gi.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Gi.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},Gi.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new Gi(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},h=new Rg(100).encode(l,100);return t.processJPEG.call(this,h,n,r,i)}}(ot.API),xw.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new xw(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},h=new Rg(100).encode(l,100);return t.processJPEG.call(this,h,n,r,i)}}(ot.API),ot.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,h=0;h<i;h+=4){var p=r[h],g=r[h+1],v=r[h+2],f=r[h+3];s[a++]=p,s[a++]=g,s[a++]=v,o[l++]=f}var E=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:E,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},ot.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},_u=ot.API,bf=_u.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,h=e.kerning?e.kerning:i.metadata.Unicode.kerning,p=h.fof?h.fof:1,g=e.doKerning!==!1,v=0,f=t.length,E=0,k=a[0]||l,P=[];for(n=0;n<f;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?P.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(v=g&&qt(h[r])==="object"&&!isNaN(parseInt(h[r][E],10))?h[r][E]/p:0,P.push((a[r]||k)/l+v)),E=r;return P},vw=_u.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return _u.processArabic&&(t=_u.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:bf.apply(this,arguments).reduce(function(s,o){return s+o},0)},ww=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},_w=function(t,e,n){n||(n={});var r,i,s,o,a,l,h,p=[],g=[p],v=n.textIndent||0,f=0,E=0,k=t.split(" "),P=bf.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?k[0].length+2:n.lineIndent||0){var w=Array(l).join(" "),_=[];k.map(function(L){(L=L.split(/\s*\n/)).length>1?_=_.concat(L.map(function(V,W){return(W&&V.length?`
`:"")+V})):_.push(L[0])}),k=_,l=vw.apply(this,[w,n])}for(s=0,o=k.length;s<o;s++){var T=0;if(r=k[s],l&&r[0]==`
`&&(r=r.substr(1),T=1),v+f+(E=(i=bf.apply(this,[r,n])).reduce(function(L,V){return L+V},0))>e||T){if(E>e){for(a=ww.apply(this,[r,i,e-(v+f),e]),p.push(a.shift()),p=[a.pop()];a.length;)g.push([a.shift()]);E=i.slice(r.length-(p[0]?p[0].length:0)).reduce(function(L,V){return L+V},0)}else p=[r];g.push(p),v=E+l,f=P}else p.push(r),v+=f+E,f=P}return h=l?function(L,V){return(V?w:"")+L.join(" ")}:function(L){return L.join(" ")},g.map(h)},_u.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var g=this.internal.getFont(p.fontName,p.fontStyle);return g.metadata.Unicode?{widths:g.metadata.Unicode.widths||{0:1},kerning:g.metadata.Unicode.kerning||{}}:{font:g.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,h=[];for(a=0,l=r.length;a<l;a++)h=h.concat(_w.apply(this,[r[a],o,s]));return h},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(g){return"0x"+parseInt(g,10).toString(16)},o=t.__fontmetrics__.compress=function(g){var v,f,E,k,P=["{"];for(var w in g){if(v=g[w],isNaN(parseInt(w,10))?f="'"+w+"'":(w=parseInt(w,10),f=(f=s(w).slice(2)).slice(0,-1)+r[f.slice(-1)]),typeof v=="number")v<0?(E=s(v).slice(3),k="-"):(E=s(v).slice(2),k=""),E=k+E.slice(0,-1)+r[E.slice(-1)];else{if(qt(v)!=="object")throw new Error("Don't know what to do with value type "+qt(v)+".");E=o(v)}P.push(f+E)}return P.push("}"),P.join("")},a=t.__fontmetrics__.uncompress=function(g){if(typeof g!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,f,E,k,P={},w=1,_=P,T=[],L="",V="",W=g.length-1,I=1;I<W;I+=1)(k=g[I])=="'"?v?(E=v.join(""),v=void 0):v=[]:v?v.push(k):k=="{"?(T.push([_,E]),_={},E=void 0):k=="}"?((f=T.pop())[0][f[1]]=_,E=void 0,_=f[0]):k=="-"?w=-1:E===void 0?n.hasOwnProperty(k)?(L+=n[k],E=parseInt(L,16)*w,w=1,L=""):L+=k:n.hasOwnProperty(k)?(V+=n[k],_[E]=parseInt(V,16)*w,w=1,E=void 0,V=""):V+=k;return P},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},p={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(g){var v=g.font,f=p.Unicode[v.postScriptName];f&&(v.metadata.Unicode={},v.metadata.Unicode.widths=f.widths,v.metadata.Unicode.kerning=f.kerning);var E=h.Unicode[v.postScriptName];E&&(v.metadata.Unicode.encoding=E,v.encoding=E.codePages[0])}])}(ot.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(xh(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(ot),function(t){function e(){return(dt.canvg?Promise.resolve(dt.canvg):zl(()=>import("./index.es-DjTTzC8A.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}ot.API.addSvgAsImage=function(n,r,i,s,o,a,l,h){if(isNaN(r)||isNaN(i))throw Qt.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw Qt.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=s,p.height=o;var g=p.getContext("2d");g.fillStyle="#fff",g.fillRect(0,0,p.width,p.height);var v={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return e().then(function(E){return E.fromString(g,n,v)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(E){return E.render(v)}).then(function(){f.addImage(p.toDataURL("image/jpeg",1),r,i,s,o,l,h)})}}(),ot.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},ot.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],h=0,p=0,g=0;function v(E,k){var P,w=!1;for(P=0;P<E.length;P+=1)E[P]===k&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var f=a.length;for(g=0;g<f;g+=1)n[a[g]].value=n[a[g]].defaultValue,n[a[g]].explicitSet=!1}if(qt(t)==="object"){for(i in t)if(s=t[i],v(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&v(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(h=0;h<s.length;h+=1)if(r=!0,s[h].length===1&&typeof s[h][0]=="number")l.push(String(s[h]-1));else if(s[h].length>1){for(p=0;p<s[h].length;p+=1)typeof s[h][p]!="number"&&(r=!1);r===!0&&l.push([s[h][0]-1,s[h][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var E,k=[];for(E in n)n[E].explicitSet===!0&&(n[E].type==="name"?k.push("/"+E+" /"+n[E].value):k.push("/"+E+" "+n[E].value));k.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+k.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),h=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+h+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(ot.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,h=["","0","00","000","0000"],p=[""],g=0,v=s.length;g<v;++g){if(a=o.metadata.characterToGlyph(s.charCodeAt(g)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(g),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return p.join("");a=a.toString(16),p.push(h[4-a.length],a)}return p.join("")},r=function(s){var o,a,l,h,p,g,v;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],g=0,v=(a=Object.keys(s).sort(function(f,E){return f-E})).length;g<v;g++)o=a[g],l.length>=100&&(p+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(h=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+h+">"));return l.length&&(p+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),p+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,h=o.newObject,p=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var g=a.metadata.Unicode.widths,v=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),f="",E=0;E<v.length;E++)f+=String.fromCharCode(v[E]);var k=h();p({data:f,addLength1:!0,objectId:k}),l("endobj");var P=h();p({data:r(a.metadata.toUnicode),addLength1:!0,objectId:P}),l("endobj");var w=h();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Au(a.fontName)),l("/FontFile2 "+k+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var _=h();l("<<"),l("/Type /Font"),l("/BaseFont /"+Au(a.fontName)),l("/FontDescriptor "+w+" 0 R"),l("/W "+t.API.PDFObject.convert(g)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=h(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+P+" 0 R"),l("/BaseFont /"+Au(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+_+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,h=o.newObject,p=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var g=a.metadata.rawData,v="",f=0;f<g.length;f++)v+=String.fromCharCode(g[f]);var E=h();p({data:v,addLength1:!0,objectId:E}),l("endobj");var k=h();p({data:r(a.metadata.toUnicode),addLength1:!0,objectId:k}),l("endobj");var P=h();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+E+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+Au(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=h();for(var w=0;w<a.metadata.hmtx.widths.length;w++)a.metadata.hmtx.widths[w]=parseInt(a.metadata.hmtx.widths[w]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+k+" 0 R/BaseFont/"+Au(a.fontName)+"/FontDescriptor "+P+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,h=s.y,p=s.options||{},g=s.mutex||{},v=g.pdfEscape,f=g.activeFontKey,E=g.fonts,k=f,P="",w=0,_="",T=E[k].encoding;if(E[k].encoding!=="Identity-H")return{text:a,x:l,y:h,options:p,mutex:g};for(_=a,k=f,Array.isArray(a)&&(_=a[0]),w=0;w<_.length;w+=1)E[k].metadata.hasOwnProperty("cmap")&&(o=E[k].metadata.cmap.unicode.codeMap[_[w].charCodeAt(0)]),o||_[w].charCodeAt(0)<256&&E[k].metadata.hasOwnProperty("Unicode")?P+=_[w]:P+="";var L="";return parseInt(k.slice(1))<14||T==="WinAnsiEncoding"?L=v(P,k).split("").map(function(V){return V.charCodeAt(0).toString(16)}).join(""):T==="Identity-H"&&(L=n(P,E[k])),g.isHex=!0,{text:L,x:l,y:h,options:p,mutex:g}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var h=0;for(h=0;h<o.length;h+=1)Array.isArray(o[h])&&o[h].length===3?a.push([i(Object.assign({},l,{text:o[h][0]})).text,o[h][1],o[h][2]]):a.push(i(Object.assign({},l,{text:o[h]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(ot),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(ot.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,h,p,g=e,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],E={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},k={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},P=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),_=!1,T=0;this.__bidiEngine__={};var L=function(N){var A=N.charCodeAt(),D=A>>8,J=k[D];return J!==void 0?g[256*J+(255&A)]:D===252||D===253?"AL":w.test(D)?"L":D===8?"R":"N"},V=function(N){for(var A,D=0;D<N.length;D++){if((A=L(N.charAt(D)))==="L")return!1;if(A==="R")return!0}return!1},W=function(N,A,D,J){var ue,Z,ee,Q,X=A[J];switch(X){case"L":case"R":_=!1;break;case"N":case"AN":break;case"EN":_&&(X="AN");break;case"AL":_=!0,X="R";break;case"WS":X="N";break;case"CS":J<1||J+1>=A.length||(ue=D[J-1])!=="EN"&&ue!=="AN"||(Z=A[J+1])!=="EN"&&Z!=="AN"?X="N":_&&(Z="AN"),X=Z===ue?Z:"N";break;case"ES":X=(ue=J>0?D[J-1]:"B")==="EN"&&J+1<A.length&&A[J+1]==="EN"?"EN":"N";break;case"ET":if(J>0&&D[J-1]==="EN"){X="EN";break}if(_){X="N";break}for(ee=J+1,Q=A.length;ee<Q&&A[ee]==="ET";)ee++;X=ee<Q&&A[ee]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(Q=A.length,ee=J+1;ee<Q&&A[ee]==="NSM";)ee++;if(ee<Q){var se=N[J],ge=se>=1425&&se<=2303||se===64286;if(ue=A[ee],ge&&(ue==="R"||ue==="AL")){X="R";break}}}X=J<1||(ue=A[J-1])==="B"?"N":D[J-1];break;case"B":_=!1,i=!0,X=T;break;case"S":s=!0,X="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":_=!1;break;case"BN":X="N"}return X},I=function(N,A,D){var J=N.split("");return D&&x(J,D,{hiLevel:T}),J.reverse(),A&&A.reverse(),J.join("")},x=function(N,A,D){var J,ue,Z,ee,Q,X=-1,se=N.length,ge=0,O=[],M=T?f:v,z=[];for(_=!1,i=!1,s=!1,ue=0;ue<se;ue++)z[ue]=L(N[ue]);for(Z=0;Z<se;Z++){if(Q=ge,O[Z]=W(N,z,O,Z),J=240&(ge=M[Q][E[O[Z]]]),ge&=15,A[Z]=ee=M[ge][5],J>0)if(J===16){for(ue=X;ue<Z;ue++)A[ue]=1;X=-1}else X=-1;if(M[ge][6])X===-1&&(X=Z);else if(X>-1){for(ue=X;ue<Z;ue++)A[ue]=ee;X=-1}z[Z]==="B"&&(A[Z]=0),D.hiLevel|=ee}s&&function(Y,te,oe){for(var ae=0;ae<oe;ae++)if(Y[ae]==="S"){te[ae]=T;for(var ye=ae-1;ye>=0&&Y[ye]==="WS";ye--)te[ye]=T}}(z,A,se)},C=function(N,A,D,J,ue){if(!(ue.hiLevel<N)){if(N===1&&T===1&&!i)return A.reverse(),void(D&&D.reverse());for(var Z,ee,Q,X,se=A.length,ge=0;ge<se;){if(J[ge]>=N){for(Q=ge+1;Q<se&&J[Q]>=N;)Q++;for(X=ge,ee=Q-1;X<ee;X++,ee--)Z=A[X],A[X]=A[ee],A[ee]=Z,D&&(Z=D[X],D[X]=D[ee],D[ee]=Z);ge=Q}ge++}}},j=function(N,A,D){var J=N.split(""),ue={hiLevel:T};return D||(D=[]),x(J,D,ue),function(Z,ee,Q){if(Q.hiLevel!==0&&p)for(var X,se=0;se<Z.length;se++)ee[se]===1&&(X=P.indexOf(Z[se]))>=0&&(Z[se]=P[X+1])}(J,D,ue),C(2,J,A,D,ue),C(1,J,A,D,ue),J.join("")};return this.__bidiEngine__.doBidiReorder=function(N,A,D){if(function(ue,Z){if(Z)for(var ee=0;ee<ue.length;ee++)Z[ee]=ee;a===void 0&&(a=V(ue)),h===void 0&&(h=V(ue))}(N,A),o||!l||h)if(o&&l&&a^h)T=a?1:0,N=I(N,A,D);else if(!o&&l&&h)T=a?1:0,N=j(N,A,D),N=I(N,A);else if(!o||a||l||h){if(o&&!l&&a^h)N=I(N,A),a?(T=0,N=j(N,A,D)):(T=1,N=j(N,A,D),N=I(N,A));else if(o&&a&&!l&&h)T=1,N=j(N,A,D),N=I(N,A);else if(!o&&!l&&a^h){var J=p;a?(T=1,N=j(N,A,D),T=0,p=!1,N=j(N,A,D),p=J):(T=0,N=j(N,A,D),N=I(N,A),T=1,p=!1,N=j(N,A,D),p=J,N=I(N,A))}}else T=0,N=j(N,A,D);else T=a?1:0,N=j(N,A,D);return N},this.__bidiEngine__.setOptions=function(N){N&&(o=N.isInputVisual,l=N.isOutputVisual,a=N.isInputRtl,h=N.isOutputRtl,p=N.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(ot),ot.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Ma(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new UR(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new IR(this.contents),this.head=new PR(this),this.name=new DR(this),this.cmap=new CS(this),this.toUnicode={},this.hhea=new CR(this),this.maxp=new jR(this),this.hmtx=new FR(this),this.post=new LR(this),this.os2=new kR(this),this.loca=new BR(this),this.glyf=new OR(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,h;for(h=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],h.push(Math.round(e*this.scaleFactor));return h}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var is,Ma=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),IR=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,h,p,g,v,f,E,k;for(k in f=Object.keys(n).length,l=Math.log(2),g=16*Math.floor(Math.log(f)/l),o=Math.floor(g/l),p=16*f-g,(i=new Ma).writeInt(this.scalarType),i.writeShort(f),i.writeShort(g),i.writeShort(o),i.writeShort(p),s=16*f,h=i.pos+s,a=null,E=[],n)for(v=n[k],i.writeString(k),i.writeInt(t(v)),i.writeInt(h),i.writeInt(v.length),E=E.concat(v),k==="head"&&(a=h),h+=v.length;h%4;)E.push(0),h++;return i.write(E),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=kS.call(n);n.length%4;)n.push(0);for(s=new Ma(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),TR={}.hasOwnProperty,js=function(t,e){for(var n in e)TR.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};is=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var PR=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return js(e,is),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new Ma).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),Sw=function(){function t(e,n){var r,i,s,o,a,l,h,p,g,v,f,E,k,P,w,_,T;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),g=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(f=e.readUInt16(),v=f/2,e.pos+=6,s=function(){var L,V;for(V=[],l=L=0;0<=v?L<v:L>v;l=0<=v?++L:--L)V.push(e.readUInt16());return V}(),e.pos+=2,k=function(){var L,V;for(V=[],l=L=0;0<=v?L<v:L>v;l=0<=v?++L:--L)V.push(e.readUInt16());return V}(),h=function(){var L,V;for(V=[],l=L=0;0<=v?L<v:L>v;l=0<=v?++L:--L)V.push(e.readUInt16());return V}(),p=function(){var L,V;for(V=[],l=L=0;0<=v?L<v:L>v;l=0<=v?++L:--L)V.push(e.readUInt16());return V}(),i=(this.length-e.pos+this.offset)/2,a=function(){var L,V;for(V=[],l=L=0;0<=i?L<i:L>i;l=0<=i?++L:--L)V.push(e.readUInt16());return V}(),l=w=0,T=s.length;w<T;l=++w)for(P=s[l],r=_=E=k[l];E<=P?_<=P:_>=P;r=E<=P?++_:--_)p[l]===0?o=r+h[l]:(o=a[p[l]/2+(r-E)-(v-l)]||0)!==0&&(o+=h[l]),this.codeMap[r]=65535&o}e.pos=g}return t.encode=function(e,n){var r,i,s,o,a,l,h,p,g,v,f,E,k,P,w,_,T,L,V,W,I,x,C,j,N,A,D,J,ue,Z,ee,Q,X,se,ge,O,M,z,Y,te,oe,ae,ye,Ae,Te,Me;switch(J=new Ma,o=Object.keys(e).sort(function(Ve,Ze){return Ve-Ze}),n){case"macroman":for(k=0,P=function(){var Ve=[];for(E=0;E<256;++E)Ve.push(0);return Ve}(),_={0:0},s={},ue=0,X=o.length;ue<X;ue++)_[ye=e[i=o[ue]]]==null&&(_[ye]=++k),s[i]={old:e[i],new:_[e[i]]},P[i]=_[e[i]];return J.writeUInt16(1),J.writeUInt16(0),J.writeUInt32(12),J.writeUInt16(0),J.writeUInt16(262),J.writeUInt16(0),J.write(P),{charMap:s,subtable:J.data,maxGlyphID:k+1};case"unicode":for(A=[],g=[],T=0,_={},r={},w=h=null,Z=0,se=o.length;Z<se;Z++)_[V=e[i=o[Z]]]==null&&(_[V]=++T),r[i]={old:V,new:_[V]},a=_[V]-i,w!=null&&a===h||(w&&g.push(w),A.push(i),h=a),w=i;for(w&&g.push(w),g.push(65535),A.push(65535),j=2*(C=A.length),x=2*Math.pow(Math.log(C)/Math.LN2,2),v=Math.log(x/2)/Math.LN2,I=2*C-x,l=[],W=[],f=[],E=ee=0,ge=A.length;ee<ge;E=++ee){if(N=A[E],p=g[E],N===65535){l.push(0),W.push(0);break}if(N-(D=r[N].new)>=32768)for(l.push(0),W.push(2*(f.length+C-E)),i=Q=N;N<=p?Q<=p:Q>=p;i=N<=p?++Q:--Q)f.push(r[i].new);else l.push(D-N),W.push(0)}for(J.writeUInt16(3),J.writeUInt16(1),J.writeUInt32(12),J.writeUInt16(4),J.writeUInt16(16+8*C+2*f.length),J.writeUInt16(0),J.writeUInt16(j),J.writeUInt16(x),J.writeUInt16(v),J.writeUInt16(I),oe=0,O=g.length;oe<O;oe++)i=g[oe],J.writeUInt16(i);for(J.writeUInt16(0),ae=0,M=A.length;ae<M;ae++)i=A[ae],J.writeUInt16(i);for(Ae=0,z=l.length;Ae<z;Ae++)a=l[Ae],J.writeUInt16(a);for(Te=0,Y=W.length;Te<Y;Te++)L=W[Te],J.writeUInt16(L);for(Me=0,te=f.length;Me<te;Me++)k=f[Me],J.writeUInt16(k);return{charMap:r,subtable:J.data,maxGlyphID:T+1}}},t}(),CS=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return js(e,is),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new Sw(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=Sw.encode(n,r),(s=new Ma).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),CR=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return js(e,is),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),kR=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return js(e,is),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),LR=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return js(e,is),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,h;for(h=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)h.push(n.readUInt32());return h}).call(this)}},e}(),RR=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},DR=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return js(e,is),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,o,a,l,h,p,g,v,f;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(h={},o=g=0,v=i.length;g<v;o=++g)s=i[o],n.pos=s.offset,p=n.readString(s.length),a=new RR(p,s),h[f=s.nameID]==null&&(h[f]=[]),h[s.nameID].push(a);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},e}(),jR=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return js(e,is),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),FR=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return js(e,is),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,o,a,l,h;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var p,g;for(g=[],r=p=0;0<=s?p<s:p>s;r=0<=s?++p:--p)g.push(n.readInt16());return g}(),this.widths=(function(){var p,g,v,f;for(f=[],p=0,g=(v=this.metrics).length;p<g;p++)o=v[p],f.push(o.advance);return f}).call(this),i=this.widths[this.widths.length-1],h=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)h.push(this.widths.push(i));return h},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),kS=[].slice,OR=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return js(e,is),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,o,a,l,h,p,g,v;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(l=new Ma(r.read(s))).readShort(),p=l.readShort(),v=l.readShort(),h=l.readShort(),g=l.readShort(),this.cache[n]=a===-1?new VR(l,p,v,h,g):new MR(l,a,p,v,h,g),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,o,a,l,h;for(a=[],o=[],l=0,h=r.length;l<h;l++)s=n[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),MR=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),VR=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Ma(kS.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),BR=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return js(e,is),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(n.readUInt32());return o}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],h=this.offsets[a+1]-l;h>0&&(s+=h)}for(var p=new Array(4*i.length),g=0;g<i.length;++g)p[4*g+3]=255&i[g],p[4*g+2]=(65280&i[g])>>8,p[4*g+1]=(16711680&i[g])>>16,p[4*g]=(4278190080&i[g])>>24;return p},e}(),UR=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,h,p,g,v,f,E,k,P,w;for(i in r=CS.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),f={0:0},w=r.charMap)f[(l=w[i]).old]=l.new;for(E in v=r.maxGlyphID,o)E in f||(f[E]=v++);return p=function(_){var T,L;for(T in L={},_)L[_[T]]=T;return L}(f),g=Object.keys(p).sort(function(_,T){return _-T}),k=function(){var _,T,L;for(L=[],_=0,T=g.length;_<T;_++)a=g[_],L.push(p[a]);return L}(),s=this.font.glyf.encode(o,k,f),h=this.font.loca.encode(s.offsets,k),P={cmap:this.font.cmap.raw(),glyf:s.table,loca:h,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(P["OS/2"]=this.font.os2.raw()),this.font.directory.encode(P)},t}();ot.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,h;for(h=[],a=0,l=n.length;a<l;a++)r=n[a],h.push(e.convert(r));return h}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();const zR=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:wR,AcroFormAppearance:Xe,AcroFormButton:qn,AcroFormCheckBox:Ah,AcroFormChoiceField:Il,AcroFormComboBox:Pl,AcroFormEditBox:Sh,AcroFormListBox:Tl,AcroFormPasswordField:Eh,AcroFormPushButton:Nh,AcroFormRadioButton:Cl,AcroFormTextField:ka,GState:td,ShadingPattern:fa,TilingPattern:Sl,default:ot,jsPDF:ot},Symbol.toStringTag,{value:"Module"}));var qR={exports:{}};const HR=g3(zR);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(t,e){(function(r,i){t.exports=i(function(){try{return HR}catch{}}())})(typeof globalThis<"u"?globalThis:typeof Bm<"u"?Bm:typeof window<"u"?window:typeof self<"u"?self:Bm,function(n){return function(){var r={172:function(a,l){var h=this&&this.__extends||function(){var v=function(f,E){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,P){k.__proto__=P}||function(k,P){for(var w in P)Object.prototype.hasOwnProperty.call(P,w)&&(k[w]=P[w])},v(f,E)};return function(f,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");v(f,E);function k(){this.constructor=f}f.prototype=E===null?Object.create(E):(k.prototype=E.prototype,new k)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.CellHookData=l.HookData=void 0;var p=function(){function v(f,E,k){this.table=E,this.pageNumber=E.pageNumber,this.pageCount=this.pageNumber,this.settings=E.settings,this.cursor=k,this.doc=f.getDocument()}return v}();l.HookData=p;var g=function(v){h(f,v);function f(E,k,P,w,_,T){var L=v.call(this,E,k,T)||this;return L.cell=P,L.row=w,L.column=_,L.section=w.section,L}return f}(p);l.CellHookData=g},340:function(a,l,h){Object.defineProperty(l,"__esModule",{value:!0});var p=h(4),g=h(136),v=h(744),f=h(776),E=h(664),k=h(972);function P(w){w.API.autoTable=function(){for(var _=[],T=0;T<arguments.length;T++)_[T]=arguments[T];var L;_.length===1?L=_[0]:(console.error("Use of deprecated autoTable initiation"),L=_[2]||{},L.columns=_[0],L.body=_[1]);var V=(0,f.parseInput)(this,L),W=(0,k.createTable)(this,V);return(0,E.drawTable)(this,W),this},w.API.lastAutoTable=!1,w.API.previousAutoTable=!1,w.API.autoTable.previous=!1,w.API.autoTableText=function(_,T,L,V){(0,g.default)(_,T,L,V,this)},w.API.autoTableSetDefaults=function(_){return v.DocHandler.setDefaults(_,this),this},w.autoTableSetDefaults=function(_,T){v.DocHandler.setDefaults(_,T)},w.API.autoTableHtmlToJson=function(_,T){var L;if(T===void 0&&(T=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var V=new v.DocHandler(this),W=(0,p.parseHtml)(V,_,window,T,!1),I=W.head,x=W.body,C=((L=I[0])===null||L===void 0?void 0:L.map(function(j){return j.content}))||[];return{columns:C,rows:x,data:x}},w.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var _=this.lastAutoTable;return _&&_.finalY?_.finalY:0},w.API.autoTableAddPageContent=function(_){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),w.API.autoTable.globalDefaults||(w.API.autoTable.globalDefaults={}),w.API.autoTable.globalDefaults.addPageContent=_,this},w.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}l.default=P},136:function(a,l){Object.defineProperty(l,"__esModule",{value:!0});function h(p,g,v,f,E){f=f||{};var k=1.15,P=E.internal.scaleFactor,w=E.internal.getFontSize()/P,_=E.getLineHeightFactor?E.getLineHeightFactor():k,T=w*_,L=/\r\n|\r|\n/g,V="",W=1;if((f.valign==="middle"||f.valign==="bottom"||f.halign==="center"||f.halign==="right")&&(V=typeof p=="string"?p.split(L):p,W=V.length||1),v+=w*(2-k),f.valign==="middle"?v-=W/2*T:f.valign==="bottom"&&(v-=W*T),f.halign==="center"||f.halign==="right"){var I=w;if(f.halign==="center"&&(I*=.5),V&&W>=1){for(var x=0;x<V.length;x++)E.text(V[x],g-E.getStringUnitWidth(V[x])*I,v),v+=T;return E}g-=E.getStringUnitWidth(p)*I}return f.halign==="justify"?E.text(p,g,v,{maxWidth:f.maxWidth||100,align:"justify"}):E.text(p,g,v),E}l.default=h},420:function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.getPageAvailableWidth=l.parseSpacing=l.getFillStyle=l.addTableBorder=l.getStringWidth=void 0;function h(E,k,P){P.applyStyles(k,!0);var w=Array.isArray(E)?E:[E],_=w.map(function(T){return P.getTextWidth(T)}).reduce(function(T,L){return Math.max(T,L)},0);return _}l.getStringWidth=h;function p(E,k,P,w){var _=k.settings.tableLineWidth,T=k.settings.tableLineColor;E.applyStyles({lineWidth:_,lineColor:T});var L=g(_,!1);L&&E.rect(P.x,P.y,k.getWidth(E.pageSize().width),w.y-P.y,L)}l.addTableBorder=p;function g(E,k){var P=E>0,w=k||k===0;return P&&w?"DF":P?"S":w?"F":null}l.getFillStyle=g;function v(E,k){var P,w,_,T;if(E=E||k,Array.isArray(E)){if(E.length>=4)return{top:E[0],right:E[1],bottom:E[2],left:E[3]};if(E.length===3)return{top:E[0],right:E[1],bottom:E[2],left:E[1]};if(E.length===2)return{top:E[0],right:E[1],bottom:E[0],left:E[1]};E.length===1?E=E[0]:E=k}return typeof E=="object"?(typeof E.vertical=="number"&&(E.top=E.vertical,E.bottom=E.vertical),typeof E.horizontal=="number"&&(E.right=E.horizontal,E.left=E.horizontal),{left:(P=E.left)!==null&&P!==void 0?P:k,top:(w=E.top)!==null&&w!==void 0?w:k,right:(_=E.right)!==null&&_!==void 0?_:k,bottom:(T=E.bottom)!==null&&T!==void 0?T:k}):(typeof E!="number"&&(E=k),{top:E,right:E,bottom:E,left:E})}l.parseSpacing=v;function f(E,k){var P=v(k.settings.margin,0);return E.pageSize().width-(P.left+P.right)}l.getPageAvailableWidth=f},796:function(a,l){var h=this&&this.__extends||function(){var f=function(E,k){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,w){P.__proto__=w}||function(P,w){for(var _ in w)Object.prototype.hasOwnProperty.call(w,_)&&(P[_]=w[_])},f(E,k)};return function(E,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");f(E,k);function P(){this.constructor=E}E.prototype=k===null?Object.create(k):(P.prototype=k.prototype,new P)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.getTheme=l.defaultStyles=l.HtmlRowInput=void 0;var p=function(f){h(E,f);function E(k){var P=f.call(this)||this;return P._element=k,P}return E}(Array);l.HtmlRowInput=p;function g(f){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/f,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}l.defaultStyles=g;function v(f){var E={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return E[f]}l.getTheme=v},903:function(a,l,h){Object.defineProperty(l,"__esModule",{value:!0}),l.parseCss=void 0;var p=h(420);function g(P,w,_,T,L){var V={},W=1.3333333333333333,I=f(w,function(X){return L.getComputedStyle(X).backgroundColor});I!=null&&(V.fillColor=I);var x=f(w,function(X){return L.getComputedStyle(X).color});x!=null&&(V.textColor=x);var C=k(T,_);C&&(V.cellPadding=C);var j="borderTopColor",N=W*_,A=T.borderTopWidth;if(T.borderBottomWidth===A&&T.borderRightWidth===A&&T.borderLeftWidth===A){var D=(parseFloat(A)||0)/N;D&&(V.lineWidth=D)}else V.lineWidth={top:(parseFloat(T.borderTopWidth)||0)/N,right:(parseFloat(T.borderRightWidth)||0)/N,bottom:(parseFloat(T.borderBottomWidth)||0)/N,left:(parseFloat(T.borderLeftWidth)||0)/N},V.lineWidth.top||(V.lineWidth.right?j="borderRightColor":V.lineWidth.bottom?j="borderBottomColor":V.lineWidth.left&&(j="borderLeftColor"));var J=f(w,function(X){return L.getComputedStyle(X)[j]});J!=null&&(V.lineColor=J);var ue=["left","right","center","justify"];ue.indexOf(T.textAlign)!==-1&&(V.halign=T.textAlign),ue=["middle","bottom","top"],ue.indexOf(T.verticalAlign)!==-1&&(V.valign=T.verticalAlign);var Z=parseInt(T.fontSize||"");isNaN(Z)||(V.fontSize=Z/W);var ee=v(T);ee&&(V.fontStyle=ee);var Q=(T.fontFamily||"").toLowerCase();return P.indexOf(Q)!==-1&&(V.font=Q),V}l.parseCss=g;function v(P){var w="";return(P.fontWeight==="bold"||P.fontWeight==="bolder"||parseInt(P.fontWeight)>=700)&&(w="bold"),(P.fontStyle==="italic"||P.fontStyle==="oblique")&&(w+="italic"),w}function f(P,w){var _=E(P,w);if(!_)return null;var T=_.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!T||!Array.isArray(T))return null;var L=[parseInt(T[1]),parseInt(T[2]),parseInt(T[3])],V=parseInt(T[4]);return V===0||isNaN(L[0])||isNaN(L[1])||isNaN(L[2])?null:L}function E(P,w){var _=w(P);return _==="rgba(0, 0, 0, 0)"||_==="transparent"||_==="initial"||_==="inherit"?P.parentElement==null?null:E(P.parentElement,w):_}function k(P,w){var _=[P.paddingTop,P.paddingRight,P.paddingBottom,P.paddingLeft],T=96/(72/w),L=(parseInt(P.lineHeight)-parseInt(P.fontSize))/w/2,V=_.map(function(I){return parseInt(I||"0")/T}),W=(0,p.parseSpacing)(V,0);return L>W.top&&(W.top=L),L>W.bottom&&(W.bottom=L),W}},744:function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.DocHandler=void 0;var h={},p=function(){function g(v){this.jsPDFDocument=v,this.userStyles={textColor:v.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:v.internal.getFontSize(),fontStyle:v.internal.getFont().fontStyle,font:v.internal.getFont().fontName,lineWidth:v.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:v.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return g.setDefaults=function(v,f){f===void 0&&(f=null),f?f.__autoTableDocumentDefaults=v:h=v},g.unifyColor=function(v){return Array.isArray(v)?v:typeof v=="number"?[v,v,v]:typeof v=="string"?[v]:null},g.prototype.applyStyles=function(v,f){var E,k,P;f===void 0&&(f=!1),v.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(v.fontStyle);var w=this.jsPDFDocument.internal.getFont(),_=w.fontStyle,T=w.fontName;if(v.font&&(T=v.font),v.fontStyle){_=v.fontStyle;var L=this.getFontList()[T];L&&L.indexOf(_)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(L[0]),_=L[0])}if(this.jsPDFDocument.setFont(T,_),v.fontSize&&this.jsPDFDocument.setFontSize(v.fontSize),!f){var V=g.unifyColor(v.fillColor);V&&(E=this.jsPDFDocument).setFillColor.apply(E,V),V=g.unifyColor(v.textColor),V&&(k=this.jsPDFDocument).setTextColor.apply(k,V),V=g.unifyColor(v.lineColor),V&&(P=this.jsPDFDocument).setDrawColor.apply(P,V),typeof v.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(v.lineWidth)}},g.prototype.splitTextToSize=function(v,f,E){return this.jsPDFDocument.splitTextToSize(v,f,E)},g.prototype.rect=function(v,f,E,k,P){return this.jsPDFDocument.rect(v,f,E,k,P)},g.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},g.prototype.getTextWidth=function(v){return this.jsPDFDocument.getTextWidth(v)},g.prototype.getDocument=function(){return this.jsPDFDocument},g.prototype.setPage=function(v){this.jsPDFDocument.setPage(v)},g.prototype.addPage=function(){return this.jsPDFDocument.addPage()},g.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},g.prototype.getGlobalOptions=function(){return h||{}},g.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},g.prototype.pageSize=function(){var v=this.jsPDFDocument.internal.pageSize;return v.width==null&&(v={width:v.getWidth(),height:v.getHeight()}),v},g.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},g.prototype.getLineHeightFactor=function(){var v=this.jsPDFDocument;return v.getLineHeightFactor?v.getLineHeightFactor():1.15},g.prototype.getLineHeight=function(v){return v/this.scaleFactor()*this.getLineHeightFactor()},g.prototype.pageNumber=function(){var v=this.jsPDFDocument.internal.getCurrentPageInfo();return v?v.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},g}();l.DocHandler=p},4:function(a,l,h){Object.defineProperty(l,"__esModule",{value:!0}),l.parseHtml=void 0;var p=h(903),g=h(796);function v(k,P,w,_,T){var L,V;_===void 0&&(_=!1),T===void 0&&(T=!1);var W;typeof P=="string"?W=w.document.querySelector(P):W=P;var I=Object.keys(k.getFontList()),x=k.scaleFactor(),C=[],j=[],N=[];if(!W)return console.error("Html table could not be found with input: ",P),{head:C,body:j,foot:N};for(var A=0;A<W.rows.length;A++){var D=W.rows[A],J=(V=(L=D==null?void 0:D.parentElement)===null||L===void 0?void 0:L.tagName)===null||V===void 0?void 0:V.toLowerCase(),ue=f(I,x,w,D,_,T);ue&&(J==="thead"?C.push(ue):J==="tfoot"?N.push(ue):j.push(ue))}return{head:C,body:j,foot:N}}l.parseHtml=v;function f(k,P,w,_,T,L){for(var V=new g.HtmlRowInput(_),W=0;W<_.cells.length;W++){var I=_.cells[W],x=w.getComputedStyle(I);if(T||x.display!=="none"){var C=void 0;L&&(C=(0,p.parseCss)(k,I,P,x,w)),V.push({rowSpan:I.rowSpan,colSpan:I.colSpan,styles:C,_element:I,content:E(I)})}}var j=w.getComputedStyle(_);if(V.length>0&&(T||j.display!=="none"))return V}function E(k){var P=k.cloneNode(!0);return P.innerHTML=P.innerHTML.replace(/\n/g,"").replace(/ +/g," "),P.innerHTML=P.innerHTML.split(/<br.*?>/).map(function(w){return w.trim()}).join(`
`),P.innerText||P.textContent||""}},776:function(a,l,h){Object.defineProperty(l,"__esModule",{value:!0}),l.parseInput=void 0;var p=h(4),g=h(356),v=h(420),f=h(744),E=h(792);function k(W,I){var x=new f.DocHandler(W),C=x.getDocumentOptions(),j=x.getGlobalOptions();(0,E.default)(x,j,C,I);var N=(0,g.assign)({},j,C,I),A;typeof window<"u"&&(A=window);var D=P(j,C,I),J=w(j,C,I),ue=_(x,N),Z=L(x,N,A);return{id:I.tableId,content:Z,hooks:J,styles:D,settings:ue}}l.parseInput=k;function P(W,I,x){for(var C={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},j=function(J){if(J==="columnStyles"){var ue=W[J],Z=I[J],ee=x[J];C.columnStyles=(0,g.assign)({},ue,Z,ee)}else{var Q=[W,I,x],X=Q.map(function(se){return se[J]||{}});C[J]=(0,g.assign)({},X[0],X[1],X[2])}},N=0,A=Object.keys(C);N<A.length;N++){var D=A[N];j(D)}return C}function w(W,I,x){for(var C=[W,I,x],j={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},N=0,A=C;N<A.length;N++){var D=A[N];D.didParseCell&&j.didParseCell.push(D.didParseCell),D.willDrawCell&&j.willDrawCell.push(D.willDrawCell),D.didDrawCell&&j.didDrawCell.push(D.didDrawCell),D.willDrawPage&&j.willDrawPage.push(D.willDrawPage),D.didDrawPage&&j.didDrawPage.push(D.didDrawPage)}return j}function _(W,I){var x,C,j,N,A,D,J,ue,Z,ee,Q,X,se=(0,v.parseSpacing)(I.margin,40/W.scaleFactor()),ge=(x=T(W,I.startY))!==null&&x!==void 0?x:se.top,O;I.showFoot===!0?O="everyPage":I.showFoot===!1?O="never":O=(C=I.showFoot)!==null&&C!==void 0?C:"everyPage";var M;I.showHead===!0?M="everyPage":I.showHead===!1?M="never":M=(j=I.showHead)!==null&&j!==void 0?j:"everyPage";var z=(N=I.useCss)!==null&&N!==void 0?N:!1,Y=I.theme||(z?"plain":"striped"),te=!!I.horizontalPageBreak,oe=(A=I.horizontalPageBreakRepeat)!==null&&A!==void 0?A:null;return{includeHiddenHtml:(D=I.includeHiddenHtml)!==null&&D!==void 0?D:!1,useCss:z,theme:Y,startY:ge,margin:se,pageBreak:(J=I.pageBreak)!==null&&J!==void 0?J:"auto",rowPageBreak:(ue=I.rowPageBreak)!==null&&ue!==void 0?ue:"auto",tableWidth:(Z=I.tableWidth)!==null&&Z!==void 0?Z:"auto",showHead:M,showFoot:O,tableLineWidth:(ee=I.tableLineWidth)!==null&&ee!==void 0?ee:0,tableLineColor:(Q=I.tableLineColor)!==null&&Q!==void 0?Q:200,horizontalPageBreak:te,horizontalPageBreakRepeat:oe,horizontalPageBreakBehaviour:(X=I.horizontalPageBreakBehaviour)!==null&&X!==void 0?X:"afterAllRows"}}function T(W,I){var x=W.getLastAutoTable(),C=W.scaleFactor(),j=W.pageNumber(),N=!1;if(x&&x.startPageNumber){var A=x.startPageNumber+x.pageNumber-1;N=A===j}return typeof I=="number"?I:(I==null||I===!1)&&N&&(x==null?void 0:x.finalY)!=null?x.finalY+20/C:null}function L(W,I,x){var C=I.head||[],j=I.body||[],N=I.foot||[];if(I.html){var A=I.includeHiddenHtml;if(x){var D=(0,p.parseHtml)(W,I.html,x,A,I.useCss)||{};C=D.head||C,j=D.body||C,N=D.foot||C}else console.error("Cannot parse html in non browser environment")}var J=I.columns||V(C,j,N);return{columns:J,head:C,body:j,foot:N}}function V(W,I,x){var C=W[0]||I[0]||x[0]||[],j=[];return Object.keys(C).filter(function(N){return N!=="_element"}).forEach(function(N){var A=1,D;Array.isArray(C)?D=C[parseInt(N)]:D=C[N],typeof D=="object"&&!Array.isArray(D)&&(A=(D==null?void 0:D.colSpan)||1);for(var J=0;J<A;J++){var ue=void 0;Array.isArray(C)?ue=j.length:ue=N+(J>0?"_".concat(J):"");var Z={dataKey:ue};j.push(Z)}}),j}},792:function(a,l){Object.defineProperty(l,"__esModule",{value:!0});function h(g,v,f,E){for(var k=function(T){T&&typeof T!="object"&&console.error("The options parameter should be of type object, is: "+typeof T),typeof T.extendWidth<"u"&&(T.tableWidth=T.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof T.margins<"u"&&(typeof T.margin>"u"&&(T.margin=T.margins),console.error("Use of deprecated option: margins, use margin instead.")),T.startY&&typeof T.startY!="number"&&(console.error("Invalid value for startY option",T.startY),delete T.startY),!T.didDrawPage&&(T.afterPageContent||T.beforePageContent||T.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),T.didDrawPage=function(N){g.applyStyles(g.userStyles),T.beforePageContent&&T.beforePageContent(N),g.applyStyles(g.userStyles),T.afterPageContent&&T.afterPageContent(N),g.applyStyles(g.userStyles),T.afterPageAdd&&N.pageNumber>1&&N.afterPageAdd(N),g.applyStyles(g.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(N){T[N]&&console.error('The "'.concat(N,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(N){var A=N[0],D=N[1];T[D]&&(console.error("Use of deprecated option ".concat(D,". Use ").concat(A," instead")),T[A]=T[D])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(N){var A=typeof N=="string"?N:N[0],D=typeof N=="string"?N:N[1];typeof T[A]<"u"&&(typeof T.styles[D]>"u"&&(T.styles[D]=T[A]),console.error("Use of deprecated option: "+A+", use the style "+D+" instead."))});for(var L=0,V=["styles","bodyStyles","headStyles","footStyles"];L<V.length;L++){var W=V[L];p(T[W]||{})}for(var I=T.columnStyles||{},x=0,C=Object.keys(I);x<C.length;x++){var j=C[x];p(I[j]||{})}},P=0,w=[v,f,E];P<w.length;P++){var _=w[P];k(_)}}l.default=h;function p(g){g.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),g.minCellHeight||(g.minCellHeight=g.rowHeight)):g.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),g.cellWidth||(g.cellWidth=g.columnWidth))}},260:function(a,l,h){Object.defineProperty(l,"__esModule",{value:!0}),l.Column=l.Cell=l.Row=l.Table=void 0;var p=h(796),g=h(172),v=h(420),f=function(){function w(_,T){this.pageNumber=1,this.pageCount=1,this.id=_.id,this.settings=_.settings,this.styles=_.styles,this.hooks=_.hooks,this.columns=T.columns,this.head=T.head,this.body=T.body,this.foot=T.foot}return w.prototype.getHeadHeight=function(_){return this.head.reduce(function(T,L){return T+L.getMaxCellHeight(_)},0)},w.prototype.getFootHeight=function(_){return this.foot.reduce(function(T,L){return T+L.getMaxCellHeight(_)},0)},w.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},w.prototype.callCellHooks=function(_,T,L,V,W,I){for(var x=0,C=T;x<C.length;x++){var j=C[x],N=new g.CellHookData(_,this,L,V,W,I),A=j(N)===!1;if(L.text=Array.isArray(L.text)?L.text:[L.text],A)return!1}return!0},w.prototype.callEndPageHooks=function(_,T){_.applyStyles(_.userStyles);for(var L=0,V=this.hooks.didDrawPage;L<V.length;L++){var W=V[L];W(new g.HookData(_,this,T))}},w.prototype.callWillDrawPageHooks=function(_,T){for(var L=0,V=this.hooks.willDrawPage;L<V.length;L++){var W=V[L];W(new g.HookData(_,this,T))}},w.prototype.getWidth=function(_){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var T=this.columns.reduce(function(V,W){return V+W.wrappedWidth},0);return T}else{var L=this.settings.margin;return _-L.left-L.right}},w}();l.Table=f;var E=function(){function w(_,T,L,V,W){W===void 0&&(W=!1),this.height=0,this.raw=_,_ instanceof p.HtmlRowInput&&(this.raw=_._element,this.element=_._element),this.index=T,this.section=L,this.cells=V,this.spansMultiplePages=W}return w.prototype.getMaxCellHeight=function(_){var T=this;return _.reduce(function(L,V){var W;return Math.max(L,((W=T.cells[V.index])===null||W===void 0?void 0:W.height)||0)},0)},w.prototype.hasRowSpan=function(_){var T=this;return _.filter(function(L){var V=T.cells[L.index];return V?V.rowSpan>1:!1}).length>0},w.prototype.canEntireRowFit=function(_,T){return this.getMaxCellHeight(T)<=_},w.prototype.getMinimumRowHeight=function(_,T){var L=this;return _.reduce(function(V,W){var I=L.cells[W.index];if(!I)return 0;var x=T.getLineHeight(I.styles.fontSize),C=I.padding("vertical"),j=C+x;return j>V?j:V},0)},w}();l.Row=E;var k=function(){function w(_,T,L){var V,W;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=T,this.section=L,this.raw=_;var I=_;_!=null&&typeof _=="object"&&!Array.isArray(_)?(this.rowSpan=_.rowSpan||1,this.colSpan=_.colSpan||1,I=(W=(V=_.content)!==null&&V!==void 0?V:_.title)!==null&&W!==void 0?W:_,_._element&&(this.raw=_._element)):(this.rowSpan=1,this.colSpan=1);var x=I!=null?""+I:"",C=/\r\n|\r|\n/g;this.text=x.split(C)}return w.prototype.getTextPos=function(){var _;if(this.styles.valign==="top")_=this.y+this.padding("top");else if(this.styles.valign==="bottom")_=this.y+this.height-this.padding("bottom");else{var T=this.height-this.padding("vertical");_=this.y+T/2+this.padding("top")}var L;if(this.styles.halign==="right")L=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var V=this.width-this.padding("horizontal");L=this.x+V/2+this.padding("left")}else L=this.x+this.padding("left");return{x:L,y:_}},w.prototype.getContentHeight=function(_,T){T===void 0&&(T=1.15);var L=Array.isArray(this.text)?this.text.length:1,V=this.styles.fontSize/_*T,W=L*V+this.padding("vertical");return Math.max(W,this.styles.minCellHeight)},w.prototype.padding=function(_){var T=(0,v.parseSpacing)(this.styles.cellPadding,0);return _==="vertical"?T.top+T.bottom:_==="horizontal"?T.left+T.right:T[_]},w}();l.Cell=k;var P=function(){function w(_,T,L){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=_,this.raw=T,this.index=L}return w.prototype.getMaxCustomCellWidth=function(_){for(var T=0,L=0,V=_.allRows();L<V.length;L++){var W=V[L],I=W.cells[this.index];I&&typeof I.styles.cellWidth=="number"&&(T=Math.max(T,I.styles.cellWidth))}return T},w}();l.Column=P},356:function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.assign=void 0;function h(p,g,v,f,E){if(p==null)throw new TypeError("Cannot convert undefined or null to object");for(var k=Object(p),P=1;P<arguments.length;P++){var w=arguments[P];if(w!=null)for(var _ in w)Object.prototype.hasOwnProperty.call(w,_)&&(k[_]=w[_])}return k}l.assign=h},972:function(a,l,h){Object.defineProperty(l,"__esModule",{value:!0}),l.createTable=void 0;var p=h(744),g=h(260),v=h(324),f=h(796),E=h(356);function k(W,I){var x=new p.DocHandler(W),C=P(I,x.scaleFactor()),j=new g.Table(I,C);return(0,v.calculateWidths)(x,j),x.applyStyles(x.userStyles),j}l.createTable=k;function P(W,I){var x=W.content,C=L(x.columns);if(x.head.length===0){var j=_(C,"head");j&&x.head.push(j)}if(x.foot.length===0){var j=_(C,"foot");j&&x.foot.push(j)}var N=W.settings.theme,A=W.styles;return{columns:C,head:w("head",x.head,C,A,N,I),body:w("body",x.body,C,A,N,I),foot:w("foot",x.foot,C,A,N,I)}}function w(W,I,x,C,j,N){var A={},D=I.map(function(J,ue){for(var Z=0,ee={},Q=0,X=0,se=0,ge=x;se<ge.length;se++){var O=ge[se];if(A[O.index]==null||A[O.index].left===0)if(X===0){var M=void 0;Array.isArray(J)?M=J[O.index-Q-Z]:M=J[O.dataKey];var z={};typeof M=="object"&&!Array.isArray(M)&&(z=(M==null?void 0:M.styles)||{});var Y=V(W,O,ue,j,C,N,z),te=new g.Cell(M,Y,W);ee[O.dataKey]=te,ee[O.index]=te,X=te.colSpan-1,A[O.index]={left:te.rowSpan-1,times:X}}else X--,Q++;else A[O.index].left--,X=A[O.index].times,Z++}return new g.Row(J,ue,W,ee)});return D}function _(W,I){var x={};return W.forEach(function(C){if(C.raw!=null){var j=T(I,C.raw);j!=null&&(x[C.dataKey]=j)}}),Object.keys(x).length>0?x:null}function T(W,I){if(W==="head"){if(typeof I=="object")return I.header||I.title||null;if(typeof I=="string"||typeof I=="number")return I}else if(W==="foot"&&typeof I=="object")return I.footer;return null}function L(W){return W.map(function(I,x){var C,j,N;return typeof I=="object"?N=(j=(C=I.dataKey)!==null&&C!==void 0?C:I.key)!==null&&j!==void 0?j:x:N=x,new g.Column(N,I,x)})}function V(W,I,x,C,j,N,A){var D=(0,f.getTheme)(C),J;W==="head"?J=j.headStyles:W==="body"?J=j.bodyStyles:W==="foot"&&(J=j.footStyles);var ue=(0,E.assign)({},D.table,D[W],j.styles,J),Z=j.columnStyles[I.dataKey]||j.columnStyles[I.index]||{},ee=W==="body"?Z:{},Q=W==="body"&&x%2===0?(0,E.assign)({},D.alternateRow,j.alternateRowStyles):{},X=(0,f.defaultStyles)(N),se=(0,E.assign)({},X,ue,Q,ee);return(0,E.assign)(se,A)}},664:function(a,l,h){Object.defineProperty(l,"__esModule",{value:!0}),l.addPage=l.drawTable=void 0;var p=h(420),g=h(260),v=h(744),f=h(356),E=h(136),k=h(224);function P(Z,ee){var Q=ee.settings,X=Q.startY,se=Q.margin,ge={x:se.left,y:X},O=ee.getHeadHeight(ee.columns)+ee.getFootHeight(ee.columns),M=X+se.bottom+O;if(Q.pageBreak==="avoid"){var z=ee.body,Y=z.reduce(function(ae,ye){return ae+ye.height},0);M+=Y}var te=new v.DocHandler(Z);(Q.pageBreak==="always"||Q.startY!=null&&M>te.pageSize().height)&&(ue(te),ge.y=se.top),ee.callWillDrawPageHooks(te,ge);var oe=(0,f.assign)({},ge);ee.startPageNumber=te.pageNumber(),Q.horizontalPageBreak?w(te,ee,oe,ge):(te.applyStyles(te.userStyles),(Q.showHead==="firstPage"||Q.showHead==="everyPage")&&ee.head.forEach(function(ae){return j(te,ee,ae,ge,ee.columns)}),te.applyStyles(te.userStyles),ee.body.forEach(function(ae,ye){var Ae=ye===ee.body.length-1;C(te,ee,ae,Ae,oe,ge,ee.columns)}),te.applyStyles(te.userStyles),(Q.showFoot==="lastPage"||Q.showFoot==="everyPage")&&ee.foot.forEach(function(ae){return j(te,ee,ae,ge,ee.columns)})),(0,p.addTableBorder)(te,ee,oe,ge),ee.callEndPageHooks(te,ge),ee.finalY=ge.y,Z.lastAutoTable=ee,Z.previousAutoTable=ee,Z.autoTable&&(Z.autoTable.previous=ee),te.applyStyles(te.userStyles)}l.drawTable=P;function w(Z,ee,Q,X){var se=(0,k.calculateAllColumnsCanFitInPage)(Z,ee),ge=ee.settings;if(ge.horizontalPageBreakBehaviour==="afterAllRows")se.forEach(function(Y,te){Z.applyStyles(Z.userStyles),te>0?J(Z,ee,Q,X,Y.columns,!0):_(Z,ee,X,Y.columns),T(Z,ee,Q,X,Y.columns),V(Z,ee,X,Y.columns)});else for(var O=-1,M=se[0],z=function(){var Y=O;if(M){Z.applyStyles(Z.userStyles);var te=M.columns;O>=0?J(Z,ee,Q,X,te,!0):_(Z,ee,X,te),Y=L(Z,ee,O+1,X,te),V(Z,ee,X,te)}var oe=Y-O;se.slice(1).forEach(function(ae){Z.applyStyles(Z.userStyles),J(Z,ee,Q,X,ae.columns,!0),L(Z,ee,O+1,X,ae.columns,oe),V(Z,ee,X,ae.columns)}),O=Y};O<ee.body.length-1;)z()}function _(Z,ee,Q,X){var se=ee.settings;Z.applyStyles(Z.userStyles),(se.showHead==="firstPage"||se.showHead==="everyPage")&&ee.head.forEach(function(ge){return j(Z,ee,ge,Q,X)})}function T(Z,ee,Q,X,se){Z.applyStyles(Z.userStyles),ee.body.forEach(function(ge,O){var M=O===ee.body.length-1;C(Z,ee,ge,M,Q,X,se)})}function L(Z,ee,Q,X,se,ge){Z.applyStyles(Z.userStyles),ge=ge??ee.body.length;var O=Math.min(Q+ge,ee.body.length),M=-1;return ee.body.slice(Q,O).forEach(function(z,Y){var te=Q+Y===ee.body.length-1,oe=D(Z,ee,te,X);z.canEntireRowFit(oe,se)&&(j(Z,ee,z,X,se),M=Q+Y)}),M}function V(Z,ee,Q,X){var se=ee.settings;Z.applyStyles(Z.userStyles),(se.showFoot==="lastPage"||se.showFoot==="everyPage")&&ee.foot.forEach(function(ge){return j(Z,ee,ge,Q,X)})}function W(Z,ee,Q){var X=Q.getLineHeight(Z.styles.fontSize),se=Z.padding("vertical"),ge=Math.floor((ee-se)/X);return Math.max(0,ge)}function I(Z,ee,Q,X){var se={};Z.spansMultiplePages=!0,Z.height=0;for(var ge=0,O=0,M=Q.columns;O<M.length;O++){var z=M[O],Y=Z.cells[z.index];if(Y){Array.isArray(Y.text)||(Y.text=[Y.text]);var te=new g.Cell(Y.raw,Y.styles,Y.section);te=(0,f.assign)(te,Y),te.text=[];var oe=W(Y,ee,X);Y.text.length>oe&&(te.text=Y.text.splice(oe,Y.text.length));var ae=X.scaleFactor(),ye=X.getLineHeightFactor();Y.contentHeight=Y.getContentHeight(ae,ye),Y.contentHeight>=ee&&(Y.contentHeight=ee,te.styles.minCellHeight-=ee),Y.contentHeight>Z.height&&(Z.height=Y.contentHeight),te.contentHeight=te.getContentHeight(ae,ye),te.contentHeight>ge&&(ge=te.contentHeight),se[z.index]=te}}var Ae=new g.Row(Z.raw,-1,Z.section,se,!0);Ae.height=ge;for(var Te=0,Me=Q.columns;Te<Me.length;Te++){var z=Me[Te],te=Ae.cells[z.index];te&&(te.height=Ae.height);var Y=Z.cells[z.index];Y&&(Y.height=Z.height)}return Ae}function x(Z,ee,Q,X){var se=Z.pageSize().height,ge=X.settings.margin,O=ge.top+ge.bottom,M=se-O;ee.section==="body"&&(M-=X.getHeadHeight(X.columns)+X.getFootHeight(X.columns));var z=ee.getMinimumRowHeight(X.columns,Z),Y=z<Q;if(z>M)return console.error("Will not be able to print row ".concat(ee.index," correctly since it's minimum height is larger than page height")),!0;if(!Y)return!1;var te=ee.hasRowSpan(X.columns),oe=ee.getMaxCellHeight(X.columns)>M;return oe?(te&&console.error("The content of row ".concat(ee.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(te||X.settings.rowPageBreak==="avoid")}function C(Z,ee,Q,X,se,ge,O){var M=D(Z,ee,X,ge);if(Q.canEntireRowFit(M,O))j(Z,ee,Q,ge,O);else if(x(Z,Q,M,ee)){var z=I(Q,M,ee,Z);j(Z,ee,Q,ge,O),J(Z,ee,se,ge,O),C(Z,ee,z,X,se,ge,O)}else J(Z,ee,se,ge,O),C(Z,ee,Q,X,se,ge,O)}function j(Z,ee,Q,X,se){X.x=ee.settings.margin.left;for(var ge=0,O=se;ge<O.length;ge++){var M=O[ge],z=Q.cells[M.index];if(!z){X.x+=M.width;continue}Z.applyStyles(z.styles),z.x=X.x,z.y=X.y;var Y=ee.callCellHooks(Z,ee.hooks.willDrawCell,z,Q,M,X);if(Y===!1){X.x+=M.width;continue}N(Z,z,X);var te=z.getTextPos();(0,E.default)(z.text,te.x,te.y,{halign:z.styles.halign,valign:z.styles.valign,maxWidth:Math.ceil(z.width-z.padding("left")-z.padding("right"))},Z.getDocument()),ee.callCellHooks(Z,ee.hooks.didDrawCell,z,Q,M,X),X.x+=M.width}X.y+=Q.height}function N(Z,ee,Q){var X=ee.styles;if(Z.getDocument().setFillColor(Z.getDocument().getFillColor()),typeof X.lineWidth=="number"){var se=(0,p.getFillStyle)(X.lineWidth,X.fillColor);se&&Z.rect(ee.x,Q.y,ee.width,ee.height,se)}else typeof X.lineWidth=="object"&&(X.fillColor&&Z.rect(ee.x,Q.y,ee.width,ee.height,"F"),A(Z,ee,Q,X.lineWidth))}function A(Z,ee,Q,X){var se,ge,O,M;X.top&&(se=Q.x,ge=Q.y,O=Q.x+ee.width,M=Q.y,X.right&&(O+=.5*X.right),X.left&&(se-=.5*X.left),z(X.top,se,ge,O,M)),X.bottom&&(se=Q.x,ge=Q.y+ee.height,O=Q.x+ee.width,M=Q.y+ee.height,X.right&&(O+=.5*X.right),X.left&&(se-=.5*X.left),z(X.bottom,se,ge,O,M)),X.left&&(se=Q.x,ge=Q.y,O=Q.x,M=Q.y+ee.height,X.top&&(ge-=.5*X.top),X.bottom&&(M+=.5*X.bottom),z(X.left,se,ge,O,M)),X.right&&(se=Q.x+ee.width,ge=Q.y,O=Q.x+ee.width,M=Q.y+ee.height,X.top&&(ge-=.5*X.top),X.bottom&&(M+=.5*X.bottom),z(X.right,se,ge,O,M));function z(Y,te,oe,ae,ye){Z.getDocument().setLineWidth(Y),Z.getDocument().line(te,oe,ae,ye,"S")}}function D(Z,ee,Q,X){var se=ee.settings.margin.bottom,ge=ee.settings.showFoot;return(ge==="everyPage"||ge==="lastPage"&&Q)&&(se+=ee.getFootHeight(ee.columns)),Z.pageSize().height-X.y-se}function J(Z,ee,Q,X,se,ge){se===void 0&&(se=[]),ge===void 0&&(ge=!1),Z.applyStyles(Z.userStyles),ee.settings.showFoot==="everyPage"&&!ge&&ee.foot.forEach(function(M){return j(Z,ee,M,X,se)}),ee.callEndPageHooks(Z,X);var O=ee.settings.margin;(0,p.addTableBorder)(Z,ee,Q,X),ue(Z),ee.pageNumber++,ee.pageCount++,X.x=O.left,X.y=O.top,Q.y=O.top,ee.callWillDrawPageHooks(Z,X),ee.settings.showHead==="everyPage"&&(ee.head.forEach(function(M){return j(Z,ee,M,X,se)}),Z.applyStyles(Z.userStyles))}l.addPage=J;function ue(Z){var ee=Z.pageNumber();Z.setPage(ee+1);var Q=Z.pageNumber();return Q===ee?(Z.addPage(),!0):!1}},224:function(a,l,h){Object.defineProperty(l,"__esModule",{value:!0}),l.calculateAllColumnsCanFitInPage=void 0;var p=h(420);function g(f,E,k){var P;k===void 0&&(k={});var w=(0,p.getPageAvailableWidth)(f,E),_=new Map,T=[],L=[],V=[];E.settings.horizontalPageBreakRepeat,Array.isArray(E.settings.horizontalPageBreakRepeat)?V=E.settings.horizontalPageBreakRepeat:(typeof E.settings.horizontalPageBreakRepeat=="string"||typeof E.settings.horizontalPageBreakRepeat=="number")&&(V=[E.settings.horizontalPageBreakRepeat]),V.forEach(function(C){var j=E.columns.find(function(N){return N.dataKey===C||N.index===C});j&&!_.has(j.index)&&(_.set(j.index,!0),T.push(j.index),L.push(E.columns[j.index]),w-=j.wrappedWidth)});for(var W=!0,I=(P=k==null?void 0:k.start)!==null&&P!==void 0?P:0;I<E.columns.length;){if(_.has(I)){I++;continue}var x=E.columns[I].wrappedWidth;if(W||w>=x)W=!1,T.push(I),L.push(E.columns[I]),w-=x;else break;I++}return{colIndexes:T,columns:L,lastIndex:I-1}}function v(f,E){for(var k=[],P=0;P<E.columns.length;P++){var w=g(f,E,{start:P});w.columns.length&&(k.push(w),P=w.lastIndex)}return k}l.calculateAllColumnsCanFitInPage=v},324:function(a,l,h){Object.defineProperty(l,"__esModule",{value:!0}),l.ellipsize=l.resizeColumns=l.calculateWidths=void 0;var p=h(420);function g(T,L){v(T,L);var V=[],W=0;L.columns.forEach(function(x){var C=x.getMaxCustomCellWidth(L);C?x.width=C:(x.width=x.wrappedWidth,V.push(x)),W+=x.width});var I=L.getWidth(T.pageSize().width)-W;I&&(I=f(V,I,function(x){return Math.max(x.minReadableWidth,x.minWidth)})),I&&(I=f(V,I,function(x){return x.minWidth})),I=Math.abs(I),!L.settings.horizontalPageBreak&&I>.1/T.scaleFactor()&&(I=I<1?I:Math.round(I),console.warn("Of the table content, ".concat(I," units width could not fit page"))),k(L),P(L,T),E(L)}l.calculateWidths=g;function v(T,L){var V=T.scaleFactor(),W=L.settings.horizontalPageBreak,I=(0,p.getPageAvailableWidth)(T,L);L.allRows().forEach(function(x){for(var C=0,j=L.columns;C<j.length;C++){var N=j[C],A=x.cells[N.index];if(A){var D=L.hooks.didParseCell;L.callCellHooks(T,D,A,x,N,null);var J=A.padding("horizontal");A.contentWidth=(0,p.getStringWidth)(A.text,A.styles,T)+J;var ue=(0,p.getStringWidth)(A.text.join(" ").split(/[^\S\u00A0]+/),A.styles,T);if(A.minReadableWidth=ue+A.padding("horizontal"),typeof A.styles.cellWidth=="number")A.minWidth=A.styles.cellWidth,A.wrappedWidth=A.styles.cellWidth;else if(A.styles.cellWidth==="wrap"||W===!0)A.contentWidth>I?(A.minWidth=I,A.wrappedWidth=I):(A.minWidth=A.contentWidth,A.wrappedWidth=A.contentWidth);else{var Z=10/V;A.minWidth=A.styles.minCellWidth||Z,A.wrappedWidth=A.contentWidth,A.minWidth>A.wrappedWidth&&(A.wrappedWidth=A.minWidth)}}}}),L.allRows().forEach(function(x){for(var C=0,j=L.columns;C<j.length;C++){var N=j[C],A=x.cells[N.index];if(A&&A.colSpan===1)N.wrappedWidth=Math.max(N.wrappedWidth,A.wrappedWidth),N.minWidth=Math.max(N.minWidth,A.minWidth),N.minReadableWidth=Math.max(N.minReadableWidth,A.minReadableWidth);else{var D=L.styles.columnStyles[N.dataKey]||L.styles.columnStyles[N.index]||{},J=D.cellWidth||D.minCellWidth;J&&typeof J=="number"&&(N.minWidth=J,N.wrappedWidth=J)}A&&(A.colSpan>1&&!N.minWidth&&(N.minWidth=A.minWidth),A.colSpan>1&&!N.wrappedWidth&&(N.wrappedWidth=A.minWidth))}})}function f(T,L,V){for(var W=L,I=T.reduce(function(Z,ee){return Z+ee.wrappedWidth},0),x=0;x<T.length;x++){var C=T[x],j=C.wrappedWidth/I,N=W*j,A=C.width+N,D=V(C),J=A<D?D:A;L-=J-C.width,C.width=J}if(L=Math.round(L*1e10)/1e10,L){var ue=T.filter(function(Z){return L<0?Z.width>V(Z):!0});ue.length&&(L=f(ue,L,V))}return L}l.resizeColumns=f;function E(T){for(var L={},V=1,W=T.allRows(),I=0;I<W.length;I++)for(var x=W[I],C=0,j=T.columns;C<j.length;C++){var N=j[C],A=L[N.index];if(V>1)V--,delete x.cells[N.index];else if(A)A.cell.height+=x.height,V=A.cell.colSpan,delete x.cells[N.index],A.left--,A.left<=1&&delete L[N.index];else{var D=x.cells[N.index];if(!D)continue;if(D.height=x.height,D.rowSpan>1){var J=W.length-I,ue=D.rowSpan>J?J:D.rowSpan;L[N.index]={cell:D,left:ue,row:x}}}}}function k(T){for(var L=T.allRows(),V=0;V<L.length;V++)for(var W=L[V],I=null,x=0,C=0,j=0;j<T.columns.length;j++){var N=T.columns[j];if(C-=1,C>1&&T.columns[j+1])x+=N.width,delete W.cells[N.index];else if(I){var A=I;delete W.cells[N.index],I=null,A.width=N.width+x}else{var A=W.cells[N.index];if(!A)continue;if(C=A.colSpan,x=0,A.colSpan>1){I=A,x+=N.width;continue}A.width=N.width+x}}}function P(T,L){for(var V={count:0,height:0},W=0,I=T.allRows();W<I.length;W++){for(var x=I[W],C=0,j=T.columns;C<j.length;C++){var N=j[C],A=x.cells[N.index];if(A){L.applyStyles(A.styles,!0);var D=A.width-A.padding("horizontal");if(A.styles.overflow==="linebreak")A.text=L.splitTextToSize(A.text,D+1/L.scaleFactor(),{fontSize:A.styles.fontSize});else if(A.styles.overflow==="ellipsize")A.text=w(A.text,D,A.styles,L,"...");else if(A.styles.overflow==="hidden")A.text=w(A.text,D,A.styles,L,"");else if(typeof A.styles.overflow=="function"){var J=A.styles.overflow(A.text,D);typeof J=="string"?A.text=[J]:A.text=J}A.contentHeight=A.getContentHeight(L.scaleFactor(),L.getLineHeightFactor());var ue=A.contentHeight/A.rowSpan;A.rowSpan>1&&V.count*V.height<ue*A.rowSpan?V={height:ue,count:A.rowSpan}:V&&V.count>0&&V.height>ue&&(ue=V.height),ue>x.height&&(x.height=ue)}}V.count--}}function w(T,L,V,W,I){return T.map(function(x){return _(x,L,V,W,I)})}l.ellipsize=w;function _(T,L,V,W,I){var x=1e4*W.scaleFactor();if(L=Math.ceil(L*x)/x,L>=(0,p.getStringWidth)(T,V,W))return T;for(;L<(0,p.getStringWidth)(T+I,V,W)&&!(T.length<=1);)T=T.substring(0,T.length-1);return T.trim()+I}},964:function(a){if(typeof n>"u"){var l=new Error("Cannot find module 'undefined'");throw l.code="MODULE_NOT_FOUND",l}a.exports=n}},i={};function s(a){var l=i[a];if(l!==void 0)return l.exports;var h=i[a]={exports:{}};return r[a].call(h.exports,h,h.exports,s),h.exports}var o={};return function(){var a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.Cell=a.Column=a.Row=a.Table=a.CellHookData=a.__drawTable=a.__createTable=a.applyPlugin=void 0;var l=s(340),h=s(776),p=s(664),g=s(972),v=s(260);Object.defineProperty(a,"Table",{enumerable:!0,get:function(){return v.Table}});var f=s(172);Object.defineProperty(a,"CellHookData",{enumerable:!0,get:function(){return f.CellHookData}});var E=s(260);Object.defineProperty(a,"Cell",{enumerable:!0,get:function(){return E.Cell}}),Object.defineProperty(a,"Column",{enumerable:!0,get:function(){return E.Column}}),Object.defineProperty(a,"Row",{enumerable:!0,get:function(){return E.Row}});function k(L){(0,l.default)(L)}a.applyPlugin=k;function P(L,V){var W=(0,h.parseInput)(L,V),I=(0,g.createTable)(L,W);(0,p.drawTable)(L,I)}function w(L,V){var W=(0,h.parseInput)(L,V);return(0,g.createTable)(L,W)}a.__createTable=w;function _(L,V){(0,p.drawTable)(L,V)}a.__drawTable=_;try{var T=s(964);T.jsPDF&&(T=T.jsPDF),k(T)}catch{}a.default=P}(),o}()})})(qR);const WR=async(t,e,n)=>{const r=new ot("p","mm","a4");let i=15;const s=15,o=210-2*s,a=k=>`Rs ${k.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,l=k=>{const[P,w]=k.split("-");return new Date(parseInt(P),parseInt(w)-1).toLocaleDateString("en-IN",{month:"short",year:"numeric"})},h=k=>{i+k>280&&(r.addPage(),i=15)};r.setFont("helvetica","bold"),r.setFontSize(20),r.setTextColor(67,56,202),r.text("Sales Report & Analytics",s,i),i+=10,r.setFont("helvetica","normal"),r.setFontSize(12),r.setTextColor(0,0,0),r.text(`Report Period: ${e.startDate} to ${e.endDate}`,s,i),i+=6,r.text(`Document Type: ${e.documentType}`,s,i),i+=6,r.text(`Generated on: ${new Date().toLocaleDateString("en-IN")}`,s,i),i+=10,r.setDrawColor(67,56,202),r.line(s,i,210-s,i),i+=10,r.setFont("helvetica","bold"),r.setFontSize(16),r.setTextColor(67,56,202),r.text("Executive Summary",s,i),i+=8,r.setDrawColor(200,200,200),r.setFillColor(248,250,252),r.rect(s,i,o,35,"FD"),r.setFont("helvetica","bold"),r.setFontSize(12),r.setTextColor(0,0,0),r.text("Total Sales:",s+5,i+8),r.text(a(t.totalSales),s+50,i+8),r.text("Total Documents:",s+105,i+8),r.text(n.length.toString(),s+160,i+8),r.text("Taxable Value:",s+5,i+18),r.text(a(t.totalTaxableValue),s+50,i+18),r.text("Total GST:",s+105,i+18),r.text(a(t.totalGSTAmount),s+160,i+18);const p=n.length>0?t.totalSales/n.length:0;r.text("Avg per Document:",s+5,i+28),r.text(a(p),s+50,i+28),i+=45,h(40),r.setFont("helvetica","bold"),r.setFontSize(14),r.setTextColor(67,56,202),r.text("Document Type Breakdown",s,i),i+=10;const g=Object.entries(t.documentCounts).map(([k,P])=>[k,P.toString(),`${n.length>0?(P/n.length*100).toFixed(1):0}%`]);r.autoTable({startY:i,head:[["Document Type","Count","Percentage"]],body:g,theme:"grid",headStyles:{fillColor:[67,56,202],textColor:[255,255,255],fontStyle:"bold",fontSize:10},styles:{fontSize:9,cellPadding:3},margin:{left:s,right:s}}),i=r.autoTable.previous.finalY+15,h(40),r.setFont("helvetica","bold"),r.setFontSize(14),r.setTextColor(67,56,202),r.text("GST Breakdown",s,i),i+=10;const v=[["CGST",a(t.gstBreakdown.cgst)],["SGST",a(t.gstBreakdown.sgst)],["IGST",a(t.gstBreakdown.igst)],["Total GST",a(t.totalGSTAmount)]];if(r.autoTable({startY:i,head:[["GST Type","Amount"]],body:v,theme:"grid",headStyles:{fillColor:[67,56,202],textColor:[255,255,255],fontStyle:"bold",fontSize:10},styles:{fontSize:9,cellPadding:3},columnStyles:{1:{halign:"right"}},margin:{left:s,right:s}}),i=r.autoTable.previous.finalY+15,t.monthlyData.length>0){h(60),r.setFont("helvetica","bold"),r.setFontSize(14),r.setTextColor(67,56,202),r.text("Monthly Trend Analysis",s,i),i+=10;const k=t.monthlyData.map(P=>[l(P.month),a(P.sales),a(P.gst),P.count.toString(),a(P.count>0?P.sales/P.count:0)]);r.autoTable({startY:i,head:[["Month","Sales","GST","Documents","Avg per Doc"]],body:k,theme:"grid",headStyles:{fillColor:[67,56,202],textColor:[255,255,255],fontStyle:"bold",fontSize:9},styles:{fontSize:8,cellPadding:2},columnStyles:{1:{halign:"right"},2:{halign:"right"},3:{halign:"center"},4:{halign:"right"}},margin:{left:s,right:s}}),i=r.autoTable.previous.finalY+15}if(t.topClients.length>0){h(60),r.setFont("helvetica","bold"),r.setFontSize(14),r.setTextColor(67,56,202),r.text("Top Clients Analysis",s,i),i+=10;const k=t.topClients.slice(0,15).map((P,w)=>[(w+1).toString(),P.name,a(P.totalAmount),P.documentCount.toString(),a(P.totalAmount/P.documentCount)]);r.autoTable({startY:i,head:[["Rank","Client Name","Total Amount","Documents","Avg per Doc"]],body:k,theme:"grid",headStyles:{fillColor:[67,56,202],textColor:[255,255,255],fontStyle:"bold",fontSize:9},styles:{fontSize:8,cellPadding:2},columnStyles:{0:{halign:"center",cellWidth:15},1:{cellWidth:60},2:{halign:"right",cellWidth:35},3:{halign:"center",cellWidth:25},4:{halign:"right",cellWidth:35}},margin:{left:s,right:s}}),i=r.autoTable.previous.finalY+15}if(n.length>0&&n.length<=50){r.addPage(),i=15,r.setFont("helvetica","bold"),r.setFontSize(14),r.setTextColor(67,56,202),r.text("Detailed Document List",s,i),i+=10;const k=n.map(P=>[P.docDetails.number||"N/A",P.docType,P.client.name||"Unknown",P.docDetails.issueDate||"N/A",a(P.totals.grandTotal||0)]);r.autoTable({startY:i,head:[["Doc Number","Type","Client","Date","Amount"]],body:k,theme:"grid",headStyles:{fillColor:[67,56,202],textColor:[255,255,255],fontStyle:"bold",fontSize:9},styles:{fontSize:8,cellPadding:2},columnStyles:{0:{cellWidth:30},1:{cellWidth:25},2:{cellWidth:50},3:{cellWidth:25},4:{halign:"right",cellWidth:30}},margin:{left:s,right:s}})}else n.length>50&&(h(20),r.setFont("helvetica","italic"),r.setFontSize(10),r.setTextColor(100,100,100),r.text(`Note: Detailed document list omitted due to large dataset (${n.length} documents).`,s,i),r.text("Use filters to narrow down the results for detailed analysis.",s,i+5));const f=r.getNumberOfPages();for(let k=1;k<=f;k++)r.setPage(k),r.setFont("helvetica","normal"),r.setFontSize(8),r.setTextColor(100,100,100),r.text(`Page ${k} of ${f}`,210-s,285,{align:"right"}),r.text(`Generated on ${new Date().toLocaleString("en-IN")}`,s,285);const E=`sales_report_${e.startDate}_to_${e.endDate}.pdf`;r.save(E)},$R=({documents:t,isLoading:e,onMessage:n})=>{const[r,i]=Ue.useState({startDate:new Date(new Date().getFullYear(),0,1).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),[s,o]=Ue.useState("All"),[a,l]=Ue.useState("thisYear"),[h,p]=Ue.useState(!1),g=L=>{l(L);const V=new Date;switch(L){case"thisMonth":i({startDate:new Date(V.getFullYear(),V.getMonth(),1).toISOString().split("T")[0],endDate:V.toISOString().split("T")[0]});break;case"lastMonth":const W=new Date(V.getFullYear(),V.getMonth()-1,1),I=new Date(V.getFullYear(),V.getMonth(),0);i({startDate:W.toISOString().split("T")[0],endDate:I.toISOString().split("T")[0]});break;case"thisYear":i({startDate:new Date(V.getFullYear(),0,1).toISOString().split("T")[0],endDate:V.toISOString().split("T")[0]});break;case"lastYear":i({startDate:new Date(V.getFullYear()-1,0,1).toISOString().split("T")[0],endDate:new Date(V.getFullYear()-1,11,31).toISOString().split("T")[0]});break}},v=Ue.useMemo(()=>t.filter(L=>{const V=new Date(L.docDetails.issueDate),W=new Date(r.startDate),I=new Date(r.endDate),x=V>=W&&V<=I,C=s==="All"||L.docType===s;return x&&C}),[t,r,s]),f=Ue.useMemo(()=>{let L=0,V=0,W=0,I=0,x=0,C=0;const j={Invoice:0,Quotation:0,"Purchase Order":0},N=new Map,A=new Map;v.forEach(ue=>{const Z=ue.totals,ee=Z.grandTotal||0,Q=Z.subTotalTaxableValue||0,X=Z.totalGSTAmountOverall||0;L+=ee,V+=Q,W+=X,I+=Z.cgst||0,x+=Z.sgst||0,C+=Z.igst||0,j[ue.docType]++;const se=new Date(ue.docDetails.issueDate),ge=`${se.getFullYear()}-${String(se.getMonth()+1).padStart(2,"0")}`,O=N.get(ge)||{sales:0,gst:0,count:0};N.set(ge,{sales:O.sales+ee,gst:O.gst+X,count:O.count+1});const M=ue.client.name||"Unknown Client",z=A.get(M)||{totalAmount:0,documentCount:0};A.set(M,{totalAmount:z.totalAmount+ee,documentCount:z.documentCount+1})});const D=Array.from(N.entries()).map(([ue,Z])=>({month:ue,...Z})).sort((ue,Z)=>ue.month.localeCompare(Z.month)),J=Array.from(A.entries()).map(([ue,Z])=>({name:ue,...Z})).sort((ue,Z)=>Z.totalAmount-ue.totalAmount).slice(0,10);return{totalSales:L,totalTaxableValue:V,totalGSTAmount:W,totalCGST:I,totalSGST:x,totalIGST:C,documentCounts:j,monthlyData:D,topClients:J,gstBreakdown:{cgst:I,sgst:x,igst:C}}},[v]),E=L=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2}).format(L),k=L=>{const[V,W]=L.split("-");return new Date(parseInt(V),parseInt(W)-1).toLocaleDateString("en-IN",{month:"short",year:"numeric"})},P=()=>{try{const L={period:`${r.startDate} to ${r.endDate}`,documentType:s,summary:{totalDocuments:v.length,totalSales:f.totalSales,totalTaxableValue:f.totalTaxableValue,totalGSTAmount:f.totalGSTAmount,documentCounts:f.documentCounts},monthlyBreakdown:f.monthlyData,topClients:f.topClients,gstBreakdown:f.gstBreakdown,generatedAt:new Date().toISOString()},V=JSON.stringify(L,null,2),W=new Blob([V],{type:"application/json;charset=utf-8;"}),I=document.createElement("a");I.href=URL.createObjectURL(W),I.download=`sales_report_${r.startDate}_to_${r.endDate}.json`,document.body.appendChild(I),I.click(),document.body.removeChild(I),n("Report exported successfully!")}catch(L){console.error("Error exporting report:",L),n("Failed to export report")}},w=async()=>{if(v.length===0){n("No data to export");return}p(!0);try{const L={startDate:r.startDate,endDate:r.endDate,documentType:s,reportPeriod:a};await WR(f,L,v),n("PDF report generated successfully!")}catch(L){console.error("Error generating PDF report:",L),n("Failed to generate PDF report")}finally{p(!1)}},T=(()=>{const L=new Date(r.startDate),V=new Date(r.endDate),W=Math.ceil((V.getTime()-L.getTime())/(1e3*60*60*24)),I=new Date(L.getTime()-1),x=new Date(I.getTime()-W*24*60*60*1e3),j=t.filter(D=>{const J=new Date(D.docDetails.issueDate),ue=J>=x&&J<=I,Z=s==="All"||D.docType===s;return ue&&Z}).reduce((D,J)=>D+(J.totals.grandTotal||0),0),N=f.totalSales-j,A=j>0?N/j*100:0;return{prevTotalSales:j,salesChange:N,salesChangePercent:A}})();return m.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8",children:[m.jsxs("div",{className:"flex items-center justify-between mb-8",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(X5,{className:"w-8 h-8 text-indigo-600 mr-3"}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Sales Reports & Analytics"}),m.jsx("p",{className:"text-gray-600",children:"Comprehensive business insights and financial summaries"})]})]}),m.jsxs("div",{className:"text-right",children:[m.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:v.length}),m.jsx("div",{className:"text-sm text-gray-500",children:"Documents in Period"})]})]}),m.jsxs("div",{className:"mb-8 p-6 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg border border-indigo-200",children:[m.jsxs("div",{className:"flex items-center mb-4",children:[m.jsx(sL,{className:"w-5 h-5 text-indigo-600 mr-2"}),m.jsx("h2",{className:"text-lg font-semibold text-indigo-800",children:"Report Filters"})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Period"}),m.jsxs("select",{value:a,onChange:L=>g(L.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[m.jsx("option",{value:"thisMonth",children:"This Month"}),m.jsx("option",{value:"lastMonth",children:"Last Month"}),m.jsx("option",{value:"thisYear",children:"This Year"}),m.jsx("option",{value:"lastYear",children:"Last Year"}),m.jsx("option",{value:"custom",children:"Custom Range"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),m.jsx("input",{type:"date",value:r.startDate,onChange:L=>{i(V=>({...V,startDate:L.target.value})),l("custom")},className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),m.jsx("input",{type:"date",value:r.endDate,onChange:L=>{i(V=>({...V,endDate:L.target.value})),l("custom")},className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Document Type"}),m.jsxs("select",{value:s,onChange:L=>o(L.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[m.jsx("option",{value:"All",children:"All Types"}),m.jsx("option",{value:"Invoice",children:"Invoices"}),m.jsx("option",{value:"Quotation",children:"Quotations"}),m.jsx("option",{value:"Purchase Order",children:"Purchase Orders"})]})]})]}),m.jsxs("div",{className:"flex justify-end mt-4 gap-3",children:[m.jsx("button",{onClick:w,disabled:v.length===0||h,className:"flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:h?m.jsxs(m.Fragment,{children:[m.jsx(Ca,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating PDF..."]}):m.jsxs(m.Fragment,{children:[m.jsx(iL,{className:"w-4 h-4 mr-2"}),"Download PDF"]})}),m.jsxs("button",{onClick:P,disabled:v.length===0,className:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[m.jsx(_c,{className:"w-4 h-4 mr-2"}),"Export JSON"]})]})]}),e?m.jsxs("div",{className:"text-center py-12",children:[m.jsx(Ca,{className:"w-8 h-8 text-indigo-600 animate-spin mx-auto mb-4"}),m.jsx("p",{className:"text-gray-600",children:"Loading report data..."})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[m.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 rounded-lg p-6 text-white",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-green-100 text-sm",children:"Total Sales"}),m.jsx("p",{className:"text-2xl font-bold",children:E(f.totalSales)}),T.salesChangePercent!==0&&m.jsxs("div",{className:"flex items-center mt-2",children:[T.salesChangePercent>0?m.jsx(Zk,{className:"w-4 h-4 mr-1"}):T.salesChangePercent<0?m.jsx(Jk,{className:"w-4 h-4 mr-1"}):m.jsx(dL,{className:"w-4 h-4 mr-1"}),m.jsxs("span",{className:"text-sm",children:[Math.abs(T.salesChangePercent).toFixed(1),"% vs prev period"]})]})]}),m.jsx(sS,{className:"w-8 h-8 text-green-200"})]})}),m.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg p-6 text-white",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-blue-100 text-sm",children:"Taxable Value"}),m.jsx("p",{className:"text-2xl font-bold",children:E(f.totalTaxableValue)}),m.jsxs("p",{className:"text-blue-200 text-sm mt-2",children:[(f.totalTaxableValue/f.totalSales*100).toFixed(1),"% of total"]})]}),m.jsx(bL,{className:"w-8 h-8 text-blue-200"})]})}),m.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg p-6 text-white",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-purple-100 text-sm",children:"Total GST"}),m.jsx("p",{className:"text-2xl font-bold",children:E(f.totalGSTAmount)}),m.jsxs("p",{className:"text-purple-200 text-sm mt-2",children:[(f.totalGSTAmount/f.totalSales*100).toFixed(1),"% of total"]})]}),m.jsx(ew,{className:"w-8 h-8 text-purple-200"})]})}),m.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 rounded-lg p-6 text-white",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-orange-100 text-sm",children:"Documents"}),m.jsx("p",{className:"text-2xl font-bold",children:v.length}),m.jsxs("p",{className:"text-orange-200 text-sm mt-2",children:["Avg: ",v.length>0?E(f.totalSales/v.length):"0"]})]}),m.jsx(cc,{className:"w-8 h-8 text-orange-200"})]})})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[m.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[m.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[m.jsx(cc,{className:"w-5 h-5 mr-2"}),"Document Type Breakdown"]}),m.jsx("div",{className:"space-y-4",children:Object.entries(f.documentCounts).map(([L,V])=>m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-gray-700",children:L}),m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2 mr-3",children:m.jsx("div",{className:"bg-indigo-600 h-2 rounded-full",style:{width:`${v.length>0?V/v.length*100:0}%`}})}),m.jsx("span",{className:"text-gray-900 font-semibold w-8 text-right",children:V})]})]},L))})]}),m.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[m.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[m.jsx(ew,{className:"w-5 h-5 mr-2"}),"GST Breakdown"]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-gray-700",children:"CGST"}),m.jsx("span",{className:"text-gray-900 font-semibold",children:E(f.gstBreakdown.cgst)})]}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-gray-700",children:"SGST"}),m.jsx("span",{className:"text-gray-900 font-semibold",children:E(f.gstBreakdown.sgst)})]}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-gray-700",children:"IGST"}),m.jsx("span",{className:"text-gray-900 font-semibold",children:E(f.gstBreakdown.igst)})]}),m.jsx("div",{className:"border-t pt-2",children:m.jsxs("div",{className:"flex items-center justify-between font-semibold",children:[m.jsx("span",{className:"text-gray-800",children:"Total GST"}),m.jsx("span",{className:"text-gray-900",children:E(f.totalGSTAmount)})]})})]})]})]}),f.monthlyData.length>0&&m.jsxs("div",{className:"mb-8 bg-gray-50 rounded-lg p-6",children:[m.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[m.jsx(qf,{className:"w-5 h-5 mr-2"}),"Monthly Trend"]}),m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"min-w-full",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"border-b border-gray-200",children:[m.jsx("th",{className:"text-left py-2 px-4 font-medium text-gray-700",children:"Month"}),m.jsx("th",{className:"text-right py-2 px-4 font-medium text-gray-700",children:"Sales"}),m.jsx("th",{className:"text-right py-2 px-4 font-medium text-gray-700",children:"GST"}),m.jsx("th",{className:"text-right py-2 px-4 font-medium text-gray-700",children:"Documents"}),m.jsx("th",{className:"text-right py-2 px-4 font-medium text-gray-700",children:"Avg per Doc"})]})}),m.jsx("tbody",{children:f.monthlyData.map((L,V)=>m.jsxs("tr",{className:V%2===0?"bg-white":"bg-gray-50",children:[m.jsx("td",{className:"py-2 px-4 text-gray-800",children:k(L.month)}),m.jsx("td",{className:"py-2 px-4 text-right text-gray-900 font-semibold",children:E(L.sales)}),m.jsx("td",{className:"py-2 px-4 text-right text-gray-700",children:E(L.gst)}),m.jsx("td",{className:"py-2 px-4 text-right text-gray-700",children:L.count}),m.jsx("td",{className:"py-2 px-4 text-right text-gray-700",children:E(L.count>0?L.sales/L.count:0)})]},L.month))})]})})]}),f.topClients.length>0&&m.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[m.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[m.jsx(Lp,{className:"w-5 h-5 mr-2"}),"Top Clients"]}),m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"min-w-full",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"border-b border-gray-200",children:[m.jsx("th",{className:"text-left py-2 px-4 font-medium text-gray-700",children:"Client Name"}),m.jsx("th",{className:"text-right py-2 px-4 font-medium text-gray-700",children:"Total Amount"}),m.jsx("th",{className:"text-right py-2 px-4 font-medium text-gray-700",children:"Documents"}),m.jsx("th",{className:"text-right py-2 px-4 font-medium text-gray-700",children:"Avg per Doc"})]})}),m.jsx("tbody",{children:f.topClients.map((L,V)=>m.jsxs("tr",{className:V%2===0?"bg-white":"bg-gray-50",children:[m.jsx("td",{className:"py-2 px-4 text-gray-800 font-medium",children:L.name}),m.jsx("td",{className:"py-2 px-4 text-right text-gray-900 font-semibold",children:E(L.totalAmount)}),m.jsx("td",{className:"py-2 px-4 text-right text-gray-700",children:L.documentCount}),m.jsx("td",{className:"py-2 px-4 text-right text-gray-700",children:E(L.totalAmount/L.documentCount)})]},L.name))})]})})]}),v.length===0&&m.jsxs("div",{className:"text-center py-12",children:[m.jsx(X5,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),m.jsx("h3",{className:"text-xl font-semibold text-gray-500 mb-2",children:"No data found"}),m.jsx("p",{className:"text-gray-400 mb-6",children:"No documents found for the selected period and filters."}),m.jsx("p",{className:"text-gray-400 text-sm",children:"Try adjusting your date range or document type filter."})]})]})]})},GR=async t=>{const e=new ot("p","mm","a4");let n=10;const r=15,i=210-2*r;e.setFont("helvetica","bold"),e.setFontSize(16),e.setTextColor(0,106,103),e.text(t.company.name,r,n),e.setTextColor(0,0,0),n+=7,e.setFont("helvetica","normal"),e.setFontSize(9),e.splitTextToSize(t.company.address,i/2-5).forEach(L=>{e.text(L,r,n),n+=4}),e.text(`Phone: ${t.company.phone}`,r,n),n+=4,e.text(`Email: ${t.company.email}`,r,n),n+=4,e.text(`GSTIN: ${t.company.gstin}`,r,n),n+=4,e.text(`Website: ${t.company.website}`,r,n),n+=10;let o=15;e.setFont("helvetica","normal"),e.setFontSize(9),t.docType==="Quotation"&&(e.setFontSize(12),e.setFont("helvetica","bold"),e.text("Amount Due:",130,o),e.setFontSize(16),e.text(`Rs ${t.totals.grandTotal.toFixed(2)}`,210-r,o,{align:"right"}),o+=10,e.setFont("helvetica","normal"),e.setFontSize(9),e.text("Valid Until:",140,o),e.text(t.docDetails.validUntil,210-r,o,{align:"right"}),o+=5),t.docType==="Purchase Order"&&(e.text("Delivery Date:",140,o),e.text(t.docDetails.deliveryDate,210-r,o,{align:"right"}),o+=5),e.text("Issue Date:",140,o),e.text(t.docDetails.issueDate,210-r,o,{align:"right"}),o+=5,e.text("Place of Supply:",140,o),e.text(t.docDetails.placeOfSupply,210-r,o,{align:"right"}),n=Math.max(n,o)+5,e.setFontSize(24),e.setFont("helvetica","bold"),e.setTextColor(0,106,103),e.text(t.docType.toUpperCase(),105,n,{align:"center"}),e.setTextColor(0,0,0),n+=10,e.setFontSize(14),e.setFont("helvetica","normal"),e.text(t.docDetails.number,210-r,n,{align:"right"}),n+=8,e.setDrawColor(0,49,97),e.line(r,n,210-r,n),e.setDrawColor(0,0,0),n+=5;const a=t.docType==="Purchase Order"?"Vendor Details":"Bill To";e.setFont("helvetica","bold"),e.setFontSize(10),e.text(a,r,n),e.text("Ship To",r+i/2,n),n+=5,e.setFont("helvetica","normal"),e.setFontSize(9),e.text(t.client.name,r,n),e.text(t.shippingDetails.name,r+i/2,n),n+=4;const l=e.splitTextToSize(t.client.address,i/2-5),h=e.splitTextToSize(t.shippingDetails.address,i/2-5);let p=n,g=n;l.forEach(L=>{e.text(L,r,p),p+=4}),h.forEach(L=>{e.text(L,r+i/2,g),g+=4}),n=Math.max(p,g),e.text(t.client.phone,r,n),n+=4,e.text(`GSTIN: ${t.client.gstin}`,r,n),n+=10;let v,f;t.isSimpleMode?(v=[{header:"S.No",dataKey:"sNo"},{header:"Item Description",dataKey:"description"},{header:"Taxable Value (Rs)",dataKey:"taxableValue"},{header:"GST (Rs)",dataKey:"gstAmount"},{header:"Total Amount (Rs)",dataKey:"totalAmount"}],f=t.items.map(L=>{const V=L.taxableValue||0,W=V*L.gstRate/100,I=V+W;return{sNo:L.sNo,description:L.description,taxableValue:V.toFixed(2),gstAmount:W.toFixed(2),totalAmount:I.toFixed(2)}})):t.totals.isInterState?(v=[{header:"S.No",dataKey:"sNo"},{header:"Item Description",dataKey:"description"},{header:"HSN/SAC",dataKey:"hsnSac"},{header:"Qty",dataKey:"quantity"},{header:"UoM",dataKey:"uom"},{header:"Rate (Rs)",dataKey:"unitPrice"},{header:"Taxable Value (Rs)",dataKey:"taxableValue"},{header:"IGST (Rs)",dataKey:"igst"},{header:"Amount (Rs)",dataKey:"amount"}],f=t.items.map(L=>{const V=L.unitPrice/(1+L.gstRate/100),W=L.unitPrice-V,I=(L.quantity*V).toFixed(2),x=(L.quantity*W).toFixed(2),C=(L.quantity*L.unitPrice).toFixed(2);return{sNo:L.sNo,description:L.description,hsnSac:L.hsnSac,quantity:L.quantity,uom:L.uom,unitPrice:L.unitPrice.toFixed(2),taxableValue:I,igst:x,amount:C}})):(v=[{header:"S.No",dataKey:"sNo"},{header:"Item Description",dataKey:"description"},{header:"HSN/SAC",dataKey:"hsnSac"},{header:"Qty",dataKey:"quantity"},{header:"UoM",dataKey:"uom"},{header:"Rate (Rs)",dataKey:"unitPrice"},{header:"Taxable Value (Rs)",dataKey:"taxableValue"},{header:"GST (Rs)",dataKey:"gst"},{header:"Amount (Rs)",dataKey:"amount"}],f=t.items.map(L=>{const V=L.unitPrice/(1+L.gstRate/100),W=L.unitPrice-V,I=(L.quantity*V).toFixed(2),x=(L.quantity*W).toFixed(2),C=(L.quantity*L.unitPrice).toFixed(2);return{sNo:L.sNo,description:L.description,hsnSac:L.hsnSac,quantity:L.quantity,uom:L.uom,unitPrice:L.unitPrice.toFixed(2),taxableValue:I,gst:x,amount:C}}));let E={};if(t.isSimpleMode?E={0:{cellWidth:15,halign:"center"},1:{cellWidth:85,halign:"left"},2:{cellWidth:30,halign:"right"},3:{cellWidth:25,halign:"right"},4:{cellWidth:25,halign:"right"}}:t.totals.isInterState?E={0:{cellWidth:12,halign:"center"},1:{cellWidth:45,halign:"left"},2:{cellWidth:18,halign:"center"},3:{cellWidth:12,halign:"right"},4:{cellWidth:12,halign:"center"},5:{cellWidth:18,halign:"right"},6:{cellWidth:23,halign:"right"},7:{cellWidth:18,halign:"right"},8:{cellWidth:22,halign:"right"}}:E={0:{cellWidth:12,halign:"center"},1:{cellWidth:45,halign:"left"},2:{cellWidth:18,halign:"center"},3:{cellWidth:12,halign:"right"},4:{cellWidth:12,halign:"center"},5:{cellWidth:18,halign:"right"},6:{cellWidth:23,halign:"right"},7:{cellWidth:18,halign:"right"},8:{cellWidth:22,halign:"right"}},e.autoTable({startY:n,head:[v.map(L=>L.header)],body:f.map(L=>Object.values(L)),theme:"grid",headStyles:{fillColor:[240,240,240],textColor:[100,100,100],fontStyle:"bold",fontSize:7,halign:"center"},styles:{fontSize:7,cellPadding:1.5,overflow:"linebreak",halign:"center"},columnStyles:E,margin:{left:r,right:r}}),n=e.autoTable.previous.finalY+10,e.setFont("helvetica","bold"),e.setFontSize(10),e.text("Total Taxable Value",135,n),e.text(`Rs ${t.totals.subTotalTaxableValue.toFixed(2)}`,210-r,n,{align:"right"}),n+=7,t.totals.isInterState){const L=t.totals.subTotalTaxableValue,V=L>0?t.totals.igst/L*100:0;e.text(`IGST (${V.toFixed(1)}%)`,135,n),e.text(`Rs ${t.totals.igst.toFixed(2)}`,210-r,n,{align:"right"}),n+=7}else{const L=t.totals.subTotalTaxableValue,V=L>0?t.totals.cgst/L*100:0,W=L>0?t.totals.sgst/L*100:0;e.text(`CGST (${V.toFixed(1)}%)`,135,n),e.text(`Rs ${t.totals.cgst.toFixed(2)}`,210-r,n,{align:"right"}),n+=7,e.text(`SGST (${W.toFixed(1)}%)`,135,n),e.text(`Rs ${t.totals.sgst.toFixed(2)}`,210-r,n,{align:"right"}),n+=7}e.text("Total Tax Amount",135,n),e.text(`Rs ${t.totals.totalGSTAmountOverall.toFixed(2)}`,210-r,n,{align:"right"}),n+=7,e.text("Total Value (in figure)",135,n),e.text(`Rs ${t.totals.grandTotal.toFixed(2)}`,210-r,n,{align:"right"}),n+=7;const k=L=>{const V=["","one ","two ","three ","four ","five ","six ","seven ","eight ","nine ","ten ","eleven ","twelve ","thirteen ","fourteen ","fifteen ","sixteen ","seventeen ","eighteen ","nineteen "],W=["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"],I=("000000000"+L).substr(-9).match(/^(\d{2})(\d{2})(\d{2})(\d{1})(\d{2})$/);if(!I)return"";let x="";return x+=Number(I[1])!==0?(V[Number(I[1])]||W[I[1][0]]+" "+V[I[1][1]])+"crore ":"",x+=Number(I[2])!==0?(V[Number(I[2])]||W[I[2][0]]+" "+V[I[2][1]])+"lakh ":"",x+=Number(I[3])!==0?(V[Number(I[3])]||W[I[3][0]]+" "+V[I[3][1]])+"thousand ":"",x+=Number(I[4])!==0?(V[Number(I[4])]||W[I[4][0]]+" "+V[I[4][1]])+"hundred ":"",x+=Number(I[5])!==0?(x!==""?"and ":"")+(V[Number(I[5])]||W[I[5][0]]+" "+V[I[5][1]]):"",x.trim()+" Only"};if(e.setFont("helvetica","normal"),e.setFontSize(9),e.splitTextToSize(`(${k(Math.floor(t.totals.grandTotal))})`,i).forEach(L=>{e.text(L,r,n,{align:"left"}),n+=4}),n+=6,t.docType!=="Purchase Order"){e.setFont("helvetica","normal"),e.setFontSize(9),e.text(`Bank Name: ${t.bankDetails.bankName}`,r,n),n+=4,e.text(`Account Number: ${t.bankDetails.accountNumber}`,r,n),n+=4,e.text(`Branch Name: ${t.bankDetails.branchName}`,r,n),n+=4,e.text(`IFSC Code: ${t.bankDetails.ifscCode}`,r,n),n+=10;try{const L=`upi://pay?pa=${t.fixedUpiId}&pn=${encodeURIComponent(t.company.name)}&am=${t.totals.grandTotal.toFixed(2)}&cu=INR`,V=`https://api.qrserver.com/v1/create-qr-code/?size=200x200&format=png&data=${encodeURIComponent(L)}`;await new Promise((I,x)=>{const C=new Image;C.crossOrigin="anonymous",C.onload=()=>{try{const j=document.createElement("canvas"),N=j.getContext("2d");if(j.width=C.width,j.height=C.height,N){N.drawImage(C,0,0);const A=j.toDataURL("image/png"),D=30,J=(e.internal.pageSize.width-D)/2;e.addImage(A,"PNG",J,n,D,D),I()}else x(new Error("Canvas context not available"))}catch(j){console.error("Error processing QR code:",j),e.rect((e.internal.pageSize.width-30)/2,n,30,30),e.text("QR Code",e.internal.pageSize.width/2,n+15,{align:"center"}),I()}},C.onerror=()=>{console.error("Failed to load QR code image"),e.rect((e.internal.pageSize.width-30)/2,n,30,30),e.text("QR Code",e.internal.pageSize.width/2,n+15,{align:"center"}),I()},C.src=V}),n+=35,e.setFontSize(9),e.text(`Scan to Pay (UPI: ${t.fixedUpiId})`,e.internal.pageSize.width/2,n,{align:"center"}),n+=10}catch(L){console.error("QR Code generation failed:",L),e.text(`UPI Payment: ${t.fixedUpiId}`,e.internal.pageSize.width/2,n,{align:"center"}),n+=10}}n>250&&(e.addPage(),n=15),e.setFont("helvetica","bold"),e.setFontSize(10),e.text("Terms & Conditions",r,n),n+=5,e.setFont("helvetica","normal"),e.setFontSize(9),e.splitTextToSize(t.termsAndConditions,i-10).forEach(L=>{e.text(L,r,n),n+=4}),n+=10,e.setFont("helvetica","bold"),e.setFontSize(10);const _=t.docType==="Purchase Order"?"Authorized Signature":"Provider Signature";e.text(_,210-r-20,n+10,{align:"center"});const T=t.docDetails.number.replace(/[^a-zA-Z0-9]/g,"_");e.save(`${t.docType.toLowerCase().replace(" ","_")}_${T}.pdf`)},KR=t=>{const e=["Client Name","Client Address","Client Phone","Client GSTIN","Document Type","Document Number","Issue Date","Valid Until","Grand Total"],n=a=>{if(a==null)return"";let l=String(a);return l.includes(",")||l.includes('"')||l.includes(`
`)?`"${l.replace(/"/g,'""')}"`:l},r=[n(t.client.name),n(t.client.address),n(t.client.phone),n(t.client.gstin),n(t.docType),n(t.docDetails.number),n(t.docDetails.issueDate),n(t.docType==="Quotation"?t.docDetails.validUntil:"N/A"),n(t.totals.grandTotal.toFixed(2))],i=`${e.join(",")}
${r.join(",")}`,s=new Blob([i],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a");o.href=URL.createObjectURL(s),o.setAttribute("download",`client_data_${t.docType.toLowerCase()}_${t.docDetails.number}.csv`),document.body.appendChild(o),o.click(),document.body.removeChild(o)},QR=({docType:t,company:e,client:n,shippingDetails:r,docDetails:i,bankDetails:s,items:o,totals:a,termsAndConditions:l,fixedUpiId:h,isSimpleMode:p,onExportClientData:g})=>{const v=async()=>{try{await GR({docType:t,company:e,client:n,shippingDetails:r,docDetails:i,bankDetails:s,items:o,totals:a,termsAndConditions:l,fixedUpiId:h,isSimpleMode:p})}catch(E){console.error("PDF generation failed:",E),alert("Failed to generate PDF. Please try again.")}},f=()=>{KR({client:n,docType:t,docDetails:i,totals:a}),g()};return m.jsxs("div",{className:"flex justify-center flex-wrap gap-4 pt-8",children:[m.jsxs("button",{onClick:v,className:"px-8 py-4 bg-purple-600 text-white text-lg font-semibold rounded-lg hover:bg-purple-700 shadow-lg flex items-center transition-all duration-300 transform hover:scale-105",children:[m.jsx(_c,{className:"w-5 h-5 mr-2"}),"Download ",t," PDF"]}),m.jsxs("button",{onClick:f,className:"px-8 py-4 bg-gray-600 text-white text-lg font-semibold rounded-lg hover:bg-gray-700 shadow-lg flex items-center transition-all duration-300 transform hover:scale-105",children:[m.jsx(G2,{className:"w-5 h-5 mr-2"}),"Export Data (CSV)"]})]})},YR=({message:t})=>m.jsx("div",{className:"max-w-7xl mx-auto px-4 py-2",children:m.jsxs("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg relative flex items-center",children:[m.jsx(gm,{className:"w-5 h-5 mr-2"}),m.jsx("span",{children:t})]})}),JR=({onSync:t,isLoading:e})=>m.jsx("div",{className:"max-w-7xl mx-auto px-4 py-2",children:m.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(iS,{className:"w-5 h-5 text-orange-600 mr-2"}),m.jsxs("div",{children:[m.jsx("span",{className:"text-orange-800 font-medium",children:"Firebase Storage"}),m.jsx("p",{className:"text-orange-600 text-sm",children:"Documents are stored securely in Firebase Firestore with real-time sync and backup capabilities."})]})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[t&&m.jsxs("button",{onClick:t,disabled:e,className:"flex items-center px-3 py-1 bg-orange-600 text-white rounded-md hover:bg-orange-700 transition-colors disabled:opacity-50 text-sm",children:[m.jsx(Ca,{className:`w-4 h-4 mr-1 ${e?"animate-spin":""}`}),"Sync"]}),m.jsx(ho,{className:"w-5 h-5 text-orange-600"})]})]})});function XR(){const{user:t,firebaseUser:e,loginWithEmail:n,registerWithEmail:r,resetPassword:i,logout:s,isLoading:o}=qk(),{documents:a,saveDocument:l,deleteDocument:h,clearAllDocuments:p,importDocuments:g,isLoading:v,error:f}=Wk(e),E=$k(e),k=Gk(e),[P,w]=Ue.useState("documents"),[_,T]=Ue.useState("Quotation"),[L,V]=Ue.useState(""),[W,I]=Ue.useState(!1),[x,C]=Ue.useState("auto"),[j,N]=Ue.useState({name:"SUN CREATIONS",address:"57/1, COLLEGE JUNCTION ROAD, ALAGAPPAPURAM, KARAIKUDI, Tamil Nadu (TN-33) 630003, IN",phone:"9578078500",email:"hi@printhink.in",gstin:"33AIVPL0694A2Z8",website:"printhink.in"}),[A,D]=Ue.useState({name:"",address:"",phone:"",gstin:"",email:""}),[J,ue]=Ue.useState({name:"",address:""}),[Z,ee]=Ue.useState(!0),[Q,X]=Ue.useState({number:"",issueDate:new Date().toISOString().split("T")[0],validUntil:new Date(Date.now()+15*24*60*60*1e3).toISOString().split("T")[0],placeOfSupply:"TN (33)",deliveryDate:new Date(Date.now()+25*24*60*60*1e3).toISOString().split("T")[0]}),[se,ge]=Ue.useState({bankName:"HDFC",accountNumber:"50200032038305",branchName:"KARAIKUDI",ifscCode:"HDFC0001855"}),[O,M]=Ue.useState([]),[z,Y]=Ue.useState(`100 % Payment Advance
Price inclusive of GST
Delivery Time one Week from the date of payment`),te="9578078500@pz",oe=Ue.useMemo(()=>{let $e=0,De=0;const Ce=j.gstin?j.gstin.substring(0,2):"",Oe=A.gstin?A.gstin.substring(0,2):"",qe=Ce&&Oe&&Ce!==Oe;let Be;switch(x){case"igst":Be=!0;break;case"cgst_sgst":Be=!1;break;default:Be=qe;break}return O.forEach(rt=>{if(W){const ut=rt.taxableValue||0,nt=ut*rt.gstRate/100;$e+=ut,De+=nt}else{const ut=rt.unitPrice/(1+rt.gstRate/100),nt=rt.unitPrice-ut;$e+=rt.quantity*ut,De+=rt.quantity*nt}}),{subTotalTaxableValue:$e,totalGSTAmountOverall:De,cgst:Be?0:De/2,sgst:Be?0:De/2,igst:Be?De:0,grandTotal:$e+De,isInterState:Be}},[O,j.gstin,A.gstin,W,x]);Ue.useEffect(()=>{Z&&ue({name:A.name,address:A.address})},[A,Z]);const ae=$e=>{V($e),setTimeout(()=>V(""),3e3)},ye=async()=>{if(console.log("Save document clicked"),!e){ae("Please log in to save documents");return}if(!Q.number.trim()){ae("Please enter a document number");return}console.log("Validation passed, preparing document data...");const $e={docType:_,company:j,client:A,shippingDetails:J,shippingSameAsBilling:Z,docDetails:Q,bankDetails:se,items:O,totals:oe,termsAndConditions:z,fixedUpiId:te,timestamp:new Date().toISOString(),isSimpleMode:W,gstMode:x};console.log("Document data prepared:",$e);try{console.log("Calling saveDocument...");const De=await l($e);console.log("Document saved with ID:",De),ae("Document saved successfully!")}catch(De){console.error("Error saving document:",De),ae(`Failed to save document: ${De.message||"Unknown error"}`)}},Ae=async $e=>{try{const De=a.find(Ce=>Ce.id===$e);De?(T(De.docType),N(De.company),D(De.client),ue(De.shippingDetails||{name:"",address:""}),ee(De.shippingSameAsBilling!==void 0?De.shippingSameAsBilling:!0),X(De.docDetails),ge(De.bankDetails),M(De.items),Y(De.termsAndConditions),I(De.isSimpleMode||!1),C(De.gstMode||"auto"),ae("Document loaded successfully!")):ae("Document not found")}catch(De){console.error("Error loading document:",De),ae("Failed to load document")}},Te=async $e=>{try{await h($e),ae("Document deleted successfully!")}catch(De){console.error("Error deleting document:",De),ae("Failed to delete document")}},Me=async()=>{try{if(a.length===0){ae("No documents to export");return}const $e=a.map(({id:qe,...Be})=>Be),De=JSON.stringify($e,null,2),Ce=new Blob([De],{type:"application/json;charset=utf-8;"}),Oe=document.createElement("a");Oe.href=URL.createObjectURL(Ce),Oe.setAttribute("download",`documents_${new Date().toISOString().slice(0,10)}.json`),document.body.appendChild(Oe),Oe.click(),document.body.removeChild(Oe),ae("Documents exported successfully!")}catch($e){console.error("Error exporting documents:",$e),ae("Failed to export documents")}},Ve=async $e=>{try{const De=await $e.text(),Ce=JSON.parse(De);if(!Array.isArray(Ce))throw new Error("Invalid file format");await g(Ce),ae("Documents imported successfully!")}catch(De){console.error("Error importing documents:",De),ae("Failed to import documents")}},Ze=async()=>{try{ae("Data synced successfully!")}catch($e){console.error("Error syncing data:",$e),ae("Failed to sync data")}},be=$e=>{ae($e)},ie=$e=>{ae($e)};return o?m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"w-12 h-12 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin mx-auto mb-4"}),m.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):t.isAuthenticated?m.jsxs("div",{className:"min-h-screen bg-gray-100 font-sans antialiased",children:[m.jsx(NL,{onLogout:s,user:t,firebaseUser:e}),L&&m.jsx(YR,{message:L}),m.jsx(JR,{onSync:Ze,isLoading:v}),m.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:m.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:m.jsxs("div",{className:"flex",children:[m.jsx("button",{onClick:()=>w("documents"),className:`flex-1 px-6 py-4 text-center font-medium transition-colors ${P==="documents"?"bg-blue-500 text-white border-b-2 border-blue-500":"text-gray-600 hover:text-blue-500 hover:bg-gray-50"}`,children:"Documents"}),m.jsx("button",{onClick:()=>w("clients"),className:`flex-1 px-6 py-4 text-center font-medium transition-colors ${P==="clients"?"bg-blue-500 text-white border-b-2 border-blue-500":"text-gray-600 hover:text-blue-500 hover:bg-gray-50"}`,children:"Clients"}),m.jsx("button",{onClick:()=>w("products"),className:`flex-1 px-6 py-4 text-center font-medium transition-colors ${P==="products"?"bg-blue-500 text-white border-b-2 border-blue-500":"text-gray-600 hover:text-blue-500 hover:bg-gray-50"}`,children:"Products"}),m.jsx("button",{onClick:()=>w("reports"),className:`flex-1 px-6 py-4 text-center font-medium transition-colors ${P==="reports"?"bg-blue-500 text-white border-b-2 border-blue-500":"text-gray-600 hover:text-blue-500 hover:bg-gray-50"}`,children:"Reports"})]})})}),m.jsx("div",{className:"max-w-7xl mx-auto p-4",children:P==="documents"?m.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8",children:[m.jsx(AL,{docType:_,onDocTypeChange:T}),m.jsx("h1",{className:"text-4xl font-extrabold text-center text-gray-800 mb-8 uppercase tracking-wide",children:_}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[m.jsx(EL,{company:j,onChange:N,docType:_}),m.jsx(IL,{client:A,onChange:D,docType:_,clientDataHook:E})]}),_==="Purchase Order"&&m.jsx(TL,{shippingDetails:J,shippingSameAsBilling:Z,onShippingDetailsChange:ue,onShippingSameAsBillingChange:ee,clientName:A.name,clientAddress:A.address}),m.jsx(CL,{docType:_,docDetails:Q,onChange:X}),m.jsx(kL,{items:O,onChange:M,totals:oe,isSimpleMode:W,onSimpleModeChange:I,gstMode:x,onGstModeChange:C,productDataHook:k}),_!=="Purchase Order"&&m.jsxs(m.Fragment,{children:[m.jsx(LL,{bankDetails:se,onChange:ge}),m.jsx(RL,{upiId:te})]}),m.jsx(DL,{totals:oe}),m.jsx(jL,{termsAndConditions:z,onChange:Y}),m.jsx(FL,{docType:_,clientName:A.name,clientEmail:A.email,docNumber:Q.number,grandTotal:oe.grandTotal}),m.jsx(VL,{onBackupComplete:be,onRestoreComplete:ie}),m.jsx(OL,{documents:a,isLoading:v,error:f,onSave:ye,onLoad:Ae,onDelete:Te,onExport:Me,onImport:Ve}),m.jsx(QR,{docType:_,company:j,client:A,shippingDetails:J,docDetails:Q,bankDetails:se,items:O,totals:oe,termsAndConditions:z,fixedUpiId:te,isSimpleMode:W,onExportClientData:()=>ae("Client data exported!")})]}):P==="clients"?m.jsx(zL,{onMessage:ae,clientDataHook:E}):P==="products"?m.jsx(qL,{onMessage:ae,productDataHook:k}):m.jsx($R,{documents:a,isLoading:v,onMessage:ae})})]}):m.jsx(SL,{onEmailLogin:n,onEmailRegister:r,onPasswordReset:i})}Ob(document.getElementById("root")).render(m.jsx(Ue.StrictMode,{children:m.jsx(XR,{})}));export{qt as _,Bm as c,m3 as g};
